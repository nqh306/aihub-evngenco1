Angular Project Code Extract
================================================================================
Root Folder: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master
Scan Date: Sun Oct  5 16:26:05 +07 2025
Total files: 99
Total lines: 26395
================================================================================


================================================================================
File: .postcssrc.json
Relative Path: .postcssrc.json
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/.postcssrc.json
Extension: .json
Lines: 5
================================================================================

{
    "plugins": {
      "@tailwindcss/postcss": {}
    }
}

================================================================================
File: vercel.json
Relative Path: vercel.json
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/vercel.json
Extension: .json
Lines: 9
================================================================================

{
    "rewrites": [
        {
            "source": "/:path*",
            "destination": "/index.html"
        }
    ],
    "trailingSlash": false
}

================================================================================
File: tsconfig.app.json
Relative Path: tsconfig.app.json
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/tsconfig.app.json
Extension: .json
Lines: 16
================================================================================

/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
    "extends": "./tsconfig.json",
    "compilerOptions": {
        "outDir": "./out-tsc/app",
        "types": []
    },
    "files": [
        "src/main.ts"
    ],
    "include": [
        "src/**/*.d.ts"
    ]
}


================================================================================
File: angular.json
Relative Path: angular.json
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/angular.json
Extension: .json
Lines: 103
================================================================================

{
    "$schema": "./node_modules/@angular/cli/lib/config/schema.json",
    "version": 1,
    "newProjectRoot": "projects",
    "projects": {
        "sakai-ng": {
            "projectType": "application",
            "schematics": {
                "@schematics/angular:component": {
                    "style": "scss"
                }
            },
            "root": "",
            "sourceRoot": "src",
            "prefix": "app",
            "architect": {
                "build": {
                    "builder": "@angular-devkit/build-angular:application",
                    "options": {
                        "outputPath": "dist/sakai-ng",
                        "index": "src/index.html",
                        "browser": "src/main.ts",
                        "polyfills": [
                            "zone.js"
                        ],
                        "tsConfig": "tsconfig.app.json",
                        "inlineStyleLanguage": "scss",
                        "assets": [
                            {
                                "glob": "**/*",
                                "input": "public"
                            },
                            {
                                "glob": "**/*",
                                "input": "src/assets",
                                "output": "/assets"
                            }
                        ],
                        "styles": [
                            "src/assets/styles.scss"
                        ],
                        "scripts": []
                    },
                    "configurations": {
                        "production": {
                            "outputHashing": "all"
                        },
                        "development": {
                            "optimization": false,
                            "extractLicenses": false,
                            "sourceMap": true
                        }
                    },
                    "defaultConfiguration": "production"
                },
                "serve": {
                    "builder": "@angular-devkit/build-angular:dev-server",
                    "configurations": {
                        "production": {
                            "buildTarget": "sakai-ng:build:production"
                        },
                        "development": {
                            "buildTarget": "sakai-ng:build:development"
                        }
                    },
                    "defaultConfiguration": "development"
                },
                "extract-i18n": {
                    "builder": "@angular-devkit/build-angular:extract-i18n"
                },
                "test": {
                    "builder": "@angular-devkit/build-angular:karma",
                    "options": {
                        "polyfills": [
                            "zone.js",
                            "zone.js/testing"
                        ],
                        "tsConfig": "tsconfig.spec.json",
                        "inlineStyleLanguage": "scss",
                        "assets": [
                            {
                                "glob": "**/*",
                                "input": "public"
                            },
                            {
                                "glob": "**/*",
                                "input": "src/assets",
                                "output": "/assets"
                            }
                        ],
                        "styles": [
                            "src/assets/styles.scss"
                        ],
                        "scripts": []
                    }
                }
            }
        }
    },
    "cli": {
      "analytics": false
    }
}

================================================================================
File: .prettierrc.json
Relative Path: .prettierrc.json
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/.prettierrc.json
Extension: .json
Lines: 30
================================================================================

{
    "useTabs": false,
    "tabWidth": 4,
    "trailingComma": "none",
    "semi": true,
    "singleQuote": true,
    "printWidth": 250,
    "bracketSameLine": false,
    "overrides": [
        {
            "files": ["*.ts", "*.mts", "*.d.ts"],
            "options": {
                "parser": "typescript"
            }
        },
        {
            "files": ["*.html"],
            "options": {
                "parser": "html"
            }
        },
        {
            "files": ["*.component.html"],
            "options": {
                "parser": "angular"
            }
        }
    ]
}


================================================================================
File: package.json
Relative Path: package.json
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/package.json
Extension: .json
Lines: 58
================================================================================

{
    "name": "sakai-ng",
    "version": "20.0.0",
    "scripts": {
        "ng": "ng",
        "start": "ng serve",
        "build": "ng build",
        "watch": "ng build --watch --configuration development",
        "format": "prettier --write \"**/*.{js,mjs,ts,mts,d.ts,html}\" --cache",
        "test": "ng test"
    },
    "private": true,
    "dependencies": {
        "@angular/animations": "^20",
        "@angular/common": "^20",
        "@angular/compiler": "^20",
        "@angular/core": "^20",
        "@angular/forms": "^20",
        "@angular/platform-browser": "^20",
        "@angular/platform-browser-dynamic": "^20",
        "@angular/router": "^20",
        "@primeuix/themes": "^1.2.5",
        "@tailwindcss/postcss": "^4.1.14",
        "chart.js": "4.5.0",
        "marked": "^16.3.0",
        "ngx-markdown": "^20.1.0",
        "primeicons": "^7.0.0",
        "primeng": "^20",
        "prismjs": "^1.30.0",
        "rxjs": "~7.8.2",
        "tailwindcss-primeui": "^0.6.1",
        "tslib": "^2.8.1",
        "zone.js": "~0.15.1"
    },
    "devDependencies": {
        "@angular-devkit/build-angular": "^20",
        "@angular/cli": "^20",
        "@angular/compiler-cli": "^20",
        "@types/jasmine": "~5.1.9",
        "autoprefixer": "^10.4.21",
        "eslint": "^9.37.0",
        "eslint-config-prettier": "^10.1.8",
        "eslint-plugin-import": "^2.32.0",
        "eslint-plugin-prefer-arrow": "^1.2.3",
        "eslint-plugin-prettier": "^5.5.4",
        "jasmine-core": "~5.11.0",
        "karma": "~6.4.4",
        "karma-chrome-launcher": "~3.2.0",
        "karma-coverage": "~2.2.1",
        "karma-jasmine": "~5.1.0",
        "karma-jasmine-html-reporter": "~2.1.0",
        "postcss": "^8.5.6",
        "prettier": "^3.6.2",
        "tailwindcss": "^4.1.14",
        "typescript": "~5.9.3"
    }
}


================================================================================
File: tsconfig.json
Relative Path: tsconfig.json
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/tsconfig.json
Extension: .json
Lines: 34
================================================================================

/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
    "compileOnSave": false,
    "compilerOptions": {
        "outDir": "./dist/out-tsc",
        "strict": true,
        "noImplicitOverride": true,
        "noPropertyAccessFromIndexSignature": true,
        "noImplicitReturns": true,
        "noFallthroughCasesInSwitch": true,
        "skipLibCheck": true,
        "isolatedModules": true,
        "esModuleInterop": true,
        "experimentalDecorators": true,
        "moduleResolution": "bundler",
        "importHelpers": true,
        "target": "ES2022",
        "module": "ES2022",
        "baseUrl": "./",
        "paths": {
            "@/*": [
                "src/app/*"
            ]
        }
    },
    "angularCompilerOptions": {
        "enableI18nLegacyMessageIdFormat": false,
        "strictInjectionParameters": true,
        "strictInputAccessModifiers": true,
        "strictTemplates": true
    }
}


================================================================================
File: eslint.config.js
Relative Path: eslint.config.js
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/eslint.config.js
Extension: .js
Lines: 90
================================================================================

export default {
    root: true,
    ignorePatterns: ['**/dist/**'],
    plugins: ['prettier'],
    extends: ['prettier'],
    rules: {
        'padding-line-between-statements': [
            'error',
            { blankLine: 'always', prev: ['const', 'let', 'var'], next: '*' },
            { blankLine: 'any', prev: ['const', 'let', 'var'], next: ['const', 'let', 'var'] },
            { blankLine: 'any', prev: ['case', 'default'], next: 'break' },
            { blankLine: 'any', prev: 'case', next: 'case' },
            { blankLine: 'always', prev: '*', next: 'return' },
            { blankLine: 'always', prev: 'block', next: '*' },
            { blankLine: 'always', prev: '*', next: 'block' },
            { blankLine: 'always', prev: 'block-like', next: '*' },
            { blankLine: 'always', prev: '*', next: 'block-like' },
            { blankLine: 'always', prev: ['import'], next: ['const', 'let', 'var'] }
        ]
    },
    overrides: [
        {
            files: ['*.ts'],
            parserOptions: {
                project: ['tsconfig.json', 'e2e/tsconfig.json'],
                createDefaultProgram: true
            },
            extends: ['eslint:recommended', 'plugin:@typescript-eslint/recommended', 'plugin:@angular-eslint/recommended', 'plugin:@angular-eslint/template/process-inline-templates', 'prettier'],
            rules: {
                '@angular-eslint/component-selector': [
                    'error',
                    {
                        type: 'element',
                        prefix: 'p',
                        style: 'kebab-case'
                    }
                ],
                '@angular-eslint/directive-selector': [
                    'error',
                    {
                        type: 'attribute',
                        prefix: 'p',
                        style: 'camelCase'
                    }
                ],
                '@angular-eslint/component-class-suffix': [
                    'error',
                    {
                        suffixes: ['']
                    }
                ],
                '@angular-eslint/template/eqeqeq': [
                    'error',
                    {
                        allowNullOrUndefined: true
                    }
                ],
                '@angular-eslint/no-host-metadata-property': 'off',
                '@angular-eslint/no-output-on-prefix': 'off',
                '@typescript-eslint/ban-types': 'off',
                '@typescript-eslint/no-explicit-any': 'off',
                '@typescript-eslint/no-inferrable-types': 'off',
                'arrow-body-style': ['error', 'as-needed'],
                curly: 0,
                '@typescript-eslint/member-ordering': [
                    'error',
                    {
                        default: ['public-static-field', 'static-field', 'instance-field', 'public-instance-method', 'public-static-field']
                    }
                ],
                'no-console': 0,
                'prefer-const': 0
            }
        },
        {
            files: ['*.html'],
            extends: ['plugin:@angular-eslint/template/recommended', 'prettier'],
            rules: {}
        },
        {
            files: ['*.js'],
            rules: {
                parserOptions: {
                    allowImportExportEverywhere: true
                }
            }
        }
    ]
};


================================================================================
File: tsconfig.spec.json
Relative Path: tsconfig.spec.json
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/tsconfig.spec.json
Extension: .json
Lines: 16
================================================================================

/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
    "extends": "./tsconfig.json",
    "compilerOptions": {
        "outDir": "./out-tsc/spec",
        "types": [
            "jasmine"
        ]
    },
    "include": [
        "src/**/*.spec.ts",
        "src/**/*.d.ts"
    ]
}


================================================================================
File: index.html
Relative Path: src/index.html
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/index.html
Extension: .html
Lines: 17
================================================================================

<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>AI HUB - EVNGENCO1</title>
        <base href="/" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="preconnect" href="https://evngenco1.vn" />
        <link rel="icon" type="image/x-icon" href="https://cdn.haitrieu.com/wp-content/uploads/2022/01/Icon-EVN.png" />
        <link href="https://fonts.cdnfonts.com/css/lato" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap&subset=vietnamese" rel="stylesheet" />
    </head>

    <body>
        <app-root></app-root>
    </body>
</html>

================================================================================
File: main.ts
Relative Path: src/main.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/main.ts
Extension: .ts
Lines: 6
================================================================================

import { bootstrapApplication } from '@angular/platform-browser';
import { appConfig } from './app.config';
import { AppComponent } from './app.component';

bootstrapApplication(AppComponent, appConfig).catch((err) => console.error(err));


================================================================================
File: app.routes.ts
Relative Path: src/app.routes.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app.routes.ts
Extension: .ts
Lines: 25
================================================================================

import { Routes } from '@angular/router';
import { AppLayout } from './app/layout/component/app.layout';
import { Documentation } from './app/pages/documentation/documentation';
import { Landing } from './app/pages/landing/landing';
import { Notfound } from './app/pages/notfound/notfound';
import { authGuard } from './app/core/guards/auth.guard'; // SỬA LỖI: Sử dụng đường dẫn tuyệt đối từ 'src'

export const appRoutes: Routes = [
    {
        path: '',
        component: AppLayout,
        canActivate: [authGuard], 
        children: [
            { path: '', redirectTo: 'uikit/aihub-landing', pathMatch: 'full' }, 
            { path: 'uikit', loadChildren: () => import('./app/pages/uikit/uikit.routes') },
            { path: 'documentation', component: Documentation },
            { path: 'pages', loadChildren: () => import('./app/pages/pages.routes') }
        ]
    },
    { path: 'notfound', component: Notfound },
    { path: 'auth', loadChildren: () => import('./app/pages/auth/auth.routes') },
    { path: '**', redirectTo: '/notfound' }
];



================================================================================
File: app.component.ts
Relative Path: src/app.component.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app.component.ts
Extension: .ts
Lines: 11
================================================================================

import { Component } from '@angular/core';
import { RouterModule } from '@angular/router';

@Component({
    selector: 'app-root',
    standalone: true,
    imports: [RouterModule],
    template: `<router-outlet></router-outlet>`
})
export class AppComponent {}


================================================================================
File: app.config.ts
Relative Path: src/app.config.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app.config.ts
Extension: .ts
Lines: 17
================================================================================

import { provideHttpClient, withFetch } from '@angular/common/http';
import { ApplicationConfig } from '@angular/core';
import { provideAnimationsAsync } from '@angular/platform-browser/animations/async';
import { provideRouter, withEnabledBlockingInitialNavigation, withInMemoryScrolling } from '@angular/router';
import Aura from '@primeuix/themes/aura';
import { providePrimeNG } from 'primeng/config';
import { appRoutes } from './app.routes';

export const appConfig: ApplicationConfig = {
    providers: [
        provideRouter(appRoutes, withInMemoryScrolling({ anchorScrolling: 'enabled', scrollPositionRestoration: 'enabled' }), withEnabledBlockingInitialNavigation()),
        provideHttpClient(withFetch()),
        provideAnimationsAsync(),
        providePrimeNG({ theme: { preset: Aura, options: { darkModeSelector: '.app-dark' } } })
    ]
};


================================================================================
File: ai-model-selector.component.scss
Relative Path: src/app/core/shared/components/ai-model-selector.component.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/shared/components/ai-model-selector.component.scss
Extension: .scss
Lines: 109
================================================================================

/* === Model picker (popover) === */
.model-panel{ 
  background: var(--p-surface-0);
  padding: var(--space-2);
}
.search-bar{
  position: sticky;
  top:0; 
  z-index:1;
  display:flex; 
  align-items:center;
  gap:8px;
  padding: 10px 12px;
  border-bottom: 1px solid var(--p-surface-200);
  background:var(--p-surface-0);
}
.search-bar i{ 
  color: var(--p-surface-500);
}
.search-bar input{ 
  width:100%;
  border:none;
  outline:none;
  font-size: .95rem;
}
.list{
  /* SỬA LỖI: Giảm chiều cao tối đa để đảm bảo popover có thể lật lên trên */
  max-height: 30vh;
  overflow:auto;
  padding: 6px 0;
}
.group{ 
  padding: 6px 8px;
}
.group-title{
  font-weight:700;
  color:#111827;
  margin: 6px 10px 8px; 
}
.group-item{
  display:flex;
  align-items:center; 
  justify-content:space-between;
  padding: 10px 12px;
  border-radius: 10px;
  cursor: pointer;
}
.group-item:hover{
  background:#f3f4f6;
}
.left{
  display:flex;
  align-items:center;
  gap:10px;
}
.name{
  color:#0f172a;
}
.right{
  display:flex;
  align-items:center;
  gap:6px;
}

.cost-icon {
  color: var(--p-yellow-500);
  font-size: 1rem;
}

.bolt{
  font-size: 14px;
  color:#6366f1;
}

.model-tag {
  font-size: 0.75rem;
  font-weight: 600;
  padding: 4px 10px;
  border-radius: 9999px;
}

.tag-chuyen-sau { 
  background-color: #fee2e2;
  color: #b91c1c;
}
.tag-toan-dien {
  background-color: #dbeafe; 
  color: #1d4ed8; 
}
.tag-sang-tao {
  background-color: #dcfce7;
  color: #15803d;
}
.tag-nhanh-gon {
  background-color: #f0fdf4;
  color: #16a34a;
}

@media (max-width: 1024px){
  .page{
    grid-template-columns: 1fr;
  }
  .left{ 
    border-right: none;
    border-bottom: 1px solid var(--p-surface-200); 
  }
}



================================================================================
File: ai-model-selector.component.ts
Relative Path: src/app/core/shared/components/ai-model-selector.component.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/shared/components/ai-model-selector.component.ts
Extension: .ts
Lines: 93
================================================================================

import { Component, EventEmitter, Input, OnInit, Output, OnDestroy, inject } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { Popover, PopoverModule } from 'primeng/popover';
import { TooltipModule } from 'primeng/tooltip';
import { Subscription } from 'rxjs';

import { AICategory, AIModel } from '../../models/ai-models.model';
import { AiModelService } from '../../services/ai-model.service'; 
import { AuthService } from '../../services/auth.service'; // Thêm import này

@Component({
  selector: 'app-ai-model-selector',
  standalone: true,
  imports: [CommonModule, FormsModule, ButtonModule, InputTextModule, PopoverModule, TooltipModule], 
  template: `
    <div class="model-panel">
        <div class="search-bar">
            <i class="pi pi-search"></i>
            <input type="text" pInputText [(ngModel)]="modelQuery" (input)="filterModels()"
                   placeholder="Tìm kiếm mô hình..."/>
        </div>
        <div class="list" role="listbox">
            <ng-container *ngFor="let g of visibleGroups">
                <div class="group" *ngIf="g.models.length">
                    <div class="group-title">{{ g.category }}</div>
                    <div class="group-item" *ngFor="let m of g.models" (click)="selectModel(m)" [pTooltip]="m.profile.description" tooltipPosition="top">
                        <div class="left">
                            <img [src]="m.icon" [alt]="m.name" class="w-5 h-5"/>
                            <span class="name">{{ m.name }}</span>
                        </div>
                        <div class="right">
                            <i *ngIf="m.costType === 'paid'" class="pi pi-dollar cost-icon" pTooltip="Mô hình trả phí" tooltipPosition="top"></i>
                        </div>
                    </div>
                </div>
            </ng-container>
            <div *ngIf="!hasAnyVisibleModel" class="py-8 text-center text-surface-500 dark:text-surface-400">Không tìm thấy mô hình phù hợp</div>
        </div>
    </div>
  `,
  styleUrls: ['./ai-model-selector.component.scss'],
})
export class AiModelSelectorComponent implements OnInit, OnDestroy {
    @Output() modelSelected = new EventEmitter<AIModel>();
    @Input() popoverRef?: Popover;
  
    private aiModelService = inject(AiModelService);
    private authService = inject(AuthService); // Thêm inject
    private modelsSubscription?: Subscription;
  
    modelQuery: string = '';
    aiModels: AICategory[] = []; 
    visibleGroups: AICategory[] = [];
  
    ngOnInit() {
      const currentUser = this.authService.currentUser();
      const allowedModelNames = currentUser?.quotaProfile?.models ?? null;

      this.modelsSubscription = this.aiModelService.getModels(allowedModelNames).subscribe((data: AICategory[]) => {
        this.aiModels = data;
        this.filterModels();
      });
    }
  
    ngOnDestroy() {
      this.modelsSubscription?.unsubscribe();
    }
  
    filterModels() {
      const q = (this.modelQuery || '').toLowerCase().trim();
      if (!q) {
        this.visibleGroups = JSON.parse(JSON.stringify(this.aiModels));
        return;
      }
      this.visibleGroups = this.aiModels
        .map(g => ({ ...g, models: g.models.filter((m: AIModel) => m.name.toLowerCase().includes(q) || g.category.toLowerCase().includes(q)) }))
        .filter(g => g.models.length > 0);
    }
  
    selectModel(model: AIModel) {
      this.modelSelected.emit(model);
      this.popoverRef?.hide();
    }
  
    get hasAnyVisibleModel(): boolean { 
      return this.visibleGroups.some(g => g.models.length > 0); 
    }
}



================================================================================
File: ai-models.model.ts
Relative Path: src/app/core/models/ai-models.model.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/models/ai-models.model.ts
Extension: .ts
Lines: 50
================================================================================

// src/app/core/models/ai-models.model.ts

/**
 * Đặc tính của mô hình AI, giúp người dùng lựa chọn.
 */
export interface AIModelProfile {
    description: string; // Mô tả ngắn gọn
    sortOrder: number; // Dùng để sắp xếp nội bộ
}

export interface AIModel {
    id: string; // **SỬA LỖI**: Thêm thuộc tính ID để liên kết
    name: string;
    profile: AIModelProfile;
    icon: string;
    costType: 'free' | 'paid';
}

export interface AICategory {
    category: string;
    icon: string;
    models: AIModel[];
}

export interface RecentModel {
    name: string;
    vendor: string;
    profile: AIModelProfile;
    icon: string;
}

// ... Các interface khác giữ nguyên
export interface ChatMessage {
    sender: 'user' | 'ai';
    text: string;
    modelName?: string;
    modelIcon?: string;
    paneId?: 'pane1' | 'pane2';
    thinking?: string;
    __showThinking?: boolean;
}

export interface ChatSession {
    id: string;
    title: string;
    timestamp: Date;
    messages: ChatMessage[];
}



================================================================================
File: theme.service.ts
Relative Path: src/app/core/services/theme.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/services/theme.service.ts
Extension: .ts
Lines: 37
================================================================================

// src/app/core/services/theme.service.ts
import { Injectable, Inject } from '@angular/core';
import { DOCUMENT } from '@angular/common';
import { Subject, Observable } from 'rxjs';

@Injectable({
    providedIn: 'root'
})
export class ThemeService {
    // Subject để phát ra sự kiện khi theme thay đổi
    private themeChange$ = new Subject<string>();

    constructor(@Inject(DOCUMENT) private document: Document) {}

    /**
     * Hàm này dùng để chuyển đổi theme.
     * Đây là nơi logic thay đổi theme của bạn sẽ nằm.
     * @param themeName Tên của theme mới (ví dụ 'lara-light-blue', 'arya-purple'...)
     */
    switchTheme(themeName: string) {
        const themeLink = this.document.getElementById('app-theme') as HTMLLinkElement;
        if (themeLink) {
            // Logic thay đổi file CSS của theme
            themeLink.href = `${themeName}.css`; 
            
            // **Quan trọng:** Thông báo cho toàn bộ ứng dụng rằng theme đã thay đổi
            this.themeChange$.next(themeName);
        }
    }

    /**
     * Các component khác sẽ subscribe vào đây để nhận biết sự kiện thay đổi theme.
     */
    onThemeChange(): Observable<string> {
        return this.themeChange$.asObservable();
    }
}

================================================================================
File: chat.service.ts
Relative Path: src/app/core/services/chat.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/services/chat.service.ts
Extension: .ts
Lines: 60
================================================================================

import { Injectable } from '@angular/core';
import { Observable } from 'rxjs';
import { ChatMessage } from '../models/ai-models.model';

@Injectable({
  providedIn: 'root'
})
export class ChatService {

  constructor() { }

  /**
   * Gửi yêu cầu đến backend và nhận về một stream các phản hồi.
   * @param payload Dữ liệu gửi đi, bao gồm prompt, model, mode, và lịch sử chat.
   * @returns Một Observable trả về từng phần (chunk) của tin nhắn.
   */
  getStreamingResponse(payload: { prompt: string; model: any; mode: string; history: ChatMessage[] }): Observable<string> {
    return new Observable(observer => {
      // !!! QUAN TRỌNG: Thay thế URL này bằng API endpoint thật của bạn.
      const apiUrl = 'http://your-backend-api.com/chat-stream';

      // Xây dựng query string từ payload
      const params = new URLSearchParams({
        prompt: payload.prompt,
        model: payload.model.name,
        mode: payload.mode,
        // Chuyển đổi lịch sử thành chuỗi JSON để gửi đi
        history: JSON.stringify(payload.history) 
      });

      const eventSource = new EventSource(`${apiUrl}?${params.toString()}`);

      // Lắng nghe sự kiện 'message' từ server
      eventSource.onmessage = event => {
        // Giả sử server trả về JSON có dạng { "chunk": "nội dung..." }
        const data = JSON.parse(event.data);

        // Server có thể gửi một tín hiệu đặc biệt để báo kết thúc stream
        if (data.done) {
          observer.complete();
          eventSource.close();
        } else {
          observer.next(data.chunk);
        }
      };

      // Xử lý lỗi
      eventSource.onerror = error => {
        console.error('EventSource failed:', error);
        observer.error('Lỗi kết nối tới máy chủ AI.');
        eventSource.close();
      };

      // Khi observable bị hủy (unsubscribe), chúng ta đóng kết nối EventSource
      return () => {
        eventSource.close();
      };
    });
  }
}

================================================================================
File: quota-profile.service.ts
Relative Path: src/app/core/services/quota-profile.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/services/quota-profile.service.ts
Extension: .ts
Lines: 104
================================================================================

import { Injectable, inject } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { BehaviorSubject, Observable, of, throwError } from 'rxjs';
import { delay } from 'rxjs/operators';
import { environment } from '../../../environments/environment';

export type QuotaStatus = 'active' | 'inactive';

export interface QuotaProfile {
  id: string;
  name: string;
  models: string[];
  tokenPerDay: number;
  tokenPerMonth: number;
  description?: string;
  status: QuotaStatus;
}

const LS_KEY = 'aihub_quota_profiles_v1';

@Injectable({ providedIn: 'root' })
export class QuotaProfileService {
  private readonly apiBase = (environment.apiUrl || '') + '/quotaprofiles';
  private readonly useMock = environment.USE_MOCK ?? true;

  private store$ = new BehaviorSubject<QuotaProfile[]>([]);

  constructor(private http: HttpClient) {
    if (this.useMock) {
      localStorage.removeItem(LS_KEY);
      this.store$.next(this.loadSeed());
    }
  }
  
  // **SỬA LỖI 1**: Đảm bảo hàm này tồn tại và là public
  public getMockProfiles(): QuotaProfile[] {
    return this.store$.getValue();
  }

  list(): Observable<QuotaProfile[]> {
    if (!this.useMock) return this.http.get<QuotaProfile[]>(this.apiBase);
    return this.store$.asObservable().pipe(delay(150));
  }
  
  // ... (Các hàm add, update, setStatus, delete giữ nguyên) ...

  add(payload: Omit<QuotaProfile, 'id'>): Observable<QuotaProfile> {
    if (!this.useMock) return this.http.post<QuotaProfile>(this.apiBase, payload);
    const rule: QuotaProfile = { id: crypto.randomUUID(), ...payload };
    const next = [...this.store$.value, rule];
    this.persist(next);
    return of(rule).pipe(delay(300));
  }
  update(id: string, patch: Partial<QuotaProfile>): Observable<QuotaProfile> {
    if (!this.useMock) return this.http.put<QuotaProfile>(`${this.apiBase}/${id}`, patch);
    const list = this.store$.value.slice();
    const idx = list.findIndex(r => r.id === id);
    if (idx < 0) return throwError(() => new Error('Rule not found'));
    list[idx] = { ...list[idx], ...patch };
    this.persist(list);
    return of(list[idx]).pipe(delay(300));
  }
  setStatus(id: string, status: QuotaStatus) {
    if (!this.useMock) return this.http.patch<QuotaProfile>(`${this.apiBase}/${id}/status`, { status });
    return this.update(id, { status });
  }
  delete(id: string) {
    if (!this.useMock) return this.http.delete<void>(`${this.apiBase}/${id}`);
    this.persist(this.store$.value.filter(r => r.id !== id));
    return of(void 0).pipe(delay(250));
  }

  private persist(list: QuotaProfile[]) {
    localStorage.setItem(LS_KEY, JSON.stringify(list));
    this.store$.next(list);
  }

  private loadSeed(): QuotaProfile[] {
    const seed: QuotaProfile[] = [
      {
        id: 'default-all',
        name: 'Mặc định (Toàn quyền)',
        models: ['evngenco1-assistant-v1', 'evngenco1-law-v1', 'gpt-4o', 'gpt-4-turbo', 'gpt-3.5-turbo', 'gemini-1.5-pro-latest', 'gemini-1.5-flash-latest'],
        tokenPerDay: 0,
        tokenPerMonth: 0,
        status: 'active',
        description: 'Profile mặc định, có quyền truy cập tất cả các model đang hoạt động.'
      },
      {
        id: 'evn-only',
        name: 'Nội bộ EVN',
        models: ['evngenco1-assistant-v1', 'evngenco1-law-v1'],
        tokenPerDay: 200000,
        tokenPerMonth: 4000000,
        status: 'active',
        description: 'Chỉ sử dụng các model nội bộ do EVNGENCO1 phát triển.'
      }
    ];
    localStorage.setItem(LS_KEY, JSON.stringify(seed));
    return seed;
  }
}



================================================================================
File: auth.service.ts
Relative Path: src/app/core/services/auth.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/services/auth.service.ts
Extension: .ts
Lines: 88
================================================================================

import { Injectable, inject, signal } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable, of, tap, throwError, delay } from 'rxjs';
import { environment } from 'src/environments/environment';
import { User, UserService } from './user.service';
import { QuotaProfile, QuotaProfileService } from './quota-profile.service';

@Injectable({ providedIn: 'root' })
export class AuthService {
  private readonly http = inject(HttpClient);
  private readonly userService = inject(UserService);
  private readonly quotaProfileService = inject(QuotaProfileService);
  private readonly apiBase = environment.apiUrl + '/auth';
  private readonly useMock = environment.USE_MOCK ?? true;

  public currentUser = signal<User | null>(null);

  constructor() {
    this.loadUserFromStorage();
  }

  private loadUserFromStorage(): void {
    if (typeof window !== 'undefined') {
      const token = localStorage.getItem('authToken');
      const userJson = localStorage.getItem('currentUser');

      if (token && userJson) {
        try {
          const user: User = JSON.parse(userJson);
          this.currentUser.set(user);
        } catch (e) {
          console.error("Failed to parse user from localStorage", e);
          this.logout();
        }
      }
    }
  }

  login(credentials: {username: string, password: string}): Observable<{token: string, user: User}> {
    if (!this.useMock) {
      return this.http.post<{token: string, user: User}>(`${this.apiBase}/login`, credentials).pipe(
        tap(response => {
          localStorage.setItem('authToken', response.token);
          localStorage.setItem('currentUser', JSON.stringify(response.user));
          this.currentUser.set(response.user);
        })
      );
    }

    // --- MOCK LOGIC ---
    const mockUsers: User[] = this.userService.getMockUsers();
    const userToLogin = mockUsers.find(u => u.username === credentials.username);

    if (userToLogin) {
      const mockProfiles = this.quotaProfileService.getMockProfiles();
      // **SỬA LỖI 2**: Thêm kiểu dữ liệu cho 'p'
      const userProfile = mockProfiles.find((p: QuotaProfile) => p.id === userToLogin.quotaProfileId);
      if (userProfile) {
        // **SỬA LỖI 3**: Gán vào thuộc tính 'quotaProfile' đã được thêm vào interface User
        userToLogin.quotaProfile = userProfile;
      }

      const mockResponse = {
        token: 'mock-jwt-token-for-testing-purposes',
        user: userToLogin
      };

      return of(mockResponse).pipe(
        delay(500),
        tap(response => {
          localStorage.setItem('authToken', response.token);
          localStorage.setItem('currentUser', JSON.stringify(response.user));
          this.currentUser.set(response.user);
        })
      );
    } else {
      return throwError(() => new Error('Tài khoản hoặc mật khẩu không đúng (Mock Mode)')).pipe(delay(500));
    }
  }

  logout(): void {
    this.currentUser.set(null);
    localStorage.removeItem('authToken');
    localStorage.removeItem('currentUser');
  }
}



================================================================================
File: api-keys.service.ts
Relative Path: src/app/core/services/api-keys.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/services/api-keys.service.ts
Extension: .ts
Lines: 144
================================================================================

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { BehaviorSubject, Observable, of, throwError } from 'rxjs';
import { delay } from 'rxjs/operators';
import { environment } from '../../../environments/environment';

export type ApiStatus = 'active' | 'inactive';
export type Provider = 'OpenAI' | 'Google' | 'xAI' | 'EVNGENCO1' | 'Custom';
export type CostType = 'free' | 'paid';

export interface ApiConfig {
  id: string;
  provider: Provider;
  name: string;
  model: string;
  apiKey: string;
  baseUrl?: string;
  description?: string;
  status: ApiStatus;
  createdAt: string;
  lastUsedAt?: string;
  costType: CostType;
  costInput?: number;  // Chi phí cho 1 triệu input token (USD)
  costOutput?: number; // Chi phí cho 1 triệu output token (USD)
}

const LS_KEY = 'aihub_api_keys_single_model_v3'; // Changed key to ensure update

@Injectable({ providedIn: 'root' })
export class ApiKeysService {
  private readonly apiBase = (environment.apiUrl || '') + '/apikeys';
  private readonly useMock = environment.USE_MOCK ?? true;

  private store$ = new BehaviorSubject<ApiConfig[]>([]);

  constructor(private http: HttpClient) {
      if(this.useMock) {
        localStorage.removeItem(LS_KEY);
        this.store$.next(this.loadSeed());
      }
  }

  list(): Observable<ApiConfig[]> {
    if (!this.useMock) return this.http.get<ApiConfig[]>(this.apiBase);
    return this.store$.asObservable().pipe(delay(120));
  }

  add(payload: Omit<ApiConfig, 'id'|'createdAt'>): Observable<ApiConfig> {
    if (!this.useMock) return this.http.post<ApiConfig>(this.apiBase, payload);
    const rec: ApiConfig = { id: crypto.randomUUID(), createdAt: new Date().toISOString(), ...payload };
    const next = [...this.store$.value, rec];
    this.persist(next);
    return of(rec).pipe(delay(300));
  }

  update(id: string, patch: Partial<ApiConfig>): Observable<ApiConfig> {
    if (!this.useMock) return this.http.put<ApiConfig>(`${this.apiBase}/${id}`, patch);
    const list = this.store$.value.slice();
    const idx = list.findIndex(x => x.id === id);
    if (idx < 0) return throwError(() => new Error('Config not found'));
    list[idx] = { ...list[idx], ...patch };
    this.persist(list);
    return of(list[idx]).pipe(delay(300));
  }

  setStatus(id: string, status: ApiStatus) {
    if (!this.useMock) return this.http.patch<ApiConfig>(`${this.apiBase}/${id}/status`, { status });
    return this.update(id, { status });
  }

  delete(id: string) {
    if (!this.useMock) return this.http.delete<void>(`${this.apiBase}/${id}`);
    this.persist(this.store$.value.filter(x => x.id !== id));
    return of(void 0).pipe(delay(220));
  }

  touch(id: string) {
    const t = new Date().toISOString();
    return this.update(id, { lastUsedAt: t });
  }

  maskKey(key: string): string {
    if (!key) return '';
    if (key.length <= 8) return '*'.repeat(key.length);
    return `${key.slice(0,4)}••••••••${key.slice(-4)}`;
  }
  
  private persist(list: ApiConfig[]) { localStorage.setItem(LS_KEY, JSON.stringify(list)); this.store$.next(list); }
  
  private loadSeed(): ApiConfig[] {
    const saved = localStorage.getItem(LS_KEY);
    if (saved) return JSON.parse(saved);
    const seed: ApiConfig[] = [
      // EVNGENCO1 Models
      { 
        id: 'evn-as-1', provider:'EVNGENCO1', name:'Trợ lý EVNGENCO1', model:'evngenco1-assistant-v1', 
        apiKey:'evn-xxxxx', baseUrl:'', description:'Trợ lý AI đa năng cho các nghiệp vụ chung.', status:'active', createdAt:new Date().toISOString(),
        costType: 'free', costInput: 0, costOutput: 0
      },
      { 
        id: 'evn-law-1', provider:'EVNGENCO1', name:'Trợ lý Pháp luật 1.0', model:'evngenco1-law-v1', 
        apiKey:'evn-yyyyy', baseUrl:'', description:'Model chuyên sâu về tra cứu và tư vấn văn bản pháp luật.', status:'active', createdAt:new Date().toISOString(),
        costType: 'free', costInput: 0, costOutput: 0
      },
      // OpenAI Models
      { 
        id: crypto.randomUUID(), provider:'OpenAI', name:'OpenAI GPT-4o', model:'gpt-4o', 
        apiKey:'sk-openai-gpt4o', baseUrl:'https://api.openai.com/v1', description:'Mô hình flagship đa phương tiện, mạnh mẽ và nhanh chóng.', status:'active', createdAt:new Date().toISOString(),
        costType: 'paid', costInput: 5, costOutput: 15
      },
      { 
        id: crypto.randomUUID(), provider:'OpenAI', name:'OpenAI GPT-4 Turbo', model:'gpt-4-turbo', 
        apiKey:'sk-openai-gpt4t', baseUrl:'https://api.openai.com/v1', description:'Mô hình mạnh mẽ với context window lớn, tối ưu cho tác vụ phức tạp.', status:'active', createdAt:new Date().toISOString(),
        costType: 'paid', costInput: 10, costOutput: 30
      },
       { 
        id: crypto.randomUUID(), provider:'OpenAI', name:'OpenAI GPT-3.5 Turbo', model:'gpt-3.5-turbo', 
        apiKey:'sk-openai-gpt35', baseUrl:'https://api.openai.com/v1', description:'Mô hình nhanh, hiệu quả về chi phí cho các tác vụ thông thường.', status:'active', createdAt:new Date().toISOString(),
        costType: 'paid', costInput: 0.5, costOutput: 1.5
      },
      // Google Models
      { 
        id: crypto.randomUUID(), provider:'Google', name:'Gemini 1.5 Pro', model:'gemini-1.5-pro-latest', 
        apiKey:'g-gemini-15pro', baseUrl:'', description:'Model tiên tiến với context window cực lớn (1M tokens).', status:'active', createdAt:new Date().toISOString(),
        costType: 'paid', costInput: 3.5, costOutput: 10.5
      },
       { 
        id: crypto.randomUUID(), provider:'Google', name:'Gemini 1.5 Flash', model:'gemini-1.5-flash-latest', 
        apiKey:'g-gemini-15flash', baseUrl:'', description:'Phiên bản tốc độ cao và chi phí thấp của Gemini 1.5.', status:'active', createdAt:new Date().toISOString(),
        costType: 'paid', costInput: 0.35, costOutput: 1.05
      },
      // xAI Model
      { 
        id: crypto.randomUUID(), provider:'xAI', name:'Grok-1', model:'grok-1', 
        apiKey:'xai-grok1', baseUrl:'', description:'Mô hình lớn từ xAI với khả năng truy cập thông tin thời gian thực.', status:'inactive', createdAt:new Date().toISOString(),
        costType: 'paid', costInput: 3, costOutput: 6
      },
    ];
    localStorage.setItem(LS_KEY, JSON.stringify(seed));
    return seed;
  }
}



================================================================================
File: quota.service.ts
Relative Path: src/app/core/services/quota.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/services/quota.service.ts
Extension: .ts
Lines: 96
================================================================================

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { BehaviorSubject, Observable, of, throwError } from 'rxjs';
import { delay } from 'rxjs/operators';
import { environment } from '../../../environments/environment';

export type QuotaStatus = 'active' | 'inactive';

export interface QuotaRule {
  id: string;                 // uuid
  name: string;               // ✅ Tên định mức
  models: string[];           // ✅ Danh sách model được phép
  tokenPerDay: number;        // 0 = không giới hạn
  tokenPerMonth: number;      // 0 = không giới hạn
  description?: string;       // ✅ Mô tả
  status: QuotaStatus;
}

const LS_KEY = 'aihub_quota_mock_v2';

@Injectable({ providedIn: 'root' })
export class QuotaService {
  private readonly apiBase = (environment.apiUrl || '') + '/quota';
  private readonly useMock = environment.USE_MOCK ?? true;

  private store$ = new BehaviorSubject<QuotaRule[]>(this.loadSeed());

  constructor(private http: HttpClient) {}

  list(): Observable<QuotaRule[]> {
    if (!this.useMock) return this.http.get<QuotaRule[]>(this.apiBase);
    return this.store$.asObservable().pipe(delay(150));
  }

  add(payload: Omit<QuotaRule, 'id'>): Observable<QuotaRule> {
    if (!this.useMock) return this.http.post<QuotaRule>(this.apiBase, payload);
    const rule: QuotaRule = { id: crypto.randomUUID(), ...payload };
    const next = [...this.store$.value, rule];
    this.persist(next);
    return of(rule).pipe(delay(300));
  }

  update(id: string, patch: Partial<QuotaRule>): Observable<QuotaRule> {
    if (!this.useMock) return this.http.put<QuotaRule>(`${this.apiBase}/${id}`, patch);
    const list = this.store$.value.slice();
    const idx = list.findIndex(r => r.id === id);
    if (idx < 0) return throwError(() => new Error('Rule not found'));
    list[idx] = { ...list[idx], ...patch };
    this.persist(list);
    return of(list[idx]).pipe(delay(300));
  }

  setStatus(id: string, status: QuotaStatus) {
    if (!this.useMock) return this.http.patch<QuotaRule>(`${this.apiBase}/${id}/status`, { status });
    return this.update(id, { status });
  }

  delete(id: string) {
    if (!this.useMock) return this.http.delete<void>(`${this.apiBase}/${id}`);
    this.persist(this.store$.value.filter(r => r.id !== id));
    return of(void 0).pipe(delay(250));
  }

  // -------- mock helpers ----------
  private persist(list: QuotaRule[]) {
    localStorage.setItem(LS_KEY, JSON.stringify(list));
    this.store$.next(list);
  }
  private loadSeed(): QuotaRule[] {
    const saved = localStorage.getItem(LS_KEY);
    if (saved) return JSON.parse(saved);
    const seed: QuotaRule[] = [
      {
        id: crypto.randomUUID(),
        name: 'Mặc định toàn hệ thống',
        models: ['Trợ lý EVNGENCO1', 'GPT 4.1 Mini'],
        tokenPerDay: 0,
        tokenPerMonth: 0,
        status: 'active',
        description: '0 = Không giới hạn; áp dụng toàn hệ thống'
      },
      {
        id: crypto.randomUUID(),
        name: 'Đơn vị bencode.vn',
        models: ['Trợ lý EVNGENCO1'],
        tokenPerDay: 200000,
        tokenPerMonth: 4000000,
        status: 'active',
        description: 'Định mức riêng cho bencode.vn'
      }
    ];
    localStorage.setItem(LS_KEY, JSON.stringify(seed));
    return seed;
  }
}


================================================================================
File: user.service.ts
Relative Path: src/app/core/services/user.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/services/user.service.ts
Extension: .ts
Lines: 127
================================================================================

import { Injectable, inject } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { BehaviorSubject, Observable, of, throwError } from 'rxjs';
import { delay, map } from 'rxjs/operators';
import { environment } from 'src/environments/environment';
import { QuotaProfile } from './quota-profile.service'; // Import QuotaProfile

/** Kiểu dữ liệu người dùng */
export type UserStatus = 'active' | 'inactive';
export interface User {
  id: string;
  avatar?: string;
  username: string;
  fullName: string;
  donvi: string;
  phongban: string;
  vitri: string;
  role: string;
  email: string;
  phone: string;
  tokenLimit: string; // This property is now managed by QuotaProfile
  status: UserStatus;
  
  // **SỬA LỖI 3**: Thêm quotaProfileId và quotaProfile
  quotaProfileId?: string; 
  quotaProfile?: QuotaProfile; // Để chứa toàn bộ object profile
}

/** Key lưu mock vào localStorage */
const LS_KEY = 'aihub_users_mock';

@Injectable({ providedIn: 'root' })
export class UserService {
  private readonly http = inject(HttpClient);
  private readonly apiBase = (environment.apiUrl || '') + '/users';
  private readonly useMock = environment.USE_MOCK ?? true;

  private users$ = new BehaviorSubject<User[]>([]);

  constructor() {
    if (this.useMock) {
      localStorage.removeItem(LS_KEY);
      this.users$.next(this.loadSeed());
    }
  }
  
  list(): Observable<User[]> {
    if (!this.useMock) {
      return this.http.get<User[]>(this.apiBase);
    }
    return this.users$.asObservable().pipe(delay(150));
  }
  
  public getMockUsers(): User[] {
    return this.users$.getValue();
  }

  // ... (Các hàm add, update, delete, setStatus, uploadAvatar giữ nguyên) ...
  add(payload: Omit<User, 'id'>): Observable<User> {
    if (!this.useMock) return this.http.post<User>(this.apiBase, payload);
    const newUser: User = { id: crypto.randomUUID(), ...payload };
    const next = [...this.users$.value, newUser];
    this.persist(next);
    return of(newUser).pipe(delay(400));
  }
  update(id: string, patch: Partial<User>): Observable<User> {
    if (!this.useMock) return this.http.put<User>(`${this.apiBase}/${id}`, patch);
    const list = this.users$.value.slice();
    const idx = list.findIndex(u => u.id === id);
    if (idx < 0) return throwError(() => new Error('User not found'));
    list[idx] = { ...list[idx], ...patch };
    this.persist(list);
    return of(list[idx]).pipe(delay(400));
  }
  setStatus(id: string, status: UserStatus): Observable<User> {
    if (!this.useMock) return this.http.patch<User>(`${this.apiBase}/${id}/status`, { status });
    return this.update(id, { status });
  }
  delete(id: string): Observable<void> {
    if (!this.useMock) return this.http.delete<void>(`${this.apiBase}/${id}`);
    const next = this.users$.value.filter(u => u.id !== id);
    this.persist(next);
    return of(void 0).pipe(delay(300));
  }
  uploadAvatar(file: File): Observable<string> {
    if (!this.useMock) {
      const form = new FormData();
      form.append('file', file);
      return this.http.post<{ url: string }>(`${this.apiBase}/upload`, form).pipe(map(r => r.url));
    }
    return new Observable<string>(obs => {
      const reader = new FileReader();
      reader.onload = () => { obs.next(String(reader.result)); obs.complete(); };
      reader.onerror = err => obs.error(err);
      reader.readAsDataURL(file);
    }).pipe(delay(150));
  }

  private persist(list: User[]) {
    localStorage.setItem(LS_KEY, JSON.stringify(list));
    this.users$.next(list);
  }

  private loadSeed(): User[] {
    const seed: User[] = [
      {
        id: crypto.randomUUID(),
        avatar: '',
        username: 'huynq91',
        fullName: 'Nguyễn Quang Huy',
        donvi: 'EVNGENCO1',
        phongban: 'Ban Khoa học công nghệ và Đổi mới sáng tạo',
        vitri: 'Phó Trưởng Ban',
        role: 'Quản trị hệ thống',
        email: 'nqh306@gmail.com',
        phone: '0915330999',
        tokenLimit: 'Không giới hạn', // Giữ lại để tương thích, nhưng sẽ được quản lý bởi profile
        status: 'active',
        quotaProfileId: 'default-all' // Gán profile mặc định
      }
    ];
    localStorage.setItem(LS_KEY, JSON.stringify(seed));
    return seed;
  }
}



================================================================================
File: ai-chat.service.ts
Relative Path: src/app/core/services/ai-chat.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/services/ai-chat.service.ts
Extension: .ts
Lines: 113
================================================================================

import { Injectable } from '@angular/core';

export type ChatBackend =
  | { mode: 'sse'; url: string }           // ví dụ: /api/chat/stream (GET, SSE)
  | { mode: 'http'; url: string };         // ví dụ: /api/chat (POST, JSON)

export interface ChatOptions {
  webSearch: boolean;
  deepResearch: boolean;
  extendedReasoning: boolean;  // “suy luận sâu”/thinking budget bật/tắt
  files?: File[];
  model?: { name: string; provider?: 'openai'|'gemini'|'anthropic'|'evngenco1'|string };
  metadata?: Record<string, any>;
}

export type StreamEvent =
  | { type: 'status'; data: string }                 // “preprocessing…”, “retrieving…”
  | { type: 'thinking'; data: string }               // phần AI đang suy luận (nếu backend gửi)
  | { type: 'delta'; data: string }                  // token text delta
  | { type: 'done'; data?: any }
  | { type: 'error'; data: string };

@Injectable({ providedIn: 'root' })
export class AiChatService {
  // SSE streaming: lắng nghe các event {status|thinking|delta|done|error}
  stream({
    backend,
    prompt,
    options
  }: {
    backend: Extract<ChatBackend, { mode: 'sse' }>;
    prompt: string;
    options: ChatOptions;
  }): { close: () => void; on: (cb: (ev: StreamEvent) => void) => void } {
    const params = new URLSearchParams({
      prompt,
      webSearch: String(!!options.webSearch),
      deepResearch: String(!!options.deepResearch),
      extendedReasoning: String(!!options.extendedReasoning),
      modelName: options.model?.name ?? '',
      provider: options.model?.provider ?? '',
      metadata: options.metadata ? encodeURIComponent(JSON.stringify(options.metadata)) : ''
    });

    // Nếu cần upload file trong SSE, khuyến nghị: upload file trước -> lấy fileIds -> đưa vào params
    if ((options.files?.length ?? 0) > 0) {
      console.warn('[AiChatService] SSE không gửi file trực tiếp. Hãy upload trước để lấy fileIds.');
    }

    const es = new EventSource(`${backend.url}?${params.toString()}`);

    let handler: (ev: StreamEvent) => void = () => {};
    const relay = (type: StreamEvent['type']) => (e: MessageEvent) =>
      handler({ type, data: e.data });

    es.addEventListener('status',   relay('status'));
    es.addEventListener('thinking', relay('thinking'));  // hiển thị trace suy luận nếu backend cho phép
    es.addEventListener('delta',    relay('delta'));
    es.addEventListener('done',     relay('done'));
    es.addEventListener('error',    relay('error'));
    es.onerror = (e) => handler({ type: 'error', data: 'stream connection error' });

    return {
      close: () => es.close(),
      on: (cb) => { handler = cb; }
    };
  }

  // Request thường (không stream): POST JSON/multipart đều OK
  async complete({
    backend,
    prompt,
    options
  }: {
    backend: Extract<ChatBackend, { mode: 'http' }>;
    prompt: string;
    options: ChatOptions;
  }): Promise<{ text: string; thinking?: string; meta?: any }> {
    const hasFiles = (options.files?.length ?? 0) > 0;

    let body: BodyInit;
    let headers: HeadersInit | undefined;

    if (hasFiles) {
      const form = new FormData();
      form.append('prompt', prompt);
      form.append('webSearch', String(!!options.webSearch));
      form.append('deepResearch', String(!!options.deepResearch));
      form.append('extendedReasoning', String(!!options.extendedReasoning));
      form.append('modelName', options.model?.name ?? '');
      form.append('provider', options.model?.provider ?? '');
      form.append('metadata', JSON.stringify(options.metadata ?? {}));
      options.files!.forEach((f, idx) => form.append('files', f, f.name));
      body = form;
    } else {
      headers = { 'Content-Type': 'application/json' };
      body = JSON.stringify({
        prompt,
        webSearch: !!options.webSearch,
        deepResearch: !!options.deepResearch,
        extendedReasoning: !!options.extendedReasoning,
        modelName: options.model?.name,
        provider: options.model?.provider,
        metadata: options.metadata ?? {}
      });
    }

    const res = await fetch(backend.url, { method: 'POST', headers, body });
    if (!res.ok) throw new Error(`HTTP ${res.status}`);
    return res.json();
  }
}


================================================================================
File: feedback.service.ts
Relative Path: src/app/core/services/feedback.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/services/feedback.service.ts
Extension: .ts
Lines: 127
================================================================================

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { BehaviorSubject, Observable, of, throwError } from 'rxjs';
import { delay } from 'rxjs/operators';
import { environment } from '../../../environments/environment';

export type FeedbackType = 'bug' | 'idea' | 'rating' | 'other';
export type FeedbackStatus = 'open' | 'in_progress' | 'resolved';

export interface Feedback {
  id: string;                 // uuid
  type: FeedbackType;         // bug/idea/rating/other
  title: string;              // tiêu đề ngắn
  rating?: number;            // 1..5 (nếu type=rating thì bắt buộc)
  comment: string;            // mô tả chi tiết / nhận xét
  attachments?: string[];     // base64 URL (mock) hoặc URL file (prod)
  reporterName?: string;
  reporterEmail?: string;
  status: FeedbackStatus;
  createdAt: string;          // ISO
  updatedAt: string;          // ISO
}

const LS_KEY = 'aihub_feedback_mock_v1';

@Injectable({ providedIn: 'root' })
export class FeedbackService {
  private readonly apiBase = (environment.apiUrl || '') + '/feedback';
  private readonly useMock = environment.USE_MOCK ?? true;

  private store$ = new BehaviorSubject<Feedback[]>(this.loadSeed());

  constructor(private http: HttpClient) {}

  list(): Observable<Feedback[]> {
    if (!this.useMock) return this.http.get<Feedback[]>(this.apiBase);
    return this.store$.asObservable().pipe(delay(120));
  }

  add(payload: Omit<Feedback, 'id'|'createdAt'|'updatedAt'|'status'> & { status?: FeedbackStatus }): Observable<Feedback> {
    if (!this.useMock) return this.http.post<Feedback>(this.apiBase, payload);
    const now = new Date().toISOString();
    const rec: Feedback = {
      id: crypto.randomUUID(),
      status: payload.status ?? 'open',
      createdAt: now,
      updatedAt: now,
      ...payload
    };
    const next = [...this.store$.value, rec];
    this.persist(next);
    return of(rec).pipe(delay(300));
  }

  update(id: string, patch: Partial<Feedback>): Observable<Feedback> {
    if (!this.useMock) return this.http.put<Feedback>(`${this.apiBase}/${id}`, patch);
    const list = this.store$.value.slice();
    const idx = list.findIndex(x => x.id === id);
    if (idx < 0) return throwError(() => new Error('Feedback not found'));
    list[idx] = { ...list[idx], ...patch, updatedAt: new Date().toISOString() };
    this.persist(list);
    return of(list[idx]).pipe(delay(300));
  }

  setStatus(id: string, status: FeedbackStatus): Observable<Feedback> {
    if (!this.useMock) return this.http.patch<Feedback>(`${this.apiBase}/${id}/status`, { status });
    return this.update(id, { status });
  }

  delete(id: string): Observable<void> {
    if (!this.useMock) return this.http.delete<void>(`${this.apiBase}/${id}`);
    this.persist(this.store$.value.filter(x => x.id !== id));
    return of(void 0).pipe(delay(200));
  }

  uploadAttachment(file: File): Observable<string> {
    if (!this.useMock) {
      const form = new FormData();
      form.append('file', file);
      // giả định backend trả { url: '...' }
      return this.http.post<{url: string}>(`${this.apiBase}/upload`, form).pipe((src: any) => src);
    }
    return new Observable<string>(obs => {
      const reader = new FileReader();
      reader.onload = () => { obs.next(String(reader.result)); obs.complete(); };
      reader.onerror = err => obs.error(err);
      reader.readAsDataURL(file);
    }).pipe(delay(120));
  }

  // helpers (mock)
  private persist(list: Feedback[]) { localStorage.setItem(LS_KEY, JSON.stringify(list)); this.store$.next(list); }
  private loadSeed(): Feedback[] {
    const saved = localStorage.getItem(LS_KEY);
    if (saved) return JSON.parse(saved);
    const now = new Date().toISOString();
    const seed: Feedback[] = [
      {
        id: crypto.randomUUID(),
        type: 'bug',
        title: 'Không tải được danh sách người dùng',
        comment: 'Khi bấm refresh bảng không hiển thị dữ liệu, F12 thấy lỗi 500.',
        rating: undefined,
        attachments: [],
        reporterName: 'Nguyễn A',
        reporterEmail: 'a@example.com',
        status: 'open',
        createdAt: now, updatedAt: now
      },
      {
        id: crypto.randomUUID(),
        type: 'rating',
        title: 'Trải nghiệm tốt',
        comment: 'UI mượt, thao tác nhanh.',
        rating: 5,
        attachments: [],
        reporterName: 'Trần B',
        reporterEmail: 'b@example.com',
        status: 'resolved',
        createdAt: now, updatedAt: now
      }
    ];
    localStorage.setItem(LS_KEY, JSON.stringify(seed));
    return seed;
  }
}


================================================================================
File: ai-model.service.ts
Relative Path: src/app/core/services/ai-model.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/services/ai-model.service.ts
Extension: .ts
Lines: 84
================================================================================

import { Injectable, inject } from '@angular/core';
import { Observable, map } from 'rxjs';
import { AICategory, AIModel } from '../models/ai-models.model';
import { ApiKeysService, ApiConfig, Provider } from './api-keys.service';

@Injectable({
    providedIn: 'root'
})
export class AiModelService {
    private apiKeysService = inject(ApiKeysService);

    private providerIcons: Record<Provider | string, string> = {
        'OpenAI': 'assets/demo/images/ai-vendors/openai.svg',
        'Google': 'assets/demo/images/ai-vendors/google.svg',
        'xAI': 'assets/demo/images/ai-vendors/xai.svg',
        'EVNGENCO1': 'https://cdn.haitrieu.com/wp-content/uploads/2022/01/Icon-EVN.png',
        'Custom': 'pi pi-cog'
    };
    
    private modelIcons: Record<string, string> = {
        'gpt-4o': 'https://cdn-icons-png.flaticon.com/128/12222/12222589.png',
        'gpt-4-turbo': 'https://cdn-icons-png.flaticon.com/128/12222/12222589.png',
        'gpt-3.5-turbo': 'https://cdn-icons-png.flaticon.com/128/12222/12222589.png',
        'gemini-1.5-pro-latest': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQbsNlmX0r4ICIGkTn47QkNqI3OkkINDd_cPA&s',
        'gemini-1.5-flash-latest': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQbsNlmX0r4ICIGkTn47QkNqI3OkkINDd_cPA&s',
        'grok-1': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSjSiNUDO__fZluGrW2RLCYxy-eYxtfgRPpfQ&s',
        'evngenco1-assistant-v1': 'https://cdn.haitrieu.com/wp-content/uploads/2022/01/Icon-EVN.png',
        'evngenco1-law-v1': 'https://cdn.haitrieu.com/wp-content/uploads/2022/01/Icon-EVN.png',
    };

    /**
     * Lấy danh sách model, lọc theo profile và chuyển đổi cấu trúc cho selector.
     * @param allowedModelNames — Danh sách tên model được phép. Nếu null, hiển thị tất cả.
     */
    getModels(allowedModelNames: string[] | null): Observable<AICategory[]> {
        return this.apiKeysService.list().pipe(
            map((apiConfigs: ApiConfig[]) => {
                let activeConfigs = apiConfigs.filter(config => config.status === 'active');

                // **LOGIC LỌC MỚI**: Nếu có danh sách cho phép, chỉ giữ lại các model có trong danh sách
                if (allowedModelNames && allowedModelNames.length > 0) {
                    activeConfigs = activeConfigs.filter(config => allowedModelNames.includes(config.model));
                }

                const groupedByProvider = activeConfigs.reduce((acc, config) => {
                    const provider = config.provider;
                    if (!acc[provider]) {
                        acc[provider] = [];
                    }
                    acc[provider].push(config);
                    return acc;
                }, {} as Record<string, ApiConfig[]>);
                
                const categories: AICategory[] = Object.keys(groupedByProvider).map(provider => {
                    const configs = groupedByProvider[provider];
                    const models: AIModel[] = configs.map(config => ({
                        id: config.id,
                        name: config.name,
                        icon: this.modelIcons[config.model] || this.providerIcons[provider] || this.providerIcons['Custom'],
                        profile: {
                            description: config.description || 'Mô hình AI.',
                            sortOrder: 10
                        },
                        costType: config.costType
                    }));

                    return {
                        category: provider,
                        icon: this.providerIcons[provider] || this.providerIcons['Custom'],
                        models: models.sort((a, b) => a.name.localeCompare(b.name))
                    };
                });
                
                return categories.sort((a, b) => {
                    if (a.category === 'EVNGENCO1') return -1;
                    if (b.category === 'EVNGENCO1') return 1;
                    return a.category.localeCompare(b.category);
                });
            })
        );
    }
}



================================================================================
File: auth.guard.ts
Relative Path: src/app/core/guards/auth.guard.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/core/guards/auth.guard.ts
Extension: .ts
Lines: 24
================================================================================

import { inject } from '@angular/core';
import { CanActivateFn, Router } from '@angular/router';
import { AuthService } from '../services/auth.service';

/**
 * Bộ bảo vệ (Guard) để kiểm tra xem người dùng đã đăng nhập hay chưa.
 * Nếu chưa, sẽ chuyển hướng về trang login.
 */
export const authGuard: CanActivateFn = (route, state) => {
  const authService = inject(AuthService);
  const router = inject(Router);

  // Kiểm tra xem có token hoặc thông tin người dùng không
  // Bằng cách này, nó hoạt động cả khi người dùng tải lại trang
  if (authService.currentUser() || localStorage.getItem('authToken')) {
    // Đã đăng nhập, cho phép truy cập
    return true;
  }

  // Chưa đăng nhập, chuyển hướng đến trang login
  // Chúng ta trả về một UrlTree để Angular xử lý việc chuyển hướng
  return router.createUrlTree(['/auth/login']);
};


================================================================================
File: app.footer.ts
Relative Path: src/app/layout/component/app.footer.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/layout/component/app.footer.ts
Extension: .ts
Lines: 20
================================================================================

import { Component } from '@angular/core';

@Component({
    standalone: true,
    selector: 'app-footer',
    template: `
      <div class="layout-footer">
        <a href="https://www.evngenco1.vn" target="_blank" rel="noopener noreferrer" 
           class="text-primary hover:underline"
           style="font-family: 'HelveticaBlackVU'; font-size: 12px; font-weight: bold;">
          AI HUB -
          <span style="margin-left: 4px;">
            <span style="color: #164397;">EVN</span>
            <span style="color: #ed1c24;"><i>GENCO1</i></span>
          </span>
        </a>
      </div>
    `
})
export class AppFooter {}

================================================================================
File: app.sidebar.ts
Relative Path: src/app/layout/component/app.sidebar.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/layout/component/app.sidebar.ts
Extension: .ts
Lines: 15
================================================================================

import { Component, ElementRef } from '@angular/core';
import { AppMenu } from './app.menu';

@Component({
    selector: 'app-sidebar',
    standalone: true,
    imports: [AppMenu],
    template: ` <div class="layout-sidebar">
        <app-menu></app-menu>
    </div>`
})
export class AppSidebar {
    constructor(public el: ElementRef) {}
}


================================================================================
File: app.topbar.ts
Relative Path: src/app/layout/component/app.topbar.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/layout/component/app.topbar.ts
Extension: .ts
Lines: 337
================================================================================

import { Component, ElementRef, HostListener, ViewChild, computed, inject } from '@angular/core';
import { Router, RouterModule } from '@angular/router';
import { CommonModule } from '@angular/common';
import { StyleClassModule } from 'primeng/styleclass';
import { AppConfigurator } from './app.configurator';
import { LayoutService } from '../service/layout.service';
import { AuthService } from '../../core/services/auth.service';

@Component({
  selector: 'app-topbar',
  standalone: true,
  imports: [RouterModule, CommonModule, StyleClassModule, AppConfigurator],
  template: `
  <div class="layout-topbar">
    <!-- Phần Logo và Actions không thay đổi -->
    <div class="layout-topbar-logo-container">
      <button class="layout-menu-button layout-topbar-action" (click)="layoutService.onMenuToggle()">
        <i class="pi pi-bars"></i>
      </button>
        <a class="layout-topbar-logo flex items-center" routerLink="/uikit/aihub-landing">
          <img src="assets/logo-evn.png"
              alt="EVN Genco 1 Logo"
              style="height: 40px; margin-right: 0px;">
          <div class="flex flex-col" style="margin-left: -2px;">
            <span style="font-family: 'HelveticaBlackVU'; font-size: 18px;">
               <span style="color: #11189d;">EVN</span>
              <span style="color: #ed1c24;"><i>GENCO1</i></span>
            </span>
            <img src="assets/logo-aihub.png"
                alt="AI HUB"
                style="height: 18px; width: auto; margin-top: 2px; transform: scaleX(1); margin-left: -1px;">
          </div>
        </a>
    </div>

    <div class="layout-topbar-actions">
      <!-- =================================================================== -->
      <!-- ============ START: TOKEN POPOVER (ĐÃ THIẾT KẾ LẠI) ============== -->
      <!-- =================================================================== -->
      <div #tokenWrap
           class="hidden md:flex items-center gap-3 mr-2 relative"
           (mouseenter)="openTokenPopup()"
           (mouseleave)="scheduleCloseTokenPopup()">
        <button
          type="button"
          class="flex items-center gap-2 px-3 py-1.5 rounded-full border border-surface-200 dark:border-surface-700 bg-surface-0 dark:bg-surface-900 shadow-sm hover:shadow transition"
          (click)="toggleTokenPopupForTouch()">
          <i class="pi pi-building text-sm"></i>
          <span class="font-semibold tracking-tight">{{ paidTokenBalance | number }}</span>
          <i class="pi pi-bolt text-primary text-sm"></i>
        </button>
        <div *ngIf="showTokenPopup"
             class="absolute z-50 top-12 right-0 w-96 rounded-2xl bg-surface-0 dark:bg-surface-900 border border-surface-200 dark:border-surface-700 shadow-2xl p-4"
             (mouseenter)="cancelCloseTokenPopup()"
             (mouseleave)="scheduleCloseTokenPopup()"
             (click)="$event.stopPropagation()">

            <!-- Header -->
            <h3 class="text-xl font-bold mb-3 text-surface-800 dark:text-surface-100">Tổng quan sử dụng</h3>

            <!-- Paid Token Quota -->
            <div class="mb-4">
                <div class="flex items-center justify-between mb-1">
                    <span class="text-base font-medium text-surface-600 dark:text-surface-300">Hạn mức trả phí còn lại</span>
                    <span class="text-base font-semibold text-surface-800 dark:text-surface-100">
                        {{ paidTokenBalance | number }} / {{ monthlyTokenLimit | number }}
                     </span>
                </div>
                <div class="h-2 w-full rounded-full bg-surface-200 dark:bg-surface-700 overflow-hidden">
                    <div class="h-full rounded-full bg-primary" [style.width.%]="paidTokenRemainingPercent"></div>
                </div>
            </div>

            <!-- Divider -->
            <hr class="border-surface-200 dark:border-surface-700 my-4">

            <!-- Usage Breakdown Chart -->
            <div>
                <div class="flex items-center justify-between mb-2">
                    <span class="text-base font-medium text-surface-600 dark:text-surface-300">Phân bổ Token đã sử dụng</span>
                    <span class="text-base font-bold text-surface-800 dark:text-surface-100">{{ totalTokensUsed | number }}</span>
                </div>
                <div class="h-2 w-full flex rounded-full overflow-hidden bg-surface-200 dark:bg-surface-700">
                    <div class="h-full bg-primary" [style.width.%]="paidTokenUsagePercent" title="Token trả phí"></div>
                    <div class="h-full bg-teal-500" [style.width.%]="freeTokenUsagePercent" title="Token miễn phí"></div>
                </div>
                <div class="flex items-center justify-between text-sm text-surface-500 dark:text-surface-400 mt-2">
                    <div class="flex items-center gap-1.5">
                        <span class="w-2 h-2 rounded-full bg-primary"></span>
                        <span>Trả phí: {{ paidTokensUsed | number }}</span>
                    </div>
                    <div class="flex items-center gap-1.5">
                        <span class="w-2 h-2 rounded-full bg-teal-500"></span>
                        <span>Miễn phí: {{ freeTokensUsed | number }}</span>
                     </div>
                </div>
            </div>

            <!-- Divider -->
            <hr class="border-surface-200 dark:border-surface-700 my-4">
            
            <!-- Statistics -->
            <div class="space-y-3">
                 <div class="flex items-center justify-between">
                    <span class="text-base text-surface-700 dark:text-surface-200">Tổng số requests</span>
                    <span class="text-base font-semibold text-surface-800 dark:text-surface-100">{{ totalRequests | number }}</span>
                </div>
            </div>
            
            <!-- Divider -->
            <hr class="border-surface-200 dark:border-surface-700 my-4">

            <!-- Expiry and Action Button -->
             <div class="flex items-center justify-between mb-4">
                <span class="text-base text-surface-700 dark:text-surface-200">Ngày làm mới hạn mức</span>
                <span class="text-base font-semibold text-surface-800 dark:text-surface-100">{{ expiryDate | date:'dd/MM/yyyy' }}</span>
            </div>
            <button type="button" class="w-full px-4 py-2.5 rounded-lg bg-primary text-primary-contrast font-semibold hover:opacity-90 transition-opacity text-base" (click)="onTopUp()">
              Yêu cầu bổ sung Token
            </button>
        </div>
      </div>
      <!-- =================================================================== -->
      <!-- ============= END: TOKEN POPOVER (ĐÃ THIẾT KẾ LẠI) =============== -->
      <!-- =================================================================== -->

      <button #themeButton style="position: absolute; left: -9999px; opacity: 0;" pStyleClass="@next" enterFromClass="hidden" enterActiveClass="animate-scalein" leaveToClass="hidden" leaveActiveClass="animate-fadeout" [hideOnOutsideClick]="true">
        <i class="pi pi-palette"></i>
      </button>
      <app-configurator />

      <button class="layout-topbar-menu-button layout-topbar-action" pStyleClass="@next" enterFromClass="hidden" enterActiveClass="animate-scalein" leaveToClass="hidden" leaveActiveClass="animate-fadeout" [hideOnOutsideClick]="true">
        <i class="pi pi-ellipsis-v"></i>
      </button>
      <div class="layout-topbar-menu hidden lg:flex lg:items-center">
        <div class="layout-topbar-menu-content">
          <button type="button" class="layout-topbar-action">
             <i class="pi pi-inbox"></i><span>Messages</span>
          </button>
        </div>
      </div>

      <div #profileWrap class="relative">
          <button type="button"
                  class="flex items-center gap-3 px-2 py-1.5 rounded-lg hover:bg-surface-100 dark:hover:bg-surface-800 transition-colors focus:outline-none focus:ring-2 focus:ring-primary"
                  (click)="toggleProfileMenu()">
              <img [src]="user().avatarUrl" [alt]="user().fullName" class="w-10 h-10 rounded-full object-cover">
              <div class="hidden md:flex flex-col text-left leading-tight">
                  <span class="font-semibold text-sm text-surface-800 dark:text-surface-100">{{ user().fullName }}</span>
                  <span class="text-xs text-surface-500 dark:text-surface-400">{{ user().department }}</span>
              </div>
          </button>

          <div *ngIf="showProfileMenu"
               class="absolute z-50 top-full right-0 mt-2 w-80 rounded-xl bg-surface-0 dark:bg-surface-900 border border-surface-200 dark:border-surface-700 shadow-2xl overflow-hidden animate-scalein"
               style="transform-origin: top right;"
               (click)="$event.stopPropagation()">

              <div class="flex flex-col items-center pt-5 pb-3">
                  <img [src]="user().avatarUrl" [alt]="user().fullName" class="w-24 h-24 rounded-full mb-1 object-cover">
                  <h3 class="font-bold text-2xl text-surface-800 dark:text-surface-100">{{ user().fullName }}</h3>
                  <p class="text-base text-surface-500 dark:text-surface-400">@{{ user().username }}</p>
              </div>

              <ul class="px-2 pb-2 flex flex-col space-y-1">
                  <li>
                      <div class="flex items-center gap-4 p-2 rounded-md">
                          <i class="pi pi-sitemap text-xl text-surface-500 dark:text-surface-400 w-6 text-center"></i>
                          <div>
                              <span class="text-sm font-semibold text-surface-400 dark:text-surface-500 uppercase tracking-wider">Đơn vị</span>
                              <p class="text-base font-medium text-surface-700 dark:text-surface-200">{{ user().unit }}</p>
                          </div>
                      </div>
                  </li>
                  <li>
                      <div class="flex items-center gap-4 p-2 rounded-md">
                          <i class="pi pi-users text-xl text-surface-500 dark:text-surface-400 w-6 text-center"></i>
                          <div>
                              <span class="text-sm font-semibold text-surface-400 dark:text-surface-500 uppercase tracking-wider">Phòng ban</span>
                              <p class="text-base font-medium text-surface-700 dark:text-surface-200">{{ user().department }}</p>
                          </div>
                      </div>
                  </li>

                  <li class="!my-2">
                      <hr class="border-surface-200 dark:border-surface-700">
                  </li>

                  <li>
                      <button type="button"
                              class="w-full flex items-center gap-4 p-2 rounded-md hover:bg-surface-100 dark:hover:bg-surface-800 transition-colors text-left"
                              (click)="onThemeClick()">
                          <i class="pi pi-palette text-xl text-surface-500 dark:text-surface-400 w-6 text-center"></i>
                          <span class="font-medium text-base text-surface-700 dark:text-surface-200">Chỉnh màu giao diện</span>
                      </button>
                  </li>
                   <li>
                      <button type="button"
                              class="w-full flex items-center gap-4 p-2 rounded-md hover:bg-red-50 dark:hover:bg-red-900/40 transition-colors text-red-500 dark:text-red-400 text-left"
                              (click)="onLogout()">
                          <i class="pi pi-sign-out text-xl w-6 text-center"></i>
                          <span class="font-medium text-base">Đăng xuất</span>
                      </button>
                  </li>
              </ul>
          </div>
      </div>
      </div>
  </div>
  `
})
export class AppTopbar {
  // Inject các services cần thiết
  private authService = inject(AuthService);
  private router = inject(Router);
  public layoutService = inject(LayoutService);

  // Dữ liệu người dùng động, lấy từ AuthService
  user = computed(() => {
    const loggedInUser = this.authService.currentUser();
    if (loggedInUser) {
      return {
        fullName: loggedInUser.fullName,
        username: loggedInUser.username,
        department: loggedInUser.phongban,
        unit: loggedInUser.donvi,
        avatarUrl: loggedInUser.avatar || `https://ui-avatars.com/api/?name=${loggedInUser.fullName.replace(/\s/g, '+')}&background=3B82F6&color=fff&size=128`
      };
    }
    // Dữ liệu mặc định khi chưa có ai đăng nhập
    return {
      fullName: 'Guest User',
      username: 'guest',
      department: 'N/A',
      unit: 'N/A',
      avatarUrl: `https://ui-avatars.com/api/?name=G&background=808080&color=fff&size=128`
    };
  });
  
  // ===== Dữ liệu giả lập cho popover Token (có thể thay bằng API sau) =====
  paidTokenBalance = 150000;
  monthlyTokenLimit  = 1000000;
  expiryDate   = new Date(2025, 9, 30);
  showTokenPopup   = false;
  showProfileMenu = false;

  // ===== Dữ liệu giả lập cho thống kê (có thể thay bằng API sau) =====
  paidTokensUsed = 850000;
  freeTokensUsed = 250000;
  paidRequests = 1250;
  freeRequests = 500;
  
  private hideTimer: any;
  private openTimer: any;

  @ViewChild('tokenWrap') tokenWrap!: ElementRef;
  @ViewChild('profileWrap') profileWrap!: ElementRef;
  @ViewChild('themeButton') themeButton!: ElementRef;

  // ===== Getters for calculated values =====
  get paidTokenRemainingPercent(): number {
    const p = (this.paidTokenBalance / (this.monthlyTokenLimit || 1)) * 100;
    return Math.max(0, Math.min(100, p));
  }

  get totalTokensUsed(): number {
    return this.paidTokensUsed + this.freeTokensUsed;
  }

  get totalRequests(): number {
      return this.paidRequests + this.freeRequests;
  }

  get paidTokenUsagePercent(): number {
    if (this.totalTokensUsed === 0) return 0;
    return (this.paidTokensUsed / this.totalTokensUsed) * 100;
  }

  get freeTokenUsagePercent(): number {
    if (this.totalTokensUsed === 0) return 0;
    return (this.freeTokensUsed / this.totalTokensUsed) * 100;
  }

  // ===== Logic cho các popover và menu =====
  openTokenPopup() {
    this.cancelCloseTokenPopup();
    clearTimeout(this.openTimer);
    this.openTimer = setTimeout(() => (this.showTokenPopup = true), 80);
  }
   scheduleCloseTokenPopup() {
    this.cancelOpenTokenPopup();
    clearTimeout(this.hideTimer);
    this.hideTimer = setTimeout(() => (this.showTokenPopup = false), 150);
  }
  cancelCloseTokenPopup() { clearTimeout(this.hideTimer); }
  cancelOpenTokenPopup()  { clearTimeout(this.openTimer); }

  toggleTokenPopupForTouch() { this.showTokenPopup = !this.showTokenPopup; }

  toggleProfileMenu() {
    this.showProfileMenu = !this.showProfileMenu;
  }

  onThemeClick() {
    this.showProfileMenu = false;
    setTimeout(() => {
      if (this.themeButton) {
        const btn = this.themeButton.nativeElement as HTMLButtonElement;
        btn.click();
      }
    }, 50);
  }

  onLogout() {
    this.showProfileMenu = false;
    this.authService.logout();
    this.router.navigate(['/auth/login']);
  }

  @HostListener('document:click', ['$event'])
  onDocClick(e: MouseEvent) {
    if (this.tokenWrap && this.tokenWrap.nativeElement && !this.tokenWrap.nativeElement.contains(e.target as Node)) {
        this.showTokenPopup = false;
    }

    if (this.profileWrap && this.profileWrap.nativeElement && !this.profileWrap.nativeElement.contains(e.target as Node)) {
        this.showProfileMenu = false;
    }
  }
  
  toggleDarkMode() {
    this.layoutService.layoutConfig.update((s) => ({ ...s, darkTheme: !s.darkTheme }));
  }
  
  onTopUp()  { console.log('Top up token'); }
}


================================================================================
File: app.menuitem.ts
Relative Path: src/app/layout/component/app.menuitem.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/layout/component/app.menuitem.ts
Extension: .ts
Lines: 172
================================================================================

import { Component, HostBinding, Input } from '@angular/core';
import { NavigationEnd, Router, RouterModule } from '@angular/router';
import { animate, state, style, transition, trigger } from '@angular/animations';
import { Subscription } from 'rxjs';
import { filter } from 'rxjs/operators';
import { CommonModule } from '@angular/common';
import { RippleModule } from 'primeng/ripple';
import { MenuItem } from 'primeng/api';
import { LayoutService } from '../service/layout.service';

@Component({
    // eslint-disable-next-line @angular-eslint/component-selector
    selector: '[app-menuitem]',
    imports: [CommonModule, RouterModule, RippleModule],
    template: `
        <ng-container>
            <div *ngIf="root && item.visible !== false" class="layout-menuitem-root-text">{{ item.label }}</div>
            <a *ngIf="(!item.routerLink || item.items) && item.visible !== false" [attr.href]="item.url" (click)="itemClick($event)" [ngClass]="item.styleClass" [attr.target]="item.target" tabindex="0" pRipple>
                <i [ngClass]="item.icon" class="layout-menuitem-icon"></i>
                <span class="layout-menuitem-text">{{ item.label }}</span>
                <i class="pi pi-fw pi-angle-down layout-submenu-toggler" *ngIf="item.items"></i>
            </a>
            <a
                *ngIf="item.routerLink && !item.items && item.visible !== false"
                (click)="itemClick($event)"
                [ngClass]="item.styleClass"
                [routerLink]="item.routerLink"
                routerLinkActive="active-route"
                [routerLinkActiveOptions]="item.routerLinkActiveOptions || { paths: 'exact', queryParams: 'ignored', matrixParams: 'ignored', fragment: 'ignored' }"
                [fragment]="item.fragment"
                [queryParamsHandling]="item.queryParamsHandling"
                [preserveFragment]="item.preserveFragment"
                [skipLocationChange]="item.skipLocationChange"
                [replaceUrl]="item.replaceUrl"
                [state]="item.state"
                [queryParams]="item.queryParams"
                [attr.target]="item.target"
                tabindex="0"
                pRipple
            >
                <i [ngClass]="item.icon" class="layout-menuitem-icon"></i>
                <span class="layout-menuitem-text">{{ item.label }}</span>
                <i class="pi pi-fw pi-angle-down layout-submenu-toggler" *ngIf="item.items"></i>
            </a>

            <ul *ngIf="item.items && item.visible !== false" [@children]="submenuAnimation">
                <ng-template ngFor let-child let-i="index" [ngForOf]="item.items">
                    <li app-menuitem [item]="child" [index]="i" [parentKey]="key" [class]="child['badgeClass']"></li>
                </ng-template>
            </ul>
        </ng-container>
    `,
    animations: [
        trigger('children', [
            state(
                'collapsed',
                style({
                    height: '0'
                })
            ),
            state(
                'expanded',
                style({
                    height: '*'
                })
            ),
            transition('collapsed <=> expanded', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)'))
        ])
    ],
    providers: [LayoutService]
})
export class AppMenuitem {
    @Input() item!: MenuItem;

    @Input() index!: number;

    @Input() @HostBinding('class.layout-root-menuitem') root!: boolean;

    @Input() parentKey!: string;

    active = false;

    menuSourceSubscription: Subscription;

    menuResetSubscription: Subscription;

    key: string = '';

    constructor(
        public router: Router,
        private layoutService: LayoutService
    ) {
        this.menuSourceSubscription = this.layoutService.menuSource$.subscribe((value) => {
            Promise.resolve(null).then(() => {
                if (value.routeEvent) {
                    this.active = value.key === this.key || value.key.startsWith(this.key + '-') ? true : false;
                } else {
                    if (value.key !== this.key && !value.key.startsWith(this.key + '-')) {
                        this.active = false;
                    }
                }
            });
        });

        this.menuResetSubscription = this.layoutService.resetSource$.subscribe(() => {
            this.active = false;
        });

        this.router.events.pipe(filter((event) => event instanceof NavigationEnd)).subscribe((params) => {
            if (this.item.routerLink) {
                this.updateActiveStateFromRoute();
            }
        });
    }

    ngOnInit() {
        this.key = this.parentKey ? this.parentKey + '-' + this.index : String(this.index);

        if (this.item.routerLink) {
            this.updateActiveStateFromRoute();
        }
    }

    updateActiveStateFromRoute() {
        let activeRoute = this.router.isActive(this.item.routerLink[0], { paths: 'exact', queryParams: 'ignored', matrixParams: 'ignored', fragment: 'ignored' });

        if (activeRoute) {
            this.layoutService.onMenuStateChange({ key: this.key, routeEvent: true });
        }
    }

    itemClick(event: Event) {
        // avoid processing disabled items
        if (this.item.disabled) {
            event.preventDefault();
            return;
        }

        // execute command
        if (this.item.command) {
            this.item.command({ originalEvent: event, item: this.item });
        }

        // toggle active state
        if (this.item.items) {
            this.active = !this.active;
        }

        this.layoutService.onMenuStateChange({ key: this.key });
    }

    get submenuAnimation() {
        return this.root ? 'expanded' : this.active ? 'expanded' : 'collapsed';
    }

    @HostBinding('class.active-menuitem')
    get activeClass() {
        return this.active && !this.root;
    }

    ngOnDestroy() {
        if (this.menuSourceSubscription) {
            this.menuSourceSubscription.unsubscribe();
        }

        if (this.menuResetSubscription) {
            this.menuResetSubscription.unsubscribe();
        }
    }
}



================================================================================
File: app.floatingconfigurator.ts
Relative Path: src/app/layout/component/app.floatingconfigurator.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/layout/component/app.floatingconfigurator.ts
Extension: .ts
Lines: 33
================================================================================

import {Component, computed, inject, input} from '@angular/core';
import { ButtonModule } from 'primeng/button';
import { StyleClassModule } from 'primeng/styleclass';
import { AppConfigurator } from './app.configurator';
import { LayoutService } from '../service/layout.service';
import {CommonModule} from "@angular/common";

@Component({
    selector: 'app-floating-configurator',
    imports: [CommonModule, ButtonModule, StyleClassModule, AppConfigurator],
    template: `
        <div class="flex gap-4 top-8 right-8" [ngClass]="{'fixed':float()}">
            <p-button type="button" (onClick)="toggleDarkMode()" [rounded]="true" [icon]="isDarkTheme() ? 'pi pi-moon' : 'pi pi-sun'" severity="secondary" />
            <div class="relative">
                <p-button icon="pi pi-palette" pStyleClass="@next" enterFromClass="hidden" enterActiveClass="animate-scalein" leaveToClass="hidden" leaveActiveClass="animate-fadeout" [hideOnOutsideClick]="true" type="button" rounded />
                <app-configurator />
            </div>
        </div>
    `
})
export class AppFloatingConfigurator {
    LayoutService = inject(LayoutService);

    float = input<boolean>(true);

    isDarkTheme = computed(() => this.LayoutService.layoutConfig().darkTheme);

    toggleDarkMode() {
        this.LayoutService.layoutConfig.update((state) => ({ ...state, darkTheme: !state.darkTheme }));
    }

}


================================================================================
File: app.layout.ts
Relative Path: src/app/layout/component/app.layout.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/layout/component/app.layout.ts
Extension: .ts
Lines: 113
================================================================================

import { Component, Renderer2, ViewChild } from '@angular/core';
import { CommonModule } from '@angular/common';
import { NavigationEnd, Router, RouterModule } from '@angular/router';
import { filter, Subscription } from 'rxjs';
import { AppTopbar } from './app.topbar';
import { AppSidebar } from './app.sidebar';
import { AppFooter } from './app.footer';
import { LayoutService } from '../service/layout.service';

@Component({
    selector: 'app-layout',
    standalone: true,
    imports: [CommonModule, AppTopbar, AppSidebar, RouterModule, AppFooter],
    template: `<div class="layout-wrapper" [ngClass]="containerClass">
        <app-topbar></app-topbar>
        <app-sidebar></app-sidebar>
        <div class="layout-main-container">
            <div class="layout-main">
                <router-outlet></router-outlet>
            </div>
            <app-footer></app-footer>
        </div>
        <div class="layout-mask animate-fadein"></div>
    </div> `
})
export class AppLayout {
    overlayMenuOpenSubscription: Subscription;

    menuOutsideClickListener: any;

    @ViewChild(AppSidebar) appSidebar!: AppSidebar;

    @ViewChild(AppTopbar) appTopBar!: AppTopbar;

    constructor(
        public layoutService: LayoutService,
        public renderer: Renderer2,
        public router: Router
    ) {
        this.overlayMenuOpenSubscription = this.layoutService.overlayOpen$.subscribe(() => {
            if (!this.menuOutsideClickListener) {
                this.menuOutsideClickListener = this.renderer.listen('document', 'click', (event) => {
                    if (this.isOutsideClicked(event)) {
                        this.hideMenu();
                    }
                });
            }

            if (this.layoutService.layoutState().staticMenuMobileActive) {
                this.blockBodyScroll();
            }
        });

        this.router.events.pipe(filter((event) => event instanceof NavigationEnd)).subscribe(() => {
            this.hideMenu();
        });
    }

    isOutsideClicked(event: MouseEvent) {
        const sidebarEl = document.querySelector('.layout-sidebar');
        const topbarEl = document.querySelector('.layout-menu-button');
        const eventTarget = event.target as Node;

        return !(sidebarEl?.isSameNode(eventTarget) || sidebarEl?.contains(eventTarget) || topbarEl?.isSameNode(eventTarget) || topbarEl?.contains(eventTarget));
    }

    hideMenu() {
        this.layoutService.layoutState.update((prev) => ({ ...prev, overlayMenuActive: false, staticMenuMobileActive: false, menuHoverActive: false }));
        if (this.menuOutsideClickListener) {
            this.menuOutsideClickListener();
            this.menuOutsideClickListener = null;
        }
        this.unblockBodyScroll();
    }

    blockBodyScroll(): void {
        if (document.body.classList) {
            document.body.classList.add('blocked-scroll');
        } else {
            document.body.className += ' blocked-scroll';
        }
    }

    unblockBodyScroll(): void {
        if (document.body.classList) {
            document.body.classList.remove('blocked-scroll');
        } else {
            document.body.className = document.body.className.replace(new RegExp('(^|\\b)' + 'blocked-scroll'.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');
        }
    }

    get containerClass() {
        return {
            'layout-overlay': this.layoutService.layoutConfig().menuMode === 'overlay',
            'layout-static': this.layoutService.layoutConfig().menuMode === 'static',
            'layout-static-inactive': this.layoutService.layoutState().staticMenuDesktopInactive && this.layoutService.layoutConfig().menuMode === 'static',
            'layout-overlay-active': this.layoutService.layoutState().overlayMenuActive,
            'layout-mobile-active': this.layoutService.layoutState().staticMenuMobileActive
        };
    }

    ngOnDestroy() {
        if (this.overlayMenuOpenSubscription) {
            this.overlayMenuOpenSubscription.unsubscribe();
        }

        if (this.menuOutsideClickListener) {
            this.menuOutsideClickListener();
        }
    }
}



================================================================================
File: app.menu.ts
Relative Path: src/app/layout/component/app.menu.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/layout/component/app.menu.ts
Extension: .ts
Lines: 100
================================================================================

import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterModule } from '@angular/router';
import { MenuItem } from 'primeng/api';
import { AppMenuitem } from './app.menuitem';

@Component({
    selector: 'app-menu',
    standalone: true,
    imports: [CommonModule, AppMenuitem, RouterModule],
    template: `<ul class="layout-menu">
        <ng-container *ngFor="let item of model; let i = index">
            <li app-menuitem *ngIf="!item.separator" [item]="item" [index]="i" [root]="true"></li>
            <li *ngIf="item.separator" class="menu-separator"></li>
        </ng-container>
    </ul> `
})
export class AppMenu {
    model: MenuItem[] = [];

    ngOnInit() {
        this.model = [
            {
                label: '',
                items: [
                    { 
                        label: 'Trang chủ', 
                        icon: 'pi pi-fw pi-home', 
                        routerLink: ['/uikit/aihub-landing'] 
                    },
                    { 
                        label: 'Dashboard', 
                        icon: 'pi pi-fw pi-chart-bar', 
                        routerLink: ['/uikit/app.dashboard'] 
                    }
                ]
            },
            {
                label: 'Chức năng AI',
                items: [
                    {
                        label: 'Chat với AI',
                        icon: 'pi pi-fw pi-comment',
                        routerLink: ['/uikit/chatbot-ai']
                    },
                    { 
                        label: 'Dual Chat AI', 
                        icon: 'pi pi-fw pi-clone', 
                        routerLink: ['/uikit/ai-dual-chat'] 
                    },
                    { 
                        label: 'Bộ công cụ AI', 
                        icon: 'pi pi-fw pi-search-plus', 
                        routerLink: ['/uikit/ai-tool-hub'] 
                    },
                    {
                        label: 'Thư viện AI Models',
                        icon: 'pi pi-fw pi-database',
                        routerLink: ['/uikit/ai-marketplace']
                    }
                ]
            },
            {
                label: 'Quản trị',
                items: [
                    {
                        label: 'Quản lý API',
                        icon: 'pi pi-fw pi-cloud',
                        routerLink: ['/uikit/api-management'],
                    },
                    {
                        label: 'Người dùng',
                        icon: 'pi pi-fw pi-users',
                        routerLink: ['/uikit/user-management'],
                    },
                    {
                        label: 'Cấu hình hạn mức',
                        icon: 'pi pi-fw pi-sliders-v',
                        routerLink: ['/uikit/quota-settings']
                    }
                ]
            },
            {
                label: 'Hỗ trợ & Phản hồi',
                items: [
                    {
                        label: 'Đánh giá & Góp ý',
                        icon: 'pi pi-fw pi-star',
                        routerLink: ['/uikit/feedback']
                    },
                    {
                        label: 'Đề xuất ý tưởng ĐMST',
                        icon: 'pi pi-fw pi-lightbulb',
                        routerLink: ['/uikit/innovation-ideas']
                    }
                ]
            }
        ];
    }
}

================================================================================
File: app.configurator.ts
Relative Path: src/app/layout/component/app.configurator.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/layout/component/app.configurator.ts
Extension: .ts
Lines: 782
================================================================================

import { CommonModule, isPlatformBrowser } from '@angular/common';
import { Component, computed, inject, PLATFORM_ID, signal } from '@angular/core';
import { FormsModule } from '@angular/forms';
import { Router } from '@angular/router';
import { $t, updatePreset, updateSurfacePalette } from '@primeuix/themes';
import Aura from '@primeuix/themes/aura';
import Lara from '@primeuix/themes/lara';
import Material from '@primeuix/themes/material';
import Nora from '@primeuix/themes/nora';
import { PrimeNG } from 'primeng/config';
import { SelectButtonModule } from 'primeng/selectbutton';
import { InputTextModule } from 'primeng/inputtext';
import { LayoutService } from '../service/layout.service';

const presets = {
    Aura,
    Lara,
    Material,
    Nora
} as const;

declare type KeyOfType<T> = keyof T extends infer U ? U : never;

declare type SurfacesType = {
    name?: string;
    palette?: {
        0?: string;
        50?: string;
        100?: string;
        200?: string;
        300?: string;
        400?: string;
        500?: string;
        600?: string;
        700?: string;
        800?: string;
        900?: string;
        950?: string;
    };
    gradient?: string;
};

@Component({
    selector: 'app-configurator',
    standalone: true,
    imports: [CommonModule, FormsModule, SelectButtonModule, InputTextModule],
    template: `
        <div class="flex flex-col gap-4">
            <div>
                <span class="text-sm text-muted-color font-semibold">Màu Chính</span>
                <div class="pt-2 flex gap-2 flex-wrap justify-start">
                    @for (primaryColor of primaryColors(); track primaryColor.name) {
                        <button
                            type="button"
                            [title]="primaryColor.name"
                            (click)="updateColors($event, 'primary', primaryColor)"
                            [ngClass]="{
                                    'outline outline-primary': primaryColor.name === selectedPrimaryColor() && !customPrimaryColor()
                                }"
                            class="cursor-pointer w-5 h-5 rounded-full flex shrink-0 items-center justify-center outline-offset-1 shadow-lg transition-all hover:scale-110"
                            [style]="{
                                    'background': primaryColor?.gradient || (primaryColor?.name === 'noir' ? 'var(--text-color)' : primaryColor?.palette?.['500'])
                                }"
                        >
                        </button>
                    }
                </div>
                <div class="mt-3 flex items-center gap-2 p-2 bg-surface-50 dark:bg-surface-800 rounded-md border border-surface-200 dark:border-surface-700">
                    <label class="flex items-center gap-2 flex-1">
                        <input
                            type="color"
                            [(ngModel)]="customPrimaryColorValue"
                            (ngModelChange)="onCustomPrimaryColorChange($event)"
                            class="cursor-pointer w-8 h-8 rounded border-2 border-surface-300 dark:border-surface-600"
                            [ngClass]="{
                                'border-primary': customPrimaryColor()
                            }"
                            title="Chọn màu tùy chỉnh"
                        />
                        <div class="flex-1">
                            <div class="text-xs text-muted-color mb-1">Màu Tùy Chỉnh</div>
                            <input
                                pInputText
                                type="text"
                                [(ngModel)]="customPrimaryColorValue"
                                (ngModelChange)="onCustomPrimaryColorChange($event)"
                                placeholder="#11189d"
                                class="w-full text-sm"
                                maxlength="7"
                            />
                        </div>
                    </label>
                </div>
            </div>
            <div>
                <span class="text-sm text-muted-color font-semibold">Màu Nền</span>
                <div class="pt-2 flex gap-2 flex-wrap justify-start">
                    @for (surface of surfaces; track surface.name) {
                        <button
                            type="button"
                            [title]="surface.name"
                            (click)="updateColors($event, 'surface', surface)"
                            class="cursor-pointer w-5 h-5 rounded-full flex shrink-0 items-center justify-center p-0 outline-offset-1"
                            [ngClass]="{
                                    'outline outline-primary': (selectedSurfaceColor() ? selectedSurfaceColor() === surface.name : layoutService.layoutConfig().darkTheme ? surface.name === 'zinc' : surface.name === 'slate') && !customSurfaceColor()
                                }"
                            [style]="{
                                    'background-color': surface?.palette?.['500']
                                }"
                        ></button>
                    }
                </div>
                <div class="mt-3 flex items-center gap-2 p-2 bg-surface-50 dark:bg-surface-800 rounded-md border border-surface-200 dark:border-surface-700">
                    <label class="flex items-center gap-2 flex-1">
                        <input
                            type="color"
                            [(ngModel)]="customSurfaceColorValue"
                            (ngModelChange)="onCustomSurfaceColorChange($event)"
                            class="cursor-pointer w-8 h-8 rounded border-2 border-surface-300 dark:border-surface-600"
                            [ngClass]="{
                                'border-primary': customSurfaceColor()
                            }"
                            title="Chọn màu nền tùy chỉnh"
                        />
                        <div class="flex-1">
                            <div class="text-xs text-muted-color mb-1">Màu Tùy Chỉnh</div>
                            <input
                                pInputText
                                type="text"
                                [(ngModel)]="customSurfaceColorValue"
                                (ngModelChange)="onCustomSurfaceColorChange($event)"
                                placeholder="#64748b"
                                class="w-full text-sm"
                                maxlength="7"
                            />
                        </div>
                    </label>
                </div>
            </div>
            <div class="flex flex-col gap-2">
                <span class="text-sm text-muted-color font-semibold">Giao Diện</span>
                <p-selectbutton [options]="presets" [ngModel]="selectedPreset()" (ngModelChange)="onPresetChange($event)" [allowEmpty]="false" size="small" />
            </div>
            <div *ngIf="showMenuModeButton()" class="flex flex-col gap-2">
                <span class="text-sm text-muted-color font-semibold">Chế Độ Menu</span>
                <p-selectbutton [ngModel]="menuMode()" (ngModelChange)="onMenuModeChange($event)" [options]="menuModeOptions" [allowEmpty]="false" size="small" />
            </div>
        </div>
    `,
    host: {
        class: 'hidden absolute top-13 right-0 w-72 p-4 bg-surface-0 dark:bg-surface-900 border border-surface rounded-border origin-top shadow-[0px_3px_5px_rgba(0,0,0,0.02),0px_0px_2px_rgba(0,0,0,0.05),0px_1px_4px_rgba(0,0,0,0.08)]'
    }
})
export class AppConfigurator {
    router = inject(Router);

    config: PrimeNG = inject(PrimeNG);

    layoutService: LayoutService = inject(LayoutService);

    platformId = inject(PLATFORM_ID);

    primeng = inject(PrimeNG);

    presets = Object.keys(presets);

    showMenuModeButton = signal(!this.router.url.includes('auth'));

    customPrimaryColor = signal(false);
    customPrimaryColorValue = '#11189d';

    customSurfaceColor = signal(false);
    customSurfaceColorValue = '#64748b';

    menuModeOptions = [
        { label: 'Đầy đủ', value: 'static' },
        { label: 'Rút gọn', value: 'overlay' }
    ];

    // Màu gradient hiện đại
    modernGradientColors: SurfacesType[] = [
        {
            name: 'royal-blue',
            gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            palette: {
                0: '#ffffff',
                50: '#f0f1fe',
                100: '#e1e3fd',
                200: '#c9cdfb',
                300: '#a7adf7',
                400: '#8488f1',
                500: '#667eea',
                600: '#5563dd',
                700: '#4750c3',
                800: '#3c429d',
                900: '#353b7d',
                950: '#22254a'
            }
        },
        {
            name: 'ocean-breeze',
            gradient: 'linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%)',
            palette: {
                0: '#ffffff',
                50: '#f0f9fc',
                100: '#dbf0f7',
                200: '#bae3f0',
                300: '#8bcfe5',
                400: '#54b3d3',
                500: '#2193b0',
                600: '#1d7f9b',
                700: '#1b677e',
                800: '#1c5568',
                900: '#1c4758',
                950: '#0f2d3b'
            }
        },
        {
            name: 'sunset-glow',
            gradient: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
            palette: {
                0: '#ffffff',
                50: '#fef2f9',
                100: '#fee5f4',
                200: '#ffcbeb',
                300: '#ffa1da',
                400: '#ff69bf',
                500: '#f5576c',
                600: '#e62e5c',
                700: '#c71f4a',
                800: '#a51d40',
                900: '#8a1e38',
                950: '#540b1e'
            }
        },
        {
            name: 'emerald-dream',
            gradient: 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)',
            palette: {
                0: '#ffffff',
                50: '#edfdf7',
                100: '#d4f9ea',
                200: '#adf2d8',
                300: '#77e6c0',
                400: '#40d1a3',
                500: '#11998e',
                600: '#0d8077',
                700: '#0d6761',
                800: '#0e524e',
                900: '#0f4441',
                950: '#052726'
            }
        },
        {
            name: 'cosmic-fusion',
            gradient: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
            palette: {
                0: '#ffffff',
                50: '#fefce8',
                100: '#fef9c3',
                200: '#fef08a',
                300: '#fde047',
                400: '#facc15',
                500: '#fa709a',
                600: '#ca8a04',
                700: '#a16207',
                800: '#854d0e',
                900: '#713f12',
                950: '#422006'
            }
        },
        {
            name: 'midnight-city',
            gradient: 'linear-gradient(135deg, #232526 0%, #414345 100%)',
            palette: {
                0: '#ffffff',
                50: '#f6f6f6',
                100: '#e7e7e7',
                200: '#d1d1d1',
                300: '#b0b0b0',
                400: '#888888',
                500: '#414345',
                600: '#5d5d5d',
                700: '#4f4f4f',
                800: '#454545',
                900: '#232526',
                950: '#0a0a0a'
            }
        },
        {
            name: 'aurora-sky',
            gradient: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
            palette: {
                0: '#ffffff',
                50: '#fef6f9',
                100: '#fdeef4',
                200: '#fcdde9',
                300: '#fbc0d7',
                400: '#f893b8',
                500: '#fed6e3',
                600: '#e93d82',
                700: '#d01f65',
                800: '#ad1d54',
                900: '#901d49',
                950: '#580a28'
            }
        },
        {
            name: 'neon-life',
            gradient: 'linear-gradient(135deg, #b3ffab 0%, #12fff7 100%)',
            palette: {
                0: '#ffffff',
                50: '#ecfffe',
                100: '#cffffc',
                200: '#a5fff9',
                300: '#67fdf5',
                400: '#12fff7',
                500: '#00e1d9',
                600: '#00b3b6',
                700: '#058e92',
                800: '#0b7175',
                900: '#0e5d61',
                950: '#003940'
            }
        }
    ];

    // Màu mặc định
    defaultCustomColor: SurfacesType = {
        name: 'default-blue',
        gradient: 'linear-gradient(135deg, #11189d 0%, #1e3a8a 100%)',
        palette: {
            0: '#ffffff',
            50: '#e8e9f8',
            100: '#d1d3f1',
            200: '#a3a7e3',
            300: '#757bd5',
            400: '#474fc7',
            500: '#11189d',
            600: '#0e147e',
            700: '#0a0f5e',
            800: '#070a3f',
            900: '#03051f',
            950: '#020310'
        }
    };

    ngOnInit() {
        if (isPlatformBrowser(this.platformId)) {
            // Thiết lập màu mặc định nếu chưa có
            const currentPrimary = this.layoutService.layoutConfig().primary;
            if (!currentPrimary || currentPrimary === 'blue') {
                this.layoutService.layoutConfig.update((state) => ({ 
                    ...state, 
                    primary: 'default-blue' 
                }));
                this.applyTheme('primary', this.defaultCustomColor);
            }
            
            this.onPresetChange(this.layoutService.layoutConfig().preset);
        }
    }

    surfaces: SurfacesType[] = [
        {
            name: 'slate',
            palette: {
                0: '#ffffff',
                50: '#f8fafc',
                100: '#f1f5f9',
                200: '#e2e8f0',
                300: '#cbd5e1',
                400: '#94a3b8',
                500: '#64748b',
                600: '#475569',
                700: '#334155',
                800: '#1e293b',
                900: '#0f172a',
                950: '#020617'
            }
        },
        {
            name: 'gray',
            palette: {
                0: '#ffffff',
                50: '#f9fafb',
                100: '#f3f4f6',
                200: '#e5e7eb',
                300: '#d1d5db',
                400: '#9ca3af',
                500: '#6b7280',
                600: '#4b5563',
                700: '#374151',
                800: '#1f2937',
                900: '#111827',
                950: '#030712'
            }
        },
        {
            name: 'zinc',
            palette: {
                0: '#ffffff',
                50: '#fafafa',
                100: '#f4f4f5',
                200: '#e4e4e7',
                300: '#d4d4d8',
                400: '#a1a1aa',
                500: '#71717a',
                600: '#52525b',
                700: '#3f3f46',
                800: '#27272a',
                900: '#18181b',
                950: '#09090b'
            }
        },
        {
            name: 'neutral',
            palette: {
                0: '#ffffff',
                50: '#fafafa',
                100: '#f5f5f5',
                200: '#e5e5e5',
                300: '#d4d4d4',
                400: '#a3a3a3',
                500: '#737373',
                600: '#525252',
                700: '#404040',
                800: '#262626',
                900: '#171717',
                950: '#0a0a0a'
            }
        },
        {
            name: 'stone',
            palette: {
                0: '#ffffff',
                50: '#fafaf9',
                100: '#f5f5f4',
                200: '#e7e5e4',
                300: '#d6d3d1',
                400: '#a8a29e',
                500: '#78716c',
                600: '#57534e',
                700: '#44403c',
                800: '#292524',
                900: '#1c1917',
                950: '#0c0a09'
            }
        },
        {
            name: 'soho',
            palette: {
                0: '#ffffff',
                50: '#ececec',
                100: '#dedfdf',
                200: '#c4c4c6',
                300: '#adaeb0',
                400: '#97979b',
                500: '#7f8084',
                600: '#6a6b70',
                700: '#55565b',
                800: '#3f4046',
                900: '#2c2c34',
                950: '#16161d'
            }
        },
        {
            name: 'viva',
            palette: {
                0: '#ffffff',
                50: '#f3f3f3',
                100: '#e7e7e8',
                200: '#cfd0d0',
                300: '#b7b8b9',
                400: '#9fa1a1',
                500: '#87898a',
                600: '#6e7173',
                700: '#565a5b',
                800: '#3e4244',
                900: '#262b2c',
                950: '#0e1315'
            }
        },
        {
            name: 'ocean',
            palette: {
                0: '#ffffff',
                50: '#fbfcfc',
                100: '#F7F9F8',
                200: '#EFF3F2',
                300: '#DADEDD',
                400: '#B1B7B6',
                500: '#828787',
                600: '#5F7274',
                700: '#415B61',
                800: '#29444E',
                900: '#183240',
                950: '#0c1920'
            }
        }
    ];

    selectedPrimaryColor = computed(() => {
        return this.layoutService.layoutConfig().primary;
    });

    selectedSurfaceColor = computed(() => this.layoutService.layoutConfig().surface);

    selectedPreset = computed(() => this.layoutService.layoutConfig().preset);

    menuMode = computed(() => this.layoutService.layoutConfig().menuMode);

    primaryColors = computed<SurfacesType[]>(() => {
        const presetPalette = presets[this.layoutService.layoutConfig().preset as KeyOfType<typeof presets>].primitive;
        const colors = ['emerald', 'green', 'lime', 'orange', 'amber', 'yellow', 'teal', 'cyan', 'sky', 'blue', 'indigo', 'violet', 'purple', 'fuchsia', 'pink', 'rose'];
        
        // Bắt đầu với màu gradient hiện đại
        const palettes: SurfacesType[] = [
            this.defaultCustomColor,
            ...this.modernGradientColors,
            { name: 'noir', palette: {} }
        ];

        // Thêm các màu preset truyền thống
        colors.forEach((color) => {
            palettes.push({
                name: color,
                palette: presetPalette?.[color as KeyOfType<typeof presetPalette>] as SurfacesType['palette']
            });
        });

        return palettes;
    });

    onCustomPrimaryColorChange(color: string) {
        if (!this.isValidHexColor(color)) {
            return;
        }

        this.customPrimaryColor.set(true);
        const palette = this.generateColorPalette(color);
        const customColor: SurfacesType = {
            name: 'custom',
            palette: palette
        };

        this.layoutService.layoutConfig.update((state) => ({ ...state, primary: 'custom' }));
        this.applyTheme('primary', customColor);
    }

    onCustomSurfaceColorChange(color: string) {
        if (!this.isValidHexColor(color)) {
            return;
        }

        this.customSurfaceColor.set(true);
        const palette = this.generateColorPalette(color);
        const customSurface: SurfacesType = {
            name: 'custom-surface',
            palette: palette
        };

        this.layoutService.layoutConfig.update((state) => ({ ...state, surface: 'custom-surface' }));
        this.applyTheme('surface', customSurface);
    }

    isValidHexColor(color: string): boolean {
        return /^#[0-9A-F]{6}$/i.test(color);
    }

    generateColorPalette(baseColor: string): SurfacesType['palette'] {
        const hex = baseColor.replace('#', '');
        const r = parseInt(hex.substring(0, 2), 16);
        const g = parseInt(hex.substring(2, 4), 16);
        const b = parseInt(hex.substring(4, 6), 16);

        const palette: any = {};
        const shades = [0, 50, 100, 200, 300, 400, 500, 600, 700, 800, 900, 950];
        
        shades.forEach((shade) => {
            let factor: number;
            if (shade === 0) {
                palette['0'] = '#ffffff';
            } else if (shade < 500) {
                factor = (500 - shade) / 500;
                const newR = Math.round(r + (255 - r) * factor);
                const newG = Math.round(g + (255 - g) * factor);
                const newB = Math.round(b + (255 - b) * factor);
                palette[shade.toString()] = `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;
            } else if (shade === 500) {
                palette['500'] = baseColor;
            } else {
                factor = (shade - 500) / 500;
                const newR = Math.round(r * (1 - factor));
                const newG = Math.round(g * (1 - factor));
                const newB = Math.round(b * (1 - factor));
                palette[shade.toString()] = `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;
            }
        });

        return palette as SurfacesType['palette'];
    }

    getPresetExt() {
        let color: SurfacesType | undefined;
        
        if (this.customPrimaryColor()) {
            const palette = this.generateColorPalette(this.customPrimaryColorValue);
            color = { name: 'custom', palette: palette };
        } else {
            const primaryColorName = this.selectedPrimaryColor();
            
            // Kiểm tra màu gradient hiện đại
            const gradientColor = this.modernGradientColors.find((c) => c.name === primaryColorName);
            if (gradientColor) {
                color = gradientColor;
            } else if (primaryColorName === 'default-blue') {
                color = this.defaultCustomColor;
            } else {
                color = this.primaryColors().find((c) => c.name === primaryColorName) || {};
            }
        }

        const preset = this.layoutService.layoutConfig().preset;

        if (color.name === 'noir') {
            return {
                semantic: {
                    primary: {
                        50: '{surface.50}',
                        100: '{surface.100}',
                        200: '{surface.200}',
                        300: '{surface.300}',
                        400: '{surface.400}',
                        500: '{surface.500}',
                        600: '{surface.600}',
                        700: '{surface.700}',
                        800: '{surface.800}',
                        900: '{surface.900}',
                        950: '{surface.950}'
                    },
                    colorScheme: {
                        light: {
                            primary: {
                                color: '{primary.950}',
                                contrastColor: '#ffffff',
                                hoverColor: '{primary.800}',
                                activeColor: '{primary.700}'
                            },
                            highlight: {
                                background: '{primary.950}',
                                focusBackground: '{primary.700}',
                                color: '#ffffff',
                                focusColor: '#ffffff'
                            }
                        },
                        dark: {
                            primary: {
                                color: '{primary.50}',
                                contrastColor: '{primary.950}',
                                hoverColor: '{primary.200}',
                                activeColor: '{primary.300}'
                            },
                            highlight: {
                                background: '{primary.50}',
                                focusBackground: '{primary.300}',
                                color: '{primary.950}',
                                focusColor: '{primary.950}'
                            }
                        }
                    }
                }
            };
        } else {
            if (preset === 'Nora') {
                return {
                    semantic: {
                        primary: color.palette,
                        colorScheme: {
                            light: {
                                primary: {
                                    color: '{primary.600}',
                                    contrastColor: '#ffffff',
                                    hoverColor: '{primary.700}',
                                    activeColor: '{primary.800}'
                                },
                                highlight: {
                                    background: '{primary.600}',
                                    focusBackground: '{primary.700}',
                                    color: '#ffffff',
                                    focusColor: '#ffffff'
                                }
                            },
                            dark: {
                                primary: {
                                    color: '{primary.500}',
                                    contrastColor: '{surface.900}',
                                    hoverColor: '{primary.400}',
                                    activeColor: '{primary.300}'
                                },
                                highlight: {
                                    background: '{primary.500}',
                                    focusBackground: '{primary.400}',
                                    color: '{surface.900}',
                                    focusColor: '{surface.900}'
                                }
                            }
                        }
                    }
                };
            } else {
                return {
                    semantic: {
                        primary: color.palette,
                        colorScheme: {
                            light: {
                                primary: {
                                    color: '{primary.500}',
                                    contrastColor: '#ffffff',
                                    hoverColor: '{primary.600}',
                                    activeColor: '{primary.700}'
                                },
                                highlight: {
                                    background: '{primary.50}',
                                    focusBackground: '{primary.100}',
                                    color: '{primary.700}',
                                    focusColor: '{primary.800}'
                                }
                            },
                            dark: {
                                primary: {
                                    color: '{primary.400}',
                                    contrastColor: '{surface.900}',
                                    hoverColor: '{primary.300}',
                                    activeColor: '{primary.200}'
                                },
                                highlight: {
                                    background: 'color-mix(in srgb, {primary.400}, transparent 84%)',
                                    focusBackground: 'color-mix(in srgb, {primary.400}, transparent 76%)',
                                    color: 'rgba(255,255,255,.87)',
                                    focusColor: 'rgba(255,255,255,.87)'
                                }
                            }
                        }
                    }
                };
            }
        }
    }

    updateColors(event: any, type: string, color: any) {
        if (type === 'primary') {
            this.customPrimaryColor.set(false);
            this.layoutService.layoutConfig.update((state) => ({ ...state, primary: color.name }));
        } else if (type === 'surface') {
            this.customSurfaceColor.set(false);
            this.layoutService.layoutConfig.update((state) => ({ ...state, surface: color.name }));
        }
        this.applyTheme(type, color);

        event.stopPropagation();
    }

    applyTheme(type: string, color: any) {
        if (type === 'primary') {
            updatePreset(this.getPresetExt());
        } else if (type === 'surface') {
            updateSurfacePalette(color.palette);
        }
    }

    onPresetChange(event: any) {
        this.layoutService.layoutConfig.update((state) => ({ ...state, preset: event }));
        const preset = presets[event as KeyOfType<typeof presets>];
        const surfacePalette = this.surfaces.find((s) => s.name === this.selectedSurfaceColor())?.palette;
        $t().preset(preset).preset(this.getPresetExt()).surfacePalette(surfacePalette).use({ useDefaultOptions: true });
    }

    onMenuModeChange(event: string) {
        this.layoutService.layoutConfig.update((prev) => ({ ...prev, menuMode: event }));
    }
}

================================================================================
File: layout.service.ts
Relative Path: src/app/layout/service/layout.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/layout/service/layout.service.ts
Extension: .ts
Lines: 180
================================================================================

import { Injectable, effect, signal, computed } from '@angular/core';
import { Subject } from 'rxjs';

export interface layoutConfig {
    preset?: string;
    primary?: string;
    surface?: string | undefined | null;
    darkTheme?: boolean;
    menuMode?: string;
}

interface LayoutState {
    staticMenuDesktopInactive?: boolean;
    overlayMenuActive?: boolean;
    configSidebarVisible?: boolean;
    staticMenuMobileActive?: boolean;
    menuHoverActive?: boolean;
}

interface MenuChangeEvent {
    key: string;
    routeEvent?: boolean;
}

@Injectable({
    providedIn: 'root'
})
export class LayoutService {
    _config: layoutConfig = {
        preset: 'Aura',
        primary: 'royal-blue',
        surface: null,
        darkTheme: false,
        menuMode: 'static'
    };

    _state: LayoutState = {
        staticMenuDesktopInactive: false,
        overlayMenuActive: false,
        configSidebarVisible: false,
        staticMenuMobileActive: false,
        menuHoverActive: false
    };

    layoutConfig = signal<layoutConfig>(this._config);

    layoutState = signal<LayoutState>(this._state);

    private configUpdate = new Subject<layoutConfig>();

    private overlayOpen = new Subject<any>();

    private menuSource = new Subject<MenuChangeEvent>();

    private resetSource = new Subject();

    menuSource$ = this.menuSource.asObservable();

    resetSource$ = this.resetSource.asObservable();

    configUpdate$ = this.configUpdate.asObservable();

    overlayOpen$ = this.overlayOpen.asObservable();

    theme = computed(() => (this.layoutConfig()?.darkTheme ? 'light' : 'dark'));

    isSidebarActive = computed(() => this.layoutState().overlayMenuActive || this.layoutState().staticMenuMobileActive);

    isDarkTheme = computed(() => this.layoutConfig().darkTheme);

    getPrimary = computed(() => this.layoutConfig().primary);

    getSurface = computed(() => this.layoutConfig().surface);

    isOverlay = computed(() => this.layoutConfig().menuMode === 'overlay');

    transitionComplete = signal<boolean>(false);

    private initialized = false;

    constructor() {
        effect(() => {
            const config = this.layoutConfig();
            if (config) {
                this.onConfigUpdate();
            }
        });

        effect(() => {
            const config = this.layoutConfig();

            if (!this.initialized || !config) {
                this.initialized = true;
                return;
            }

            this.handleDarkModeTransition(config);
        });
    }

    private handleDarkModeTransition(config: layoutConfig): void {
        if ((document as any).startViewTransition) {
            this.startViewTransition(config);
        } else {
            this.toggleDarkMode(config);
            this.onTransitionEnd();
        }
    }

    private startViewTransition(config: layoutConfig): void {
        const transition = (document as any).startViewTransition(() => {
            this.toggleDarkMode(config);
        });

        transition.ready
            .then(() => {
                this.onTransitionEnd();
            })
            .catch(() => {});
    }

    toggleDarkMode(config?: layoutConfig): void {
        // const _config = config || this.layoutConfig();
        // if (_config.darkTheme) {
        //     document.documentElement.classList.add('app-dark');
        // } else {
        //     document.documentElement.classList.remove('app-dark');
        // }
    }

    private onTransitionEnd() {
        this.transitionComplete.set(true);
        setTimeout(() => {
            this.transitionComplete.set(false);
        });
    }

    onMenuToggle() {
        if (this.isOverlay()) {
            this.layoutState.update((prev) => ({ ...prev, overlayMenuActive: !this.layoutState().overlayMenuActive }));

            if (this.layoutState().overlayMenuActive) {
                this.overlayOpen.next(null);
            }
        }

        if (this.isDesktop()) {
            this.layoutState.update((prev) => ({ ...prev, staticMenuDesktopInactive: !this.layoutState().staticMenuDesktopInactive }));
        } else {
            this.layoutState.update((prev) => ({ ...prev, staticMenuMobileActive: !this.layoutState().staticMenuMobileActive }));

            if (this.layoutState().staticMenuMobileActive) {
                this.overlayOpen.next(null);
            }
        }
    }

    isDesktop() {
        return window.innerWidth > 991;
    }

    isMobile() {
        return !this.isDesktop();
    }

    onConfigUpdate() {
        this._config = { ...this.layoutConfig() };
        this.configUpdate.next(this.layoutConfig());
    }

    onMenuStateChange(event: MenuChangeEvent) {
        this.menuSource.next(event);
    }

    reset() {
        this.resetSource.next(true);
    }
}



================================================================================
File: pages.routes.ts
Relative Path: src/app/pages/pages.routes.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/pages.routes.ts
Extension: .ts
Lines: 12
================================================================================

import { Routes } from '@angular/router';
import { Documentation } from './documentation/documentation';
import { Crud } from './crud/crud';
import { Empty } from './empty/empty';

export default [
    { path: 'documentation', component: Documentation },
    { path: 'crud', component: Crud },
    { path: 'empty', component: Empty },
    { path: '**', redirectTo: '/notfound' }
] as Routes;


================================================================================
File: landing.ts
Relative Path: src/app/pages/landing/landing.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/landing/landing.ts
Extension: .ts
Lines: 32
================================================================================

import { Component } from '@angular/core';
import { RouterModule } from '@angular/router';
import { RippleModule } from 'primeng/ripple';
import { StyleClassModule } from 'primeng/styleclass';
import { ButtonModule } from 'primeng/button';
import { DividerModule } from 'primeng/divider';
import { TopbarWidget } from './components/topbarwidget.component';
import { HeroWidget } from './components/herowidget';
import { FeaturesWidget } from './components/featureswidget';
import { HighlightsWidget } from './components/highlightswidget';
import { PricingWidget } from './components/pricingwidget';
import { FooterWidget } from './components/footerwidget';

@Component({
    selector: 'app-landing',
    standalone: true,
    imports: [RouterModule, TopbarWidget, HeroWidget, FeaturesWidget, HighlightsWidget, PricingWidget, FooterWidget, RippleModule, StyleClassModule, ButtonModule, DividerModule],
    template: `
        <div class="bg-surface-0 dark:bg-surface-900">
            <div id="home" class="landing-wrapper overflow-hidden">
                <topbar-widget class="py-6 px-6 mx-0 md:mx-12 lg:mx-20 lg:px-20 flex items-center justify-between relative lg:static" />
                <hero-widget />
                <features-widget />
                <highlights-widget />
                <pricing-widget />
                <footer-widget />
            </div>
        </div>
    `
})
export class Landing {}


================================================================================
File: highlightswidget.ts
Relative Path: src/app/pages/landing/components/highlightswidget.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/landing/components/highlightswidget.ts
Extension: .ts
Lines: 47
================================================================================

import { Component } from '@angular/core';

@Component({
    selector: 'highlights-widget',
    template: `
        <div id="highlights" class="py-6 px-6 lg:px-20 mx-0 my-12 lg:mx-20">
            <div class="text-center">
                <div class="text-surface-900 dark:text-surface-0 font-normal mb-2 text-4xl">Powerful Everywhere</div>
                <span class="text-muted-color text-2xl">Amet consectetur adipiscing elit...</span>
            </div>

            <div class="grid grid-cols-12 gap-4 mt-20 pb-2 md:pb-20">
                <div class="flex justify-center col-span-12 lg:col-span-6 bg-purple-100 p-0 order-1 lg:order-0" style="border-radius: 8px">
                    <img src="https://primefaces.org/cdn/templates/sakai/landing/mockup.png" class="w-11/12" alt="mockup mobile" />
                </div>

                <div class="col-span-12 lg:col-span-6 my-auto flex flex-col lg:items-end text-center lg:text-right gap-4">
                    <div class="flex items-center justify-center bg-purple-200 self-center lg:self-end" style="width: 4.2rem; height: 4.2rem; border-radius: 10px">
                        <i class="pi pi-fw pi-mobile text-4xl! text-purple-700"></i>
                    </div>
                    <div class="leading-none text-surface-900 dark:text-surface-0 text-3xl font-normal">Congue Quisque Egestas</div>
                    <span class="text-surface-700 dark:text-surface-100 text-2xl leading-normal ml-0 md:ml-2" style="max-width: 650px"
                        >Lectus arcu bibendum at varius vel pharetra vel turpis nunc. Eget aliquet nibh praesent tristique magna sit amet purus gravida. Sit amet mattis vulputate enim nulla aliquet.</span
                    >
                </div>
            </div>

            <div class="grid grid-cols-12 gap-4 my-20 pt-2 md:pt-20">
                <div class="col-span-12 lg:col-span-6 my-auto flex flex-col text-center lg:text-left lg:items-start gap-4">
                    <div class="flex items-center justify-center bg-yellow-200 self-center lg:self-start" style="width: 4.2rem; height: 4.2rem; border-radius: 10px">
                        <i class="pi pi-fw pi-desktop text-3xl! text-yellow-700"></i>
                    </div>
                    <div class="leading-none text-surface-900 dark:text-surface-0 text-3xl font-normal">Celerisque Eu Ultrices</div>
                    <span class="text-surface-700 dark:text-surface-100 text-2xl leading-normal mr-0 md:mr-2" style="max-width: 650px"
                        >Adipiscing commodo elit at imperdiet dui. Viverra nibh cras pulvinar mattis nunc sed blandit libero. Suspendisse in est ante in. Mauris pharetra et ultrices neque ornare aenean euismod elementum nisi.</span
                    >
                </div>

                <div class="flex justify-end order-1 sm:order-2 col-span-12 lg:col-span-6 bg-yellow-100 p-0" style="border-radius: 8px">
                    <img src="https://primefaces.org/cdn/templates/sakai/landing/mockup-desktop.png" class="w-11/12" alt="mockup" />
                </div>
            </div>
        </div>
    `
})
export class HighlightsWidget {}


================================================================================
File: featureswidget.ts
Relative Path: src/app/pages/landing/components/featureswidget.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/landing/components/featureswidget.ts
Extension: .ts
Lines: 140
================================================================================

import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';

@Component({
    selector: 'features-widget',
    standalone: true,
    imports: [CommonModule],
    template: ` <div id="features" class="py-6 px-6 lg:px-20 mt-8 mx-0 lg:mx-20">
        <div class="grid grid-cols-12 gap-4 justify-center">
            <div class="col-span-12 text-center mt-20 mb-6">
                <div class="text-surface-900 dark:text-surface-0 font-normal mb-2 text-4xl">Marvelous Features</div>
                <span class="text-muted-color text-2xl">Placerat in egestas erat...</span>
            </div>

            <div class="col-span-12 md:col-span-12 lg:col-span-4 p-0 lg:pr-8 lg:pb-8 mt-6 lg:mt-0">
                <div style="height: 160px; padding: 2px; border-radius: 10px; background: linear-gradient(90deg, rgba(253, 228, 165, 0.2), rgba(187, 199, 205, 0.2)), linear-gradient(180deg, rgba(253, 228, 165, 0.2), rgba(187, 199, 205, 0.2))">
                    <div class="p-4 bg-surface-0 dark:bg-surface-900 h-full" style="border-radius: 8px">
                        <div class="flex items-center justify-center bg-yellow-200 mb-4" style="width: 3.5rem; height: 3.5rem; border-radius: 10px">
                            <i class="pi pi-fw pi-users text-2xl! text-yellow-700"></i>
                        </div>
                        <h5 class="mb-2 text-surface-900 dark:text-surface-0">Easy to Use</h5>
                        <span class="text-surface-600 dark:text-surface-200">Posuere morbi leo urna molestie.</span>
                    </div>
                </div>
            </div>

            <div class="col-span-12 md:col-span-12 lg:col-span-4 p-0 lg:pr-8 lg:pb-8 mt-6 lg:mt-0">
                <div style="height: 160px; padding: 2px; border-radius: 10px; background: linear-gradient(90deg, rgba(145, 226, 237, 0.2), rgba(251, 199, 145, 0.2)), linear-gradient(180deg, rgba(253, 228, 165, 0.2), rgba(172, 180, 223, 0.2))">
                    <div class="p-4 bg-surface-0 dark:bg-surface-900 h-full" style="border-radius: 8px">
                        <div class="flex items-center justify-center bg-cyan-200 mb-4" style="width: 3.5rem; height: 3.5rem; border-radius: 10px">
                            <i class="pi pi-fw pi-palette text-2xl! text-cyan-700"></i>
                        </div>
                        <h5 class="mb-2 text-surface-900 dark:text-surface-0">Fresh Design</h5>
                        <span class="text-surface-600 dark:text-surface-200">Semper risus in hendrerit.</span>
                    </div>
                </div>
            </div>

            <div class="col-span-12 md:col-span-12 lg:col-span-4 p-0 lg:pb-8 mt-6 lg:mt-0">
                <div style="height: 160px; padding: 2px; border-radius: 10px; background: linear-gradient(90deg, rgba(145, 226, 237, 0.2), rgba(172, 180, 223, 0.2)), linear-gradient(180deg, rgba(172, 180, 223, 0.2), rgba(246, 158, 188, 0.2))">
                    <div class="p-4 bg-surface-0 dark:bg-surface-900 h-full" style="border-radius: 8px">
                        <div class="flex items-center justify-center bg-indigo-200" style="width: 3.5rem; height: 3.5rem; border-radius: 10px">
                            <i class="pi pi-fw pi-map text-2xl! text-indigo-700"></i>
                        </div>
                        <div class="mt-6 mb-1 text-surface-900 dark:text-surface-0 text-xl font-semibold">Well Documented</div>
                        <span class="text-surface-600 dark:text-surface-200">Non arcu risus quis varius quam quisque.</span>
                    </div>
                </div>
            </div>

            <div class="col-span-12 md:col-span-12 lg:col-span-4 p-0 lg:pr-8 lg:pb-8 mt-6 lg:mt-0">
                <div style="height: 160px; padding: 2px; border-radius: 10px; background: linear-gradient(90deg, rgba(187, 199, 205, 0.2), rgba(251, 199, 145, 0.2)), linear-gradient(180deg, rgba(253, 228, 165, 0.2), rgba(145, 210, 204, 0.2))">
                    <div class="p-4 bg-surface-0 dark:bg-surface-900 h-full" style="border-radius: 8px">
                        <div class="flex items-center justify-center bg-slate-200 mb-4" style="width: 3.5rem; height: 3.5rem; border-radius: 10px">
                            <i class="pi pi-fw pi-id-card text-2xl! text-slate-700"></i>
                        </div>
                        <div class="mt-6 mb-1 text-surface-900 dark:text-surface-0 text-xl font-semibold">Responsive Layout</div>
                        <span class="text-surface-600 dark:text-surface-200">Nulla malesuada pellentesque elit.</span>
                    </div>
                </div>
            </div>

            <div class="col-span-12 md:col-span-12 lg:col-span-4 p-0 lg:pr-8 lg:pb-8 mt-6 lg:mt-0">
                <div style="height: 160px; padding: 2px; border-radius: 10px; background: linear-gradient(90deg, rgba(187, 199, 205, 0.2), rgba(246, 158, 188, 0.2)), linear-gradient(180deg, rgba(145, 226, 237, 0.2), rgba(160, 210, 250, 0.2))">
                    <div class="p-4 bg-surface-0 dark:bg-surface-900 h-full" style="border-radius: 8px">
                        <div class="flex items-center justify-center bg-orange-200 mb-4" style="width: 3.5rem; height: 3.5rem; border-radius: 10px">
                            <i class="pi pi-fw pi-star text-2xl! text-orange-700"></i>
                        </div>
                        <div class="mt-6 mb-1 text-surface-900 dark:text-surface-0 text-xl font-semibold">Clean Code</div>
                        <span class="text-surface-600 dark:text-surface-200">Condimentum lacinia quis vel eros.</span>
                    </div>
                </div>
            </div>

            <div class="col-span-12 md:col-span-12 lg:col-span-4 p-0 lg:pb-8 mt-6 lg:mt-0">
                <div style="height: 160px; padding: 2px; border-radius: 10px; background: linear-gradient(90deg, rgba(251, 199, 145, 0.2), rgba(246, 158, 188, 0.2)), linear-gradient(180deg, rgba(172, 180, 223, 0.2), rgba(212, 162, 221, 0.2))">
                    <div class="p-4 bg-surface-0 dark:bg-surface-900 h-full" style="border-radius: 8px">
                        <div class="flex items-center justify-center bg-pink-200 mb-4" style="width: 3.5rem; height: 3.5rem; border-radius: 10px">
                            <i class="pi pi-fw pi-moon text-2xl! text-pink-700"></i>
                        </div>
                        <div class="mt-6 mb-1 text-surface-900 dark:text-surface-0 text-xl font-semibold">Dark Mode</div>
                        <span class="text-surface-600 dark:text-surface-200">Convallis tellus id interdum velit laoreet.</span>
                    </div>
                </div>
            </div>

            <div class="col-span-12 md:col-span-12 lg:col-span-4 p-0 lg:pr-8 mt-6 lg:mt-0">
                <div style="height: 160px; padding: 2px; border-radius: 10px; background: linear-gradient(90deg, rgba(145, 210, 204, 0.2), rgba(160, 210, 250, 0.2)), linear-gradient(180deg, rgba(187, 199, 205, 0.2), rgba(145, 210, 204, 0.2))">
                    <div class="p-4 bg-surface-0 dark:bg-surface-900 h-full" style="border-radius: 8px">
                        <div class="flex items-center justify-center bg-teal-200 mb-4" style="width: 3.5rem; height: 3.5rem; border-radius: 10px">
                            <i class="pi pi-fw pi-shopping-cart text-2xl! text-teal-700"></i>
                        </div>
                        <div class="mt-6 mb-1 text-surface-900 dark:text-surface-0 text-xl font-semibold">Ready to Use</div>
                        <span class="text-surface-600 dark:text-surface-200">Mauris sit amet massa vitae.</span>
                    </div>
                </div>
            </div>

            <div class="col-span-12 md:col-span-12 lg:col-span-4 p-0 lg:pr-8 mt-6 lg:mt-0">
                <div style="height: 160px; padding: 2px; border-radius: 10px; background: linear-gradient(90deg, rgba(145, 210, 204, 0.2), rgba(212, 162, 221, 0.2)), linear-gradient(180deg, rgba(251, 199, 145, 0.2), rgba(160, 210, 250, 0.2))">
                    <div class="p-4 bg-surface-0 dark:bg-surface-900 h-full" style="border-radius: 8px">
                        <div class="flex items-center justify-center bg-blue-200 mb-4" style="width: 3.5rem; height: 3.5rem; border-radius: 10px">
                            <i class="pi pi-fw pi-globe text-2xl! text-blue-700"></i>
                        </div>
                        <div class="mt-6 mb-1 text-surface-900 dark:text-surface-0 text-xl font-semibold">Modern Practices</div>
                        <span class="text-surface-600 dark:text-surface-200">Elementum nibh tellus molestie nunc non.</span>
                    </div>
                </div>
            </div>

            <div class="col-span-12 md:col-span-12 lg:col-span-4 p-0 lg-4 mt-6 lg:mt-0">
                <div style="height: 160px; padding: 2px; border-radius: 10px; background: linear-gradient(90deg, rgba(160, 210, 250, 0.2), rgba(212, 162, 221, 0.2)), linear-gradient(180deg, rgba(246, 158, 188, 0.2), rgba(212, 162, 221, 0.2))">
                    <div class="p-4 bg-surface-0 dark:bg-surface-900 h-full" style="border-radius: 8px">
                        <div class="flex items-center justify-center bg-purple-200 mb-4" style="width: 3.5rem; height: 3.5rem; border-radius: 10px">
                            <i class="pi pi-fw pi-eye text-2xl! text-purple-700"></i>
                        </div>
                        <div class="mt-6 mb-1 text-surface-900 dark:text-surface-0 text-xl font-semibold">Privacy</div>
                        <span class="text-surface-600 dark:text-surface-200">Neque egestas congue quisque.</span>
                    </div>
                </div>
            </div>

            <div
                class="col-span-12 mt-20 mb-20 p-2 md:p-20"
                style="border-radius: 20px; background: linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), radial-gradient(77.36% 256.97% at 77.36% 57.52%, #efe1af 0%, #c3dcfa 100%)"
            >
                <div class="flex flex-col justify-center items-center text-center px-4 py-4 md:py-0">
                    <div class="text-gray-900 mb-2 text-3xl font-semibold">Joséphine Miller</div>
                    <span class="text-gray-600 text-2xl">Peak Interactive</span>
                    <p class="text-gray-900 sm:line-height-2 md:line-height-4 text-2xl mt-6" style="max-width: 800px">
                        “Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.”
                    </p>
                    <img src="https://primefaces.org/cdn/templates/sakai/landing/peak-logo.svg" class="mt-6" alt="Company logo" />
                </div>
            </div>
        </div>
    </div>`
})
export class FeaturesWidget {}


================================================================================
File: footerwidget.ts
Relative Path: src/app/pages/landing/components/footerwidget.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/landing/components/footerwidget.ts
Extension: .ts
Lines: 74
================================================================================

import { Component } from '@angular/core';
import { Router, RouterModule } from '@angular/router';

@Component({
    selector: 'footer-widget',
    imports: [RouterModule],
    template: `
        <div class="py-12 px-12 mx-0 mt-20 lg:mx-20">
            <div class="grid grid-cols-12 gap-4">
                <div class="col-span-12 md:col-span-2">
                    <a (click)="router.navigate(['/pages/landing'], { fragment: 'home' })" class="flex flex-wrap items-center justify-center md:justify-start md:mb-0 mb-6 cursor-pointer">
                        <svg viewBox="0 0 54 40" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-14 mr-2">
                            <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M17.1637 19.2467C17.1566 19.4033 17.1529 19.561 17.1529 19.7194C17.1529 25.3503 21.7203 29.915 27.3546 29.915C32.9887 29.915 37.5561 25.3503 37.5561 19.7194C37.5561 19.5572 37.5524 19.3959 37.5449 19.2355C38.5617 19.0801 39.5759 18.9013 40.5867 18.6994L40.6926 18.6782C40.7191 19.0218 40.7326 19.369 40.7326 19.7194C40.7326 27.1036 34.743 33.0896 27.3546 33.0896C19.966 33.0896 13.9765 27.1036 13.9765 19.7194C13.9765 19.374 13.9896 19.0316 14.0154 18.6927L14.0486 18.6994C15.0837 18.9062 16.1223 19.0886 17.1637 19.2467ZM33.3284 11.4538C31.6493 10.2396 29.5855 9.52381 27.3546 9.52381C25.1195 9.52381 23.0524 10.2421 21.3717 11.4603C20.0078 11.3232 18.6475 11.1387 17.2933 10.907C19.7453 8.11308 23.3438 6.34921 27.3546 6.34921C31.36 6.34921 34.9543 8.10844 37.4061 10.896C36.0521 11.1292 34.692 11.3152 33.3284 11.4538ZM43.826 18.0518C43.881 18.6003 43.9091 19.1566 43.9091 19.7194C43.9091 28.8568 36.4973 36.2642 27.3546 36.2642C18.2117 36.2642 10.8 28.8568 10.8 19.7194C10.8 19.1615 10.8276 18.61 10.8816 18.0663L7.75383 17.4411C7.66775 18.1886 7.62354 18.9488 7.62354 19.7194C7.62354 30.6102 16.4574 39.4388 27.3546 39.4388C38.2517 39.4388 47.0855 30.6102 47.0855 19.7194C47.0855 18.9439 47.0407 18.1789 46.9536 17.4267L43.826 18.0518ZM44.2613 9.54743L40.9084 10.2176C37.9134 5.95821 32.9593 3.1746 27.3546 3.1746C21.7442 3.1746 16.7856 5.96385 13.7915 10.2305L10.4399 9.56057C13.892 3.83178 20.1756 0 27.3546 0C34.5281 0 40.8075 3.82591 44.2613 9.54743Z"
                                fill="var(--primary-color)"
                            />
                            <mask id="mask0_1413_1551" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="8" width="54" height="11">
                                <path d="M27 18.3652C10.5114 19.1944 0 8.88892 0 8.88892C0 8.88892 16.5176 14.5866 27 14.5866C37.4824 14.5866 54 8.88892 54 8.88892C54 8.88892 43.4886 17.5361 27 18.3652Z" fill="var(--primary-color)" />
                            </mask>
                            <g mask="url(#mask0_1413_1551)">
                                <path
                                    d="M-4.673e-05 8.88887L3.73084 -1.91434L-8.00806 17.0473L-4.673e-05 8.88887ZM27 18.3652L26.4253 6.95109L27 18.3652ZM54 8.88887L61.2673 17.7127L50.2691 -1.91434L54 8.88887ZM-4.673e-05 8.88887C-8.00806 17.0473 -8.00469 17.0505 -8.00132 17.0538C-8.00018 17.055 -7.99675 17.0583 -7.9944 17.0607C-7.98963 17.0653 -7.98474 17.0701 -7.97966 17.075C-7.96949 17.0849 -7.95863 17.0955 -7.94707 17.1066C-7.92401 17.129 -7.89809 17.1539 -7.86944 17.1812C-7.8122 17.236 -7.74377 17.3005 -7.66436 17.3743C-7.50567 17.5218 -7.30269 17.7063 -7.05645 17.9221C-6.56467 18.3532 -5.89662 18.9125 -5.06089 19.5534C-3.39603 20.83 -1.02575 22.4605 1.98012 24.0457C7.97874 27.2091 16.7723 30.3226 27.5746 29.7793L26.4253 6.95109C20.7391 7.23699 16.0326 5.61231 12.6534 3.83024C10.9703 2.94267 9.68222 2.04866 8.86091 1.41888C8.45356 1.10653 8.17155 0.867278 8.0241 0.738027C7.95072 0.673671 7.91178 0.637576 7.90841 0.634492C7.90682 0.63298 7.91419 0.639805 7.93071 0.65557C7.93897 0.663455 7.94952 0.673589 7.96235 0.686039C7.96883 0.692262 7.97582 0.699075 7.98338 0.706471C7.98719 0.710167 7.99113 0.714014 7.99526 0.718014C7.99729 0.720008 8.00047 0.723119 8.00148 0.724116C8.00466 0.727265 8.00796 0.730446 -4.673e-05 8.88887ZM27.5746 29.7793C37.6904 29.2706 45.9416 26.3684 51.6602 23.6054C54.5296 22.2191 56.8064 20.8465 58.4186 19.7784C59.2265 19.2431 59.873 18.7805 60.3494 18.4257C60.5878 18.2482 60.7841 18.0971 60.9374 17.977C61.014 17.9169 61.0799 17.8645 61.1349 17.8203C61.1624 17.7981 61.1872 17.7781 61.2093 17.7602C61.2203 17.7512 61.2307 17.7427 61.2403 17.7348C61.2452 17.7308 61.2499 17.727 61.2544 17.7233C61.2566 17.7215 61.2598 17.7188 61.261 17.7179C61.2642 17.7153 61.2673 17.7127 54 8.88887C46.7326 0.0650536 46.7357 0.0625219 46.7387 0.0600241C46.7397 0.0592345 46.7427 0.0567658 46.7446 0.0551857C46.7485 0.0520238 46.7521 0.0489887 46.7557 0.0460799C46.7628 0.0402623 46.7694 0.0349487 46.7753 0.0301318C46.7871 0.0204986 46.7966 0.0128495 46.8037 0.00712562C46.818 -0.00431848 46.8228 -0.00808311 46.8184 -0.00463784C46.8096 0.00228345 46.764 0.0378652 46.6828 0.0983779C46.5199 0.219675 46.2165 0.439161 45.7812 0.727519C44.9072 1.30663 43.5257 2.14765 41.7061 3.02677C38.0469 4.79468 32.7981 6.63058 26.4253 6.95109L27.5746 29.7793ZM54 8.88887C50.2691 -1.91433 50.27 -1.91467 50.271 -1.91498C50.2712 -1.91506 50.272 -1.91535 50.2724 -1.9155C50.2733 -1.91581 50.274 -1.91602 50.2743 -1.91616C50.2752 -1.91643 50.275 -1.91636 50.2738 -1.91595C50.2714 -1.91515 50.2652 -1.91302 50.2552 -1.9096C50.2351 -1.90276 50.1999 -1.89078 50.1503 -1.874C50.0509 -1.84043 49.8938 -1.78773 49.6844 -1.71863C49.2652 -1.58031 48.6387 -1.377 47.8481 -1.13035C46.2609 -0.635237 44.0427 0.0249875 41.5325 0.6823C36.215 2.07471 30.6736 3.15796 27 3.15796V26.0151C33.8087 26.0151 41.7672 24.2495 47.3292 22.7931C50.2586 22.026 52.825 21.2618 54.6625 20.6886C55.5842 20.4011 56.33 20.1593 56.8551 19.986C57.1178 19.8993 57.3258 19.8296 57.4735 19.7797C57.5474 19.7548 57.6062 19.7348 57.6493 19.72C57.6709 19.7127 57.6885 19.7066 57.7021 19.7019C57.7089 19.6996 57.7147 19.6976 57.7195 19.696C57.7219 19.6952 57.7241 19.6944 57.726 19.6938C57.7269 19.6934 57.7281 19.693 57.7286 19.6929C57.7298 19.6924 57.7309 19.692 54 8.88887ZM27 3.15796C23.3263 3.15796 17.7849 2.07471 12.4674 0.6823C9.95717 0.0249875 7.73904 -0.635237 6.15184 -1.13035C5.36118 -1.377 4.73467 -1.58031 4.3155 -1.71863C4.10609 -1.78773 3.94899 -1.84043 3.84961 -1.874C3.79994 -1.89078 3.76474 -1.90276 3.74471 -1.9096C3.73469 -1.91302 3.72848 -1.91515 3.72613 -1.91595C3.72496 -1.91636 3.72476 -1.91643 3.72554 -1.91616C3.72593 -1.91602 3.72657 -1.91581 3.72745 -1.9155C3.72789 -1.91535 3.72874 -1.91506 3.72896 -1.91498C3.72987 -1.91467 3.73084 -1.91433 -4.673e-05 8.88887C-3.73093 19.692 -3.72983 19.6924 -3.72868 19.6929C-3.72821 19.693 -3.72698 19.6934 -3.72603 19.6938C-3.72415 19.6944 -3.72201 19.6952 -3.71961 19.696C-3.71482 19.6976 -3.70901 19.6996 -3.7022 19.7019C-3.68858 19.7066 -3.67095 19.7127 -3.6494 19.72C-3.60629 19.7348 -3.54745 19.7548 -3.47359 19.7797C-3.32589 19.8296 -3.11788 19.8993 -2.85516 19.986C-2.33008 20.1593 -1.58425 20.4011 -0.662589 20.6886C1.17485 21.2618 3.74125 22.026 6.67073 22.7931C12.2327 24.2495 20.1913 26.0151 27 26.0151V3.15796Z"
                                    fill="var(--primary-color)"
                                />
                            </g>
                        </svg>
                        <h4 class="font-medium text-3xl text-surface-900 dark:text-surface-0">SAKAI</h4>
                    </a>
                </div>

                <div class="col-span-12 md:col-span-10">
                    <div class="grid grid-cols-12 gap-8 text-center md:text-left">
                        <div class="col-span-12 md:col-span-3">
                            <h4 class="font-medium text-2xl leading-normal mb-6 text-surface-900 dark:text-surface-0">Company</h4>
                            <a class="leading-normal text-xl block cursor-pointer mb-2 text-surface-700 dark:text-surface-100">About Us</a>
                            <a class="leading-normal text-xl block cursor-pointer mb-2 text-surface-700 dark:text-surface-100">News</a>
                            <a class="leading-normal text-xl block cursor-pointer mb-2 text-surface-700 dark:text-surface-100">Investor Relations</a>
                            <a class="leading-normal text-xl block cursor-pointer mb-2 text-surface-700 dark:text-surface-100">Careers</a>
                            <a class="leading-normal text-xl block cursor-pointer text-surface-700 dark:text-surface-100">Media Kit</a>
                        </div>

                        <div class="col-span-12 md:col-span-3">
                            <h4 class="font-medium text-2xl leading-normal mb-6 text-surface-900 dark:text-surface-0">Resources</h4>
                            <a class="leading-normal text-xl block cursor-pointer mb-2 text-surface-700 dark:text-surface-100">Get Started</a>
                            <a class="leading-normal text-xl block cursor-pointer mb-2 text-surface-700 dark:text-surface-100">Learn</a>
                            <a class="leading-normal text-xl block cursor-pointer text-surface-700 dark:text-surface-100">Case Studies</a>
                        </div>

                        <div class="col-span-12 md:col-span-3">
                            <h4 class="font-medium text-2xl leading-normal mb-6 text-surface-900 dark:text-surface-0">Community</h4>
                            <a class="leading-normal text-xl block cursor-pointer mb-2 text-surface-700 dark:text-surface-100">Discord</a>
                            <a class="leading-normal text-xl flex items-center cursor-pointer mb-2 text-surface-700 dark:text-surface-100">Events<img src="https://primefaces.org/cdn/templates/sakai/landing/new-badge.svg" alt="badge" class="ml-2" /></a>
                            <a class="leading-normal text-xl block cursor-pointer mb-2 text-surface-700 dark:text-surface-100">FAQ</a>
                            <a class="leading-normal text-xl block cursor-pointer text-surface-700 dark:text-surface-100">Blog</a>
                        </div>

                        <div class="col-span-12 md:col-span-3">
                            <h4 class="font-medium text-2xl leading-normal mb-6 text-surface-900 dark:text-surface-0">Legal</h4>
                            <a class="leading-normal text-xl block cursor-pointer mb-2 text-surface-700 dark:text-surface-100">Brand Policy</a>
                            <a class="leading-normal text-xl block cursor-pointer mb-2 text-surface-700 dark:text-surface-100">Privacy Policy</a>
                            <a class="leading-normal text-xl block cursor-pointer text-surface-700 dark:text-surface-100">Terms of Service</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `
})
export class FooterWidget {
    constructor(public router: Router) {}
}


================================================================================
File: topbarwidget.component.ts
Relative Path: src/app/pages/landing/components/topbarwidget.component.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/landing/components/topbarwidget.component.ts
Extension: .ts
Lines: 69
================================================================================

import { Component } from '@angular/core';
import { StyleClassModule } from 'primeng/styleclass';
import { Router, RouterModule } from '@angular/router';
import { RippleModule } from 'primeng/ripple';
import { ButtonModule } from 'primeng/button';
import {AppFloatingConfigurator} from "@/layout/component/app.floatingconfigurator";

@Component({
    selector: 'topbar-widget',
    imports: [RouterModule, StyleClassModule, ButtonModule, RippleModule, AppFloatingConfigurator],
    template: `<a class="flex items-center" href="#">
            <svg viewBox="0 0 54 40" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-12 mr-2">
                <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M17.1637 19.2467C17.1566 19.4033 17.1529 19.561 17.1529 19.7194C17.1529 25.3503 21.7203 29.915 27.3546 29.915C32.9887 29.915 37.5561 25.3503 37.5561 19.7194C37.5561 19.5572 37.5524 19.3959 37.5449 19.2355C38.5617 19.0801 39.5759 18.9013 40.5867 18.6994L40.6926 18.6782C40.7191 19.0218 40.7326 19.369 40.7326 19.7194C40.7326 27.1036 34.743 33.0896 27.3546 33.0896C19.966 33.0896 13.9765 27.1036 13.9765 19.7194C13.9765 19.374 13.9896 19.0316 14.0154 18.6927L14.0486 18.6994C15.0837 18.9062 16.1223 19.0886 17.1637 19.2467ZM33.3284 11.4538C31.6493 10.2396 29.5855 9.52381 27.3546 9.52381C25.1195 9.52381 23.0524 10.2421 21.3717 11.4603C20.0078 11.3232 18.6475 11.1387 17.2933 10.907C19.7453 8.11308 23.3438 6.34921 27.3546 6.34921C31.36 6.34921 34.9543 8.10844 37.4061 10.896C36.0521 11.1292 34.692 11.3152 33.3284 11.4538ZM43.826 18.0518C43.881 18.6003 43.9091 19.1566 43.9091 19.7194C43.9091 28.8568 36.4973 36.2642 27.3546 36.2642C18.2117 36.2642 10.8 28.8568 10.8 19.7194C10.8 19.1615 10.8276 18.61 10.8816 18.0663L7.75383 17.4411C7.66775 18.1886 7.62354 18.9488 7.62354 19.7194C7.62354 30.6102 16.4574 39.4388 27.3546 39.4388C38.2517 39.4388 47.0855 30.6102 47.0855 19.7194C47.0855 18.9439 47.0407 18.1789 46.9536 17.4267L43.826 18.0518ZM44.2613 9.54743L40.9084 10.2176C37.9134 5.95821 32.9593 3.1746 27.3546 3.1746C21.7442 3.1746 16.7856 5.96385 13.7915 10.2305L10.4399 9.56057C13.892 3.83178 20.1756 0 27.3546 0C34.5281 0 40.8075 3.82591 44.2613 9.54743Z"
                    fill="var(--primary-color)"
                />
                <mask id="mask0_1413_1551" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="8" width="54" height="11">
                    <path d="M27 18.3652C10.5114 19.1944 0 8.88892 0 8.88892C0 8.88892 16.5176 14.5866 27 14.5866C37.4824 14.5866 54 8.88892 54 8.88892C54 8.88892 43.4886 17.5361 27 18.3652Z" fill="var(--primary-color)" />
                </mask>
                <g mask="url(#mask0_1413_1551)">
                    <path
                        d="M-4.673e-05 8.88887L3.73084 -1.91434L-8.00806 17.0473L-4.673e-05 8.88887ZM27 18.3652L26.4253 6.95109L27 18.3652ZM54 8.88887L61.2673 17.7127L50.2691 -1.91434L54 8.88887ZM-4.673e-05 8.88887C-8.00806 17.0473 -8.00469 17.0505 -8.00132 17.0538C-8.00018 17.055 -7.99675 17.0583 -7.9944 17.0607C-7.98963 17.0653 -7.98474 17.0701 -7.97966 17.075C-7.96949 17.0849 -7.95863 17.0955 -7.94707 17.1066C-7.92401 17.129 -7.89809 17.1539 -7.86944 17.1812C-7.8122 17.236 -7.74377 17.3005 -7.66436 17.3743C-7.50567 17.5218 -7.30269 17.7063 -7.05645 17.9221C-6.56467 18.3532 -5.89662 18.9125 -5.06089 19.5534C-3.39603 20.83 -1.02575 22.4605 1.98012 24.0457C7.97874 27.2091 16.7723 30.3226 27.5746 29.7793L26.4253 6.95109C20.7391 7.23699 16.0326 5.61231 12.6534 3.83024C10.9703 2.94267 9.68222 2.04866 8.86091 1.41888C8.45356 1.10653 8.17155 0.867278 8.0241 0.738027C7.95072 0.673671 7.91178 0.637576 7.90841 0.634492C7.90682 0.63298 7.91419 0.639805 7.93071 0.65557C7.93897 0.663455 7.94952 0.673589 7.96235 0.686039C7.96883 0.692262 7.97582 0.699075 7.98338 0.706471C7.98719 0.710167 7.99113 0.714014 7.99526 0.718014C7.99729 0.720008 8.00047 0.723119 8.00148 0.724116C8.00466 0.727265 8.00796 0.730446 -4.673e-05 8.88887ZM27.5746 29.7793C37.6904 29.2706 45.9416 26.3684 51.6602 23.6054C54.5296 22.2191 56.8064 20.8465 58.4186 19.7784C59.2265 19.2431 59.873 18.7805 60.3494 18.4257C60.5878 18.2482 60.7841 18.0971 60.9374 17.977C61.014 17.9169 61.0799 17.8645 61.1349 17.8203C61.1624 17.7981 61.1872 17.7781 61.2093 17.7602C61.2203 17.7512 61.2307 17.7427 61.2403 17.7348C61.2452 17.7308 61.2499 17.727 61.2544 17.7233C61.2566 17.7215 61.2598 17.7188 61.261 17.7179C61.2642 17.7153 61.2673 17.7127 54 8.88887C46.7326 0.0650536 46.7357 0.0625219 46.7387 0.0600241C46.7397 0.0592345 46.7427 0.0567658 46.7446 0.0551857C46.7485 0.0520238 46.7521 0.0489887 46.7557 0.0460799C46.7628 0.0402623 46.7694 0.0349487 46.7753 0.0301318C46.7871 0.0204986 46.7966 0.0128495 46.8037 0.00712562C46.818 -0.00431848 46.8228 -0.00808311 46.8184 -0.00463784C46.8096 0.00228345 46.764 0.0378652 46.6828 0.0983779C46.5199 0.219675 46.2165 0.439161 45.7812 0.727519C44.9072 1.30663 43.5257 2.14765 41.7061 3.02677C38.0469 4.79468 32.7981 6.63058 26.4253 6.95109L27.5746 29.7793ZM54 8.88887C50.2691 -1.91433 50.27 -1.91467 50.271 -1.91498C50.2712 -1.91506 50.272 -1.91535 50.2724 -1.9155C50.2733 -1.91581 50.274 -1.91602 50.2743 -1.91616C50.2752 -1.91643 50.275 -1.91636 50.2738 -1.91595C50.2714 -1.91515 50.2652 -1.91302 50.2552 -1.9096C50.2351 -1.90276 50.1999 -1.89078 50.1503 -1.874C50.0509 -1.84043 49.8938 -1.78773 49.6844 -1.71863C49.2652 -1.58031 48.6387 -1.377 47.8481 -1.13035C46.2609 -0.635237 44.0427 0.0249875 41.5325 0.6823C36.215 2.07471 30.6736 3.15796 27 3.15796V26.0151C33.8087 26.0151 41.7672 24.2495 47.3292 22.7931C50.2586 22.026 52.825 21.2618 54.6625 20.6886C55.5842 20.4011 56.33 20.1593 56.8551 19.986C57.1178 19.8993 57.3258 19.8296 57.4735 19.7797C57.5474 19.7548 57.6062 19.7348 57.6493 19.72C57.6709 19.7127 57.6885 19.7066 57.7021 19.7019C57.7089 19.6996 57.7147 19.6976 57.7195 19.696C57.7219 19.6952 57.7241 19.6944 57.726 19.6938C57.7269 19.6934 57.7281 19.693 57.7286 19.6929C57.7298 19.6924 57.7309 19.692 54 8.88887ZM27 3.15796C23.3263 3.15796 17.7849 2.07471 12.4674 0.6823C9.95717 0.0249875 7.73904 -0.635237 6.15184 -1.13035C5.36118 -1.377 4.73467 -1.58031 4.3155 -1.71863C4.10609 -1.78773 3.94899 -1.84043 3.84961 -1.874C3.79994 -1.89078 3.76474 -1.90276 3.74471 -1.9096C3.73469 -1.91302 3.72848 -1.91515 3.72613 -1.91595C3.72496 -1.91636 3.72476 -1.91643 3.72554 -1.91616C3.72593 -1.91602 3.72657 -1.91581 3.72745 -1.9155C3.72789 -1.91535 3.72874 -1.91506 3.72896 -1.91498C3.72987 -1.91467 3.73084 -1.91433 -4.673e-05 8.88887C-3.73093 19.692 -3.72983 19.6924 -3.72868 19.6929C-3.72821 19.693 -3.72698 19.6934 -3.72603 19.6938C-3.72415 19.6944 -3.72201 19.6952 -3.71961 19.696C-3.71482 19.6976 -3.70901 19.6996 -3.7022 19.7019C-3.68858 19.7066 -3.67095 19.7127 -3.6494 19.72C-3.60629 19.7348 -3.54745 19.7548 -3.47359 19.7797C-3.32589 19.8296 -3.11788 19.8993 -2.85516 19.986C-2.33008 20.1593 -1.58425 20.4011 -0.662589 20.6886C1.17485 21.2618 3.74125 22.026 6.67073 22.7931C12.2327 24.2495 20.1913 26.0151 27 26.0151V3.15796Z"
                        fill="var(--primary-color)"
                    />
                </g>
            </svg>
            <span class="text-surface-900 dark:text-surface-0 font-medium text-2xl leading-normal mr-20">SAKAI</span>
        </a>

        <a pButton [text]="true" severity="secondary" [rounded]="true" pRipple class="lg:hidden!" pStyleClass="@next" enterFromClass="hidden" leaveToClass="hidden" [hideOnOutsideClick]="true">
            <i class="pi pi-bars text-2xl!"></i>
        </a>

        <div class="items-center bg-surface-0 dark:bg-surface-900 grow justify-between hidden lg:flex absolute lg:static w-full left-0 top-full px-12 lg:px-0 z-20 rounded-border">
            <ul class="list-none p-0 m-0 flex lg:items-center select-none flex-col lg:flex-row cursor-pointer gap-8">
                <li>
                    <a (click)="router.navigate(['/landing'], { fragment: 'home' })" pRipple class="px-0 py-4 text-surface-900 dark:text-surface-0 font-medium text-xl">
                        <span>Home</span>
                    </a>
                </li>
                <li>
                    <a (click)="router.navigate(['/landing'], { fragment: 'features' })" pRipple class="px-0 py-4 text-surface-900 dark:text-surface-0 font-medium text-xl">
                        <span>Features</span>
                    </a>
                </li>
                <li>
                    <a (click)="router.navigate(['/landing'], { fragment: 'highlights' })" pRipple class="px-0 py-4 text-surface-900 dark:text-surface-0 font-medium text-xl">
                        <span>Highlights</span>
                    </a>
                </li>
                <li>
                    <a (click)="router.navigate(['/landing'], { fragment: 'pricing' })" pRipple class="px-0 py-4 text-surface-900 dark:text-surface-0 font-medium text-xl">
                        <span>Pricing</span>
                    </a>
                </li>
            </ul>
            <div class="flex border-t lg:border-t-0 border-surface py-4 lg:py-0 mt-4 lg:mt-0 gap-2">
                <button pButton pRipple label="Login" routerLink="/auth/login" [rounded]="true" [text]="true"></button>
                <button pButton pRipple label="Register" routerLink="/auth/login" [rounded]="true"></button>
                <app-floating-configurator [float]="false"/>
            </div>
        </div> `
})
export class TopbarWidget {
    constructor(public router: Router) {}
}


================================================================================
File: pricingwidget.ts
Relative Path: src/app/pages/landing/components/pricingwidget.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/landing/components/pricingwidget.ts
Extension: .ts
Lines: 120
================================================================================

import { Component } from '@angular/core';
import { ButtonModule } from 'primeng/button';
import { DividerModule } from 'primeng/divider';
import { RippleModule } from 'primeng/ripple';

@Component({
    selector: 'pricing-widget',
    imports: [DividerModule, ButtonModule, RippleModule],
    template: `
        <div id="pricing" class="py-6 px-6 lg:px-20 my-2 md:my-6">
            <div class="text-center mb-6">
                <div class="text-surface-900 dark:text-surface-0 font-normal mb-2 text-4xl">Matchless Pricing</div>
                <span class="text-muted-color text-2xl">Amet consectetur adipiscing elit...</span>
            </div>

            <div class="grid grid-cols-12 gap-4 justify-between mt-20 md:mt-0">
                <div class="col-span-12 lg:col-span-4 p-0 md:p-4">
                    <div class="p-4 flex flex-col border-surface-200 dark:border-surface-600 pricing-card cursor-pointer border-2 hover:border-primary duration-300 transition-all" style="border-radius: 10px">
                        <div class="text-surface-900 dark:text-surface-0 text-center my-8 text-3xl">Free</div>
                        <img src="https://primefaces.org/cdn/templates/sakai/landing/free.svg" class="w-10/12 mx-auto" alt="free" />
                        <div class="my-8 flex flex-col items-center gap-4">
                            <div class="flex items-center">
                                <span class="text-5xl font-bold mr-2 text-surface-900 dark:text-surface-0">$0</span>
                                <span class="text-surface-600 dark:text-surface-200">per month</span>
                            </div>
                            <button pButton pRipple label="Get Started" class="p-button-rounded border-0 ml-4 font-light leading-tight bg-blue-500 text-white"></button>
                        </div>
                        <p-divider class="w-full bg-surface-200"></p-divider>
                        <ul class="my-8 list-none p-0 flex text-surface-900 dark:text-surface-0 flex-col px-8">
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">Responsive Layout</span>
                            </li>
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">Unlimited Push Messages</span>
                            </li>
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">50 Support Ticket</span>
                            </li>
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">Free Shipping</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="col-span-12 lg:col-span-4 p-0 md:p-4 mt-6 md:mt-0">
                    <div class="p-4 flex flex-col border-surface-200 dark:border-surface-600 pricing-card cursor-pointer border-2 hover:border-primary duration-300 transition-all" style="border-radius: 10px">
                        <div class="text-surface-900 dark:text-surface-0 text-center my-8 text-3xl">Startup</div>
                        <img src="https://primefaces.org/cdn/templates/sakai/landing/startup.svg" class="w-10/12 mx-auto" alt="startup" />
                        <div class="my-8 flex flex-col items-center gap-4">
                            <div class="flex items-center">
                                <span class="text-5xl font-bold mr-2 text-surface-900 dark:text-surface-0">$1</span>
                                <span class="text-surface-600 dark:text-surface-200">per month</span>
                            </div>
                            <button pButton pRipple label="Get Started" class="p-button-rounded border-0 ml-4 font-light leading-tight bg-blue-500 text-white"></button>
                        </div>
                        <p-divider class="w-full bg-surface-200"></p-divider>
                        <ul class="my-8 list-none p-0 flex text-surface-900 dark:text-surface-0 flex-col px-8">
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">Responsive Layout</span>
                            </li>
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">Unlimited Push Messages</span>
                            </li>
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">50 Support Ticket</span>
                            </li>
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">Free Shipping</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="col-span-12 lg:col-span-4 p-0 md:p-4 mt-6 md:mt-0">
                    <div class="p-4 flex flex-col border-surface-200 dark:border-surface-600 pricing-card cursor-pointer border-2 hover:border-primary duration-300 transition-all" style="border-radius: 10px">
                        <div class="text-surface-900 dark:text-surface-0 text-center my-8 text-3xl">Enterprise</div>
                        <img src="https://primefaces.org/cdn/templates/sakai/landing/enterprise.svg" class="w-10/12 mx-auto" alt="enterprise" />
                        <div class="my-8 flex flex-col items-center gap-4">
                            <div class="flex items-center">
                                <span class="text-5xl font-bold mr-2 text-surface-900 dark:text-surface-0">$5</span>
                                <span class="text-surface-600 dark:text-surface-200">per month</span>
                            </div>
                            <button pButton pRipple label="Try Free" class="p-button-rounded border-0 ml-4 font-light leading-tight bg-blue-500 text-white"></button>
                        </div>
                        <p-divider class="w-full bg-surface-200"></p-divider>
                        <ul class="my-8 list-none p-0 flex text-surface-900 dark:text-surface-0 flex-col px-8">
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">Responsive Layout</span>
                            </li>
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">Unlimited Push Messages</span>
                            </li>
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">50 Support Ticket</span>
                            </li>
                            <li class="py-2">
                                <i class="pi pi-fw pi-check text-xl text-cyan-500 mr-2"></i>
                                <span class="text-xl leading-normal">Free Shipping</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    `
})
export class PricingWidget {}


================================================================================
File: herowidget.ts
Relative Path: src/app/pages/landing/components/herowidget.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/landing/components/herowidget.ts
Extension: .ts
Lines: 26
================================================================================

import { Component } from '@angular/core';
import { ButtonModule } from 'primeng/button';
import { RippleModule } from 'primeng/ripple';

@Component({
    selector: 'hero-widget',
    imports: [ButtonModule, RippleModule],
    template: `
        <div
            id="hero"
            class="flex flex-col pt-6 px-6 lg:px-20 overflow-hidden"
            style="background: linear-gradient(0deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2)), radial-gradient(77.36% 256.97% at 77.36% 57.52%, rgb(238, 239, 175) 0%, rgb(195, 227, 250) 100%); clip-path: ellipse(150% 87% at 93% 13%)"
        >
            <div class="mx-6 md:mx-20 mt-0 md:mt-6">
                <h1 class="text-6xl font-bold text-gray-900 leading-tight dark:!text-gray-700"><span class="font-light block">Eu sem integer</span>eget magna fermentum</h1>
                <p class="font-normal text-2xl leading-normal md:mt-4 text-gray-700 dark:text-gray-700">Sed blandit libero volutpat sed cras. Fames ac turpis egestas integer. Placerat in egestas erat...</p>
                <button pButton pRipple [rounded]="true" type="button" label="Get Started" class="text-xl! mt-8 px-4!"></button>
            </div>
            <div class="flex justify-center md:justify-end">
                <img src="https://primefaces.org/cdn/templates/sakai/landing/screen-1.png" alt="Hero Image" class="w-9/12 md:w-auto" />
            </div>
        </div>
    `
})
export class HeroWidget {}


================================================================================
File: documentation.ts
Relative Path: src/app/pages/documentation/documentation.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/documentation/documentation.ts
Extension: .ts
Lines: 74
================================================================================

import { CommonModule } from '@angular/common';
import { Component } from '@angular/core';

@Component({
    selector: 'app-documentation',
    standalone: true,
    imports: [CommonModule],
    template: `
        <div class="card">
            <div class="font-semibold text-2xl mb-4">Documentation</div>
            <div class="font-semibold text-xl mb-4">Get Started</div>
            <p class="text-lg mb-4">Sakai is an application template for Angular and is distributed as a CLI project. Current versions is Angular v20 with PrimeNG v20. In case CLI is not installed already, use the command below to set it up.</p>
            <pre class="app-code">
<code>npm install -g &#64;angular/cli</code></pre>
            <p class="text-lg mb-4">
                Once CLI is ready in your system, extract the contents of the zip file distribution, cd to the directory, install the libraries from npm and then execute "ng serve" to run the application in your local environment.
            </p>
            <pre class="app-code">
<code>git clone https://github.com/primefaces/sakai-ng
npm install
ng serve</code></pre>

            <p class="text-lg mb-4">The application should run at <i class="bg-highlight px-2 py-1 rounded-border not-italic text-base">http://localhost:4200/</i> to view the application in your local environment.</p>

            <div class="font-semibold text-xl mb-4">Structure</div>
            <p class="text-lg mb-4">Templates consists of a couple folders, demos and layout have been separated so that you can easily identify what is necessary for your application.</p>
            <ul class="leading-normal list-disc pl-8 text-lg mb-4">
                <li><span class="text-primary font-medium">src/app/layout</span>: Main layout files, needs to be present.</li>
                <li><span class="text-primary font-medium">src/app/pages</span>: Demo content like Dashboard.</li>
                <li><span class="text-primary font-medium">src/assets/demo</span>: Assets used in demos</li>
                <li><span class="text-primary font-medium">src/assets/layout</span>: SCSS files of the main layout</li>
            </ul>

            <div class="font-semibold text-xl mb-4">Menu</div>
            <p class="text-lg mb-4">
                Main menu is defined at <span class="bg-highlight px-2 py-1 rounded-border not-italic text-base">src/app/layout/component/app.menu.ts</span> file. Update the
                <i class="bg-highlight px-2 py-1 rounded-border not-italic text-base">model</i> property to define your own menu items.
            </p>

            <div class="font-semibold text-xl mb-4">Layout Service</div>
            <p class="text-lg mb-4">
                <span class="bg-highlight px-2 py-1 rounded-border not-italic text-base">src/app/layout/service/layout.service.ts</span> is a service that manages layout state changes, including dark mode, PrimeNG theme, menu modes, and states.
            </p>

            <div class="font-semibold text-xl mb-4">Tailwind CSS</div>
            <p class="text-lg mb-4">The demo pages are developed with Tailwind CSS however the core application shell uses custom CSS.</p>

            <div class="font-semibold text-xl mb-4">Variables</div>
            <p class="text-lg mb-4">
                CSS variables used in the template are derived from the applied PrimeNG theme. Customize them through the CSS variables in <span class="bg-highlight px-2 py-1 rounded-border not-italic text-base">src/assets/layout/variables</span>.
            </p>
        </div>
    `,
    styles: `
        @media screen and (max-width: 991px) {
            .video-container {
                position: relative;
                width: 100%;
                height: 0;
                padding-bottom: 56.25%;

                iframe {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                }
            }
        }
    `
})
export class Documentation {}


================================================================================
File: empty.ts
Relative Path: src/app/pages/empty/empty.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/empty/empty.ts
Extension: .ts
Lines: 12
================================================================================

import { Component } from '@angular/core';

@Component({
    selector: 'app-empty',
    standalone: true,
    template: ` <div class="card">
        <div class="font-semibold text-xl mb-4">Empty Page</div>
        <p>Use this page to start from scratch and place your custom content.</p>
    </div>`
})
export class Empty {}


================================================================================
File: notfound.ts
Relative Path: src/app/pages/notfound/notfound.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/notfound/notfound.ts
Extension: .ts
Lines: 69
================================================================================

import { Component } from '@angular/core';
import { RouterModule } from '@angular/router';
import { ButtonModule } from 'primeng/button';
import { AppFloatingConfigurator } from '../../layout/component/app.floatingconfigurator';

@Component({
    selector: 'app-notfound',
    standalone: true,
    imports: [RouterModule, AppFloatingConfigurator, ButtonModule],
    template: ` <app-floating-configurator />
        <div class="flex items-center justify-center min-h-screen overflow-hidden">
            <div class="flex flex-col items-center justify-center">
                <svg width="54" height="40" viewBox="0 0 54 40" fill="none" xmlns="http://www.w3.org/2000/svg" class="mb-8 w-32 shrink-0">
                    <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M17.1637 19.2467C17.1566 19.4033 17.1529 19.561 17.1529 19.7194C17.1529 25.3503 21.7203 29.915 27.3546 29.915C32.9887 29.915 37.5561 25.3503 37.5561 19.7194C37.5561 19.5572 37.5524 19.3959 37.5449 19.2355C38.5617 19.0801 39.5759 18.9013 40.5867 18.6994L40.6926 18.6782C40.7191 19.0218 40.7326 19.369 40.7326 19.7194C40.7326 27.1036 34.743 33.0896 27.3546 33.0896C19.966 33.0896 13.9765 27.1036 13.9765 19.7194C13.9765 19.374 13.9896 19.0316 14.0154 18.6927L14.0486 18.6994C15.0837 18.9062 16.1223 19.0886 17.1637 19.2467ZM33.3284 11.4538C31.6493 10.2396 29.5855 9.52381 27.3546 9.52381C25.1195 9.52381 23.0524 10.2421 21.3717 11.4603C20.0078 11.3232 18.6475 11.1387 17.2933 10.907C19.7453 8.11308 23.3438 6.34921 27.3546 6.34921C31.36 6.34921 34.9543 8.10844 37.4061 10.896C36.0521 11.1292 34.692 11.3152 33.3284 11.4538ZM43.826 18.0518C43.881 18.6003 43.9091 19.1566 43.9091 19.7194C43.9091 28.8568 36.4973 36.2642 27.3546 36.2642C18.2117 36.2642 10.8 28.8568 10.8 19.7194C10.8 19.1615 10.8276 18.61 10.8816 18.0663L7.75383 17.4411C7.66775 18.1886 7.62354 18.9488 7.62354 19.7194C7.62354 30.6102 16.4574 39.4388 27.3546 39.4388C38.2517 39.4388 47.0855 30.6102 47.0855 19.7194C47.0855 18.9439 47.0407 18.1789 46.9536 17.4267L43.826 18.0518ZM44.2613 9.54743L40.9084 10.2176C37.9134 5.95821 32.9593 3.1746 27.3546 3.1746C21.7442 3.1746 16.7856 5.96385 13.7915 10.2305L10.4399 9.56057C13.892 3.83178 20.1756 0 27.3546 0C34.5281 0 40.8075 3.82591 44.2613 9.54743Z"
                        fill="var(--primary-color)"
                    />
                    <mask id="mask0_1413_1551" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="8" width="54" height="11">
                        <path d="M27 18.3652C10.5114 19.1944 0 8.88892 0 8.88892C0 8.88892 16.5176 14.5866 27 14.5866C37.4824 14.5866 54 8.88892 54 8.88892C54 8.88892 43.4886 17.5361 27 18.3652Z" fill="var(--primary-color)" />
                    </mask>
                    <g mask="url(#mask0_1413_1551)">
                        <path
                            d="M-4.673e-05 8.88887L3.73084 -1.91434L-8.00806 17.0473L-4.673e-05 8.88887ZM27 18.3652L26.4253 6.95109L27 18.3652ZM54 8.88887L61.2673 17.7127L50.2691 -1.91434L54 8.88887ZM-4.673e-05 8.88887C-8.00806 17.0473 -8.00469 17.0505 -8.00132 17.0538C-8.00018 17.055 -7.99675 17.0583 -7.9944 17.0607C-7.98963 17.0653 -7.98474 17.0701 -7.97966 17.075C-7.96949 17.0849 -7.95863 17.0955 -7.94707 17.1066C-7.92401 17.129 -7.89809 17.1539 -7.86944 17.1812C-7.8122 17.236 -7.74377 17.3005 -7.66436 17.3743C-7.50567 17.5218 -7.30269 17.7063 -7.05645 17.9221C-6.56467 18.3532 -5.89662 18.9125 -5.06089 19.5534C-3.39603 20.83 -1.02575 22.4605 1.98012 24.0457C7.97874 27.2091 16.7723 30.3226 27.5746 29.7793L26.4253 6.95109C20.7391 7.23699 16.0326 5.61231 12.6534 3.83024C10.9703 2.94267 9.68222 2.04866 8.86091 1.41888C8.45356 1.10653 8.17155 0.867278 8.0241 0.738027C7.95072 0.673671 7.91178 0.637576 7.90841 0.634492C7.90682 0.63298 7.91419 0.639805 7.93071 0.65557C7.93897 0.663455 7.94952 0.673589 7.96235 0.686039C7.96883 0.692262 7.97582 0.699075 7.98338 0.706471C7.98719 0.710167 7.99113 0.714014 7.99526 0.718014C7.99729 0.720008 8.00047 0.723119 8.00148 0.724116C8.00466 0.727265 8.00796 0.730446 -4.673e-05 8.88887ZM27.5746 29.7793C37.6904 29.2706 45.9416 26.3684 51.6602 23.6054C54.5296 22.2191 56.8064 20.8465 58.4186 19.7784C59.2265 19.2431 59.873 18.7805 60.3494 18.4257C60.5878 18.2482 60.7841 18.0971 60.9374 17.977C61.014 17.9169 61.0799 17.8645 61.1349 17.8203C61.1624 17.7981 61.1872 17.7781 61.2093 17.7602C61.2203 17.7512 61.2307 17.7427 61.2403 17.7348C61.2452 17.7308 61.2499 17.727 61.2544 17.7233C61.2566 17.7215 61.2598 17.7188 61.261 17.7179C61.2642 17.7153 61.2673 17.7127 54 8.88887C46.7326 0.0650536 46.7357 0.0625219 46.7387 0.0600241C46.7397 0.0592345 46.7427 0.0567658 46.7446 0.0551857C46.7485 0.0520238 46.7521 0.0489887 46.7557 0.0460799C46.7628 0.0402623 46.7694 0.0349487 46.7753 0.0301318C46.7871 0.0204986 46.7966 0.0128495 46.8037 0.00712562C46.818 -0.00431848 46.8228 -0.00808311 46.8184 -0.00463784C46.8096 0.00228345 46.764 0.0378652 46.6828 0.0983779C46.5199 0.219675 46.2165 0.439161 45.7812 0.727519C44.9072 1.30663 43.5257 2.14765 41.7061 3.02677C38.0469 4.79468 32.7981 6.63058 26.4253 6.95109L27.5746 29.7793ZM54 8.88887C50.2691 -1.91433 50.27 -1.91467 50.271 -1.91498C50.2712 -1.91506 50.272 -1.91535 50.2724 -1.9155C50.2733 -1.91581 50.274 -1.91602 50.2743 -1.91616C50.2752 -1.91643 50.275 -1.91636 50.2738 -1.91595C50.2714 -1.91515 50.2652 -1.91302 50.2552 -1.9096C50.2351 -1.90276 50.1999 -1.89078 50.1503 -1.874C50.0509 -1.84043 49.8938 -1.78773 49.6844 -1.71863C49.2652 -1.58031 48.6387 -1.377 47.8481 -1.13035C46.2609 -0.635237 44.0427 0.0249875 41.5325 0.6823C36.215 2.07471 30.6736 3.15796 27 3.15796V26.0151C33.8087 26.0151 41.7672 24.2495 47.3292 22.7931C50.2586 22.026 52.825 21.2618 54.6625 20.6886C55.5842 20.4011 56.33 20.1593 56.8551 19.986C57.1178 19.8993 57.3258 19.8296 57.4735 19.7797C57.5474 19.7548 57.6062 19.7348 57.6493 19.72C57.6709 19.7127 57.6885 19.7066 57.7021 19.7019C57.7089 19.6996 57.7147 19.6976 57.7195 19.696C57.7219 19.6952 57.7241 19.6944 57.726 19.6938C57.7269 19.6934 57.7281 19.693 57.7286 19.6929C57.7298 19.6924 57.7309 19.692 54 8.88887ZM27 3.15796C23.3263 3.15796 17.7849 2.07471 12.4674 0.6823C9.95717 0.0249875 7.73904 -0.635237 6.15184 -1.13035C5.36118 -1.377 4.73467 -1.58031 4.3155 -1.71863C4.10609 -1.78773 3.94899 -1.84043 3.84961 -1.874C3.79994 -1.89078 3.76474 -1.90276 3.74471 -1.9096C3.73469 -1.91302 3.72848 -1.91515 3.72613 -1.91595C3.72496 -1.91636 3.72476 -1.91643 3.72554 -1.91616C3.72593 -1.91602 3.72657 -1.91581 3.72745 -1.9155C3.72789 -1.91535 3.72874 -1.91506 3.72896 -1.91498C3.72987 -1.91467 3.73084 -1.91433 -4.673e-05 8.88887C-3.73093 19.692 -3.72983 19.6924 -3.72868 19.6929C-3.72821 19.693 -3.72698 19.6934 -3.72603 19.6938C-3.72415 19.6944 -3.72201 19.6952 -3.71961 19.696C-3.71482 19.6976 -3.70901 19.6996 -3.7022 19.7019C-3.68858 19.7066 -3.67095 19.7127 -3.6494 19.72C-3.60629 19.7348 -3.54745 19.7548 -3.47359 19.7797C-3.32589 19.8296 -3.11788 19.8993 -2.85516 19.986C-2.33008 20.1593 -1.58425 20.4011 -0.662589 20.6886C1.17485 21.2618 3.74125 22.026 6.67073 22.7931C12.2327 24.2495 20.1913 26.0151 27 26.0151V3.15796Z"
                            fill="var(--primary-color)"
                        />
                    </g>
                </svg>
                <div style="border-radius: 56px; padding: 0.3rem; background: linear-gradient(180deg, color-mix(in srgb, var(--primary-color), transparent 60%) 10%, var(--surface-ground) 30%)">
                    <div class="w-full bg-surface-0 dark:bg-surface-900 py-20 px-8 sm:px-20 flex flex-col items-center" style="border-radius: 53px">
                        <span class="text-primary font-bold text-3xl">404</span>
                        <h1 class="text-surface-900 dark:text-surface-0 font-bold text-3xl lg:text-5xl mb-2">Not Found</h1>
                        <div class="text-surface-600 dark:text-surface-200 mb-8">Requested resource is not available.</div>
                        <a routerLink="/" class="w-full flex items-center py-8 border-surface-300 dark:border-surface-500 border-b">
                            <span class="flex justify-center items-center border-2 border-primary text-primary rounded-border" style="height: 3.5rem; width: 3.5rem">
                                <i class="pi pi-fw pi-table text-2xl!"></i>
                            </span>
                            <span class="ml-6 flex flex-col">
                                <span class="text-surface-900 dark:text-surface-0 lg:text-xl font-medium mb-0 block">Frequently Asked Questions</span>
                                <span class="text-surface-600 dark:text-surface-200 lg:text-xl">Ultricies mi quis hendrerit dolor.</span>
                            </span>
                        </a>
                        <a routerLink="/" class="w-full flex items-center py-8 border-surface-300 dark:border-surface-500 border-b">
                            <span class="flex justify-center items-center border-2 border-primary text-primary rounded-border" style="height: 3.5rem; width: 3.5rem">
                                <i class="pi pi-fw pi-question-circle text-2xl!"></i>
                            </span>
                            <span class="ml-6 flex flex-col">
                                <span class="text-surface-900 dark:text-surface-0 lg:text-xl font-medium mb-0">Solution Center</span>
                                <span class="text-surface-600 dark:text-surface-200 lg:text-xl">Phasellus faucibus scelerisque eleifend.</span>
                            </span>
                        </a>
                        <a routerLink="/" class="w-full flex items-center mb-8 py-8 border-surface-300 dark:border-surface-500 border-b">
                            <span class="flex justify-center items-center border-2 border-primary text-primary rounded-border" style="height: 3.5rem; width: 3.5rem">
                                <i class="pi pi-fw pi-unlock text-2xl!"></i>
                            </span>
                            <span class="ml-6 flex flex-col">
                                <span class="text-surface-900 dark:text-surface-0 lg:text-xl font-medium mb-0">Permission Manager</span>
                                <span class="text-surface-600 dark:text-surface-200 lg:text-xl">Accumsan in nisl nisi scelerisque</span>
                            </span>
                        </a>
                        <p-button label="Go to Dashboard" routerLink="/" />
                    </div>
                </div>
            </div>
        </div>`
})
export class Notfound {}


================================================================================
File: login.ts
Relative Path: src/app/pages/auth/login.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/auth/login.ts
Extension: .ts
Lines: 483
================================================================================

import { ChangeDetectionStrategy, Component, inject } from '@angular/core';
import { FormsModule } from '@angular/forms';
import { Router, RouterModule } from '@angular/router';
import { CommonModule } from '@angular/common';
import { AuthService } from '../../core/services/auth.service';

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [
    CommonModule,
    FormsModule, 
    RouterModule
  ],
  template: `
    <!-- Main container with new background image -->
    <div class="main-container">
      <!-- Login panel with glassmorphism effect -->
      <div class="login-panel">
        <!-- New logo container -->
        <div
          class="logo-container"
          style="
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 2rem;
          "
        >
          <img
            src="assets/logo-evn.png"
            alt="EVN Genco 1 Logo"
            style="height: 80px; margin-right: 0px"
          />
          <div
            style="display: flex; flex-direction: column; margin-left: -4px"
          >
            <span
              style="
                font-family: 'HelveticaBlackVU', sans-serif;
                font-size: 36px;
              "
            >
              <span style="color: #11189d">EVN</span>
              <span style="color: #ed1c24"><i>GENCO1</i></span>
            </span>
            <img
              src="assets/logo-aihub.png"
              alt="AI HUB"
              style="
                height: 36px;
                width: auto;
                margin-top: 4px;
                transform: scaleX(1);
                margin-left: -2px;
              "
            />
          </div>
        </div>
        
        <!-- Welcome text -->
        <div class="welcome-text">
          <h2 class="welcome-title">NỀN TẢNG AI TẬP TRUNG</h2>
          <p class="welcome-subtitle">
            Khai phá sức mạnh của Trí tuệ Nhân tạo để tối ưu hóa công việc và đổi mới sáng tạo
          </p>
        </div>

        <!-- Login form -->
        <form class="login-form" (ngSubmit)="handleLogin()">
          <!-- Username input -->
          <div class="input-group">
            <label for="username">Tài khoản</label>
            <input
              type="text"
              id="username"
              [(ngModel)]="username"
              name="username"
              placeholder="Nhập tên tài khoản của bạn"
              required
            />
          </div>

          <!-- Password input -->
          <div class="input-group">
            <label for="password">Mật khẩu</label>
            <input
              type="password"
              id="password"
              [(ngModel)]="password"
              name="password"
              placeholder="Nhập mật khẩu"
              required
            />
          </div>

          <!-- Remember me checkbox -->
          <div class="remember-me">
            <input
              type="checkbox"
              id="remember"
              [(ngModel)]="checked"
              name="remember"
            />
            <label for="remember">Ghi nhớ đăng nhập</label>
          </div>

          <!-- Error message -->
          <p *ngIf="errorMessage" class="error-message">{{ errorMessage }}</p>

          <!-- Login button -->
          <button type="submit" class="login-button" [disabled]="isLoggingIn">
             <span *ngIf="!isLoggingIn">Đăng Nhập</span>
             <span *ngIf="isLoggingIn">
               <i class="pi pi-spin pi-spinner" style="font-size: 1.2rem"></i>
             </span>
          </button>
        </form>
      </div>
    </div>
  `,
  styles: [
    `
      /* Import Google Font */
      @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

      /* Main container styling */
      .main-container {
        font-family: 'Poppins', sans-serif;
        min-height: 100vh;
        background-color: #000;
        background-size: cover;
        background-position: center;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        overflow: hidden;
        position: relative;
      }

      /* Animated background với hiệu ứng parallax và pan */
      .main-container::after {
        content: '';
        position: absolute;
        top: -10%;
        left: -10%;
        right: -10%;
        bottom: -10%;
        background-image: url('https://plus.unsplash.com/premium_photo-1664302004020-a69eec567967?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8Y29ubmVjdGlvbiUyMGFpJTIwd2l0aCUyMHBlb3BsZXxlbnwwfHwwfHx8MA%3D%3D');
        background-size: cover;
        background-position: center;
        z-index: 0;
        animation: kenBurns 30s ease-in-out infinite;
      }

      /* Ken Burns effect - zoom + pan cho sinh động hơn */
      @keyframes kenBurns {
        0% {
          transform: scale(1) translate(0, 0);
        }
        25% {
          transform: scale(1.15) translate(-2%, -2%);
        }
        50% {
          transform: scale(1.08) translate(2%, 1%);
        }
        75% {
          transform: scale(1.12) translate(-1%, 2%);
        }
        100% {
          transform: scale(1) translate(0, 0);
        }
      }

      /* Dark overlay cho background */
      .main-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, 
          rgba(0, 0, 0, 0.7) 0%, 
          rgba(17, 24, 157, 0.3) 50%, 
          rgba(0, 0, 0, 0.7) 100%);
        z-index: 1;
        animation: gradientShift 15s ease-in-out infinite;
      }

      @keyframes gradientShift {
        0%, 100% {
          opacity: 0.8;
        }
        50% {
          opacity: 0.6;
        }
      }

      /* Login panel với glassmorphism cải tiến - mờ đẹp hơn */
      .login-panel {
        position: relative;
        z-index: 10;
        width: 100%;
        max-width: 450px;
        background: rgba(255, 255, 255, 0.08); /* Giảm opacity để mờ hơn */
        backdrop-filter: blur(20px) saturate(180%); /* Tăng blur và thêm saturation */
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.25); /* Border mờ hơn */
        border-radius: 24px;
        padding: 2.5rem;
        color: #ffffff; /* Đổi màu chữ chính sang trắng */
        box-shadow: 
          0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.1); /* Thêm inner shadow */
        animation: fadeIn 1s ease-out, float 6s ease-in-out infinite 1s;
        transition: all 0.4s ease;
      }

      /* Hover effect cho panel */
      .login-panel:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 
          0 12px 40px rgba(0, 0, 0, 0.4),
          0 0 60px rgba(17, 24, 157, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.15);
        background: rgba(255, 255, 255, 0.12);
      }

      /* Fade in animation */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(30px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      /* Floating animation */
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      /* Welcome text styling */
      .welcome-text {
        text-align: center;
        margin-bottom: 2.5rem;
      }

      .welcome-title {
        font-family: 'Roboto', sans-serif;
        font-size: 1.8rem;
        font-weight: 600;
        margin: 0;
        color: #ffffff;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      .welcome-subtitle {
        font-family: 'Roboto', sans-serif;
        font-size: 1.1rem;
        color: rgba(255, 255, 255, 0.85);
        margin-top: 0.5rem;
        text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);
      }

      /* Login form styling */
      .login-form {
        display: flex;
        flex-direction: column;
      }

      /* Input group styling */
      .input-group {
        margin-bottom: 1.5rem;
        position: relative;
      }

      .input-group label {
        display: block;
        font-size: 0.95rem;
        font-weight: 600; /* Tăng độ đậm */
        color: #ffffff; /* Đổi màu sang trắng */
        margin-bottom: 0.6rem;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3); /* Thêm shadow để nổi bật */
        letter-spacing: 0.3px; /* Khoảng cách chữ */
      }

      .input-group input {
        width: 100%;
        padding: 0.85rem 1.2rem;
        background: rgba(255, 255, 255, 0.1); /* Background mờ hơn */
        border: 1px solid rgba(255, 255, 255, 0.25);
        border-radius: 10px;
        color: #ffffff;
        font-size: 1rem;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
      }

      .input-group input::placeholder {
        color: rgba(255, 255, 255, 0.5);
      }

      .input-group input:focus {
        outline: none;
        border-color: #11189d;
        background: rgba(255, 255, 255, 0.15);
        box-shadow: 
          0 0 0 3px rgba(17, 24, 157, 0.2),
          0 4px 15px rgba(17, 24, 157, 0.3);
        transform: translateY(-2px);
      }

      /* Remember me checkbox styling */
      .remember-me {
        display: flex;
        align-items: center;
        margin-bottom: 2rem;
        font-size: 0.875rem;
      }

      .remember-me input[type='checkbox'] {
        margin-right: 0.5rem;
        appearance: none;
        width: 18px;
        height: 18px;
        border: 1.5px solid rgba(255, 255, 255, 0.5);
        border-radius: 4px;
        cursor: pointer;
        position: relative;
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.1);
      }

      .remember-me input[type='checkbox']:checked {
        background-color: #11189d;
        border-color: #11189d;
        box-shadow: 0 0 10px rgba(17, 24, 157, 0.5);
      }

      .remember-me input[type='checkbox']:checked::after {
        content: '✔';
        font-size: 12px;
        color: #ffffff;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .remember-me label {
        color: rgba(255, 255, 255, 0.9);
        cursor: pointer;
      }

      /* Login button styling */
      .login-button {
        padding: 0.9rem 1rem;
        border: none;
        border-radius: 10px;
        background: linear-gradient(135deg, #11189d, #ed1c24);
        color: #ffffff;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(17, 24, 157, 0.4);
      }

      .login-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transition: left 0.5s ease;
      }

      .login-button:hover::before {
        left: 100%;
      }

      .login-button:hover {
        transform: translateY(-3px);
        box-shadow: 
          0 6px 25px rgba(17, 24, 157, 0.6),
          0 0 30px rgba(237, 28, 36, 0.3);
      }

      .login-button:active {
        transform: translateY(-1px);
      }

      /* Responsive adjustments */
      @media (max-width: 480px) {
        .login-panel {
          padding: 2rem;
        }
        .welcome-title {
          font-size: 1.5rem;
        }
      }

      /* Error message styling */
      .error-message {
        color: #ffffff;
        background: rgba(237, 28, 36, 0.2);
        border: 1px solid rgba(237, 28, 36, 0.5);
        backdrop-filter: blur(10px);
        padding: 0.75rem 1rem;
        border-radius: 8px;
        font-size: 0.875rem;
        margin-bottom: 1.5rem;
        text-align: center;
        animation: shake 0.5s ease-in-out;
      }

      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-10px); }
        75% { transform: translateX(10px); }
      }

      .login-button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .login-button:disabled:hover {
        box-shadow: 0 4px 15px rgba(17, 24, 157, 0.4);
      }
    `,
  ],
  changeDetection: ChangeDetectionStrategy.OnPush,
})
export class Login {
  username = '';
  password = '';
  checked = false;
  isLoggingIn = false;
  errorMessage: string | null = null;

  private authService = inject(AuthService);
  private router = inject(Router);

  handleLogin() {
    if (!this.username || !this.password || this.isLoggingIn) {
      return;
    }

    this.isLoggingIn = true;
    this.errorMessage = null;

    this.authService.login({ username: this.username, password: this.password }).subscribe({
      next: () => {
        this.router.navigate(['/']); 
      },
      error: (err: any) => {
        this.errorMessage = "Tài khoản hoặc mật khẩu không chính xác. Vui lòng thử lại.";
        console.error('Login failed:', err);
        this.isLoggingIn = false;
      },
      complete: () => {
        this.isLoggingIn = false;
      }
    });
  }
}

================================================================================
File: coming-soon.ts
Relative Path: src/app/pages/auth/coming-soon.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/auth/coming-soon.ts
Extension: .ts
Lines: 190
================================================================================

import { Component } from '@angular/core';
import { RouterModule } from '@angular/router';
import { ButtonModule } from 'primeng/button';
import { RippleModule } from 'primeng/ripple';
import { AppFloatingConfigurator } from '../../layout/component/app.floatingconfigurator';

@Component({
    selector: 'app-maintenance',
    standalone: true,
    imports: [ButtonModule, RouterModule, RippleModule, AppFloatingConfigurator],
    template: `
        <app-floating-configurator />
        <div class="main-container">

            <div class="maintenance-card">

                <div class="logo-container">
                    <img src="assets/logo-evn.png" alt="EVN Genco 1 Logo" class="logo-evn" />
                    <div class="logo-text-group">
                        <span class="logo-text">
                            <span class="logo-evn-text">EVN</span>
                            <span class="logo-genco-text"><i>GENCO1</i></span>
                        </span>
                        <img src="assets/logo-aihub.png" alt="AI HUB" class="logo-aihub" />
                    </div>
                </div>

                <div class="maintenance-content">
                    <div class="icon-wrapper">
                        <i class="pi pi-fw pi-spin pi-cog maintenance-icon"></i>
                    </div>
                    <h1 class="maintenance-title">Tính Năng Đang Nâng Cấp</h1>
                    <span class="maintenance-subtitle">
                        Chúng tôi đang triển khai tính năng này và sẽ hoàn thiện trong thời gian sớm nhất.
                        Hãy chờ chúng tôi nhé!
                    </span>
                    <div class="button-wrapper">
                        <p-button label="Quay về Trang chủ" routerLink="/" severity="info" class="go-home-button" />
                    </div>
                </div>

            </div>
        </div>
    `,
    styles: [`
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :host {
            font-family: 'Poppins', sans-serif;
        }

        /* --- NỀN ĐỘNG (Tương tự các trang trước) --- */
        .main-container {
            min-height: 100vh;
            background-color: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            overflow: hidden;
            position: relative;
        }

        .main-container::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('https://plus.unsplash.com/premium_photo-1664302004020-a69eec567967?w=900&auto=format&fit=crop&q=60&ixlib-rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8Y29ubmVjdGlvbiUyMGFpJTIwd2l0aCUyMHBlb3BsZXxlbnwwfHwwfHx8MA%DD');
            background-size: cover;
            background-position: center;
            z-index: 0;
            animation: zoomInOut 20s ease-in-out infinite;
        }

        @keyframes zoomInOut {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .main-container::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1;
        }

        /* --- CARD (Phong cách Glassmorphism) --- */
        .maintenance-card {
            position: relative;
            z-index: 10;
            width: 100%;
            max-width: 600px; /* Tăng nhẹ độ rộng cho phù hợp với ảnh minh họa */
            background: rgba(240, 245, 255, 0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 2.5rem;
            color: #ffffff;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            animation: fadeIn 1s ease-out;
            text-align: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- LOGO --- */
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 2.5rem;
        }
        .logo-evn { height: 80px; }
        .logo-text-group {
            display: flex; flex-direction: column; margin-left: -4px;
        }
        .logo-text {
            font-family: 'HelveticaBlackVU', sans-serif; font-size: 36px;
        }
        .logo-evn-text { color: #11189d; }
        .logo-genco-text { color: #ed1c24; }
        .logo-aihub { height: 36px; width: auto; margin-top: 4px; margin-left: -2px; }
        
        /* --- NỘI DUNG (Chủ đề màu xanh dương) --- */
        .maintenance-content {
             display: flex;
             flex-direction: column;
             align-items: center;
        }

        .icon-wrapper {
            width: 70px;
            height: 70px;
            border: 3px solid #60a5fa; /* blue-400 */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            background: rgba(96, 165, 250, 0.15);
        }

        .maintenance-icon {
            font-size: 2.8rem;
            color: #60a5fa; /* blue-400 */
            /* Animation quay tròn đã có sẵn từ class pi-spin của PrimeIcons */
        }

        .maintenance-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ffffff;
            margin: 0 0 0.75rem 0;
            line-height: 1.2;
        }

        .maintenance-subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.85);
            margin-bottom: 2rem;
            max-width: 450px;
            line-height: 1.6;
        }

        .maintenance-illustration {
            max-width: 80%;
            height: auto;
            margin-bottom: 2rem;
        }

        .button-wrapper { margin-top: 1rem; }
        
        /* --- RESPONSIVE --- */
        @media (max-width: 600px) {
            .maintenance-card { padding: 2rem; }
            .maintenance-title { font-size: 2rem; }
            .maintenance-subtitle { font-size: 1rem; }
            .logo-evn { height: 60px; }
            .logo-text { font-size: 28px; }
            .logo-aihub { height: 28px; }
        }
    `]
})
export class Maintenance { }

================================================================================
File: access.ts
Relative Path: src/app/pages/auth/access.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/auth/access.ts
Extension: .ts
Lines: 208
================================================================================

import { Component } from '@angular/core';
import { RouterModule } from '@angular/router';
import { ButtonModule } from 'primeng/button';
import { RippleModule } from 'primeng/ripple';
import { AppFloatingConfigurator } from '../../layout/component/app.floatingconfigurator';

@Component({
    selector: 'app-access',
    standalone: true,
    imports: [ButtonModule, RouterModule, RippleModule, AppFloatingConfigurator],
    template: `
        <app-floating-configurator />
        <!-- Main container với nền động -->
        <div class="main-container">

            <!-- Card với hiệu ứng Glassmorphism -->
            <div class="access-card">

                <!-- Logo Container -->
                <div class="logo-container">
                    <img src="assets/logo-evn.png" alt="EVN Genco 1 Logo" class="logo-evn" />
                    <div class="logo-text-group">
                        <span class="logo-text">
                            <span class="logo-evn-text">EVN</span>
                            <span class="logo-genco-text"><i>GENCO1</i></span>
                        </span>
                        <img src="assets/logo-aihub.png" alt="AI HUB" class="logo-aihub" />
                    </div>
                </div>

                <!-- Nội dung thông báo -->
                <div class="access-content">
                    <div class="icon-wrapper">
                        <i class="pi pi-fw pi-lock access-icon"></i>
                    </div>
                    <h1 class="access-title">Truy Cập Bị Từ Chối</h1>
                    <span class="access-subtitle">Bạn không có quyền truy cập cần thiết. Vui lòng liên hệ quản trị viên.</span>
                    <img src="assets/access.svg" alt="Access Denied Illustration" class="access-illustration" />
                    <div class="button-wrapper">
                        <p-button label="Quay về Trang chủ" routerLink="/" severity="warn" class="go-home-button" />
                    </div>
                </div>

            </div>
        </div>
    `,
    styles: [`
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :host {
            font-family: 'Roboto', sans-serif;
        }

        /* --- NỀN ĐỘNG (Tương tự trang Login & Error) --- */
        .main-container {
            min-height: 100vh;
            background-color: #000;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            overflow: hidden;
            position: relative;
        }

        .main-container::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('https://plus.unsplash.com/premium_photo-1664302004020-a69eec567967?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8Y29ubmVjdGlvbiUyMGFpJTIwd2l0aCUyMHBlb3BsZXxlbnwwfHwwfHx8MA%3D%3D');
            background-size: cover;
            background-position: center;
            z-index: 0;
            animation: zoomInOut 20s ease-in-out infinite;
        }

        @keyframes zoomInOut {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .main-container::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1;
        }

        /* --- CARD (Phong cách Glassmorphism) --- */
        .access-card {
            position: relative;
            z-index: 10;
            width: 100%;
            max-width: 550px;
            background: rgba(240, 245, 255, 0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 2.5rem;
            color: #ffffff;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            animation: fadeIn 1s ease-out;
            text-align: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- LOGO --- */
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 2.5rem;
        }
        .logo-evn { height: 80px; }
        .logo-text-group {
            display: flex;
            flex-direction: column;
            margin-left: -4px;
        }
        .logo-text {
            font-family: 'HelveticaBlackVU', sans-serif;
            font-size: 36px;
        }
        .logo-evn-text { color: #11189d; }
        .logo-genco-text { color: #ed1c24; }
        .logo-aihub {
            height: 36px;
            width: auto;
            margin-top: 4px;
            margin-left: -2px;
        }
        
        /* --- NỘI DUNG (Chủ đề màu cam) --- */
        .access-content {
             display: flex;
             flex-direction: column;
             align-items: center;
        }

        .icon-wrapper {
            width: 70px;
            height: 70px;
            border: 3px solid #f97316; /* orange-500 */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            background: rgba(249, 115, 22, 0.15);
        }

        .access-icon {
            font-size: 2.5rem;
            color: #f97316; /* orange-500 */
        }

        .access-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ffffff;
            margin: 0 0 0.75rem 0;
            line-height: 1.2;
        }

        .access-subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
            max-width: 400px;
        }

        .access-illustration {
            max-width: 80%;
            height: auto;
            margin-bottom: 2rem;
        }

        .button-wrapper {
            margin-top: 1rem;
        }
        
        /* --- RESPONSIVE --- */
        @media (max-width: 600px) {
            .access-card {
                padding: 2rem;
            }
            .access-title {
                font-size: 2rem;
            }
            .access-subtitle {
                font-size: 1rem;
            }
            .logo-evn { height: 60px; }
            .logo-text { font-size: 28px; }
            .logo-aihub { height: 28px; }
        }
    `]
})
export class Access { }

================================================================================
File: error.ts
Relative Path: src/app/pages/auth/error.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/auth/error.ts
Extension: .ts
Lines: 202
================================================================================

import { Component } from '@angular/core';
import { RouterModule } from '@angular/router';
import { ButtonModule } from 'primeng/button';
import { RippleModule } from 'primeng/ripple';
import { AppFloatingConfigurator } from '../../layout/component/app.floatingconfigurator';

@Component({
    selector: 'app-error',
    imports: [ButtonModule, RippleModule, RouterModule, AppFloatingConfigurator],
    standalone: true,
    template: `
        <app-floating-configurator />
        <div class="main-container">

            <div class="error-card">

                <div class="logo-container">
                    <img src="assets/logo-evn.png" alt="EVN Genco 1 Logo" class="logo-evn" />
                    <div class="logo-text-group">
                        <span class="logo-text">
                            <span class="logo-evn-text">EVN</span>
                            <span class="logo-genco-text"><i>GENCO1</i></span>
                        </span>
                        <img src="assets/logo-aihub.png" alt="AI HUB" class="logo-aihub" />
                    </div>
                </div>

                <div class="error-content">
                    <img src="assets/error.svg" alt="Error Illustration" class="error-illustration" />
                    <div class="button-wrapper">
                        <p-button label="Quay về Trang chủ" routerLink="/" severity="danger" class="go-home-button" />
                    </div>
                </div>

            </div>
        </div>
    `,
    styles: [`
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :host {
            font-family: 'Poppins', sans-serif;
        }

        /* --- NỀN ĐỘNG (Lấy từ trang Login) --- */
        .main-container {
            min-height: 100vh;
            background-color: #000;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            overflow: hidden;
            position: relative;
        }

        .main-container::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('https://plus.unsplash.com/premium_photo-1664302004020-a69eec567967?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8Y29ubmVjdGlvbiUyMGFpJTIwd2l0aCUyMHBlb3BsZXxlbnwwfHwwfHx8MA%3D%3D');
            background-size: cover;
            background-position: center;
            z-index: 0;
            animation: zoomInOut 20s ease-in-out infinite;
        }

        @keyframes zoomInOut {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .main-container::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1;
        }

        /* --- CARD LỖI (Phong cách Glassmorphism) --- */
        .error-card {
            position: relative;
            z-index: 10;
            width: 100%;
            max-width: 550px;
            background: rgba(240, 245, 255, 0.2); /* Nền kính mờ */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 2.5rem;
            color: #ffffff; /* Chữ màu trắng để nổi bật trên nền tối */
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            animation: fadeIn 1s ease-out;
            text-align: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- LOGO (Lấy từ trang Login và tinh chỉnh) --- */
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 2.5rem; /* Tăng khoảng cách với nội dung lỗi */
        }
        .logo-evn {
            height: 80px;
            margin-right: 0px;
        }
        .logo-text-group {
            display: flex;
            flex-direction: column;
            margin-left: -4px;
        }
        .logo-text {
            font-family: 'HelveticaBlackVU', sans-serif; /* Cần đảm bảo font này được import */
            font-size: 36px;
        }
        .logo-evn-text { color: #11189d; } /* Tạm thời giữ màu này để nhận diện thương hiệu */
        .logo-genco-text { color: #ed1c24; }
        .logo-aihub {
            height: 36px;
            width: auto;
            margin-top: 4px;
            margin-left: -2px;
        }
        
        /* --- NỘI DUNG LỖI (Tinh chỉnh màu sắc) --- */
        .error-content {
             display: flex;
             flex-direction: column;
             align-items: center;
        }

        .icon-wrapper {
            width: 70px;
            height: 70px;
            border: 3px solid #f87171; /* red-400 */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            background: rgba(248, 113, 113, 0.15);
        }

        .error-icon {
            font-size: 2.5rem;
            color: #f87171; /* red-400 */
        }

        .error-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ffffff;
            margin: 0 0 0.75rem 0;
            line-height: 1.2;
        }

        .error-subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
            max-width: 400px;
        }

        .error-illustration {
            max-width: 80%;
            height: auto;
            margin-bottom: 2rem;
        }

        .button-wrapper {
            margin-top: 1rem;
        }
        
        /* --- RESPONSIVE --- */
        @media (max-width: 600px) {
            .error-card {
                padding: 2rem;
            }
            .error-title {
                font-size: 2rem;
            }
            .error-subtitle {
                font-size: 1rem;
            }
            .logo-evn { height: 60px; }
            .logo-text { font-size: 28px; }
            .logo-aihub { height: 28px; }
        }
    `]
})
export class Error { }

================================================================================
File: auth.routes.ts
Relative Path: src/app/pages/auth/auth.routes.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/auth/auth.routes.ts
Extension: .ts
Lines: 13
================================================================================

import { Routes } from '@angular/router';
import { Access } from './access';
import { Login } from './login';
import { Error } from './error';
import { Maintenance } from './coming-soon';

export default [
    { path: 'access', component: Access },
    { path: 'error', component: Error },
    { path: 'login', component: Login },
    { path: 'coming-soon', component: Maintenance }
] as Routes;


================================================================================
File: uikit.routes.ts
Relative Path: src/app/pages/uikit/uikit.routes.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/uikit.routes.ts
Extension: .ts
Lines: 48
================================================================================

import { Routes } from '@angular/router';
import { ChatbotComponent } from './chatbot-ai';
import { EmailComposerComponent } from './soan-email';
import { AihubLandingPage } from './aihub-landing';
import { DualChatComponent } from './ai-dual-chat';
import { SpeechWriterComponent } from './speech-writer.component';
import { PromptEnhancerComponent } from './prompt-enhancer';
import { InnovationToolComponent } from './innovation_tool';
import { InitiativeWriterComponent } from './initiative-writer';
import { TextSummarizerComponent } from './text-summarizer';
import { DocumentTranslatorComponent } from './document-translator';
import { AiToolHubComponent } from './ai-tool-hub';
import { UserManagementComponent } from './user-management';
import { QuotaSettingsComponent } from './quota-settings';
import { ApiManagementComponent } from './api-management';
import { FeedbackPageComponent } from './feedback';
import { InnovationIdeasComponent } from './innovation-ideas';
import {AIMarketplaceShellComponent,AiModelsPageComponent,ApiKeysPageComponent,AiUsagePageComponent,} from './ai-marketplace';
import { AppDashboardComponent } from './app.dashboard';


export default [
    {path: 'ai-marketplace',component: AIMarketplaceShellComponent,
        children: [
        { path: '', pathMatch: 'full', redirectTo: 'models' },
        { path: 'models', component: AiModelsPageComponent },
        { path: 'api-keys', component: ApiKeysPageComponent },
        { path: 'usage', component: AiUsagePageComponent },],
    },
    { path: 'app.dashboard', data: { breadcrumb: 'Báo cáo' }, component: AppDashboardComponent },
    { path: 'innovation-ideas', data: { breadcrumb: 'Đề xuất ý tưởng ĐMST' }, component: InnovationIdeasComponent },
    { path: 'feedback', data: { breadcrumb: 'Đánh giá Góp ý' }, component: FeedbackPageComponent },
    { path: 'api-management', data: { breadcrumb: 'Quản lý API' }, component: ApiManagementComponent },
    { path: 'quota-settings', data: { breadcrumb: 'Thiết lập định mức' }, component: QuotaSettingsComponent },
    { path: 'user-management', data: { breadcrumb: 'Người dùng' }, component: UserManagementComponent },
    { path: 'ai-tool-hub', data: { breadcrumb: 'Khám phá công cụ AI' }, component: AiToolHubComponent },
    { path: 'document-translator', data: { breadcrumb: 'Dịch văn bản' }, component: DocumentTranslatorComponent },
    { path: 'text-summarizer', data: { breadcrumb: 'Tóm tắt văn bản' }, component: TextSummarizerComponent },
    { path: 'initiative-writer', data: { breadcrumb: 'Hỗ trợ viết sáng kiến' }, component: InitiativeWriterComponent },
    { path: 'innovation_tool', data: { breadcrumb: 'Tư duy Đổi mới sáng tạo' }, component: InnovationToolComponent },
    { path: 'prompt-enhancer', data: { breadcrumb: 'Prompt Enhancement' }, component: PromptEnhancerComponent },
    { path: 'speech-writer.component', data: { breadcrumb: 'Viết bài phát biểu' }, component: SpeechWriterComponent },
    { path: 'soan-email', data: { breadcrumb: 'Soạn Email' }, component: EmailComposerComponent },
    { path: 'ai-dual-chat', data: { breadcrumb: 'Dual Chatbot' }, component: DualChatComponent },
    { path: 'aihub-landing', data: { breadcrumb: 'AI HUB Landing' }, component: AihubLandingPage },
    { path: 'chatbot-ai', data: { breadcrumb: 'Chatbot AI' }, component: ChatbotComponent },
    { path: '**', redirectTo: '/notfound' }
] as Routes;

================================================================================
File: user-management.ts
Relative Path: src/app/pages/uikit/user-management.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/user-management.ts
Extension: .ts
Lines: 330
================================================================================

import { Component, OnInit, inject, ViewChild, ElementRef } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { Table, TableModule } from 'primeng/table';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { TagModule } from 'primeng/tag';
import { AvatarModule } from 'primeng/avatar';
import { SelectModule } from 'primeng/select';
import { DialogModule } from 'primeng/dialog';
import { FileUploadModule } from 'primeng/fileupload';
import { ConfirmDialogModule } from 'primeng/confirmdialog';
import { ConfirmationService, MessageService } from 'primeng/api';
import { ProgressSpinnerModule } from 'primeng/progressspinner';
import { IconFieldModule } from 'primeng/iconfield';
import { InputIconModule } from 'primeng/inputicon';
import { TooltipModule } from 'primeng/tooltip';
import { PasswordModule } from 'primeng/password';

import { UserService, User, UserStatus } from '../../core/services/user.service';
import { QuotaProfileService, QuotaProfile } from '../../core/services/quota-profile.service';

@Component({
  selector: 'app-user-management',
  standalone: true,
  imports: [
    CommonModule, FormsModule,
    TableModule, ButtonModule, InputTextModule, TagModule, AvatarModule,
    SelectModule, DialogModule, FileUploadModule, ConfirmDialogModule, 
    ProgressSpinnerModule, IconFieldModule, InputIconModule, TooltipModule,
    PasswordModule
  ],
  providers: [ConfirmationService, MessageService],
  template: `
  <div class="page p-4">
    <div class="card">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold">Quản trị người dùng</h2>
        <button pButton label="Thêm người dùng" icon="pi pi-plus" 
          (click)="openNewUserDialog()"></button>
      </div>

      <p-table #dt
        [value]="users"
        dataKey="id"
        [rows]="10"
        [rowHover]="true"
        [showGridlines]="true"
        [paginator]="true"
        [rowsPerPageOptions]="[10,25,50]"
        [globalFilterFields]="['username', 'fullName', 'email', 'phone', 'donvi', 'phongban', 'vitri', 'role']"
        [loading]="loading"
        styleClass="p-datatable-sm">

        <ng-template pTemplate="caption">
          <div class="flex justify-between items-center flex-column sm:flex-row gap-3">
            <button pButton label="Xóa bộ lọc" class="p-button-outlined" 
              icon="pi pi-filter-slash" (click)="clearFilters(dt)"></button>

            <p-iconfield iconPosition="left" class="ml-auto">
              <p-inputicon>
                <i class="pi pi-search"></i>
              </p-inputicon>
              <input #globalSearch pInputText type="text" 
                (input)="onGlobalFilter(dt, $event)" 
                placeholder="Tìm kiếm..." 
                class="w-full sm:w-80"/>
            </p-iconfield>
          </div>
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <th style="width: 5rem">Ảnh</th>
            <th style="min-width: 10rem" pSortableColumn="username">Username</th>
            <th style="min-width: 12rem" pSortableColumn="fullName">Họ và tên</th>
            <th style="min-width: 10rem">Đơn vị</th>
            <th style="min-width: 10rem">Phòng/Ban</th>
            <th style="min-width: 10rem">Vị trí</th>
            <th style="min-width: 8rem">Vai trò</th>
            <th style="min-width: 12rem">Email</th>
            <th style="min-width: 10rem">SĐT</th>
            <th style="min-width: 12rem" pSortableColumn="quotaProfileId">Profile Định Mức</th>
            <th style="min-width: 10rem">Trạng thái</th>
            <th style="width: 9rem; text-align: center">Thao tác</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-user>
          <tr>
            <td>
              <p-avatar [image]="user.avatar || 'assets/logo-evn.png'" shape="circle" size="large"></p-avatar>
            </td>
            <td><span class="font-medium">{{ user.username }}</span></td>
            <td><span class="font-semibold">{{ user.fullName }}</span></td>
            <td><span class="text-sm">{{ user.donvi }}</span></td>
            <td><span class="text-sm">{{ user.phongban }}</span></td>
            <td><span class="text-sm">{{ user.vitri }}</span></td>
            <td><p-tag [value]="user.role" severity="secondary"></p-tag></td>
            <td><span class="text-sm">{{ user.email }}</span></td>
            <td><span class="text-sm">{{ user.phone }}</span></td>
            <td>
              <span class="font-medium">{{ getProfileName(user.quotaProfileId) }}</span>
            </td>
            <td>
              <p-tag [value]="user.status === 'active' ? 'Đang dùng' : 'Ngừng'"
                [severity]="user.status === 'active' ? 'success' : 'danger'"></p-tag>
            </td>
            <td>
              <div class="flex justify-center gap-1">
                <button pButton icon="pi pi-pencil" [rounded]="true" [text]="true" size="small"
                  severity="info" pTooltip="Sửa" (click)="editUser(user)"></button>
                <button pButton icon="pi pi-ban" [rounded]="true" [text]="true" size="small"
                  severity="secondary" pTooltip="Tạm ngừng" *ngIf="user.status === 'active'"
                  (click)="confirmInactive(user)"></button>
                <button pButton icon="pi pi-trash" [rounded]="true" [text]="true" size="small"
                  severity="danger" pTooltip="Xóa" (click)="confirmDelete(user)"></button>
              </div>
            </td>
          </tr>
        </ng-template>
        <!-- ... các template empty, loading giữ nguyên ... -->
      </p-table>
    </div>
  </div>

  <!-- Dialog thêm/sửa -->
  <p-dialog 
    [header]="editingUser ? 'Chỉnh sửa người dùng' : 'Thêm người dùng'"
    [(visible)]="showUserDialog" [modal]="true" [style]="{width:'700px'}" [draggable]="false">
    
    <!-- ... phần avatar, thông tin cá nhân, công việc, liên hệ giữ nguyên ... -->
    <div class="flex flex-column items-center gap-3 mb-4">
        <p-avatar [image]="formData.avatar || 'assets/logo-evn.png'" shape="circle" size="xlarge" styleClass="w-20 h-20 text-2xl shadow-md"></p-avatar>
        <p-fileUpload name="avatar" mode="basic" chooseLabel="Chọn ảnh" accept="image/*" [auto]="true" customUpload (uploadHandler)="onAvatarSelect($event)"></p-fileUpload>
    </div>
    <div class="group">
        <h3>Thông tin cá nhân</h3>
        <div class="grid grid-cols-2 gap-3">
            <div><label>Username *</label><input pInputText [(ngModel)]="formData.username" class="w-full"/></div>
            <div><label>Họ và tên *</label><input pInputText [(ngModel)]="formData.fullName" class="w-full"/></div>
        </div>
    </div>
    <div class="group" *ngIf="!editingUser">
        <h3>Bảo mật</h3>
        <div><label for="password">Mật khẩu *</label><p-password [(ngModel)]="formData.password" [toggleMask]="true" styleClass="w-full" inputStyleClass="w-full"></p-password></div>
    </div>
    <div class="group">
        <h3>Công việc</h3>
        <div class="grid grid-cols-2 gap-3">
            <div><label>Đơn vị</label><input pInputText [(ngModel)]="formData.donvi" class="w-full"/></div>
            <div><label>Phòng/Ban</label><input pInputText [(ngModel)]="formData.phongban" class="w-full"/></div>
            <div><label>Vị trí</label><input pInputText [(ngModel)]="formData.vitri" class="w-full"/></div>
            <div><label>Vai trò</label><input pInputText [(ngModel)]="formData.role" class="w-full"/></div>
        </div>
    </div>
    <div class="group">
        <h3>Liên hệ</h3>
        <div class="grid grid-cols-2 gap-3">
            <div><label>Email *</label><input pInputText type="email" [(ngModel)]="formData.email" class="w-full"/></div>
            <div><label>Số điện thoại</label><input pInputText [(ngModel)]="formData.phone" class="w-full"/></div>
        </div>
    </div>

    <div class="group last">
      <h3>Hệ thống</h3>
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label>Profile Định Mức</label>
          <p-select [options]="profileOptions" [(ngModel)]="formData.quotaProfileId"
            placeholder="Chọn profile" optionLabel="label" optionValue="value" 
            appendTo="body" class="w-full">
          </p-select>
        </div>
        <div>
          <label>Trạng thái</label>
          <p-select [options]="statusOptions" [(ngModel)]="formData.status" 
            optionLabel="label" optionValue="value" appendTo="body" class="w-full">
          </p-select>
        </div>
      </div>
    </div>

    <ng-template pTemplate="footer">
      <button pButton label="Hủy" class="p-button-text" (click)="showUserDialog=false"></button>
      <button pButton label="Lưu" severity="primary" [disabled]="saving" (click)="saveUser()"></button>
    </ng-template>
  </p-dialog>

  <p-confirmDialog [dismissableMask]="true"></p-confirmDialog>
  `,
  styles: [`
    .group { margin-bottom: 1.25rem; padding-bottom: 1rem; border-bottom: 1px solid var(--p-surface-200); }
    .group.last { border-bottom: 0; }
    .group h3 { font-size: 0.95rem; font-weight: 600; margin-bottom: 0.75rem; }
    .group label { display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.375rem; }
  `]
})
export class UserManagementComponent implements OnInit {
  @ViewChild('globalSearch') globalSearch!: ElementRef;

  private userSvc = inject(UserService);
  private quotaSvc = inject(QuotaProfileService);
  private confirm = inject(ConfirmationService);

  users: User[] = [];
  quotaProfiles: QuotaProfile[] = [];
  profileOptions: { label: string, value: string }[] = [];
  
  loading = false;
  saving = false;

  showUserDialog = false;
  editingUser: User | null = null;
  formData: Partial<User> & { password?: string } = {};

  statusOptions = [
    { label: 'Đang sử dụng', value: 'active' as UserStatus },
    { label: 'Ngừng', value: 'inactive' as UserStatus }
  ];

  ngOnInit(): void { 
    this.fetchUsers(); 
    this.fetchQuotaProfiles();
  }

  fetchUsers() {
    this.loading = true;
    this.userSvc.list().subscribe({
      next: (res) => { this.users = res; this.loading = false; },
      error: () => { this.loading = false; }
    });
  }
  
  fetchQuotaProfiles() {
    this.quotaSvc.list().subscribe(profiles => {
      this.quotaProfiles = profiles;
      this.profileOptions = profiles.map(p => ({ label: p.name, value: p.id }));
    });
  }

  emptyUser(): Partial<User> & { password?: string } {
    return { 
      username: '', 
      password: '',
      fullName: '', 
      donvi: '', 
      phongban: '', 
      vitri: '',
      role: '', 
      email: '', 
      phone: '', 
      status: 'active', 
      avatar: '',
      quotaProfileId: undefined
    };
  }

  openNewUserDialog() {
    this.editingUser = null;
    this.formData = this.emptyUser();
    this.showUserDialog = true;
  }

  editUser(u: User) {
    this.editingUser = u;
    this.formData = { ...u };
    this.showUserDialog = true;
  }

  saveUser() {
    this.saving = true;
    if (this.editingUser) {
      this.userSvc.update(this.editingUser.id, this.formData).subscribe({
        next: () => { this.saving = false; this.showUserDialog = false; this.fetchUsers(); },
        error: () => { this.saving = false; }
      });
    } else {
      const { ...payload } = this.formData;
      this.userSvc.add(payload as Omit<User, 'id'>).subscribe({
        next: () => { this.saving = false; this.showUserDialog = false; this.fetchUsers(); },
        error: () => { this.saving = false; }
      });
    }
  }

  confirmInactive(user: User) {
    this.confirm.confirm({
      header: 'Tạm ngừng người dùng',
      message: `Bạn có chắc muốn tạm ngừng hoạt động của <strong>${user.fullName}</strong>?`,
      accept: () => this.userSvc.setStatus(user.id, 'inactive').subscribe(() => this.fetchUsers())
    });
  }

  confirmDelete(user: User) {
    this.confirm.confirm({
      header: 'Xóa người dùng',
      message: `Bạn có chắc muốn xóa <strong>${user.fullName}</strong>?`,
      accept: () => this.userSvc.delete(user.id).subscribe(() => this.fetchUsers())
    });
  }

  onAvatarSelect(event: any) {
    const file = event.files?.[0];
    if (file) {
      this.userSvc.uploadAvatar(file).subscribe(urlOrB64 => {
        this.formData.avatar = urlOrB64;
      });
    }
  }

  onGlobalFilter(table: Table, event: Event) {
    table.filterGlobal((event.target as HTMLInputElement).value, 'contains');
  }

  clearFilters(table: Table) {
    table.clear();
    if (this.globalSearch) {
      this.globalSearch.nativeElement.value = '';
    }
  }

  getProfileName(profileId?: string): string {
    if (!profileId) return 'Chưa gán';
    const profile = this.quotaProfiles.find(p => p.id === profileId);
    return profile ? profile.name : 'Không rõ';
  }
}



================================================================================
File: speech-writer.component.ts
Relative Path: src/app/pages/uikit/speech-writer.component.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/speech-writer.component.ts
Extension: .ts
Lines: 163
================================================================================

import { Component, OnInit, inject, OnDestroy, ViewChild } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { TextareaModule } from 'primeng/textarea';
import { TooltipModule } from 'primeng/tooltip';
import { Popover, PopoverModule } from 'primeng/popover';
import { TagModule } from 'primeng/tag';
import { FileUploadModule } from 'primeng/fileupload';
import { Subscription } from 'rxjs';

import { AiModelService } from '../../core/services/ai-model.service';
import { AICategory, AIModel } from '../../core/models/ai-models.model';
import { AiModelSelectorComponent } from '../../core/shared/components/ai-model-selector.component';
import { AuthService } from '../../core/services/auth.service'; // **Import AuthService**

interface FilterOption {
  label: string;
  selected: boolean;
}

@Component({
  selector: 'app-speech-writer',
  standalone: true,
  imports: [
    CommonModule, FormsModule, ButtonModule, InputTextModule, TextareaModule,
    TooltipModule, PopoverModule, TagModule, FileUploadModule, AiModelSelectorComponent
  ],
  template: `
    <div class="page h-full bg-surface-50 dark:bg-surface-900">
      <div class="col left border-r border-surface-200 dark:border-surface-700">
        <div class="container">
          <div class="header"><h1 class="title">Viết bài phát biểu</h1></div>

          <div class="field"><label class="label">Chức vụ, vai trò người phát biểu</label><input type="text" pInputText [(ngModel)]="speakerRole" placeholder="Ví dụ: Tổng Giám đốc EVNGENCO1" class="control" /></div>
          <div class="field"><label class="label">Tên sự kiện <span class="req">*</span></label><input type="text" pInputText [(ngModel)]="eventName" placeholder="Ví dụ: Hội nghị tổng kết năm 2025" class="control" [class.ng-invalid]="showError && !eventName" /><small *ngIf="showError && !eventName" class="error">Tên sự kiện là bắt buộc</small></div>
          <div class="field"><label class="label">Bối cảnh, chủ trương, hiện trạng</label><textarea pInputTextarea [(ngModel)]="context" placeholder="Căn cứ nghị quyết, quyết định..." rows="2" class="control textarea"></textarea></div>
          <div class="field"><label class="label">Thông điệp truyền tải <span class="req">*</span></label><textarea pInputTextarea [(ngModel)]="messageToConvey" placeholder="Kêu gọi hợp tác, công bố chính sách mới..." rows="2" class="control textarea" [class.ng-invalid]="showError && !messageToConvey"></textarea><small *ngIf="showError && !messageToConvey" class="error">Thông điệp là bắt buộc</small></div>
          <div class="field"><label class="label">Đối tượng khán giả</label><input type="text" pInputText [(ngModel)]="audience" placeholder="Đối tác kinh doanh, nhân viên công ty..." class="control" /></div>
          <div class="field"><label class="label">Điểm nhấn cần đưa vào</label><textarea pInputTextarea [(ngModel)]="keyPoints" placeholder="Số liệu, thành tựu, kế hoạch cụ thể..." rows="1" class="control textarea"></textarea></div>
          <div class="field"><label class="label">Phong cách phát biểu</label><div class="chips"><button *ngFor="let s of speechStyles" [class]="getFilterButtonClass(s.selected)" (click)="toggleFilter(speechStyles, s)">{{s.label}}</button></div></div>
          <div class="field"><label class="label">Độ dài (tùy chọn)</label><input type="text" pInputText [(ngModel)]="speechLength" placeholder="Khoảng 800 từ" class="control" /></div>
          <div class="field"><label class="label">Tệp đính kèm (nếu có)</label><div class="grid grid-cols-2 gap-2"><p-fileUpload mode="basic" name="infoFiles[]" chooseLabel="Tệp thông tin" chooseIcon="pi pi-info-circle" [auto]="true" class="w-full"></p-fileUpload><p-fileUpload mode="basic" name="sampleFiles[]" chooseLabel="Tệp mẫu" chooseIcon="pi pi-file" [auto]="true" class="w-full"></p-fileUpload></div></div>
          <div class="actions"><button pButton class="btn btn-ghost" (click)="modelPopover.toggle($event)"><span class="inline-flex items-center gap-2"><img [src]="selectedModel.icon" [alt]="selectedModel.name" class="w-5 h-5" *ngIf="selectedModel.icon"/><span>{{ selectedModel.name }}</span></span><i class="pi pi-chevron-down caret"></i></button><button pButton label="Viết bài phát biểu" icon="pi pi-sparkles" severity="primary" class="btn btn-primary" (click)="generateSpeech()"></button></div>
        </div>
      </div>
      <div class="col"><div class="container"><div *ngIf="!generatedSpeech" class="empty"><i class="pi pi-microphone icon"></i><p>Nội dung bài phát biểu sẽ được hiển thị tại đây.</p></div><div *ngIf="generatedSpeech" class="w-full max-w-3xl mx-auto"><div class="card"><div class="card-head"><h3>Bài phát biểu đã tạo</h3><div class="tools"><button pButton icon="pi pi-copy" [text]="true" [rounded]="true" severity="secondary" class="icon-btn" pTooltip="Sao chép" tooltipPosition="top" (click)="copyContent()"></button><button pButton icon="pi pi-download" [text]="true" [rounded]="true" severity="secondary" class="icon-btn" pTooltip="Tải xuống" tooltipPosition="top"></button><button pButton icon="pi pi-refresh" [text]="true" [rounded]="true" severity="secondary" class="icon-btn" pTooltip="Tạo lại" tooltipPosition="top" (click)="regenerateContent()"></button></div></div><div class="card-body"><div><div class="email-body">{{generatedSpeech}}</div></div></div></div></div></div></div>
      <p-popover #modelPopover [appendTo]="'body'" [style]="{width:'400px', padding:'0'}" styleClass="model-op"><ng-template pTemplate="content"><app-ai-model-selector [popoverRef]="modelPopover" (modelSelected)="onModelSelected($event)"></app-ai-model-selector></ng-template></p-popover>
    </div>
  `,
  styles: [
    `
      :host{
        --space-1: 6px; --space-2: 8px; --space-3: 12px; --space-4: 14px; --space-5: 16px; --radius: 10px;
        --fs-base: clamp(14px, 0.8vw + 9px, 15px); --fs-btn: 0.875rem; --fs-label: 0.92rem; --fs-small: 0.75rem; --fs-h1: 1.02rem;
        --lh: 1.55; --lh-tight: 1.4;
      }
      .page{ display:grid; grid-template-columns: 1fr 1fr; }
      .col{ overflow:auto; }
      .left{ background: var(--p-surface-0); border-right: 1px solid var(--p-surface-200); }
      .container{ padding: clamp(12px, 1.6vw, 18px); max-width: 720px; margin: 0 auto; }
      .header{ margin-bottom: var(--space-5); }
      .title{ font-size: var(--fs-h1); font-weight: 600; margin:0; color: var(--p-surface-900); line-height:1.2; }
      .field{ margin-bottom: var(--space-3); }
      .label{ display:block; margin-bottom: .5rem; font-weight: 600; font-size: var(--fs-label); color: var(--p-surface-700); }
      .req{ color:#ef4444; }
      .control{ width:100%; padding: 10px 12px; border-radius: var(--radius); font-size: var(--fs-base); line-height: var(--lh); }
      .textarea{ min-height: 80px; resize: none; font-size: 0.93rem; line-height: var(--lh); }
      .control::placeholder{ font-size: 0.9rem; color: var(--p-surface-500); }
      .error{ color:#ef4444; font-size: var(--fs-small); margin-top: 4px; display:block; }
      .chips{ display:flex; flex-wrap:wrap; gap: var(--space-2); }
      .chip{ padding: 5px 10px; border-radius: 9999px; font-weight: 500; font-size: var(--fs-btn); border: 1px solid var(--p-surface-300); background:#fff; color: var(--p-surface-700); line-height: 1.35; transition: .15s ease; }
      .chip--active{ background: var(--p-primary-50, #eef2ff); color: var(--p-primary-700, #3b82f6); border-color: var(--p-primary-200, #c7d2fe); }
      .actions{ display:flex; justify-content:space-between; align-items:center; gap: var(--space-2); padding-top: var(--space-3); margin-top: var(--space-2); border-top: 1px solid var(--p-surface-200); }
      .btn{ font-size: var(--fs-btn); padding: 7px 12px; border-radius: 8px; }
      .btn-ghost{ display:flex; align-items:center; gap:6px; background:#fff; border:1px solid var(--p-surface-300); color: var(--p-surface-700); }
      .caret{ font-size: 11px; }
      .empty{ height: calc(100% - 2*var(--space-5)); display:flex; flex-direction:column; justify-content:center; align-items:center; gap:6px; text-align:center; color:var(--p-surface-500); }
      .empty .icon{ font-size: 52px; color: var(--p-surface-300); }
      .card{ background:#fff; border:1px solid var(--p-surface-200); border-radius: var(--radius); box-shadow: 0 6px 20px rgba(0,0,0,.04); padding: clamp(12px, 1.6vw, 18px); }
      .card-head{ display:flex; justify-content:space-between; align-items:center; padding-bottom: var(--space-2); margin-bottom: var(--space-2); border-bottom: 1px solid var(--p-surface-200); }
      .tools{ display:flex; gap:4px; }
      .icon-btn{ width:34px; height:34px; }
      .card-body{ display:grid; gap: var(--space-2); }
      .email-body{ white-space:pre-line; font-size: var(--fs-base); line-height: var(--lh); color: var(--p-surface-800); }
      :host ::ng-deep .model-op { border-radius: 14px; overflow: hidden; }
      .model-panel{ background:#fff; }
      .search-bar{ position: sticky; top:0; z-index:1; display:flex; align-items:center; gap:8px; padding: 10px 12px; border-bottom: 1px solid var(--p-surface-200); background:#fff; }
      .search-bar i{ color: var(--p-surface-500); }
      .search-bar input{ width:100%; border:none; outline:none; font-size: .95rem; }
      .list{ max-height: 60vh; overflow:auto; padding: 6px 0; }
      .group{ padding: 6px 8px; }
      .group-title{ font-weight:700; color:#111827; margin: 6px 10px 8px; }
      .group-item{ display:flex; align-items:center; justify-content:space-between; padding: 10px 12px; border-radius: 10px; cursor: pointer; }
      .group-item:hover{ background:#f3f4f6; }
      .left{ display:flex; align-items:center; gap:10px; }
      .name{ color:#0f172a; }
      .right{ display:flex; align-items:center; gap:6px; color:#1f2937; font-weight:600; }
      @media (max-width: 1024px){ .page{ grid-template-columns: 1fr; } .left{ border-right: none; border-bottom: 1px solid var(--p-surface-200); } }
    `
  ]
})
export class SpeechWriterComponent implements OnInit, OnDestroy {
  @ViewChild('modelPopover') modelPopover!: Popover;
  private aiModelService = inject(AiModelService);
  private authService = inject(AuthService); // **Inject AuthService**
  private modelsSubscription?: Subscription;

  speakerRole = ''; eventName = ''; context = ''; messageToConvey = ''; audience = ''; keyPoints = ''; speechLength = '';
  speechStyles: FilterOption[] = [
    { label: 'Bất kỳ', selected: true }, { label: 'Truyền cảm hứng', selected: false },
    { label: 'Thân thiện/Gần gũi', selected: false }, { label: 'Trang trọng', selected: false },
    { label: 'Hùng hồn', selected: false }
  ];
  generatedSpeech: string | null = null;
  showError = false;

  selectedModel: AIModel = { id: '', name: 'Đang tải...', icon: '', profile: { description: '', sortOrder: 0 }, costType: 'free' };
  aiModels: AICategory[] = [];
  
  ngOnInit() {
    // **SỬA LỖI**: Lấy danh sách model được phép và truyền vào service
    const currentUser = this.authService.currentUser();
    const allowedModelNames = currentUser?.quotaProfile?.models ?? [];

    this.modelsSubscription = this.aiModelService.getModels(allowedModelNames).subscribe((data: AICategory[]) => {
      this.aiModels = data;
      this.setDefaultModel();
    });
  }

  ngOnDestroy() { this.modelsSubscription?.unsubscribe(); }

  setDefaultModel() {
    const defaultModelName = 'Trợ lý EVNGENCO1';
    let defaultModel: AIModel | undefined;
    for (const group of this.aiModels) {
        const found = group.models.find(m => m.name === defaultModelName);
        if (found) { defaultModel = found; break; }
    }
    if (!defaultModel && this.aiModels.length > 0 && this.aiModels[0].models.length > 0) {
        defaultModel = this.aiModels[0].models[0];
    }
    if (defaultModel) { this.selectedModel = defaultModel; } 
    else {
      this.selectedModel = { id: '', name: 'Không có model', icon: 'pi pi-exclamation-triangle', profile: {description: 'Không tìm thấy model nào', sortOrder: 0 }, costType: 'free' };
    }
  }

  onModelSelected(model: AIModel): void { this.selectedModel = model; }
  getFilterButtonClass(selected: boolean): string { return selected ? 'chip chip--active' : 'chip'; }
  toggleFilter(arr: FilterOption[], item: FilterOption) { arr.forEach(f => (f.selected = false)); item.selected = true; }

  generateSpeech() {
    if (!this.eventName.trim() || !this.messageToConvey.trim()) { this.showError = true; return; }
    this.showError = false;
    this.generatedSpeech = `Kính thưa quý vị đại biểu, thưa toàn thể các đồng chí,\n\nHôm nay, trong không khí trang trọng của ${this.eventName}, tôi rất vinh dự được đại diện cho [chức danh] để chia sẻ một vài điều.\n\n...`;
  }
  regenerateContent() { this.generateSpeech(); }
  copyContent() { if (this.generatedSpeech) navigator.clipboard.writeText(this.generatedSpeech); }
}


================================================================================
File: ai-dual-chat.ts
Relative Path: src/app/pages/uikit/ai-dual-chat.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/ai-dual-chat.ts
Extension: .ts
Lines: 594
================================================================================

import {
  Component, ElementRef, ViewChild,
  AfterViewChecked, OnInit, OnDestroy, inject, HostListener, NgZone
} from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { HttpClientModule } from '@angular/common/http';

// PrimeNG
import { InputTextModule } from 'primeng/inputtext';
import { ButtonModule } from 'primeng/button';
import { DialogModule } from 'primeng/dialog';
import { TooltipModule } from 'primeng/tooltip';
import { AvatarModule } from 'primeng/avatar';
import { AvatarGroupModule } from 'primeng/avatargroup';
import { Popover, PopoverModule } from 'primeng/popover';
import { TagModule } from 'primeng/tag';
import { ConfirmDialogModule } from 'primeng/confirmdialog';
// THÊM: Import MessageService
import { ConfirmationService, MenuItem, MessageService } from 'primeng/api';
import { Menu, MenuModule } from 'primeng/menu';
// THÊM: Import ToastModule
import { ToastModule } from 'primeng/toast';


// App services & models
import { Subscription } from 'rxjs';
import { AiModelService } from '../../core/services/ai-model.service';
import { AICategory, AIModel, ChatMessage, ChatSession } from '../../core/models/ai-models.model';
import { AiModelSelectorComponent } from '../../core/shared/components/ai-model-selector.component';
import { MarkdownModule, provideMarkdown } from 'ngx-markdown';
import { AuthService } from '../../core/services/auth.service';

// Drag & Drop
import { DragDropModule, CdkDragDrop, moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';

type PaneKey = 'left' | 'right';
type ChatMsgExt = ChatMessage & { thinking?: string; __showThinking?: boolean };

interface ChatPaneState {
  scrollEl?: ElementRef;
  selectedModel: AIModel | null;
  chatMessages: ChatMsgExt[];
  isStreaming: boolean;
  liveStatus: string;
  liveThinking: string;
  liveDelta: string;
  showThinkingLive: boolean;
}
interface ChatFolder {
  id: string;
  name: string;
  createdAt: Date;
  expanded?: boolean;
}
interface DualChatSession extends ChatSession {
  messagesLeft: ChatMsgExt[];
  messagesRight: ChatMsgExt[];
  leftModel?: AIModel | null;
  rightModel?: AIModel | null;
  folderId?: string | null;
}

const MOCK_CFG = { stepDelayMs: 150, typeDelayMs: 12, typeChunkMin: 8, typeChunkMax: 20 };

@Component({
  selector: 'app-dual-chat',
  standalone: true,
  imports: [
    CommonModule, FormsModule, HttpClientModule, MarkdownModule,
    InputTextModule, ButtonModule, DialogModule, TooltipModule,
    AvatarModule, AvatarGroupModule, PopoverModule, TagModule,
    ConfirmDialogModule, AiModelSelectorComponent,
    DragDropModule, MenuModule,
    ToastModule // THÊM: ToastModule vào imports
  ],
  template: `
<p-toast position="top-center"></p-toast>

<div class="dual-root" [style.height]="'calc(100vh - 12rem)'">
  <p-confirmDialog [style]="{ width: '28rem' }" [closable]="false" [breakpoints]="{ '640px': '95vw' }" acceptLabel="Xoá" rejectLabel="Huỷ" icon="pi pi-exclamation-triangle" header="Xoá?" [acceptButtonStyleClass]="'p-button-danger'" [rejectButtonStyleClass]="'p-button-text p-button-secondary'"></p-confirmDialog>

  <p-menu #moveMenu [popup]="true" [model]="moveMenuModel" [appendTo]="'body'"></p-menu>

  <div *ngIf="!showSidebar" class="floating-hamburger">
    <p-button icon="pi pi-bars" [rounded]="true" severity="secondary" [raised]="true" (onClick)="toggleSidebar()" pTooltip="Hiện lịch sử" tooltipPosition="right"></p-button>
  </div>

  <ng-template #robotWelcome>
    <div class="rw-root"><div class="rw-center"><div class="rw-robot animate-float"><svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg" class="rw-shadow"><line x1="60" y1="20" x2="60" y2="8" stroke="#6366F1" stroke-width="3" stroke-linecap="round"/><circle cx="60" cy="6" r="4" fill="#6366F1"><animate attributeName="fill" values="#6366F1;#818CF8;#6366F1" dur="2s" repeatCount="indefinite"/></circle><rect x="30" y="22" width="60" height="50" rx="12" fill="white" stroke="#6366F1" stroke-width="3"/><circle cx="45" cy="42" r="5" fill="#6366F1"></circle><circle cx="75" cy="42" r="5" fill="#6366F1"></circle><path d="M 45 56 Q 60 64 75 56" stroke="#6366F1" stroke-width="3" stroke-linecap="round" fill="none"/><rect x="35" y="75" width="50" height="35" rx="8" fill="white" stroke="#6366F1" stroke-width="3"/><image href="assets/logo-evn.png" x="45" y="83" width="30" height="20" preserveAspectRatio="xMidYMid meet"></image><rect x="20" y="75" width="12" height="28" rx="6" fill="#6366F1"/><rect x="88" y="75" width="12" height="28" rx="6" fill="#6366F1"/></svg></div><div class="rw-cloud animate-fadeIn"><svg width="380" height="180" viewBox="0 0 380 180" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><filter id="cloudShadow" x="-50%" y="-50%" width="200%" height="200%"><feOffset dx="0" dy="8" in="SourceAlpha" result="off"/><feGaussianBlur in="off" stdDeviation="10" result="blur"/><feColorMatrix in="blur" type="matrix" values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0   0 0 0 0.18 0" result="shadow"/><feMerge><feMergeNode in="shadow"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><path d="M 75 55 C 75 42, 87 32, 103 32 C 108 22, 123 17, 135 23 C 147 17, 163 21, 170 32 C 188 32, 203 45, 203 62 C 215 64, 223 75, 223 88 C 223 105, 211 117, 195 117 L 95 117 C 77 117, 63 105, 63 88 C 63 75, 70 64, 75 55 Z" fill="#FFFFFF" stroke="#E6ECFF" stroke-width="2" filter="url(#cloudShadow)"/><circle cx="8"  cy="88" r="3"  fill="#FFFFFF" stroke="#E6ECFF" stroke-width="2" filter="url(#cloudShadow)" class="dot dot-1"/><circle cx="25" cy="85" r="6"  fill="#FFFFFF" stroke="#E6ECFF" stroke-width="2" filter="url(#cloudShadow)" class="dot dot-2"/><circle cx="50" cy="82" r="10" fill="#FFFFFF" stroke="#E6ECFF" stroke-width="2" filter="url(#cloudShadow)" class="dot dot-3"/></svg><div class="rw-cloud-text"><p class="rw-cloud-title">Xin chào! 👋<br/>Tôi có thể giúp gì<br/>cho bạn hôm nay?</p></div></div></div></div>
  </ng-template>

  <div class="layout-wrap">
    <div *ngIf="showSidebar" class="w-72 bg-white dark:bg-surface-800 border-r border-surface-200 dark:border-surface-700 flex flex-col shrink-0">
      <div class="p-3 border-b border-surface-200 dark:border-surface-700 flex items-center gap-2">
        <p-button icon="pi pi-bars" [text]="true" [rounded]="true" severity="secondary" size="small" pTooltip="Ẩn lịch sử" tooltipPosition="bottom" (onClick)="toggleSidebar()"></p-button>
        <div class="ml-auto flex items-center gap-2">
            <p-button label="Folder" icon="pi pi-folder-plus" severity="secondary" size="small" (onClick)="createFolder()"></p-button>
            <p-button label="Chat mới" icon="pi pi-plus" severity="primary" size="small" (onClick)="createNewChat()"></p-button>
        </div>
      </div>

      <div class="flex items-center justify-between px-3 pt-3 pb-1 text-xs uppercase tracking-wide text-surface-500 dark:text-surface-400 cursor-pointer hover:text-surface-700 dark:hover:text-surface-200" (click)="isFoldersCollapsed = !isFoldersCollapsed">
        <span>Folders</span>
        <i class="pi text-xs" [ngClass]="isFoldersCollapsed ? 'pi-chevron-right' : 'pi-chevron-down'"></i>
      </div>
      <div *ngIf="!isFoldersCollapsed" class="flex-0 px-2">
          <div *ngFor="let f of folders; trackBy: trackByFolder" class="mb-2 rounded-lg overflow-hidden border border-surface-200 dark:border-surface-700">
              <div class="group flex items-center gap-2 px-2 py-1.5 bg-surface-50 dark:bg-surface-700/40">
                  <button class="icon-btn" type="button" (click)="f.expanded = !f.expanded" [pTooltip]="f.expanded ? 'Thu gọn' : 'Mở rộng'"><i class="pi" [ngClass]="f.expanded ? 'pi-chevron-down' : 'pi-chevron-right'"></i></button>
                  <i class="pi pi-folder text-surface-500"></i>
                  <ng-container *ngIf="editingFolderId !== f.id; else editFolderTpl">
                      <div class="flex-1 min-w-0 flex items-center">
                        <span class="text-sm font-medium truncate" [pTooltip]="f.name" tooltipPosition="top">{{ f.name }}</span>
                        <span class="ml-2 text-xs text-surface-400">({{ sessionsByFolder[f.id]?.length || 0 }})</span>
                      </div>
                      <div class="hidden group-hover:flex items-center ml-auto">
                        <button class="icon-btn" type="button" (click)="startRenameFolder(f)" pTooltip="Đổi tên"><i class="pi pi-pencil"></i></button>
                        <button class="icon-btn" type="button" (click)="confirmDeleteFolder(f)" pTooltip="Xoá folder"><i class="pi pi-trash text-red-500"></i></button>
                      </div>
                  </ng-container>
                  <ng-template #editFolderTpl>
                    <div class="w-full flex items-center gap-1">
                      <input type="text" class="p-inputtext p-inputtext-sm w-full" [(ngModel)]="editingFolderName" (keydown.enter)="commitRenameFolder(f)" />
                      <button class="icon-btn" type="button" (click)="commitRenameFolder(f)" pTooltip="Lưu"><i class="pi pi-check text-green-500"></i></button>
                      <button class="icon-btn" type="button" (click)="cancelRenameFolder()" pTooltip="Hủy"><i class="pi pi-times"></i></button>
                    </div>
                  </ng-template>
              </div>

              <div *ngIf="f.expanded" class="p-2">
                  <div cdkDropList [id]="'folder-' + f.id" [cdkDropListData]="sessionsByFolder[f.id]" [cdkDropListConnectedTo]="connectedIdsForFolder(f.id)" (cdkDropListDropped)="dropOnFolder(f, $event)" class="drop-zone">
                      <div *ngIf="sessionsByFolder[f.id]?.length === 0" class="empty-hint">Kéo chat vào đây</div>
                      <div *ngFor="let session of sessionsByFolder[f.id]; trackBy: trackBySession" class="group px-2.5 py-1.5 mb-1 rounded-lg transition-all duration-150 flex items-center gap-2" [ngClass]="{ 'bg-primary-50': session.id === currentSessionId, 'hover:bg-surface-100': session.id !== currentSessionId }" cdkDrag [cdkDragData]="session">
                          <div class="flex-1 min-w-0" (click)="switchChatSession(session.id)">
                            <ng-container *ngIf="editingSessionId !== session.id; else editSessionTpl">
                              <p class="m-0 text-sm font-medium truncate cursor-pointer">{{session.title}}</p>
                              <p class="m-0 text-xs text-surface-500 cursor-pointer">{{formatTimestamp(session.timestamp)}}</p>
                            </ng-container>
                             <ng-container *ngTemplateOutlet="editSessionTpl; context: {$implicit: session}"></ng-container>
                          </div>
                          <div class="hidden group-hover:flex items-center ml-auto" *ngIf="editingSessionId !== session.id">
                              <button class="icon-btn" type="button" (click)="openMoveMenu($event, session)" pTooltip="Chuyển folder"><i class="pi pi-folder-open"></i></button>
                              <button class="icon-btn" type="button" (click)="startRenameSession(session, $event)" pTooltip="Đổi tên"><i class="pi pi-pencil"></i></button>
                              <button class="icon-btn" type="button" (click)="confirmDelete(session.id, $event)" pTooltip="Xóa"><i class="pi pi-trash"></i></button>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <div class="flex items-center justify-between px-3 pt-3 pb-1 text-xs uppercase tracking-wide text-surface-500 dark:text-surface-400 cursor-pointer hover:text-surface-700 dark:hover:text-surface-200" (click)="isChatsCollapsed = !isChatsCollapsed">
        <span>Chats</span>
        <i class="pi text-xs" [ngClass]="isChatsCollapsed ? 'pi-chevron-right' : 'pi-chevron-down'"></i>
      </div>
      <div *ngIf="!isChatsCollapsed" class="flex-1 overflow-y-auto p-2">
          <div cdkDropList id="root-list" [cdkDropListData]="rootSessions" [cdkDropListConnectedTo]="connectedIdsForRoot()" (cdkDropListDropped)="dropOnRoot($event)" class="drop-zone">
              <div *ngIf="rootSessions.length === 0" class="text-center py-6 px-4 text-sm text-surface-500 dark:text-surface-400">Không có chat ở Root.</div>
              <div *ngFor="let session of rootSessions; trackBy: trackBySession" class="group px-2.5 py-1.5 mb-1 rounded-lg transition-all duration-150 flex items-center gap-2" [ngClass]="{ 'bg-primary-50': session.id === currentSessionId, 'hover:bg-surface-100': session.id !== currentSessionId }" cdkDrag [cdkDragData]="session">
                  <div class="flex-1 min-w-0" (click)="switchChatSession(session.id)">
                      <ng-container *ngIf="editingSessionId !== session.id; else editSessionTpl">
                          <p class="m-0 text-sm font-medium truncate cursor-pointer">{{session.title}}</p>
                          <p class="m-0 text-xs text-surface-500 cursor-pointer">{{formatTimestamp(session.timestamp)}}</p>
                      </ng-container>
                      <ng-container *ngTemplateOutlet="editSessionTpl; context: {$implicit: session}"></ng-container>
                  </div>
                  <div class="hidden group-hover:flex items-center ml-auto" *ngIf="editingSessionId !== session.id">
                      <button class="icon-btn" type="button" (click)="openMoveMenu($event, session)" pTooltip="Chuyển folder"><i class="pi pi-folder-open"></i></button>
                      <button class="icon-btn" type="button" (click)="startRenameSession(session, $event)" pTooltip="Đổi tên"><i class="pi pi-pencil"></i></button>
                      <button class="icon-btn" type="button" (click)="confirmDelete(session.id, $event)" pTooltip="Xóa"><i class="pi pi-trash"></i></button>
                  </div>
              </div>
          </div>
      </div>
    </div>
    
    <ng-template #editSessionTpl let-session>
      <div *ngIf="editingSessionId === session.id" class="w-full flex items-center gap-1">
        <input type="text" class="p-inputtext p-inputtext-sm w-full" [(ngModel)]="editingSessionTitle" (keydown.enter)="commitRenameSession(session)" (click)="$event.stopPropagation()" />
        <button class="icon-btn" type="button" (click)="commitRenameSession(session); $event.stopPropagation()" pTooltip="Lưu"><i class="pi pi-check text-green-500"></i></button>
        <button class="icon-btn" type="button" (click)="cancelRenameSession(); $event.stopPropagation()" pTooltip="Hủy"><i class="pi pi-times"></i></button>
      </div>
    </ng-template>

    <div class="content-col">
      <div class="pane-grid">
        <div class="pane-card">
          <div class="pane-head justify-center"><button type="button" class="model-button" (click)="leftModelPopover?.toggle($event)"><img *ngIf="left.selectedModel?.icon" [src]="left.selectedModel?.icon!" class="w-5 h-5 rounded-full"/><span class="font-semibold"></span><span>{{ left.selectedModel?.name || 'Chọn model' }}</span><i class="pi pi-chevron-down text-xs"></i></button></div>
          <div #leftScroll class="pane-body">
            <ng-container *ngIf="left.chatMessages.length === 0 && !left.isStreaming"><div class="welcome-abs"><ng-container *ngTemplateOutlet="robotWelcome"></ng-container></div></ng-container>
            <div class="max-w-3xl w-full mx-auto px-3 pt-4 pb-2" *ngIf="left.chatMessages.length > 0 || left.isStreaming">
              <div *ngIf="left.chatMessages.length > 0" class="py-2"><ng-container *ngFor="let msg of left.chatMessages; let i = index"><div *ngIf="msg.sender === 'user'" class="flex justify-end mb-6"><div class="bubble-user"><p class="m-0">{{msg.text}}</p></div></div><div *ngIf="msg.sender === 'ai'" class="mb-8"><div class="ai-meta"><img *ngIf="msg.modelIcon" [src]="msg.modelIcon" class="ai-meta__icon"/><span class="ai-meta__name">{{ msg.modelName || left.selectedModel?.name }}</span></div><div class="flex items-center gap-2 mb-2 justify-end"><p-button *ngIf="msg.thinking" size="small" [text]="true" [rounded]="true" severity="primary" [icon]="msg.__showThinking ? 'pi pi-eye-slash' : 'pi pi-eye'" [label]="msg.__showThinking ? 'Ẩn suy luận' : 'Hiển thị suy luận'" (onClick)="toggleMessageThinking('left', i)"></p-button></div><div *ngIf="msg.thinking && msg.__showThinking" class="thinking-box"><div class="thinking-hint">AI đang phân tích</div><pre class="m-0 text-xs whitespace-pre-wrap">{{msg.thinking}}</pre></div><div *ngIf="msg.thinking && !msg.__showThinking" class="thinking-inline">Đã ẩn phần suy luận. <a class="text-primary cursor-pointer" (click)="toggleMessageThinking('left', i)">Hiển thị</a></div><markdown [data]="msg.text" class="prose max-w-none text-surface-800"></markdown><div class="answer-toolbar"><p-button icon="pi pi-refresh" [text]="true" [rounded]="true" severity="secondary" pTooltip="Tạo lại" tooltipPosition="top" (onClick)="regenerate('left', msg)"></p-button><p-button icon="pi pi-copy" [text]="true" [rounded]="true" severity="secondary" pTooltip="Sao chép nội dung" tooltipPosition="top" (onClick)="copyToClipboard(msg)"></p-button></div></div></ng-container></div>
              <div *ngIf="left.isStreaming" class="mb-8"><div class="live-row"><i class="pi pi-spinner pi-spin"></i><span class="text-sm text-surface-500">{{ left.liveStatus || 'Đang tạo câu trả lời…' }}</span><span class="ai-meta__name ml-2">· {{ left.selectedModel?.name }}</span><p-button *ngIf="!!left.liveThinking" size="small" [text]="true" [rounded]="true" severity="primary" [icon]="left.showThinkingLive ? 'pi pi-eye-slash' : 'pi pi-eye'" [label]="left.showThinkingLive ? 'Ẩn suy luận' : 'Hiển thị suy luận'" (onClick)="toggleThinkingLive('left')"></p-button></div><div *ngIf="left.liveThinking && left.showThinkingLive" class="thinking-box"><div class="thinking-hint">AI đang phân tích</div><pre class="m-0 text-xs whitespace-pre-wrap">{{left.liveThinking}}</pre></div><div *ngIf="left.liveThinking && !left.showThinkingLive" class="thinking-inline">Đang ẩn phần suy luận. <a class="text-primary cursor-pointer" (click)="toggleThinkingLive('left')">Hiển thị</a></div><div class="live-delta"><markdown [data]="left.liveDelta" class="prose max-w-none text-sm"></markdown></div></div>
            </div>
          </div>
          <p-popover #leftModelPopover [style]="{width: '420px'}" [appendTo]="'body'"><ng-template pTemplate="content"><app-ai-model-selector [popoverRef]="leftModelPopover" (modelSelected)="onModelSelected('left', $event)"></app-ai-model-selector></ng-template></p-popover>
        </div>
        <div class="pane-card">
          <div class="pane-head justify-center"><button type="button" class="model-button" (click)="rightModelPopover?.toggle($event)"><img *ngIf="right.selectedModel?.icon" [src]="right.selectedModel?.icon!" class="w-5 h-5 rounded-full"/><span class="font-semibold"></span><span>{{ right.selectedModel?.name || 'Chọn model' }}</span><i class="pi pi-chevron-down text-xs"></i></button></div>
          <div #rightScroll class="pane-body">
            <ng-container *ngIf="right.chatMessages.length === 0 && !right.isStreaming"><div class="welcome-abs"><ng-container *ngTemplateOutlet="robotWelcome"></ng-container></div></ng-container>
            <div class="max-w-3xl w-full mx-auto px-3 pt-4 pb-2" *ngIf="right.chatMessages.length > 0 || right.isStreaming">
              <div *ngIf="right.chatMessages.length > 0" class="py-2"><ng-container *ngFor="let msg of right.chatMessages; let i = index"><div *ngIf="msg.sender === 'user'" class="flex justify-end mb-6"><div class="bubble-user"><p class="m-0">{{msg.text}}</p></div></div><div *ngIf="msg.sender === 'ai'" class="mb-8"><div class="ai-meta"><img *ngIf="msg.modelIcon" [src]="msg.modelIcon" class="ai-meta__icon"/><span class="ai-meta__name">{{ msg.modelName || right.selectedModel?.name }}</span></div><div class="flex items-center gap-2 mb-2 justify-end"><p-button *ngIf="msg.thinking" size="small" [text]="true" [rounded]="true" severity="primary" [icon]="msg.__showThinking ? 'pi pi-eye-slash' : 'pi pi-eye'" [label]="msg.__showThinking ? 'Ẩn suy luận' : 'Hiển thị suy luận'" (onClick)="toggleMessageThinking('right', i)"></p-button></div><div *ngIf="msg.thinking && msg.__showThinking" class="thinking-box"><div class="thinking-hint">AI đang phân tích</div><pre class="m-0 text-xs whitespace-pre-wrap">{{msg.thinking}}</pre></div><div *ngIf="msg.thinking && !msg.__showThinking" class="thinking-inline">Đã ẩn phần suy luận. <a class="text-primary cursor-pointer" (click)="toggleMessageThinking('right', i)">Hiển thị</a></div><markdown [data]="msg.text" class="prose max-w-none text-surface-800"></markdown><div class="answer-toolbar"><p-button icon="pi pi-refresh" [text]="true" [rounded]="true" severity="secondary" pTooltip="Tạo lại" tooltipPosition="top" (onClick)="regenerate('right', msg)"></p-button><p-button icon="pi pi-copy" [text]="true" [rounded]="true" severity="secondary" pTooltip="Sao chép nội dung" tooltipPosition="top" (onClick)="copyToClipboard(msg)"></p-button></div></div></ng-container></div>
              <div *ngIf="right.isStreaming" class="mb-8"><div class="live-row"><i class="pi pi-spinner pi-spin"></i><span class="text-sm text-surface-500">{{ right.liveStatus || 'Đang tạo câu trả lời…' }}</span><p-button *ngIf="!!right.liveThinking" size="small" [text]="true" [rounded]="true" severity="primary" [icon]="right.showThinkingLive ? 'pi pi-eye-slash' : 'pi pi-eye'" [label]="right.showThinkingLive ? 'Ẩn suy luận' : 'Hiển thị suy luận'" (onClick)="toggleThinkingLive('right')"></p-button></div><div *ngIf="right.liveThinking && right.showThinkingLive" class="thinking-box"><div class="thinking-hint">AI đang phân tích</div><pre class="m-0 text-xs whitespace-pre-wrap">{{right.liveThinking}}</pre></div><div *ngIf="right.liveThinking && !right.showThinkingLive" class="thinking-inline">Đang ẩn phần suy luận. <a class="text-primary cursor-pointer" (click)="toggleThinkingLive('right')">Hiển thị</a></div><div class="live-delta"><markdown [data]="right.liveDelta" class="prose max-w-none text-sm"></markdown></div></div>
            </div>
          </div>
          <p-popover #rightModelPopover [style]="{width: '420px'}" [appendTo]="'body'"><ng-template pTemplate="content"><app-ai-model-selector [popoverRef]="rightModelPopover" (modelSelected)="onModelSelected('right', $event)"></app-ai-model-selector></ng-template></p-popover>
        </div>
      </div>
      <section class="composer-wrap">
        <div class="max-w-5xl mx-auto px-4">
          <div class="composer-card"><div class="flex items-center gap-1.5 mb-2 flex-wrap"><p-button icon="pi pi-paperclip" [text]="true" [rounded]="true" severity="secondary" pTooltip="Đính kèm file" tooltipPosition="top" (onClick)="triggerFile()" styleClass="btn-toggle"></p-button><input #fileInput type="file" multiple class="hidden" (change)="onFilesChosen($event)" /><p-button label="Tìm kiếm web" icon="pi pi-search" severity="primary" [outlined]="!webSearch" [raised]="webSearch" styleClass="btn-toggle" [ngClass]="{'is-active': webSearch}" (onClick)="webSearch = !webSearch"></p-button><p-button label="Suy luận" icon="pi pi-sparkles" severity="primary" [outlined]="!extendedReasoning" [raised]="extendedReasoning" styleClass="btn-toggle" [ngClass]="{'is-active': extendedReasoning}" (onClick)="extendedReasoning = !extendedReasoning"></p-button><p-button label="Nghiên cứu sâu" icon="pi pi-book" severity="primary" [outlined]="!deepResearch" [raised]="deepResearch" styleClass="btn-toggle" [ngClass]="{'is-active': deepResearch}" (onClick)="deepResearch = !deepResearch"></p-button></div>
            <div class="relative"><textarea [(ngModel)]="message" (keydown.enter)="sendBoth(); $event.preventDefault()" placeholder="Hỏi một lần — gửi song song đến cả 2 chatbox…" rows="2" class="composer-textarea" style="padding-bottom: 45px;"></textarea><div class="composer-actions"><p-button icon="pi pi-send" [rounded]="true" (onClick)="sendBoth()" [disabled]="!message.trim() || left.isStreaming || right.isStreaming" styleClass="send-button"></p-button></div></div>
            <div *ngIf="selectedFiles.length>0" class="attachments-row mt-3 flex flex-wrap items-center gap-2"><div class="flex flex-wrap gap-2 items-center"><span *ngFor="let f of selectedFiles; let idx = index" class="file-chip inline-flex items-center gap-2"><i class="pi pi-file"></i><span class="truncate max-w-[14rem]">{{f.name}}</span><button type="button" class="chip-close" (click)="removeFile(idx)"><i class="pi pi-times"></i></button></span></div><a class="clear-link ml-auto" (click)="clearFiles()">Xoá tất cả</a></div>
          </div>
          <p class="tip text-center mt-2">Hãy xác minh thông tin quan trọng từ các nguồn khác trước khi đưa ra quyết định.</p>
        </div>
      </section>
    </div>
  </div>
</div>
  `,
  styles: [`
  .ai-meta{ display:flex; align-items:center; gap:.4rem; margin-bottom:.25rem; color:#64748b; font-size:.8rem; }
  .ai-meta__icon{ width:16px; height:16px; border-radius:9999px; }
  .ai-meta__name{ font-weight:600; color:#475569; }
  .dual-root { position: relative; overflow: hidden; background:#eef2f6; }
  .layout-wrap { display:flex; height:100%; min-height:0; }
  .content-col { display:flex; flex-direction:column; min-width:0; flex:1 1 auto; }
  .pane-grid { flex:1 1 auto; min-height:0; overflow:auto; padding:1rem; display:grid; grid-template-columns:1fr; gap:1rem; }
  @media (min-width:1280px){ .pane-grid { grid-template-columns:1fr 1fr; } }
  .floating-hamburger { position:absolute; left:12px; top:12px; z-index:10; }
  .pane-card { background:#fff; border:1px solid #e6ebf2; border-radius:20px; box-shadow:0 10px 30px rgba(2,8,20,.06); display:flex; flex-direction:column; overflow:hidden; }
  .pane-head { display:flex; align-items:center; gap:.5rem; padding:.6rem .75rem; border-bottom:1px solid #eef2f6; background:#fff; }
  .model-button { display:inline-flex; align-items:center; gap:.5rem; padding:.45rem .75rem; border-radius:9999px; background:#f4f7fb; border:1px solid #e0e6ef; color:#2f3c48; font-weight:600; transition: box-shadow .12s, transform .12s, background-color .15s, border-color .15s; }
  .model-button:hover { transform: translateY(-1px); box-shadow:0 8px 20px rgba(0,0,0,.08); }
  .pane-body { position:relative; min-height:260px; background:#fff; overflow-y:auto; }
  .welcome-abs{ position:absolute; top:50%; left:50%; transform: translate(-50%, -50%); pointer-events:none; }
  .bubble-user { background:#f0f4fa; color:#263238; padding:1rem; border-radius:1rem; max-width:36rem; box-shadow:0 4px 10px rgba(0,0,0,.05); }
  .thinking-box { margin-bottom:.5rem; border-radius:.75rem; border:1px dashed #c9d4e5; background:#f9fbff; padding:.6rem; }
  .thinking-hint { font-size:.68rem; text-transform:uppercase; letter-spacing:.06em; color:#7a8a99; margin-bottom:.25rem; }
  .thinking-inline { font-size:.8rem; color:#7a8a99; margin-bottom:.5rem; }
  .answer-toolbar { margin-top:.5rem; display:flex; align-items:center; gap:.5rem; color:#7a8a99; }
  .live-row { display:flex; align-items:center; gap:.5rem; color:#7a8a99; margin-bottom:.5rem; }
  .live-delta { background:#f0f4fa; color:#263238; padding:.5rem .75rem; border-radius:.75rem; }
  .composer-wrap { flex:0 0 auto; padding:0 1rem 1rem; }
  .composer-card { background:#fff; border:1px solid #e6ebf2; border-radius:18px; box-shadow:0 14px 30px rgba(2,8,20,.08); padding:.75rem; }
  .composer-textarea { width:100%; border:2px solid #e1e7f0; border-radius:14px; padding:.75rem; outline:none; transition:border-color .15s; background:#fff; color:#263238; resize:vertical; }
  .composer-textarea:focus { border-color:#7c9dfb; }
  .composer-actions { position:absolute; right:.5rem; bottom:.5rem; display:flex; gap:.5rem; align-items:center; }
  .btn-toggle.p-button { transition: transform .12s ease, box-shadow .12s ease, background-color .15s ease, color .15s ease, border-color .15s ease; border-radius:9999px; }
  .btn-toggle.is-active { background:#6e8bff !important; color:#fff !important; border-color:#6e8bff !important; }
  .btn-toggle:not(.is-active).p-button { background:transparent; color:#263238; border-color:#cfd8e3; }
  .attachments-row { align-items:center; }
  .file-chip { background:#f4f7fb; color:#263238; border:1px solid #dde6f2; border-radius:9999px; padding:6px 10px; font-size:12px; line-height:1; box-shadow:inset 0 -1px 0 rgba(0,0,0,.03); }
  .chip-close { border:none; background:transparent; padding:0; margin:0; cursor:pointer; display:inline-flex; align-items:center; }
  .chip-close i { font-size:12px; opacity:.7; }
  .chip-close:hover i { opacity:1; }
  .clear-link { color:#6e8bff; font-size:12px; cursor:pointer; text-decoration:none; }
  .clear-link:hover { text-decoration:underline; }
  .tip { color:#6b7a90; font-size:.85rem; }
  .rw-root{ background:transparent; padding:0; min-height:0; }
  .rw-center{ display:inline-flex; align-items:center; justify-content:center; gap:20px; flex-wrap:nowrap; transform: scale(var(--rw-scale,1)); transform-origin:center; will-change: transform; }
  .rw-robot{ position:relative; z-index:10; margin-top:0; }
  .rw-shadow{ filter: none !important; }
  .rw-cloud{ position:relative; margin:0; }
  .rw-cloud-text{ position:absolute; top:40px; left:40px; width:208px; text-align:center; }
  .rw-cloud-title{ color:#4F46E5; font-weight:600; font-size:1rem; line-height:1.5; margin:0; }
  @keyframes dotPulse { 0% { opacity:.35; transform: scale(0.85); } 50% { opacity:1; transform: scale(1); } 100% { opacity:.35; transform: scale(0.85); } }
  .dot { animation: dotPulse 1.4s ease-in-out infinite; transform-origin:center; }
  .dot-1 { animation-delay: 0s; } .dot-2 { animation-delay: .18s; } .dot-3 { animation-delay: .36s; }
  @keyframes float { 0%,100%{ transform: translateY(0); } 50%{ transform: translateY(-8px); } }
  .animate-float{ animation: float 3s ease-in-out infinite; }
  @keyframes fadeIn { from{ opacity:0; transform: translateX(-16px); } to{ opacity:1; transform: translateX(0); } }
  .animate-fadeIn{ animation: fadeIn .8s ease-out .4s both; }
  .icon-btn{ background:transparent; border:none; padding:6px; border-radius:8px; cursor:pointer; color: var(--text-color-secondary); }
  .icon-btn:hover{ background: var(--surface-100); color: var(--text-color); }
  .dark .icon-btn:hover { background: var(--surface-700); }
  .drop-zone{ min-height: 24px; border-radius: .5rem; }
  .empty-hint{ font-size:.8rem; color: var(--text-color-secondary); padding: .25rem .25rem .5rem; }
  .cdk-drag-preview { box-shadow: 0 8px 24px rgba(0,0,0,.2); border-radius: .5rem; background: #fff; }
  .cdk-drag-placeholder { opacity: .3; }
  .drop-zone.cdk-drop-list-dragging { outline: 2px dashed #6e8bff; outline-offset: 4px; }
  `],
  providers: [
    ConfirmationService,
    MessageService, // THÊM: MessageService vào providers
    provideMarkdown()
  ]
})
export class DualChatComponent implements AfterViewChecked, OnInit, OnDestroy {
  @ViewChild('leftScroll') set leftScrollRef(el: ElementRef) { this.left.scrollEl = el; }
  @ViewChild('rightScroll') set rightScrollRef(el: ElementRef) { this.right.scrollEl = el; }
  @ViewChild('leftModelPopover') leftModelPopover?: Popover;
  @ViewChild('rightModelPopover') rightModelPopover?: Popover;
  @ViewChild('fileInput') fileInput!: ElementRef<HTMLInputElement>;
  @ViewChild('moveMenu') moveMenu!: Menu;

  // THÊM: inject MessageService
  private messageService = inject(MessageService);
  private aiModelService = inject(AiModelService);
  private authService = inject(AuthService);
  private modelsSubscription?: Subscription;
  private confirmationService = inject(ConfirmationService);
  private zone = inject(NgZone);

  showSidebar = true;
  collapseBreakpoint = 1024;
  private forceHiddenByViewport = false;

  @HostListener('window:resize') onWindowResize() { this.updateSidebarForViewport(); this.updateWelcomeScale(); }

  message = '';
  webSearch = false; extendedReasoning = false; deepResearch = false;
  selectedFiles: File[] = [];

  left: ChatPaneState = this.newPane();
  right: ChatPaneState = this.newPane();
  aiModels: AICategory[] = [];
  chatSessions: DualChatSession[] = [];
  currentSessionId = '';
  useMock = true;

  folders: ChatFolder[] = [];
  sessionsByFolder: Record<string, DualChatSession[]> = {};
  get rootSessions() {
    return this.chatSessions.filter(s => !s.folderId);
  }
  editingFolderId: string | null = null;
  editingFolderName = '';
  isFoldersCollapsed = false;
  isChatsCollapsed = false;
  
  editingSessionId: string | null = null;
  editingSessionTitle = '';
  moveMenuModel: MenuItem[] = [];
  private menuSession: DualChatSession | null = null;
  
  ngOnInit(): void {
    const currentUser = this.authService.currentUser();
    const allowedModelNames = currentUser?.quotaProfile?.models ?? null;

    this.modelsSubscription = this.aiModelService.getModels(allowedModelNames).subscribe((data: AICategory[]) => {
      this.aiModels = data;
      this.setDefaultModels();
    });
    this.createNewChat();
    this.updateSidebarForViewport();
    setTimeout(() => this.updateWelcomeScale());
    this.rebuildFolderIndex();
  }

  ngOnDestroy(): void { this.modelsSubscription?.unsubscribe(); }

  private updateSidebarForViewport() { const narrow = window.innerWidth < this.collapseBreakpoint; if (narrow) { this.forceHiddenByViewport = true; this.showSidebar = false; } else if (this.forceHiddenByViewport) { this.showSidebar = true; this.forceHiddenByViewport = false; } }
  toggleSidebar() { this.showSidebar = !this.showSidebar; }

  private newPane(): ChatPaneState { return { selectedModel: null, chatMessages: [], isStreaming: false, liveStatus: '', liveThinking: '', liveDelta: '', showThinkingLive: true }; }
  
  private setDefaultModels() {
    let first: AIModel | null = null;
    let second: AIModel | null = null;
    if (this.aiModels.length > 0) {
      if (this.aiModels[0].models.length > 0) first = this.aiModels[0].models[0];
      if (this.aiModels[0].models.length > 1) second = this.aiModels[0].models[1];
      else if (this.aiModels.length > 1 && this.aiModels[1].models.length > 0) second = this.aiModels[1].models[0];
    }
    this.left.selectedModel = first;
    this.right.selectedModel = second || first;
  }
  
  private sortSessionsDesc() { this.chatSessions.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime()); }

  createNewChat(): void {
    const newSession: DualChatSession = { id: this.generateId(), title: 'Chat mới', timestamp: new Date(), messages: [], messagesLeft: [], messagesRight: [], leftModel: this.left.selectedModel, rightModel: this.right.selectedModel, folderId: null };
    this.chatSessions.unshift(newSession);
    this.sortSessionsDesc();
    this.currentSessionId = newSession.id;
    this.left.chatMessages = []; this.right.chatMessages = [];
    this.scrollToBottom('left'); this.scrollToBottom('right');
    this.rebuildFolderIndex();
  }

  switchChatSession(sessionId: string): void {
    if (this.editingSessionId || this.editingFolderId) return;
    const session = this.chatSessions.find(s => s.id === sessionId);
    if (session) {
      this.currentSessionId = sessionId;
      this.left.chatMessages = [...(session.messagesLeft || [])];
      this.right.chatMessages = [...(session.messagesRight || [])];
      this.left.selectedModel = session.leftModel ?? this.left.selectedModel;
      this.right.selectedModel = session.rightModel ?? this.right.selectedModel;
      this.scrollToBottom('left'); this.scrollToBottom('right');
      this.updateWelcomeScale();
    }
  }
  
  copyToClipboard(msg: ChatMessage) {
    const text = (msg as any)?.text || '';
    if (!text) return;
    if (navigator.clipboard && window.isSecureContext) { navigator.clipboard.writeText(text).catch(() => this._fallbackCopy(text)); } 
    else { this._fallbackCopy(text); }
  }
  private _fallbackCopy(value: string) { const ta = document.createElement('textarea'); ta.value = value; ta.style.position = 'fixed'; ta.style.opacity = '0'; document.body.appendChild(ta); ta.focus(); ta.select(); try { document.execCommand('copy'); } catch {} document.body.removeChild(ta); }
  
  confirmDelete(sessionId: string, event: Event) {
    event.stopPropagation();
    this.confirmationService.confirm({ message: 'Bạn có chắc chắn muốn xoá phiên chat này?', header: 'Xoá phiên chat?', icon: 'pi pi-exclamation-triangle', acceptLabel: 'Xoá', rejectLabel: 'Huỷ', acceptButtonStyleClass: 'p-button-danger', rejectButtonStyleClass: 'p-button-text p-button-secondary', accept: () => this.deleteChatSession(sessionId), });
  }
  
  private deleteChatSession(sessionId: string) {
    const index = this.chatSessions.findIndex(s => s.id === sessionId);
    if (index > -1) {
      this.chatSessions.splice(index, 1);
      if (this.currentSessionId === sessionId) {
        if (this.chatSessions.length) { this.sortSessionsDesc(); this.switchChatSession(this.chatSessions[0].id); }
        else { this.createNewChat(); }
      }
      this.updateWelcomeScale();
      this.rebuildFolderIndex();
    }
  }

  formatTimestamp(date: Date): string { const now = new Date(); const diff = now.getTime() - date.getTime(); const hours = Math.floor(diff / 3600000); if (hours < 1) return 'Vừa xong'; if (hours < 24) return `${hours} giờ trước`; const days = Math.floor(hours / 24); if (days < 7) return `${days} ngày trước`; return date.toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit', year: 'numeric' }); }
  generateId(): string { return Date.now().toString(36) + Math.random().toString(36).substring(2); }
  onModelSelected(pane: PaneKey, model: AIModel) {
    const p = pane === 'left' ? this.left : this.right;
    p.selectedModel = model;
    const cur = this.chatSessions.find(s => s.id === this.currentSessionId);
    if (cur) { if (pane === 'left') cur.leftModel = model; else cur.rightModel = model; }
  }

  triggerFile() { this.fileInput?.nativeElement?.click(); }
  onFilesChosen(e: Event) { const input = e.target as HTMLInputElement; if (input.files && input.files.length > 0) this.selectedFiles = Array.from(input.files); }
  removeFile(index: number) { this.selectedFiles.splice(index, 1); }
  clearFiles() { this.selectedFiles = []; if (this.fileInput?.nativeElement) this.fileInput.nativeElement.value = ''; }

  sendBoth() {
    const text = this.message.trim();
    if (!text || this.left.isStreaming || this.right.isStreaming) return;

    const userMessage: ChatMessage = { sender: 'user', text };
    this.left.chatMessages.push(userMessage); this.right.chatMessages.push(userMessage);
    this.scrollToBottom('left'); this.scrollToBottom('right');

    const currentSession = this.chatSessions.find(s => s.id === this.currentSessionId);
    if (currentSession) {
      if (currentSession.messagesLeft.length === 0 && currentSession.messagesRight.length === 0) { currentSession.title = text.substring(0, 30) + (text.length > 30 ? '...' : ''); }
      currentSession.messagesLeft = [...this.left.chatMessages];
      currentSession.messagesRight = [...this.right.chatMessages];
      currentSession.timestamp = new Date();
      this.sortSessionsDesc();
    }
    this.message = '';
    this.runStream('left', text); this.runStream('right', text);
  }

  toggleThinkingLive(pane: PaneKey) { const p = pane === 'left' ? this.left : this.right; p.showThinkingLive = !p.showThinkingLive; }
  toggleMessageThinking(pane: PaneKey, i: number) { const p = pane === 'left' ? this.left : this.right; const msg = p.chatMessages[i]; if (msg) msg.__showThinking = !msg.__showThinking; }
  regenerate(_pane: PaneKey, orig: ChatMessage & { thinking?: string }) { this.message = (orig as any).prompt || 'Hãy tạo lại câu trả lời theo hướng ngắn gọn và có bullet.'; this.sendBoth(); }
  ngAfterViewChecked() { if (this.left.isStreaming) this.scrollToBottom('left'); if (this.right.isStreaming) this.scrollToBottom('right'); this.updateWelcomeScale(); }
  private scrollToBottom(pane: PaneKey) { const p = pane === 'left' ? this.left : this.right; const el = p.scrollEl?.nativeElement; if (el) { try { el.scrollTop = el.scrollHeight; } catch {} } }
  
  private updateWelcomeScaleForPane(pane: PaneKey) { const p=pane==='left'?this.left:this.right; const host=p.scrollEl?.nativeElement as HTMLElement|undefined; if(!host) return; const isWelcome=p.chatMessages.length===0 && !p.isStreaming; if(!isWelcome)return; const rwRoot=host.querySelector('.rw-root') as HTMLElement|null; if(!rwRoot)return; const containerWidth=Math.max(0,host.clientWidth-32); const BASE_WIDTH=560; let scale=containerWidth/BASE_WIDTH; scale=Math.max(0.70,Math.min(1,scale)); rwRoot.style.setProperty('--rw-scale',String(scale)); }
  private updateWelcomeScale() { this.updateWelcomeScaleForPane('left'); this.updateWelcomeScaleForPane('right'); }

  private rebuildFolderIndex() {
    this.sessionsByFolder = this.folders.reduce((acc, f) => {
      acc[f.id] = this.chatSessions.filter(s => s.folderId === f.id);
      return acc;
    }, {} as Record<string, DualChatSession[]>);
  }

  createFolder() {
    const folder: ChatFolder = { id: this.generateId(), name: 'Folder mới', createdAt: new Date(), expanded: true };
    this.folders.unshift(folder);
    this.rebuildFolderIndex();
    this.editingFolderId = folder.id;
    this.editingFolderName = folder.name;
  }
  startRenameFolder(f: ChatFolder) { this.editingFolderId = f.id; this.editingFolderName = f.name; }
  
  // SỬA: Thay thế alert bằng messageService
  commitRenameFolder(f: ChatFolder) {
    if (this.editingFolderId !== f.id) return;
    const newName = (this.editingFolderName || '').trim();
    if (!newName) {
      this.cancelRenameFolder();
      return;
    }
    const isDuplicate = this.folders.some(
      folder => folder.id !== f.id && folder.name.toLowerCase() === newName.toLowerCase()
    );

    if (isDuplicate) {
      this.messageService.add({
        severity: 'warn',
        summary: 'Tên đã tồn tại',
        detail: `Tên folder "${newName}" đã được sử dụng. Vui lòng chọn tên khác.`
      });
      return; 
    }
    f.name = newName;
    this.cancelRenameFolder();
  }
  
  cancelRenameFolder() { this.editingFolderId = null; this.editingFolderName = ''; }
  confirmDeleteFolder(f: ChatFolder) { const hasSessions = this.chatSessions.some(s => s.folderId === f.id); const msg = hasSessions ? 'Folder đang chứa một số chat. Xoá folder sẽ chuyển các chat về Root. Bạn có chắc chắn muốn xoá?' : 'Bạn có chắc chắn muốn xoá folder này?'; this.confirmationService.confirm({ message: msg, header: 'Xoá folder?', accept: () => this.deleteFolder(f) }); }
  private deleteFolder(f: ChatFolder) { for (const s of this.chatSessions) { if (s.folderId === f.id) s.folderId = null; } const idx = this.folders.findIndex(x => x.id === f.id); if (idx > -1) this.folders.splice(idx, 1); this.rebuildFolderIndex(); }

  startRenameSession(session: DualChatSession, event: MouseEvent) {
    event.stopPropagation();
    this.editingSessionId = session.id;
    this.editingSessionTitle = session.title;
  }
  commitRenameSession(session: DualChatSession) {
    if (this.editingSessionId !== session.id) return;
    const newTitle = (this.editingSessionTitle || '').trim();
    if (newTitle) {
        session.title = newTitle;
    }
    this.cancelRenameSession();
  }
  cancelRenameSession() {
    this.editingSessionId = null;
    this.editingSessionTitle = '';
  }

  openMoveMenu(event: MouseEvent, session: DualChatSession) {
    event.stopPropagation();
    this.menuSession = session;
    this.moveMenuModel = [
      { label: 'Chuyển ra Root', icon: 'pi pi-sign-out', disabled: !session.folderId, command: () => this.moveSessionToFolder(null) },
      { separator: this.folders.filter(f => f.id !== session.folderId).length > 0 },
      ...this.folders
        .filter(f => f.id !== session.folderId)
        .map<MenuItem>(f => ({ label: f.name, icon: 'pi pi-folder', command: () => this.moveSessionToFolder(f.id) }))
    ];
    this.moveMenu.toggle(event);
  }
  private moveSessionToFolder(folderId: string | null) {
    if (!this.menuSession) return;
    this.menuSession.folderId = folderId;
    this.sortSessionsDesc();
    this.rebuildFolderIndex();
  }

  dropOnRoot(event: CdkDragDrop<DualChatSession[]>) { if (event.previousContainer === event.container) { moveItemInArray(this.rootSessions, event.previousIndex, event.currentIndex); } else { transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex); event.container.data[event.currentIndex].folderId = null; } this.sortSessionsDesc(); this.rebuildFolderIndex(); }
  dropOnFolder(folder: ChatFolder, event: CdkDragDrop<DualChatSession[]>) { if (event.previousContainer === event.container) { moveItemInArray(this.sessionsByFolder[folder.id], event.previousIndex, event.currentIndex); } else { transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex); event.container.data[event.currentIndex].folderId = folder.id; } this.sortSessionsDesc(); this.rebuildFolderIndex(); }
  
  private allDropIds(): string[] { return ['root-list', ...this.folders.map(f => `folder-${f.id}`)]; }
  connectedIdsForRoot(): string[] { return this.allDropIds().filter(id => id !== 'root-list'); }
  connectedIdsForFolder(folderId: string): string[] { return this.allDropIds().filter(id => id !== `folder-${folderId}`); }
  
  trackByFolder = (_: number, item: ChatFolder) => item.id;
  trackBySession = (_: number, item: DualChatSession) => item.id;
  
  private runStream(pane: PaneKey, prompt: string) {
    const p = pane === 'left' ? this.left : this.right;
    p.isStreaming = true; p.liveStatus = 'Khởi tạo…'; p.liveThinking = ''; p.liveDelta = ''; p.showThinkingLive = true;
    const steps = [ 'Phân tích yêu cầu…', this.webSearch ? 'Đang tìm kiếm trên web…' : 'Đang truy xuất tri thức nội bộ…', this.deepResearch ? 'Đào sâu bằng nhiều nguồn…' : 'Tạo dàn ý trả lời…', this.extendedReasoning ? 'Suy luận đa bước…' : 'Tổng hợp kết quả…' ];
    const thinkingPieces = [ `• Hiểu đề bài: "${prompt}"`, this.webSearch ? '• Tìm nguồn web phù hợp…' : '• Dùng tri thức nội bộ EVNGENCO1…', this.deepResearch ? '• So sánh chéo nguồn, rút insight…' : '• Lập cấu trúc trả lời gọn…', this.extendedReasoning ? '• Chuỗi suy luận: A → B → C → kết luận…' : '• Tổng kết & kiểm tra nhanh…' ];
    const finalMarkdown = `Dưới đây là câu trả lời mô phỏng cho prompt của bạn:\n\n1) **Tóm tắt vấn đề** \n2) **Các điểm chính liên quan** \n3) **Đề xuất bước hành động**\n\n> Lưu ý: Đây là phản hồi *giả lập* để bạn xem giao diện. Khi kết nối backend, phần này sẽ là câu trả lời thật từ **mô hình AI bạn đã chọn**.`;
    let i = 0;
    const stepTimer = window.setInterval(() => {
      this.zone.run(() => {
        if (i < steps.length) { p.liveStatus = steps[i]; p.liveThinking += (p.liveThinking ? '\n' : '') + thinkingPieces[i]; this.scrollToBottom(pane); i++; } 
        else {
          window.clearInterval(stepTimer);
          let idx = 0;
          const typeTimer = window.setInterval(() => {
            this.zone.run(() => {
              p.liveStatus = 'Đang tạo câu trả lời…';
              const chunk = Math.floor(Math.random() * (MOCK_CFG.typeChunkMax - MOCK_CFG.typeChunkMin + 1)) + MOCK_CFG.typeChunkMin;
              idx = Math.min(idx + chunk, finalMarkdown.length);
              p.liveDelta = finalMarkdown.slice(0, idx);
              this.scrollToBottom(pane);
              if (idx >= finalMarkdown.length) {
                window.clearInterval(typeTimer);
                const aiMessage: ChatMsgExt = { sender: 'ai', text: finalMarkdown, modelName: p.selectedModel?.name || '', modelIcon: p.selectedModel?.icon, thinking: p.liveThinking || undefined, __showThinking: false };
                p.chatMessages.push(aiMessage);
                const cur = this.chatSessions.find(s => s.id === this.currentSessionId);
                if (cur) { cur.messagesLeft = [...this.left.chatMessages]; cur.messagesRight = [...this.right.chatMessages]; cur.timestamp = new Date(); this.sortSessionsDesc(); }
                p.isStreaming = false; p.liveStatus = ''; p.liveThinking = ''; p.liveDelta = ''; p.showThinkingLive = false;
                this.scrollToBottom(pane);
              }
            });
          }, MOCK_CFG.typeDelayMs);
        }
      });
    }, MOCK_CFG.stepDelayMs);
  }
}

================================================================================
File: api-management.ts
Relative Path: src/app/pages/uikit/api-management.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/api-management.ts
Extension: .ts
Lines: 357
================================================================================

import { Component, OnInit, inject, ViewChild, ElementRef } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { Table, TableModule } from 'primeng/table';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { TagModule } from 'primeng/tag';
import { Select, SelectModule } from 'primeng/select';
import { TooltipModule } from 'primeng/tooltip';
import { DialogModule } from 'primeng/dialog';
import { ConfirmDialogModule } from 'primeng/confirmdialog';
import { ConfirmationService } from 'primeng/api';
import { IconFieldModule } from 'primeng/iconfield';
import { InputIconModule } from 'primeng/inputicon';
import { AutoCompleteModule } from 'primeng/autocomplete';
import { InputNumberModule } from 'primeng/inputnumber';
import { SelectButtonModule } from 'primeng/selectbutton';
import { FileUploadModule } from 'primeng/fileupload';
import { ApiKeysService, ApiConfig, ApiStatus, Provider, CostType } from '../../core/services/api-keys.service';

// Interface để định nghĩa kiểu dữ liệu cho tùy chọn nhà cung cấp
interface ProviderOption {
  label: string;
  value: Provider;
  image: string | null;
}

@Component({
  selector: 'app-api-management',
  standalone: true,
  imports: [
    CommonModule, FormsModule, TableModule, ButtonModule, InputTextModule,
    TagModule, SelectModule, TooltipModule, DialogModule, ConfirmDialogModule,
    IconFieldModule, InputIconModule, AutoCompleteModule, InputNumberModule,
    SelectButtonModule, FileUploadModule
  ],
  providers: [ConfirmationService],
  template: `
  <div class="page p-4">
    <div class="card">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold">Quản lý API</h2>
        <button pButton label="Thêm cấu hình" icon="pi pi-plus" (click)="openNewDialog()"></button>
      </div>

      <p-table #dt
        [value]="list"
        dataKey="id"
        [rows]="10"
        [rowHover]="true"
        [paginator]="true"
        [globalFilterFields]="['name', 'provider', 'model', 'description']"
        [loading]="loading"
        styleClass="p-datatable-sm">

        <ng-template pTemplate="caption">
          <div class="flex justify-between items-center flex-column sm:flex-row gap-3">
             <button pButton label="Xóa bộ lọc" class="p-button-outlined" icon="pi pi-filter-slash" (click)="clearFilters(dt)"></button>
            <p-iconfield iconPosition="left" class="ml-auto">
              <p-inputicon><i class="pi pi-search"></i></p-inputicon>
              <input #globalSearch pInputText type="text" (input)="onGlobalFilter(dt, $event)" placeholder="Tìm kiếm..." class="w-full sm:w-80"/>
            </p-iconfield>
          </div>
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <th style="min-width: 12rem">Nhà cung cấp</th>
            <th style="min-width: 12rem" pSortableColumn="name">Tên cấu hình</th>
            <th style="min-width: 10rem">Model</th>
            <th style="min-width: 12rem">API Key</th>
            <th style="min-width: 12rem">Cost ($/1M tokens)</th>
            <th style="min-width: 8rem">Trạng thái</th>
            <th style="width: 10rem; text-align: center">Thao tác</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-row>
          <tr>
            <td>
              <div class="flex items-center gap-2">
                <img *ngIf="getProviderImage(row.provider)" [src]="getProviderImage(row.provider)" [alt]="row.provider" class="provider-logo"/>
                <span class="font-medium">{{ row.provider }}</span>
              </div>
            </td>
            <td><span class="font-semibold">{{ row.name }}</span></td>
            <td><p-tag [value]="row.model" severity="secondary"></p-tag></td>
            <td>
              <div class="flex items-center gap-2 justify-between">
                <code class="api-key-display">{{ showKey[row.id] ? row.apiKey : svc.maskKey(row.apiKey) }}</code>
                <button pButton [icon]="showKey[row.id] ? 'pi pi-eye-slash' : 'pi pi-eye'" [rounded]="true" [text]="true" size="small" (click)="toggleShow(row.id)"></button>
              </div>
            </td>
            <td>
                <div *ngIf="row.costType === 'free'; else paidCost" class="cost-free">
                    <i class="pi pi-check-circle mr-1"></i> Miễn phí
                </div>
                <ng-template #paidCost>
                    <div class="cost-paid">
                        <div>In: <strong>{{ row.costInput | currency:'USD':'symbol':'1.2-4' }}</strong></div>
                        <div>Out: <strong>{{ row.costOutput | currency:'USD':'symbol':'1.2-4' }}</strong></div>
                    </div>
                </ng-template>
            </td>
            <td>
              <p-tag [value]="row.status === 'active' ? 'Đang dùng' : 'Ngừng'" [severity]="row.status === 'active' ? 'success' : 'danger'"></p-tag>
            </td>
            <td>
              <div class="flex justify-center gap-1">
                <button pButton icon="pi pi-pencil" [rounded]="true" [text]="true" size="small" severity="info" pTooltip="Sửa" (click)="edit(row)"></button>
                <button pButton icon="pi pi-trash" [rounded]="true" [text]="true" size="small" severity="danger" pTooltip="Xóa" (click)="confirmDelete(row)"></button>
              </div>
            </td>
          </tr>
        </ng-template>
        <!-- ... các template khác ... -->
      </p-table>
    </div>
  </div>

  <p-dialog header="{{editing ? 'Chỉnh sửa cấu hình' : 'Thêm cấu hình'}}"
            [(visible)]="showDialog" [modal]="true" [style]="{width:'760px'}">
    <div class="group">
      <h3>Thông tin chung</h3>
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label>Nhà cung cấp *</label>
          <p-autoComplete [(ngModel)]="form.provider" [suggestions]="filteredProviders" (completeMethod)="searchProvider($event)" [dropdown]="true" appendTo="body" styleClass="w-full" inputStyleClass="w-full"></p-autoComplete>
        </div>
        <div><label>Tên cấu hình *</label><input pInputText [(ngModel)]="form.name" class="w-full"/></div>
      </div>
      
      <div *ngIf="isCustomProvider() || editing" class="mt-4 p-3 rounded-md border border-dashed border-surface-300 bg-surface-50">
          <label class="font-semibold text-sm">Logo cho nhà cung cấp</label>
          <div class="flex items-center gap-3 mt-2">
              <img [src]="newProviderImage || 'https://placehold.co/40x40/e2e8f0/718096?text=Logo'" 
                  alt="Logo preview" class="provider-logo-preview"/>
              <p-fileUpload mode="basic" 
                            name="logo" 
                            accept="image/*" 
                            [auto]="true" 
                            customUpload 
                            chooseLabel="Tải lên..."
                            (uploadHandler)="onProviderLogoSelect($event)"></p-fileUpload>
          </div>
          <small class="text-surface-500 block mt-1">Tải lên logo nếu bạn đang thêm hoặc sửa một nhà cung cấp.</small>
      </div>
    </div>
    <div class="group">
      <h3>Model</h3>
      <input pInputText [(ngModel)]="form.model" class="w-full" list="modelSuggestions"/>
      <datalist id="modelSuggestions"><option *ngFor="let m of modelOptions" [value]="m.value">{{ m.label }}</option></datalist>
    </div>
    <div class="group">
      <h3>Kết nối</h3>
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label>API Key *</label>
          <div class="key-input">
            <input pInputText [(ngModel)]="form.apiKey" class="w-full" [type]="showFormKey ? 'text' : 'password'"/>
            <button pButton [icon]="showFormKey ? 'pi pi-eye-slash' : 'pi pi-eye'" [text]="true" [rounded]="true" (click)="showFormKey = !showFormKey"></button>
          </div>
        </div>
        <div><label>Base URL</label><input pInputText [(ngModel)]="form.baseUrl" class="w-full"/></div>
      </div>
    </div>
    
    <div class="group">
        <h3>Thông tin chi phí</h3>
        <div>
            <label class="mb-2">Loại chi phí</label>
            <p-selectButton [options]="costTypeOptions" [(ngModel)]="form.costType" optionLabel="label" optionValue="value"></p-selectButton>
        </div>
        <div *ngIf="form.costType === 'paid'" class="grid grid-cols-2 gap-3 mt-4">
            <div>
                <label>Input Cost ($ / 1M tokens)</label>
                <p-inputNumber [(ngModel)]="form.costInput" mode="currency" currency="USD" locale="en-US" [minFractionDigits]="2" [maxFractionDigits]="4" styleClass="w-full" inputStyleClass="w-full"></p-inputNumber>
            </div>
            <div>
                <label>Output Cost ($ / 1M tokens)</label>
                <p-inputNumber [(ngModel)]="form.costOutput" mode="currency" currency="USD" locale="en-US" [minFractionDigits]="2" [maxFractionDigits]="4" styleClass="w-full" inputStyleClass="w-full"></p-inputNumber>
            </div>
        </div>
    </div>

    <div class="group last">
      <h3>Khác</h3>
      <div class="grid grid-cols-2 gap-3">
        <div><label>Trạng thái</label><p-select appendTo="body" class="w-full" [options]="statusOptions" optionLabel="label" optionValue="value" [(ngModel)]="form.status"></p-select></div>
        <div><label>Mô tả</label><input pInputText [(ngModel)]="form.description" class="w-full"/></div>
      </div>
    </div>

    <ng-template pTemplate="footer">
      <button pButton label="Hủy" class="p-button-text" (click)="showDialog=false"></button>
      <button pButton label="Lưu" severity="primary" [disabled]="saving" (click)="save()"></button>
    </ng-template>
  </p-dialog>

  <p-confirmDialog [dismissableMask]="true"></p-confirmDialog>
  `,
  styles: [`
    .provider-logo { width: 20px; height: 20px; object-fit: contain; }
    .api-key-display { font-family: 'Monaco', monospace; font-size: 0.75rem; background: var(--p-surface-50); padding: 0.25rem 0.5rem; border-radius: 4px; }
    .key-input { display: flex; align-items: center; gap: 0.5rem; }
    .group { margin-bottom: 1.25rem; padding-bottom: 1rem; border-bottom: 1px solid var(--p-surface-200); }
    .group.last { border-bottom: 0; }
    .group h3 { font-size: 0.95rem; font-weight: 600; margin-bottom: 0.75rem; }
    .group label { display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.375rem; }
    .cost-free { color: var(--p-green-600); font-weight: 600; display: flex; align-items: center; }
    .cost-paid { font-size: 0.875rem; line-height: 1.4; }
    :host ::ng-deep .p-inputnumber-input { width: 100%; }
    .provider-logo-preview { width: 40px; height: 40px; border-radius: 8px; border: 1px solid var(--p-surface-300); object-fit: contain; background-color: var(--p-surface-100); }
  `]
})
export class ApiManagementComponent implements OnInit {
  svc = inject(ApiKeysService);
  confirm = inject(ConfirmationService);

  list: ApiConfig[] = [];
  loading = false;
  filteredProviders: any[] = [];

  showDialog = false;
  editing: ApiConfig | null = null;
  saving = false;
  showFormKey = false;
  showKey: Record<string, boolean> = {};

  form: Partial<ApiConfig> = {};
  newProviderImage: string | null = null;

  costTypeOptions = [
      { label: 'Miễn phí', value: 'free' as CostType },
      { label: 'Trả phí', value: 'paid' as CostType }
  ];

  providerOptions: ProviderOption[] = [
    { label: 'OpenAI (ChatGPT)', value: 'OpenAI' as Provider, image: 'assets/demo/images/ai-vendors/openai.svg' },
    { label: 'Google (Gemini)', value: 'Google' as Provider, image: 'assets/demo/images/ai-vendors/google.svg' },
    { label: 'xAI (Grok)', value: 'xAI' as Provider, image: 'assets/demo/images/ai-vendors/xai.svg' },
    { label: 'Trợ lý EVNGENCO1', value: 'EVNGENCO1' as Provider, image: 'assets/logo-evn.png' }
  ];

  modelOptions = [
    { label: 'gpt-4.1', value: 'gpt-4.1' }, { label: 'gpt-4o', value: 'gpt-4o' },
    { label: 'Gemini 1.5 Pro', value: 'Gemini 1.5 Pro' },
    { label: 'Trợ lý EVNGENCO1', value: 'Trợ lý EVNGENCO1' }
  ];
  statusOptions = [
    { label: 'Đang dùng', value: 'active' as ApiStatus },
    { label: 'Ngừng', value: 'inactive' as ApiStatus }
  ];

  ngOnInit() { this.fetch(); }

  fetch() { 
    this.loading = true;
    this.svc.list().subscribe({
      next: res => { this.list = res; this.loading = false; },
      error: () => this.loading = false
    }); 
  }

  empty(): Partial<ApiConfig> { 
    this.newProviderImage = null;
    return { 
      provider:'OpenAI', name:'', model:'', apiKey:'', status:'active', 
      costType: 'paid', costInput: 0, costOutput: 0 
    }; 
  }

  openNewDialog(){ this.editing = null; this.form = this.empty(); this.showDialog = true; }
  
  edit(row: ApiConfig){ 
    this.editing = row; 
    this.form = {...row}; 
    this.newProviderImage = this.getProviderImage(row.provider);
    this.showDialog = true; 
  }

  isCustomProvider(): boolean {
    if (!this.form.provider) { return false; }
    // p-autocomplete sẽ trả về object nếu chọn từ list, và string nếu gõ mới
    const providerValue = typeof this.form.provider === 'object' ? (this.form.provider as any).value : this.form.provider;
    return !this.providerOptions.some(p => p.value.toLowerCase() === providerValue.toLowerCase());
  }

  onProviderLogoSelect(event: any) {
    const file = event.files?.[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = (e: any) => { this.newProviderImage = e.target.result; };
    reader.readAsDataURL(file);
  }

  save(){
    this.saving = true;
    if (this.form.costType === 'free') {
        this.form.costInput = 0;
        this.form.costOutput = 0;
    }

    let providerValue = this.form.provider as any;
    if (typeof providerValue === 'object' && providerValue !== null) {
        providerValue = providerValue.value;
    }
    this.form.provider = providerValue;
    
    // Logic cập nhật hoặc thêm mới nhà cung cấp vào danh sách hiển thị
    const providerOpt = this.providerOptions.find(p => p.value === this.form.provider);
    if (providerOpt) { // Nhà cung cấp đã tồn tại
        if (this.newProviderImage && providerOpt.image !== this.newProviderImage) {
            providerOpt.image = this.newProviderImage;
        }
    } else if (typeof this.form.provider === 'string') { // Nhà cung cấp mới
        this.providerOptions.push({
            label: this.form.provider,
            value: this.form.provider as Provider,
            image: this.newProviderImage 
        });
    }

    if (this.editing) {
      this.svc.update(this.editing.id, this.form).subscribe({ 
        next: () => { this.saving = false; this.showDialog = false; this.fetch(); }
      });
    } else {
      const { id, createdAt, ...payload } = this.form;
      this.svc.add(payload as any).subscribe({ 
        next: () => { this.saving = false; this.showDialog = false; this.fetch(); }
      });
    }
  }

  confirmDelete(row: ApiConfig){
    this.confirm.confirm({
      header: 'Xóa cấu hình API',
      message: `Bạn có chắc muốn xóa <strong>${row.name}</strong>?`,
      accept: () => this.svc.delete(row.id).subscribe(() => this.fetch())
    });
  }

  toggleShow(id: string){ this.showKey[id] = !this.showKey[id]; }
  onGlobalFilter(table: Table, event: Event) { table.filterGlobal((event.target as HTMLInputElement).value, 'contains'); }
  clearFilters(table: Table) { table.clear(); }
  searchProvider(event: any) {
    const query = event.query.toLowerCase();
    this.filteredProviders = this.providerOptions.filter(p => p.label.toLowerCase().includes(query));
  }
  getProviderImage(provider: string): string | null {
    const option = this.providerOptions.find(p => p.value === provider);
    return option?.image || null;
  }
}



================================================================================
File: aihub-landing.ts
Relative Path: src/app/pages/uikit/aihub-landing.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/aihub-landing.ts
Extension: .ts
Lines: 214
================================================================================

import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ButtonModule } from 'primeng/button';
import { RippleModule } from 'primeng/ripple';

@Component({
  selector: 'app-aihub-landing',
  standalone: true,
  imports: [CommonModule, ButtonModule, RippleModule],
  styles: [`
    :host { display: block; }
    .section { padding: 3rem 0; }
    @media (min-width: 768px) { .section { padding: 5rem 0; } }

    /* Wrapper trung lập, không phụ thuộc container của layout */
    .wrap { max-width: 1200px; margin: 0 auto; padding-left: 1rem; padding-right: 1rem; }

    .hero-bg {
      background:
        radial-gradient(120% 120% at 90% 10%, rgba(120,162,255,.22) 0%, rgba(120,162,255,0) 60%),
        radial-gradient(120% 120% at 15% 80%, rgba(0,255,194,.18) 0%, rgba(0,255,194,0) 60%),
        linear-gradient(180deg, var(--surface-0), var(--surface-50));
    }

    .hero-image {
      width: 100%;
      max-width: 560px;
      height: 520px;
      border-radius: 1.5rem;
      box-shadow: 0 20px 40px rgba(2,8,23,.12);
      object-fit: cover;
    }

    .stat { line-height: 1.1; }
  `],
  template: `
    <!-- HERO -->
    <section class="hero-bg overflow-hidden">
      <div class="wrap">
        <div class="grid gap-10 md:grid-cols-2 items-center">
          <div>
            <div class="inline-flex items-center gap-2 rounded-full px-4 py-1 text-sm bg-surface-100 dark:bg-surface-800">
              <span class="pi pi-sparkles text-primary"></span>
              <span>EVNGENCO1 • AI HUB</span>
            </div>

            <h1 class="mt-5 text-4xl md:text-6xl font-bold leading-tight">
              Một nền tảng.<br/>
              <span class="font-extrabold bg-clip-text text-transparent"
                style="background-image:linear-gradient(90deg,#6EE7F9 0%,#A78BFA 50%,#F472B6 100%);">
                Khai phóng sức mạnh AI
              </span>
            </h1>

            <p class="mt-5 text-lg md:text-xl text-muted-color max-w-2xl">
              Chỉ <strong>1 tài khoản</strong> — sử dụng <strong>nhiều mô hình AI</strong>, quản lý tập trung,
              tập hợp mọi <strong>công cụ AI</strong> trong một nền tảng duy nhất. Phổ cập AI đến toàn thể CBCNV
              EVNGENCO1 với giao diện <strong>trực quan, thân thiện</strong>, phù hợp mọi đối tượng.
            </p>

            <div class="mt-8 flex flex-wrap gap-4">
              <button pButton pRipple label="Dùng thử ngay" class="px-6 py-3 text-lg"></button>
              <button pButton pRipple label="Xem tính năng" severity="secondary" class="px-6 py-3 text-lg" (click)="scrollTo('#features')"></button>
            </div>

            <div class="mt-10 grid grid-cols-3 gap-6 max-w-md">
              <div>
                <div class="text-3xl font-bold stat">10.000+</div>
                <div class="text-sm text-muted-color">Lượt sử dụng/tháng</div>
              </div>
              <div>
                <div class="text-3xl font-bold stat">20+</div>
                <div class="text-sm text-muted-color">Mô hình AI tích hợp</div>
              </div>
              <div>
                <div class="text-3xl font-bold stat">99.9%</div>
                <div class="text-sm text-muted-color">Thời gian sẵn sàng</div>
              </div>
            </div>
          </div>

          <div class="relative flex justify-center md:justify-end">
            <!-- Hình robot phong cách tương lai -->
            <img
              class="hero-image"
              src="https://images.unsplash.com/photo-1603791440008-0e9a0a0a2f97?q=80&w=1400&auto=format&fit=crop"
              alt="Futuristic AI Robot"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- TÍNH NĂNG CHÍNH -->
    <section id="features" class="section">
      <div class="wrap">
        <div class="text-center mb-14">
          <h2 class="text-3xl md:text-5xl font-bold">Tất cả AI trong một nền tảng</h2>
          <p class="text-muted-color mt-4 max-w-3xl mx-auto">
            Quản trị tập trung, kiểm soát chi phí, log truy vết, bảo mật cấp doanh nghiệp.
          </p>
        </div>

        <div class="grid md:grid-cols-3 gap-6">
          <div class="card p-6">
            <div class="flex items-center gap-3">
              <span class="pi pi-shield text-2xl text-primary"></span>
              <h3 class="text-xl font-semibold">Một tài khoản – nhiều mô hình AI</h3>
            </div>
            <p class="mt-3 text-muted-color">
              Kết nối OpenAI, Google, xAI và model nội bộ. Phân quyền & định tuyến model theo phòng ban,
              quản lý khóa, định mức & ngân sách tập trung.
            </p>
            <div class="mt-4 text-sm opacity-80">
              Quản lý tập trung • Tập hợp công cụ AI trong một nền tảng
            </div>
          </div>

          <div class="card p-6">
            <div class="flex items-center gap-3">
              <span class="pi pi-megaphone text-2xl text-primary"></span>
              <h3 class="text-xl font-semibold">Phổ cập AI cho toàn thể CBCNV</h3>
            </div>
            <p class="mt-3 text-muted-color">
              Đưa công nghệ AI đến gần hơn với mọi người: Chat trợ lý, Nhân viên AI (soạn email, tổng hợp văn bản),
              công cụ dịch & tạo tài liệu có định dạng.
            </p>
            <div class="mt-4 text-sm opacity-80">
              Đào tạo nhanh • Hướng dẫn trong sản phẩm
            </div>
          </div>

          <div class="card p-6">
            <div class="flex items-center gap-3">
              <span class="pi pi-compass text-2xl text-primary"></span>
              <h3 class="text-xl font-semibold">Khai thác dễ dàng</h3>
            </div>
            <p class="mt-3 text-muted-color">
              Giao diện trực quan, thân thiện, phù hợp mọi đối tượng. Tìm kiếm, gợi ý nhanh, mẫu prompt theo ngữ cảnh,
              hỗ trợ tiếng Việt toàn diện.
            </p>
            <div class="mt-4 text-sm opacity-80">
              UI/UX thân thiện • Sẵn sàng cho di động
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SHOWCASE -->
    <section class="section">
      <div class="wrap">
        <div class="grid md:grid-cols-2 gap-10 items-center">
          <div>
            <h3 class="text-2xl md:text-3xl font-bold">Nhân viên AI & Bộ công cụ thông minh</h3>
            <ul class="mt-4 space-y-3 text-muted-color">
              <li class="flex items-start gap-3">
                <span class="pi pi-envelope mt-1"></span>
                <span>Soạn email, công văn, tờ trình — đúng ngữ điệu EVNGENCO1.</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="pi pi-language mt-1"></span>
                <span>Dịch & giữ nguyên định dạng (DOCX, PDF, XLSX) với kiểm duyệt nội bộ.</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="pi pi-share-alt mt-1"></span>
                <span>Tạo sơ đồ quy trình, lưu đồ & slide chỉ với vài câu lệnh.</span>
              </li>
            </ul>

            <div class="mt-6 flex gap-3">
              <button pButton pRipple label="Khám phá công cụ" class="px-5"></button>
              <button pButton pRipple label="Liên hệ triển khai" severity="secondary" class="px-5"></button>
            </div>
          </div>

          <div class="relative">
            <img
              src="https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1400&auto=format&fit=crop"
              alt="AI Tools"
              class="w-full h-[420px] md:h-[520px] object-cover rounded-3xl shadow-2xl"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- CTA -->
    <section class="section">
      <div class="wrap">
        <div class="card p-10 md:p-12 text-center bg-surface-0/70 dark:bg-surface-900/70 backdrop-blur">
          <h3 class="text-2xl md:text-4xl font-bold">Sẵn sàng phổ cập AI tại EVNGENCO1?</h3>
          <p class="mt-3 text-muted-color max-w-2xl mx-auto">
            Trải nghiệm AI HUB với mô hình đa dạng, bảo mật doanh nghiệp và quản trị tập trung.
          </p>
          <div class="mt-6 flex justify-center gap-4">
            <button pButton pRipple label="Dùng thử miễn phí" class="px-6 py-3 text-lg"></button>
            <button pButton pRipple label="Nhận tư vấn" severity="secondary" class="px-6 py-3 text-lg"></button>
          </div>
          <div class="mt-8 text-sm text-muted-color">© {{ year }} EVNGENCO1 AI HUB — All rights reserved.</div>
        </div>
      </div>
    </section>
  `
})
export class AihubLandingPage {
  readonly year = new Date().getFullYear();

  scrollTo(hash: string) {
    const el = document.querySelector(hash);
    if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
}


================================================================================
File: innovation-ideas.ts
Relative Path: src/app/pages/uikit/innovation-ideas.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/innovation-ideas.ts
Extension: .ts
Lines: 866
================================================================================

import { Component, OnInit, inject, ViewChild, ElementRef } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { Table, TableModule } from 'primeng/table';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { DialogModule } from 'primeng/dialog';
import { ConfirmDialogModule } from 'primeng/confirmdialog';
import { TooltipModule } from 'primeng/tooltip';
import { TagModule } from 'primeng/tag';
import { SelectModule } from 'primeng/select';
import { FileUploadModule } from 'primeng/fileupload';
import { IconFieldModule } from 'primeng/iconfield';
import { InputIconModule } from 'primeng/inputicon';

import { ConfirmationService } from 'primeng/api';

// Types
export type IdeaCategory = 'feature' | 'tool' | 'production' | 'management' | 'other';
export type IdeaStatus = 'pending' | 'reviewing' | 'approved' | 'rejected' | 'implemented';
export type IdeaPriority = 'low' | 'medium' | 'high' | 'urgent';

export interface InnovationIdea {
  id: string;
  category: IdeaCategory;
  title: string;
  description: string;
  expectedBenefit: string;
  implementationCost?: string;
  priority: IdeaPriority;
  attachments?: string[];
  submitterName: string;
  submitterEmail: string;
  submitterDepartment?: string;
  status: IdeaStatus;
  reviewNotes?: string;
  createdAt: string;
  updatedAt?: string;
}

// Mock Service
class InnovationIdeaService {
  private readonly LS_KEY = 'evn_innovation_ideas_v1';

  list() {
    const saved = localStorage.getItem(this.LS_KEY);
    return { subscribe: (obs: any) => {
      setTimeout(() => obs.next(saved ? JSON.parse(saved) : []), 100);
    }};
  }

  add(payload: Omit<InnovationIdea, 'id' | 'createdAt'>) {
    const ideas = this.getAll();
    const newIdea: InnovationIdea = {
      ...payload,
      id: crypto.randomUUID(),
      createdAt: new Date().toISOString()
    };
    ideas.push(newIdea);
    this.save(ideas);
    return { subscribe: (obs: any) => setTimeout(() => obs.next(newIdea), 200) };
  }

  update(id: string, payload: Partial<InnovationIdea>) {
    const ideas = this.getAll();
    const idx = ideas.findIndex((x: InnovationIdea) => x.id === id);
    if (idx >= 0) {
      ideas[idx] = { ...ideas[idx], ...payload, updatedAt: new Date().toISOString() };
      this.save(ideas);
    }
    return { subscribe: (obs: any) => setTimeout(() => obs.next(ideas[idx]), 200) };
  }

  setStatus(id: string, status: IdeaStatus, reviewNotes?: string) {
    return this.update(id, { status, reviewNotes });
  }

  delete(id: string) {
    const ideas = this.getAll().filter((x: InnovationIdea) => x.id !== id);
    this.save(ideas);
    return { subscribe: (obs: any) => setTimeout(() => obs.next(null), 200) };
  }

  uploadAttachment(file: File) {
    return { subscribe: (obs: any) => setTimeout(() => obs.next('data:image/...'), 300) };
  }

  private getAll(): InnovationIdea[] {
    const saved = localStorage.getItem(this.LS_KEY);
    return saved ? JSON.parse(saved) : [];
  }

  private save(ideas: InnovationIdea[]) {
    localStorage.setItem(this.LS_KEY, JSON.stringify(ideas));
  }
}

@Component({
  selector: 'app-innovation-ideas',
  standalone: true,
  imports: [
    CommonModule, FormsModule,
    TableModule, ButtonModule, InputTextModule, DialogModule, ConfirmDialogModule,
    TooltipModule, TagModule, SelectModule, FileUploadModule,
    IconFieldModule, InputIconModule
  ],
  providers: [ConfirmationService, InnovationIdeaService],
  template: `
  <div class="page p-4">
    <div class="card mb-4">
      <div class="flex items-center gap-3 mb-4">
        <i class="pi pi-lightbulb text-4xl text-yellow-500"></i>
        <div>
          <h2 class="text-xl font-semibold">Đề xuất ý tưởng đổi mới sáng tạo</h2>
          <p class="text-surface-500 text-sm mt-1">
            Đóng góp ý tưởng cải tiến công nghệ, quy trình SXKD và quản trị tại EVNGENCO1
          </p>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label>Danh mục *</label>
          <p-select appendTo="body" class="w-full"
            [options]="categoryOptions" optionLabel="label" optionValue="value"
            [(ngModel)]="form.category">
          </p-select>
          <small class="text-surface-500 block mt-1">Chọn danh mục phù hợp nhất</small>
        </div>

        <div>
          <label>Mức độ ưu tiên *</label>
          <p-select appendTo="body" class="w-full"
            [options]="priorityOptions" optionLabel="label" optionValue="value"
            [(ngModel)]="form.priority">
          </p-select>
        </div>

        <div class="md:col-span-2">
          <label>Tiêu đề ý tưởng *</label>
          <input pInputText [(ngModel)]="form.title" class="w-full" 
            placeholder="VD: Ứng dụng AI dự báo nhu cầu điện năng"/>
        </div>

        <div class="md:col-span-2">
          <label>Mô tả chi tiết *</label>
          <textarea pInputText [(ngModel)]="form.description" rows="4" class="w-full" 
            placeholder="Mô tả chi tiết về ý tưởng, vấn đề cần giải quyết, giải pháp đề xuất..."></textarea>
        </div>

        <div class="md:col-span-2">
          <label>Lợi ích kỳ vọng *</label>
          <textarea pInputText [(ngModel)]="form.expectedBenefit" rows="3" class="w-full" 
            placeholder="Lợi ích mang lại cho đơn vị (tiết kiệm chi phí, nâng cao hiệu quả, giảm thời gian...)"></textarea>
        </div>

        <div class="md:col-span-2">
          <label>Tài liệu đính kèm</label>
          <p-fileUpload 
            name="files" 
            mode="basic" 
            chooseLabel="Chọn file" 
            accept="image/*,.pdf,.doc,.docx" 
            [multiple]="true"
            [auto]="true"
            customUpload
            (uploadHandler)="onFilesSelected($event)">
          </p-fileUpload>
          <small class="text-surface-500 block mt-1">
            Có thể đính kèm sơ đồ, mô hình, tài liệu tham khảo
          </small>
        </div>
      </div>

      <div class="mt-4 flex justify-end gap-2">
        <button pButton label="Làm mới" class="p-button-outlined" 
          (click)="resetForm()"></button>
        <button pButton label="Gửi đề xuất" icon="pi pi-send"
          [disabled]="submitting" [loading]="submitting"
          (click)="submit()"></button>
      </div>
    </div>

    <div class="card">
      <h2 class="text-xl font-semibold mb-4">Danh sách ý tưởng đề xuất</h2>

      <p-table #dt
        [value]="list"
        dataKey="id"
        [rows]="10"
        [rowHover]="true"
        [showGridlines]="true"
        [paginator]="true"
        [rowsPerPageOptions]="[10,25,50]"
        [globalFilterFields]="['title', 'description', 'submitterName', 'submitterDepartment']"
        [loading]="loading"
        styleClass="p-datatable-sm">

        <ng-template pTemplate="caption">
          <div class="flex justify-between items-center flex-column sm:flex-row gap-3">
            <button pButton label="Xóa bộ lọc" class="p-button-outlined" 
              icon="pi pi-filter-slash" (click)="clearFilters(dt)"></button>

            <p-iconfield iconPosition="left" class="ml-auto">
              <p-inputicon>
                <i class="pi pi-search"></i>
              </p-inputicon>
              <input #globalSearch pInputText type="text" 
                (input)="onGlobalFilter(dt, $event)" 
                placeholder="Tìm kiếm..." 
                class="w-full sm:w-80"/>
            </p-iconfield>
          </div>
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <th style="min-width: 10rem">
              <div class="flex justify-between items-center">
                Danh mục
                <p-columnFilter field="category" matchMode="equals" display="menu">
                  <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                    <p-select [ngModel]="value" [options]="categoryOptions" 
                      optionLabel="label" optionValue="value"
                      placeholder="Tất cả" (onChange)="filter($event.value)" 
                      [style]="{'min-width': '12rem'}">
                    </p-select>
                  </ng-template>
                </p-columnFilter>
              </div>
            </th>

            <th style="min-width: 15rem" pSortableColumn="title">
              <div class="flex justify-between items-center">
                Tiêu đề
                <p-sortIcon field="title" />
              </div>
            </th>

            <th style="min-width: 8rem">
              <div class="flex justify-between items-center">
                Ưu tiên
                <p-columnFilter field="priority" matchMode="equals" display="menu">
                  <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                    <p-select [ngModel]="value" [options]="priorityOptions" 
                      optionLabel="label" optionValue="value"
                      placeholder="Tất cả" (onChange)="filter($event.value)" 
                      [style]="{'min-width': '10rem'}">
                    </p-select>
                  </ng-template>
                </p-columnFilter>
              </div>
            </th>

            <th style="min-width: 12rem">Người đề xuất</th>

            <th style="min-width: 10rem">
              <div class="flex justify-between items-center">
                Trạng thái
                <p-columnFilter field="status" matchMode="equals" display="menu">
                  <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                    <p-select [ngModel]="value" [options]="statusOptions" 
                      optionLabel="label" optionValue="value"
                      placeholder="Tất cả" (onChange)="filter($event.value)" 
                      [style]="{'min-width': '10rem'}">
                    </p-select>
                  </ng-template>
                </p-columnFilter>
              </div>
            </th>

            <th style="min-width: 10rem" pSortableColumn="createdAt">
              <div class="flex justify-between items-center">
                Ngày gửi
                <p-sortIcon field="createdAt" />
              </div>
            </th>

            <th style="width: 9rem; text-align: center">Thao tác</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-idea>
          <tr>
            <td>
              <p-tag [value]="categoryLabel(idea.category)" 
                [severity]="getCategorySeverity(idea.category)"
                [icon]="getCategoryIcon(idea.category)">
              </p-tag>
            </td>

            <td>
              <span class="font-semibold">{{ idea.title }}</span>
            </td>

            <td>
              <p-tag [value]="priorityLabel(idea.priority)" 
                [severity]="getPrioritySeverity(idea.priority)">
              </p-tag>
            </td>

            <td>
              <div class="flex flex-column gap-1">
                <span class="font-medium">{{ idea.submitterName }}</span>
              </div>
            </td>

            <td>
              <p-tag [value]="statusLabel(idea.status)" 
                [severity]="getStatusSeverity(idea.status)">
              </p-tag>
            </td>

            <td>
              <span class="text-sm">
                {{ idea.createdAt | date:'dd/MM/yyyy HH:mm' }}
              </span>
            </td>

            <td>
              <div class="flex justify-center gap-1">
                <button pButton icon="pi pi-eye" 
                  [rounded]="true" [text]="true" size="small"
                  pTooltip="Xem chi tiết" tooltipPosition="top"
                  (click)="openDetail(idea)"></button>
                <button pButton icon="pi pi-pencil"
                  [rounded]="true" [text]="true" size="small"
                  severity="info" pTooltip="Sửa" tooltipPosition="top"
                  (click)="editIdea(idea)"
                  *ngIf="idea.status === 'pending'"></button>
                <button pButton icon="pi pi-trash"
                  [rounded]="true" [text]="true" size="small"
                  severity="danger" pTooltip="Xóa" tooltipPosition="top"
                  (click)="confirmDelete(idea)"></button>
              </div>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="7" class="text-center py-6">
              <div class="flex flex-column items-center gap-3">
                <i class="pi pi-lightbulb text-4xl text-surface-300"></i>
                <span class="text-surface-500">Chưa có ý tưởng nào được đề xuất</span>
              </div>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="loadingbody">
          <tr>
            <td colspan="7" class="text-center py-6">
              <i class="pi pi-spin pi-spinner text-2xl"></i>
              <div class="mt-2">Đang tải dữ liệu...</div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

  <!-- Dialog chi tiết -->
  <p-dialog 
    header="Chi tiết ý tưởng đổi mới" 
    [(visible)]="showDetail" 
    [modal]="true" 
    [style]="{width:'800px'}" 
    [draggable]="false">
    
    <div *ngIf="selected">
      <div class="detail-section">
        <h4>Thông tin chung</h4>
        <div class="grid grid-cols-2 gap-3">
          <div class="detail-item">
            <span class="detail-label">Danh mục:</span>
            <p-tag [value]="categoryLabel(selected.category)" 
              [severity]="getCategorySeverity(selected.category)"
              [icon]="getCategoryIcon(selected.category)">
            </p-tag>
          </div>
          <div class="detail-item">
            <span class="detail-label">Mức độ ưu tiên:</span>
            <p-tag [value]="priorityLabel(selected.priority)" 
              [severity]="getPrioritySeverity(selected.priority)">
            </p-tag>
          </div>
          <div class="detail-item">
            <span class="detail-label">Trạng thái:</span>
            <p-tag [value]="statusLabel(selected.status)" 
              [severity]="getStatusSeverity(selected.status)">
            </p-tag>
          </div>
          <div class="detail-item">
            <span class="detail-label">Ngày gửi:</span>
            <span>{{ selected.createdAt | date:'dd/MM/yyyy HH:mm' }}</span>
          </div>
        </div>
      </div>

      <div class="detail-section">
        <h4>Người đề xuất</h4>
        <div class="grid grid-cols-2 gap-3">
          <div class="detail-item">
            <span class="detail-label">Họ tên:</span>
            <span class="font-medium">{{ selected.submitterName }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Email:</span>
            <span>{{ selected.submitterEmail }}</span>
          </div>
        </div>
      </div>

      <div class="detail-section">
        <h4>Tiêu đề</h4>
        <p class="font-semibold text-lg">{{ selected.title }}</p>
      </div>

      <div class="detail-section">
        <h4>Mô tả chi tiết</h4>
        <div class="content-box">{{ selected.description }}</div>
      </div>

      <div class="detail-section">
        <h4>Lợi ích kỳ vọng</h4>
        <div class="content-box bg-green-50">{{ selected.expectedBenefit }}</div>
      </div>

      <div class="detail-section" *ngIf="selected.reviewNotes">
        <h4>Ghi chú đánh giá</h4>
        <div class="content-box bg-blue-50">{{ selected.reviewNotes }}</div>
      </div>

      <div class="detail-section" *ngIf="selected.attachments?.length">
        <h4>Tài liệu đính kèm ({{ selected.attachments?.length }})</h4>
        <div class="attachments">
          <div *ngFor="let file of selected.attachments" class="attachment-item">
            <i class="pi pi-file text-2xl text-surface-400"></i>
            <span class="text-sm">Tài liệu</span>
          </div>
        </div>
      </div>
    </div>

    <ng-template pTemplate="footer">
      <button pButton label="Đóng" class="p-button-text" 
        (click)="showDetail=false"></button>
      <button pButton label="Đang xem xét" severity="info"
        (click)="setStatus(selected!, 'reviewing')" 
        *ngIf="selected && selected.status === 'pending'"></button>
      <button pButton label="Phê duyệt" severity="success"
        (click)="approveIdea(selected!)" 
        *ngIf="selected && selected.status === 'reviewing'"></button>
      <button pButton label="Từ chối" severity="danger"
        (click)="rejectIdea(selected!)" 
        *ngIf="selected && (selected.status === 'pending' || selected.status === 'reviewing')"></button>
      <button pButton label="Đã triển khai" severity="contrast"
        (click)="setStatus(selected!, 'implemented')" 
        *ngIf="selected && selected.status === 'approved'"></button>
    </ng-template>
  </p-dialog>

  <!-- Dialog Reject -->
  <p-dialog 
    header="Từ chối ý tưởng" 
    [(visible)]="showRejectDialog" 
    [modal]="true" 
    [style]="{width:'500px'}">
    
    <div class="mb-3">
      <label>Lý do từ chối *</label>
      <textarea pInputText [(ngModel)]="rejectNotes" rows="4" class="w-full" 
        placeholder="Nhập lý do từ chối ý tưởng này..."></textarea>
    </div>

    <ng-template pTemplate="footer">
      <button pButton label="Hủy" class="p-button-text" 
        (click)="showRejectDialog=false"></button>
      <button pButton label="Xác nhận từ chối" severity="danger"
        (click)="confirmReject()"></button>
    </ng-template>
  </p-dialog>

  <p-confirmDialog [dismissableMask]="true"></p-confirmDialog>
  `,
  styles: [`
    .card {
      background: var(--p-content-background);
      border-radius: var(--p-content-border-radius);
      padding: 1.5rem;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
      margin-bottom: 1.5rem;
    }

    .card:last-child {
      margin-bottom: 0;
    }

    label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.375rem;
    }

    :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td {
      padding: 0.75rem 1rem;
      vertical-align: middle;
    }

    :host ::ng-deep .p-datatable .p-datatable-thead > tr > th {
      padding: 0.75rem 1rem;
      background: var(--p-surface-50);
      font-weight: 600;
    }

    :host ::ng-deep .p-tag {
      font-size: 0.75rem;
      padding: 0.25rem 0.5rem;
    }

    :host ::ng-deep .p-button.p-button-text {
      padding: 0.5rem;
    }

    :host ::ng-deep .p-datatable-emptymessage > td {
      padding: 2rem !important;
    }

    :host ::ng-deep textarea.p-inputtext {
      resize: vertical;
      min-height: 100px;
    }

    .detail-section {
      margin-bottom: 1.25rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--p-surface-200);
    }

    .detail-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }

    .detail-section h4 {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      color: var(--p-primary-color);
    }

    .detail-item {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .detail-label {
      font-size: 0.875rem;
      color: var(--p-text-muted-color);
    }

    .content-box {
      white-space: pre-wrap;
      line-height: 1.6;
      background: var(--p-surface-50);
      padding: 1rem;
      border-radius: 8px;
    }

    .bg-green-50 {
      background-color: #f0fdf4 !important;
    }

    .bg-blue-50 {
      background-color: #eff6ff !important;
    }

    .attachments {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .attachment-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem;
      border: 1px solid var(--p-surface-200);
      border-radius: 8px;
      background: var(--p-surface-50);
    }
  `]
})
export class InnovationIdeasComponent implements OnInit {
  @ViewChild('globalSearch') globalSearch!: ElementRef;

  private svc = inject(InnovationIdeaService);
  private confirm = inject(ConfirmationService);

  list: InnovationIdea[] = [];
  loading = false;
  submitting = false;

  form: Partial<InnovationIdea> = {
    category: 'feature',
    title: '',
    description: '',
    expectedBenefit: '',
    priority: 'medium',
    attachments: []
  };

  showDetail = false;
  selected: InnovationIdea | null = null;

  showRejectDialog = false;
  rejectNotes = '';

  categoryOptions = [
    { label: 'Bổ sung tính năng', value: 'feature' as IdeaCategory },
    { label: 'Phát triển công cụ mới', value: 'tool' as IdeaCategory },
    { label: 'Cải tiến SXKD', value: 'production' as IdeaCategory },
    { label: 'Quản trị & Vận hành', value: 'management' as IdeaCategory },
    { label: 'Khác', value: 'other' as IdeaCategory },
  ];

  priorityOptions = [
    { label: 'Thấp', value: 'low' as IdeaPriority },
    { label: 'Trung bình', value: 'medium' as IdeaPriority },
    { label: 'Cao', value: 'high' as IdeaPriority },
    { label: 'Khẩn cấp', value: 'urgent' as IdeaPriority },
  ];

  statusOptions = [
    { label: 'Chờ xử lý', value: 'pending' as IdeaStatus },
    { label: 'Đang xem xét', value: 'reviewing' as IdeaStatus },
    { label: 'Đã phê duyệt', value: 'approved' as IdeaStatus },
    { label: 'Từ chối', value: 'rejected' as IdeaStatus },
    { label: 'Đã triển khai', value: 'implemented' as IdeaStatus },
  ];

  ngOnInit() { this.fetch(); }

  fetch() {
    this.loading = true;
    this.svc.list().subscribe({
      next: (res: InnovationIdea[]) => {
        this.list = res;
        this.loading = false;
      },
      error: () => this.loading = false
    });
  }

  onFilesSelected(event: any) {
    const files: File[] = event.files || [];
    files.forEach(f => {
      this.svc.uploadAttachment(f).subscribe((url: string) => {
        this.form.attachments = this.form.attachments || [];
        this.form.attachments.push(url);
      });
    });
  }

  resetForm() {
    this.form = {
      category: 'feature',
      title: '',
      description: '',
      expectedBenefit: '',
      priority: 'medium',
      attachments: []
    };
  }

  submit() {
    if (!this.form.title?.trim() || !this.form.description?.trim() || !this.form.expectedBenefit?.trim()) {
      return;
    }

    this.submitting = true;

    // TODO: Lấy từ auth service
    const currentUser = 'Nguyễn Văn A';
    const currentEmail = 'nguyenvana@evngenco1.vn';

    const payload = {
      category: this.form.category!,
      title: this.form.title.trim(),
      description: this.form.description.trim(),
      expectedBenefit: this.form.expectedBenefit.trim(),
      priority: this.form.priority!,
      submitterName: currentUser,
      submitterEmail: currentEmail,
      attachments: this.form.attachments ?? [],
      status: 'pending' as IdeaStatus
    };

    this.svc.add(payload).subscribe({
      next: () => {
        this.submitting = false;
        this.resetForm();
        this.fetch();
      },
      error: () => {
        this.submitting = false;
      }
    });
  }

  editIdea(idea: InnovationIdea) {
    this.form = {
      category: idea.category,
      title: idea.title,
      description: idea.description,
      expectedBenefit: idea.expectedBenefit,
      priority: idea.priority,
      attachments: [...(idea.attachments || [])]
    };
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  categoryLabel(c: IdeaCategory) {
    const labels = {
      'feature': 'Tính năng',
      'tool': 'Công cụ',
      'production': 'SXKD',
      'management': 'Quản trị',
      'other': 'Khác'
    };
    return labels[c] || c;
  }

  getCategorySeverity(c: IdeaCategory): any {
    const severities = {
      'feature': 'info',
      'tool': 'success',
      'production': 'warn',
      'management': 'contrast',
      'other': 'secondary'
    };
    return severities[c] || 'secondary';
  }

  getCategoryIcon(c: IdeaCategory): string {
    const icons = {
      'feature': 'pi-plus-circle',
      'tool': 'pi-wrench',
      'production': 'pi-cog',
      'management': 'pi-sitemap',
      'other': 'pi-ellipsis-h'
    };
    return icons[c] || 'pi-lightbulb';
  }

  priorityLabel(p: IdeaPriority) {
    const labels = {
      'low': 'Thấp',
      'medium': 'Trung bình',
      'high': 'Cao',
      'urgent': 'Khẩn cấp'
    };
    return labels[p] || p;
  }

  getPrioritySeverity(p: IdeaPriority): any {
    const severities = {
      'low': 'secondary',
      'medium': 'info',
      'high': 'warn',
      'urgent': 'danger'
    };
    return severities[p] || 'secondary';
  }

  statusLabel(s: IdeaStatus) {
    const labels = {
      'pending': 'Chờ xử lý',
      'reviewing': 'Đang xem xét',
      'approved': 'Đã phê duyệt',
      'rejected': 'Từ chối',
      'implemented': 'Đã triển khai'
    };
    return labels[s] || s;
  }

  getStatusSeverity(s: IdeaStatus): any {
    const severities = {
      'pending': 'warn',
      'reviewing': 'info',
      'approved': 'success',
      'rejected': 'danger',
      'implemented': 'contrast'
    };
    return severities[s] || 'secondary';
  }

  openDetail(idea: InnovationIdea) {
    this.selected = idea;
    this.showDetail = true;
  }

  setStatus(idea: InnovationIdea, status: IdeaStatus) {
    this.svc.setStatus(idea.id, status).subscribe(() => {
      this.fetch();
      this.showDetail = false;
    });
  }

  approveIdea(idea: InnovationIdea) {
    this.confirm.confirm({
      header: 'Phê duyệt ý tưởng',
      message: `Bạn có chắc muốn phê duyệt ý tưởng <strong>${idea.title}</strong>?`,
      icon: 'pi pi-check-circle',
      acceptLabel: 'Phê duyệt',
      rejectLabel: 'Hủy',
      acceptButtonStyleClass: 'p-button-success',
      accept: () => this.setStatus(idea, 'approved')
    });
  }

  rejectIdea(idea: InnovationIdea) {
    this.selected = idea;
    this.rejectNotes = '';
    this.showRejectDialog = true;
  }

  confirmReject() {
    if (!this.rejectNotes.trim() || !this.selected) return;

    this.svc.setStatus(this.selected.id, 'rejected', this.rejectNotes.trim()).subscribe(() => {
      this.fetch();
      this.showDetail = false;
      this.showRejectDialog = false;
      this.rejectNotes = '';
    });
  }

  confirmDelete(idea: InnovationIdea) {
    this.confirm.confirm({
      header: 'Xóa ý tưởng',
      message: `Bạn có chắc muốn xóa ý tưởng <strong>${idea.title}</strong>? Hành động này không thể hoàn tác.`,
      icon: 'pi pi-trash',
      acceptLabel: 'Xóa',
      rejectLabel: 'Hủy',
      acceptButtonStyleClass: 'p-button-danger',
      accept: () => this.svc.delete(idea.id).subscribe(() => this.fetch())
    });
  }

  onGlobalFilter(table: Table, event: Event) {
    table.filterGlobal((event.target as HTMLInputElement).value, 'contains');
  }

  clearFilters(table: Table) {
    table.clear();
    if (this.globalSearch) {
      this.globalSearch.nativeElement.value = '';
    }
  }
}

================================================================================
File: quota-settings.ts
Relative Path: src/app/pages/uikit/quota-settings.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/quota-settings.ts
Extension: .ts
Lines: 314
================================================================================

import { Component, OnInit, inject, ViewChild, ElementRef } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { Table, TableModule } from 'primeng/table';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { TagModule } from 'primeng/tag';
import { SelectModule } from 'primeng/select';
import { MultiSelectModule } from 'primeng/multiselect';
import { DialogModule } from 'primeng/dialog';
import { ConfirmDialogModule } from 'primeng/confirmdialog';
import { ConfirmationService } from 'primeng/api';
import { IconFieldModule } from 'primeng/iconfield';
import { InputIconModule } from 'primeng/inputicon';
import { TooltipModule } from 'primeng/tooltip';
import { QuotaProfileService, QuotaProfile, QuotaStatus } from '../../core/services/quota-profile.service';
import { ApiKeysService } from '../../core/services/api-keys.service';

@Component({
  selector: 'app-quota-settings',
  standalone: true,
  imports: [
    CommonModule, FormsModule,
    TableModule, ButtonModule, InputTextModule, TagModule,
    SelectModule, MultiSelectModule, DialogModule, ConfirmDialogModule,
    IconFieldModule, InputIconModule, TooltipModule
  ],
  providers: [ConfirmationService],
  template: `
  <div class="page p-4">
    <div class="card">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold">Thiết lập Profile Định mức</h2>
        <button pButton label="Thêm Profile" icon="pi pi-plus" 
          (click)="openNewProfileDialog()"></button>
      </div>

      <p-table #dt
        [value]="profiles"
        dataKey="id"
        [rows]="10"
        [rowHover]="true"
        [showGridlines]="true"
        [paginator]="true"
        [rowsPerPageOptions]="[10,25,50]"
        [globalFilterFields]="['name', 'description', 'models']"
        [loading]="loading"
        styleClass="p-datatable-sm">

        <ng-template pTemplate="caption">
          <div class="flex justify-between items-center flex-column sm:flex-row gap-3">
            <button pButton label="Xóa bộ lọc" class="p-button-outlined" 
              icon="pi pi-filter-slash" (click)="clearFilters(dt)"></button>

            <p-iconfield iconPosition="left" class="ml-auto">
              <p-inputicon>
                <i class="pi pi-search"></i>
              </p-inputicon>
              <input #globalSearch pInputText type="text" 
                (input)="onGlobalFilter(dt, $event)" 
                placeholder="Tìm kiếm..." 
                class="w-full sm:w-80"/>
            </p-iconfield>
          </div>
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <th style="min-width: 12rem" pSortableColumn="name">Tên Profile</th>
            <th style="min-width: 15rem">Model được phép</th>
            <th style="min-width: 10rem" pSortableColumn="tokenPerDay">Token/ngày</th>
            <th style="min-width: 10rem" pSortableColumn="tokenPerMonth">Token/tháng</th>
            <th style="min-width: 10rem">Trạng thái</th>
            <th style="width: 9rem; text-align: center">Thao tác</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-profile>
          <tr>
            <td>
              <span class="font-semibold">{{ profile.name }}</span>
              <p class="text-sm text-surface-500 mt-1">{{ profile.description }}</p>
            </td>
            <td>
              <div class="flex flex-wrap gap-1">
                <p-tag *ngFor="let modelId of profile.models" 
                  [value]="getModelNameById(modelId)" 
                  severity="secondary"
                  styleClass="text-xs dark:bg-surface-800">
                </p-tag>
                <span *ngIf="!profile.models || profile.models.length === 0" 
                  class="text-surface-400 text-sm">Chưa chọn model</span>
              </div>
            </td>
            <td>
              <span class="font-medium">{{ formatTokenLimit(profile.tokenPerDay) }}</span>
            </td>
            <td>
              <span class="font-medium">{{ formatTokenLimit(profile.tokenPerMonth) }}</span>
            </td>
            <td>
              <p-tag 
                [value]="profile.status === 'active' ? 'Đang dùng' : 'Ngừng'"
                [severity]="profile.status === 'active' ? 'success' : 'danger'">
              </p-tag>
            </td>
            <td>
              <div class="flex justify-center gap-1">
                <button pButton icon="pi pi-pencil" [rounded]="true" [text]="true" size="small"
                  severity="info" pTooltip="Sửa" tooltipPosition="top"
                  (click)="editProfile(profile)"></button>
                <button pButton icon="pi pi-trash" [rounded]="true" [text]="true" size="small"
                  severity="danger" pTooltip="Xóa" tooltipPosition="top"
                  (click)="confirmDelete(profile)"></button>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

  <p-dialog 
    [header]="editingProfile ? 'Chỉnh sửa Profile' : 'Thêm Profile'"
    [(visible)]="showDialog" 
    [modal]="true" 
    [style]="{width:'720px'}" 
    [draggable]="false">

    <div class="group">
      <h3>Thông tin chung</h3>
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label>Tên Profile *</label>
          <input pInputText [(ngModel)]="form.name" class="w-full" />
        </div>
        <div>
          <label>Trạng thái</label>
          <p-select appendTo="body" class="w-full"
            [options]="statusOptions" optionLabel="label" optionValue="value"
            [(ngModel)]="form.status">
          </p-select>
        </div>
      </div>
    </div>

    <div class="group">
      <h3>Model được phép sử dụng</h3>
      <p-multiSelect appendTo="body" display="chip" class="w-full"
        [options]="apiConfigOptions" optionLabel="name" optionValue="model"
        placeholder="Chọn các model"
        [(ngModel)]="form.models">
      </p-multiSelect>
    </div>

    <div class="group">
      <h3>Giới hạn token</h3>
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label>Token / ngày (0 = không giới hạn)</label>
          <input pInputText type="number" [(ngModel)]="form.tokenPerDay" class="w-full" min="0"/>
        </div>
        <div>
          <label>Token / tháng (0 = không giới hạn)</label>
          <input pInputText type="number" [(ngModel)]="form.tokenPerMonth" class="w-full" min="0"/>
        </div>
      </div>
    </div>

    <div class="group last">
      <h3>Mô tả</h3>
      <textarea pInputText [(ngModel)]="form.description" class="w-full" rows="3"></textarea>
    </div>

    <ng-template pTemplate="footer">
      <button pButton label="Hủy" class="p-button-text" (click)="showDialog=false"></button>
      <button pButton label="Lưu" severity="primary" [disabled]="saving" [loading]="saving" (click)="save()"></button>
    </ng-template>
  </p-dialog>

  <p-confirmDialog [dismissableMask]="true"></p-confirmDialog>
  `,
  styles: [`
    .card { background: var(--p-content-background); border-radius: 1rem; padding: 1.5rem; box-shadow: 0 4px 20px rgba(0,0,0,.05); }
    :host ::ng-deep .p-datatable-sm .p-datatable-tbody > tr > td,
    :host ::ng-deep .p-datatable-sm .p-datatable-thead > tr > th { padding: 0.75rem 1rem; }
    .group { margin-bottom: 1.25rem; padding-bottom: 1rem; border-bottom: 1px solid var(--p-surface-200); }
    .group.last { border-bottom: 0; }
    .group h3 { font-size: 0.95rem; font-weight: 600; margin-bottom: 0.75rem; }
    .group label { display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.375rem; }
    :host ::ng-deep .p-multiselect { width: 100%; }
  `]
})
export class QuotaSettingsComponent implements OnInit {
  @ViewChild('globalSearch') globalSearch!: ElementRef;

  private svc = inject(QuotaProfileService);
  private apiKeysService = inject(ApiKeysService);
  private confirm = inject(ConfirmationService);

  profiles: QuotaProfile[] = [];
  apiConfigOptions: { name: string, model: string }[] = [];
  loading = false;
  saving = false;

  showDialog = false;
  editingProfile: QuotaProfile | null = null;
  form: Partial<QuotaProfile> = {};

  statusOptions = [
    { label: 'Đang sử dụng', value: 'active' as QuotaStatus },
    { label: 'Ngừng', value: 'inactive' as QuotaStatus },
  ];

  ngOnInit() {
    this.fetchProfiles();
    this.fetchApiConfigs();
  }

  fetchProfiles() {
    this.loading = true;
    this.svc.list().subscribe({
      next: res => {
        this.profiles = res;
        this.loading = false;
      },
      error: () => this.loading = false
    });
  }

  fetchApiConfigs() {
    this.apiKeysService.list().subscribe(configs => {
      this.apiConfigOptions = configs.map(c => ({ name: c.name, model: c.model }));
    });
  }

  emptyProfile(): Partial<QuotaProfile> {
    return { 
      name: '', 
      models: [], 
      tokenPerDay: 0, 
      tokenPerMonth: 0, 
      status: 'active', 
      description: '' 
    };
  }

  openNewProfileDialog() {
    this.editingProfile = null;
    this.form = this.emptyProfile();
    this.showDialog = true;
  }

  editProfile(profile: QuotaProfile) {
    this.editingProfile = profile;
    this.form = { ...profile, models: [...(profile.models || [])] };
    this.showDialog = true;
  }

  save() {
    this.saving = true;
    if (this.editingProfile) {
      this.svc.update(this.editingProfile.id, this.form).subscribe({
        next: () => { 
          this.saving = false; 
          this.showDialog = false; 
          this.fetchProfiles(); 
        },
        error: () => this.saving = false
      });
    } else {
      this.svc.add(this.form as Omit<QuotaProfile,'id'>).subscribe({
        next: () => { 
          this.saving = false; 
          this.showDialog = false; 
          this.fetchProfiles(); 
        },
        error: () => this.saving = false
      });
    }
  }
  
  confirmDelete(profile: QuotaProfile) {
    this.confirm.confirm({
      header: 'Xóa Profile',
      message: `Bạn có chắc muốn xóa profile <strong>${profile.name}</strong>?`,
      accept: () => this.svc.delete(profile.id).subscribe(() => this.fetchProfiles())
    });
  }

  onGlobalFilter(table: Table, event: Event) {
    table.filterGlobal((event.target as HTMLInputElement).value, 'contains');
  }

  clearFilters(table: Table) {
    table.clear();
    if (this.globalSearch) {
      this.globalSearch.nativeElement.value = '';
    }
  }

  formatTokenLimit(limit: number): string {
    if (limit === 0) return 'Không giới hạn';
    if (limit >= 1000000) return (limit / 1000000).toFixed(1) + 'M';
    if (limit >= 1000) return (limit / 1000).toFixed(0) + 'K';
    return limit.toLocaleString();
  }

  getModelNameById(modelId: string): string {
      return this.apiConfigOptions.find(opt => opt.model === modelId)?.name || modelId;
  }
}



================================================================================
File: soan-email.ts
Relative Path: src/app/pages/uikit/soan-email.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/soan-email.ts
Extension: .ts
Lines: 314
================================================================================

import { Component, OnInit, inject, OnDestroy, ViewChild } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { Select } from 'primeng/select';
import { TooltipModule } from 'primeng/tooltip';
import { Popover, PopoverModule } from 'primeng/popover';
import { TagModule } from 'primeng/tag';
import { DialogModule } from 'primeng/dialog';
import { Subscription } from 'rxjs';

import { AiModelService } from '../../core/services/ai-model.service';
import { AICategory, AIModel } from '../../core/models/ai-models.model';
import { AiModelSelectorComponent } from '../../core/shared/components/ai-model-selector.component';
import { AuthService } from '../../core/services/auth.service'; // **Import AuthService**

interface FilterOption { label: string; selected: boolean; }

@Component({
  selector: 'app-email-composer',
  standalone: true,
  imports: [
    CommonModule, FormsModule, ButtonModule, InputTextModule, Select,
    TooltipModule, PopoverModule, TagModule, DialogModule,
    AiModelSelectorComponent
  ],
  template: `
    <div class="page h-full bg-surface-50 dark:bg-surface-900">
      <div class="col left border-r border-surface-200 dark:border-surface-700">
        <div class="container">
          <div class="header"><h1 class="title">Soạn Email</h1></div>
          <div class="field"><label class="label">Phân loại</label><div class="chips"><button *ngFor="let cat of categories" [class]="getFilterButtonClass(cat.selected)" (click)="toggleFilter(categories, cat)">{{cat.label}}</button></div></div>
          <div class="field"><label class="label">Người nhận</label><div class="chips"><button *ngFor="let r of recipients" [class]="getFilterButtonClass(r.selected)" (click)="toggleFilter(recipients, r)">{{r.label}}</button></div></div>
          <div class="field"><label class="label">Mục đích <span class="req">*</span></label><input type="text" pInputText [(ngModel)]="emailPurpose" placeholder="Email giới thiệu sản phẩm mới" class="control" [class.ng-invalid]="showError && !emailPurpose" /><small *ngIf="showError && !emailPurpose" class="error">Mục đích là bắt buộc</small></div>
          <div class="field"><label class="label">Gợi ý nội dung</label><textarea pInputText [(ngModel)]="contentSuggestion" placeholder="Nhấn mạnh sản phẩm đáp ứng tạo nội dung tự động..." rows="4" class="control textarea"></textarea></div>
          <div class="field"><label class="label">Độ dài</label><div class="chips"><button *ngFor="let len of lengths" [class]="getFilterButtonClass(len.selected)" (click)="toggleFilter(lengths, len)">{{len.label}}</button></div></div>
          <div class="field"><label class="label">Phong cách</label><div class="chips"><button *ngFor="let s of styles" [class]="getFilterButtonClass(s.selected)" (click)="toggleFilter(styles, s)">{{s.label}}</button></div></div>
          <div class="field"><label class="label">Ngôn ngữ</label><p-select [(ngModel)]="selectedLanguage" [options]="languages" optionLabel="name" placeholder="Chọn ngôn ngữ" appendTo="body" class="select w-full" (onChange)="onLanguageChange($event)"><ng-template pTemplate="selectedItem"><div class="flex items-center gap-2 text-sm" *ngIf="selectedLanguage"><span class="text-base">{{selectedLanguage.flag}}</span><span>{{selectedLanguage.name}}</span></div></ng-template><ng-template let-language pTemplate="item"><div class="flex items-center gap-2 text-sm"><span class="text-base">{{language.flag}}</span><span>{{language.name}}</span></div></ng-template></p-select></div>

          <div class="actions">
            <button pButton class="btn btn-ghost" (click)="modelPopover.toggle($event)">
              <span class="inline-flex items-center gap-2">
                <ng-container *ngIf="selectedModel.icon; else noIcon">
                    <img [src]="selectedModel.icon" [alt]="selectedModel.name" class="w-5 h-5"/>
                </ng-container>
                <ng-template #noIcon>
                    <i class="pi pi-bolt"></i>
                </ng-template>
                <span>{{ selectedModel.name }}</span>
              </span>
              <i class="pi pi-chevron-down caret"></i>
            </button>
            <button pButton label="Soạn email" icon="pi pi-sparkles" severity="primary" class="btn btn-primary" (click)="composeEmail()"></button>
          </div>
        </div>
      </div>

      <div class="col">
        <div class="container">
          <div *ngIf="!generatedContent" class="empty"><i class="pi pi-file-edit icon"></i><p>Nội dung sẽ được hiển thị tại đây.</p></div>
          <div *ngIf="generatedContent" class="w-full max-w-3xl mx-auto"><div class="card"><div class="card-head"><h3>Email đã tạo</h3><div class="tools"><button pButton icon="pi pi-copy" [text]="true" [rounded]="true" severity="secondary" class="icon-btn" pTooltip="Sao chép" tooltipPosition="top" (click)="copyContent()"></button><button pButton icon="pi pi-download" [text]="true" [rounded]="true" severity="secondary" class="icon-btn" pTooltip="Tải xuống" tooltipPosition="top"></button><button pButton icon="pi pi-refresh" [text]="true" [rounded]="true" severity="secondary" class="icon-btn" pTooltip="Tạo lại" tooltipPosition="top" (click)="regenerateContent()"></button></div></div><div class="card-body"><div><label class="meta">Tiêu đề</label><p class="subject">{{generatedContent.subject}}</p></div><div><label class="meta">Nội dung</label><div class="email-body">{{generatedContent.body}}</div></div></div><div class="card-foot"><button pButton label="Sử dụng email này" icon="pi pi-check" severity="primary" class="btn-block"></button></div></div></div>
        </div>
      </div>

      <p-popover #modelPopover [appendTo]="'body'" [style]="{width:'400px', padding:'0'}" styleClass="model-op">
        <ng-template pTemplate="content">
          <app-ai-model-selector 
            [popoverRef]="modelPopover" 
            (modelSelected)="onModelSelected($event)">
          </app-ai-model-selector>
        </ng-template>
      </p-popover>
      
      <p-dialog header="Lưu ý" [(visible)]="showLanguageWarning" [modal]="true" [style]="{width: '400px'}" [draggable]="false" [resizable]="false">
        <p class="m-0 leading-relaxed text-surface-700 dark:text-surface-200">
            Khi chọn ngôn ngữ "Tự động", bạn vui lòng ghi rõ ngôn ngữ mong muốn (ví dụ: "viết bằng tiếng Anh") trong phần <strong>"Gợi ý nội dung"</strong> để AI có thể tạo ra kết quả chính xác nhất.
        </p>
        <ng-template pTemplate="footer">
            <p-button label="Đã hiểu" (click)="showLanguageWarning = false" styleClass="p-button-sm w-full"></p-button>
        </ng-template>
      </p-dialog>
    </div>
  `,
  styles: [
  `
  /* === Compact scale === */
  :host{
    --space-1: 6px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 14px;
    --space-5: 16px;
    --radius: 10px;
    --fs-base: clamp(14px, 0.8vw + 9px, 15px);
    --fs-btn: 0.875rem;
    --fs-label: 0.92rem;
    --fs-small: 0.75rem;
    --fs-h1: 1.02rem;
    --lh: 1.55;
    --lh-tight: 1.4;
  }
  /* Layout */
  .page{ display:grid; grid-template-columns: 1fr 1fr; }
  .col{ overflow:auto; }
  .left{ background: var(--p-surface-0); }
  .container{ padding: clamp(12px, 1.6vw, 18px); max-width: 720px; margin: 0 auto; }
  /* Header */
  .header{ margin-bottom: var(--space-5); }
  .title{ font-size: var(--fs-h1); font-weight: 600; margin:0; color: var(--p-surface-900); line-height:1.2; }
  /* Field block – compact */
  .field{ margin-bottom: var(--space-3); }
  .label{
    display:block;
    margin-bottom: .5rem;
    font-weight: 600;
    font-size: var(--fs-label);
    color: var(--p-surface-700);
  }
  .req{ color:#ef4444; }
  /* Controls */
  .control{
    width:100%;
    padding: 10px 12px;
    border-radius: var(--radius);
    font-size: var(--fs-base);
    line-height: var(--lh);
  }
  .textarea{
    min-height: 110px;
    resize: none;
    font-size: 0.93rem;
    line-height: var(--lh);
  }
  .control::placeholder{ font-size: 0.9rem; color: var(--p-surface-500); }
  .error{ color:#ef4444; font-size: var(--fs-small); margin-top: 4px; display:block; }
  /* Chips (buttons) */
  .chips{ display:flex; flex-wrap:wrap; gap: var(--space-2); }
  .chip{
    padding: 5px 10px;
    border-radius: 9999px;
    font-weight: 500;
    font-size: var(--fs-btn);
    border: 1px solid var(--p-surface-300);
    background:#fff; color: var(--p-surface-700);
    line-height: 1.35; transition: .15s ease;
  }
  .chip--active{
    background: var(--p-primary-50, #eef2ff);
    color: var(--p-primary-700, #3b82f6);
    border-color: var(--p-primary-200, #c7d2fe);
  }
  /* Actions – compact */
  .actions{
    display:flex; justify-content:space-between; align-items:center;
    gap: var(--space-2);
    padding-top: var(--space-3);
    margin-top: var(--space-2);
    border-top: 1px solid var(--p-surface-200);
  }
  .btn{ font-size: var(--fs-btn); padding: 7px 12px; border-radius: 8px; }
  .btn-ghost{
    display:flex; align-items:center; gap:6px;
    background:#fff; border:1px solid var(--p-surface-300); color: var(--p-surface-700);
  }
  .btn-primary{}
  .caret{ font-size: 11px; }
  .emoji{ font-size: 1rem; }
  /* Right preview – compact */
  .empty{ height: calc(100% - 2*var(--space-5)); display:flex; flex-direction:column; justify-content:center; align-items:center; gap:6px; text-align:center; color:var(--p-surface-500); }
  .empty .icon{ font-size: 52px; color: var(--p-surface-300); }
  .card{
    background:#fff; border:1px solid var(--p-surface-200); border-radius: var(--radius);
    box-shadow: 0 6px 20px rgba(0,0,0,.04);
    padding: clamp(12px, 1.6vw, 18px);
  }
  .card-head{
    display:flex; justify-content:space-between; align-items:center;
    padding-bottom: var(--space-2);
    margin-bottom: var(--space-2);
    border-bottom: 1px solid var(--p-surface-200);
  }
  .tools{ display:flex; gap:4px; }
  .icon-btn{ width:34px; height:34px; }
  .card-body{ display:grid; gap: var(--space-2); }
  .meta{ display:block; font-size:.72rem; font-weight:700; text-transform:uppercase; color:var(--p-surface-600); letter-spacing:.03em; }
  .subject{ margin-top:4px; font-weight:600; line-height: var(--lh-tight); }
  .email-body{ margin-top:4px; white-space:pre-line; font-size: var(--fs-base); line-height: var(--lh); color: var(--p-surface-800); }
  /* === Model picker (popover) === */
  :host ::ng-deep .model-op { border-radius: 14px; overflow: hidden; }
  .model-panel{ background:#fff; }
  .search-bar{
    position: sticky; top:0; z-index:1;
    display:flex; align-items:center; gap:8px;
    padding: 10px 12px; border-bottom: 1px solid var(--p-surface-200);
    background:#fff;
  }
  .search-bar i{ color: var(--p-surface-500); }
  .search-bar input{ width:100%; border:none; outline:none; font-size: .95rem; }
  .list{ max-height: 60vh; overflow:auto; padding: 6px 0; }
  .group{ padding: 6px 8px; }
  .group-title{ font-weight:700; color:#111827; margin: 6px 10px 8px; }
  .group-item{
    display:flex; align-items:center; justify-content:space-between;
    padding: 10px 12px; border-radius: 10px; cursor: pointer;
  }
  .group-item:hover{ background:#f3f4f6; }
  .left{ display:flex; align-items:center; gap:10px; }
  .name{ color:#0f172a; }
  .right{ display:flex; align-items:center; gap:6px; color:#1f2937; font-weight:600; }
  .bolt{ font-size: 14px; color:#6366f1; }
  @media (max-width: 1024px){
    .page{ grid-template-columns: 1fr; }
    .left{ border-right: none; border-bottom: 1px solid var(--p-surface-200); }
  }
`
  ]
})
export class EmailComposerComponent implements OnInit, OnDestroy {
  @ViewChild('modelPopover') modelPopover!: Popover;

  private aiModelService = inject(AiModelService);
  private authService = inject(AuthService); // **Inject AuthService**
  private modelsSubscription?: Subscription;

  categories: FilterOption[] = [ { label: 'Tự động', selected: true }, { label: 'Nội bộ', selected: false }, { label: 'Giao việc', selected: false }, { label: 'Báo cáo', selected: false }, { label: 'Thông báo', selected: false }, { label: 'Phản hồi', selected: false } ];
  recipients: FilterOption[] = [ { label: 'Tự động', selected: true }, { label: 'Đối tác', selected: false }, { label: 'Lãnh đạo', selected: false }, { label: 'Nhân viên', selected: false }, { label: 'Nội bộ', selected: false }, { label: 'Ứng viên', selected: false } ];
  lengths: FilterOption[] = [ { label: 'Tự động', selected: true }, { label: 'Ngắn', selected: false }, { label: 'Vừa', selected: false }, { label: 'Dài', selected: false } ];
  styles: FilterOption[] = [ { label: 'Tự động', selected: true }, { label: 'Thân thiện', selected: false }, { label: 'Chuyên nghiệp', selected: false }, { label: 'Vui vẻ', selected: false }, { label: 'Nghiêm túc', selected: false }, { label: 'Trang trọng', selected: false } ];
  languages = [ { name: 'Tự động', code: 'auto', flag: '🌐' }, { name: 'Việt Nam', code: 'vi', flag: '🇻🇳' }, { name: 'English', code: 'en', flag: '🇺🇸' }];

  emailPurpose = '';
  contentSuggestion = '';
  selectedLanguage: any = null;
  showError = false;
  generatedContent: any = null;
  showLanguageWarning = false;

  selectedModel: AIModel = { id: '', name: 'Đang tải...', icon: '', profile: { description: '', sortOrder: 0 }, costType: 'free' };
  
  aiModels: AICategory[] = [];
  
  ngOnInit() {
    this.selectedLanguage = this.languages[0];
    
    // **SỬA LỖI**: Lấy danh sách model được phép và truyền vào service
    const currentUser = this.authService.currentUser();
    const allowedModelNames = currentUser?.quotaProfile?.models ?? [];

    this.modelsSubscription = this.aiModelService.getModels(allowedModelNames).subscribe((data: AICategory[]) => {
      this.aiModels = data;
      this.setDefaultModel();
    });
  }

  ngOnDestroy() {
    this.modelsSubscription?.unsubscribe();
  }

  setDefaultModel() {
    const defaultModelName = 'Trợ lý EVNGENCO1';
    let defaultModel: AIModel | undefined;
    
    for (const group of this.aiModels) {
        const found = group.models.find(m => m.name === defaultModelName);
        if (found) {
            defaultModel = found;
            break;
        }
    }

    if (!defaultModel && this.aiModels.length > 0 && this.aiModels[0].models.length > 0) {
        defaultModel = this.aiModels[0].models[0];
    }
    
    if (defaultModel) {
      this.selectedModel = defaultModel;
    } else {
        this.selectedModel = {
          id: '',
          name: 'Không có model',
          icon: 'pi pi-exclamation-triangle',
          profile: { description: 'Không tìm thấy model nào', sortOrder: 0 },
          costType: 'free'
        };
    }
  }

  onModelSelected(model: AIModel): void {
    this.selectedModel = model;
  }
  
  getFilterButtonClass(selected: boolean): string { return selected ? 'chip chip--active' : 'chip'; }
  toggleFilter(arr: any[], item: any) { arr.forEach((f: any) => (f.selected = false)); item.selected = true; }
  onLanguageChange(event: any) { if (event.value && event.value.code === 'auto') { this.showLanguageWarning = true; } }

  composeEmail() {
    if (!this.emailPurpose.trim()) { this.showError = true; return; }
    this.showError = false;
    this.generatedContent = {
      subject: `${this.emailPurpose}`,
      body: `Kính gửi Quý khách hàng,\n\nChúng tôi rất vui mừng được giới thiệu đến Quý khách sản phẩm mới nhất...`
    };
  }

  regenerateContent() { this.composeEmail(); }

  copyContent() {
    if (!this.generatedContent) return;
    const content = `${this.generatedContent.subject}\n\n${this.generatedContent.body}`;
    navigator.clipboard.writeText(content);
  }
}


================================================================================
File: innovation_tool.ts
Relative Path: src/app/pages/uikit/innovation_tool.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/innovation_tool.ts
Extension: .ts
Lines: 278
================================================================================

import { Component, OnInit, inject, OnDestroy, ViewChild } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { TextareaModule } from 'primeng/textarea';
import { TooltipModule } from 'primeng/tooltip';
import { Popover, PopoverModule } from 'primeng/popover';
import { Select } from 'primeng/select';
import { Subscription } from 'rxjs';
import { AiModelService } from '../../core/services/ai-model.service'; 
import { AICategory, AIModel } from '../../core/models/ai-models.model';
import { AuthService } from '../../core/services/auth.service';
import { AiModelSelectorComponent } from '../../core/shared/components/ai-model-selector.component';

interface SelectOption {
  name: string;
  value: string;
}

@Component({
  selector: 'app-innovation-tool',
  standalone: true,
  imports: [
    CommonModule, FormsModule, ButtonModule, InputTextModule, TextareaModule,
    TooltipModule, PopoverModule, Select, AiModelSelectorComponent
  ],
  template: `
    <div class="page-container h-full">
      <div class="col left">
        <div class="left-panel-container">
          <div class="header-left"><h1 class="title">Công cụ tư duy đổi mới sáng tạo</h1></div>
          <div class="field">
            <label class="label">Chọn model</label>
            <div class="model-selector" (click)="modelPopover.toggle($event)">
              <div class="model-info">
                <img [src]="selectedModelIcon" alt="icon" *ngIf="selectedModelIcon"/>
                <span>{{ selectedModelName }}</span>
              </div>
              <i class="pi pi-chevron-down"></i>
            </div>
          </div>
          <div class="field">
            <label class="label">Chọn công cụ tư duy</label>
            <p-select [options]="thinkingTools" [(ngModel)]="selectedThinkingTool" optionLabel="name"
                        placeholder="Chọn giá trị" styleClass="w-full custom-dropdown" appendTo="body"></p-select>
          </div>
          <div class="field">
            <label class="label">Đối tượng nghiên cứu (vấn đề cần tư duy)</label>
            <textarea pInputText [(ngModel)]="researchSubject"
                      placeholder="Nhập giá trị" rows="4" 
                      class="control textarea"></textarea>
          </div>
          <div class="field">
            <label class="label">Ngôn ngữ</label>
            <p-select [options]="languages" [(ngModel)]="selectedLanguage" optionLabel="name"
                        placeholder="Chọn giá trị" styleClass="w-full custom-dropdown" appendTo="body"></p-select>
          </div>
        </div>
        <div class="actions-footer">
            <button pButton label="Xóa" icon="pi pi-trash" class="btn btn-clear" (click)="clearAll()"></button>
            <button pButton label="Tạo nội dung" class="btn btn-main" (click)="generateContent()"></button>
        </div>
      </div>
      <div class="col right">
        <div class="output-container">
            <div *ngIf="!generatedContent" class="empty">
                <i class="pi pi-sparkles icon-empty"></i>
                <p>AI sẽ đưa ra những gì bạn muốn ở đây.</p>
            </div>
            <div *ngIf="generatedContent" class="card">
              <div class="card-head">
                  <h3>Kết quả</h3>
                  <div class="tools">
                      <button pButton icon="pi pi-copy" [text]="true" [rounded]="true" severity="secondary" class="icon-btn" pTooltip="Sao chép" tooltipPosition="top" (click)="copyContent()"></button>
                  </div>
              </div>
              <div class="card-body">
                  <div class="result-content">
                      {{ generatedContent }}
                  </div>
              </div>
            </div>
        </div>
      </div>
       <p-popover #modelPopover [appendTo]="'body'" [style]="{width:'360px'}" styleClass="model-op">
          <ng-template pTemplate="content">
            <app-ai-model-selector 
              [popoverRef]="modelPopover" 
              (modelSelected)="selectModel($event)">
            </app-ai-model-selector>
          </ng-template>
       </p-popover>
    </div>
  `,
  styles: [
    `
      :host {
        --space-2: 8px;
        --space-3: 12px;
        --space-4: 16px;
        --radius: 8px;
        --text-color-light: #555;
        --text-color-dark: #222;
        --border-color: #e0e0e0;
        --left-bg: #f7f7f8;
      }
      .page-container {
        display: grid;
        grid-template-columns: 400px 1fr;
        font-family: 'Inter', sans-serif;
      }
      .col { height: 100%; overflow: hidden; display: flex; flex-direction: column; }
      .left { background-color: var(--left-bg); border-right: 1px solid var(--border-color); }
      .right { background-color: #fff; }

      /* Left Panel */
      .left-panel-container { padding: var(--space-4); overflow-y: auto; flex-grow: 1; }
      .header-left { margin-bottom: 24px; }
      .header-left .title { font-size: 1.1rem; font-weight: 600; color: var(--text-color-dark); }
      .field { margin-bottom: var(--space-4); }
      .label { display: block; margin-bottom: var(--space-2); font-weight: 500; font-size: 0.9rem; color: var(--text-color-light); }
      .control { width:100%; }
      .textarea { min-height: 100px; }
      .model-selector {
        display: flex; justify-content: space-between; align-items: center;
        background: #fff; border: 1px solid var(--border-color);
        padding: 10px var(--space-3); border-radius: var(--radius);
        cursor: pointer; transition: border-color .2s;
      }
      .model-selector:hover { border-color: var(--p-primary-500); }
      .model-info { display: flex; align-items: center; gap: var(--space-2); font-weight: 500; }
      .model-info img { width: 20px; height: 20px; }
      :host ::ng-deep .custom-dropdown.p-select { border-radius: var(--radius); border: 1px solid var(--border-color); }
      :host ::ng-deep .custom-dropdown .p-select-label { font-weight: 500; }

      /* Actions Footer */
      .actions-footer {
        padding: var(--space-3) var(--space-4);
        border-top: 1px solid var(--border-color);
        display: flex; gap: var(--space-2); background: var(--left-bg);
      }
      .btn { flex-grow: 1; border-radius: var(--radius) !important; padding: 10px 0 !important; }
      .btn-clear { background: #fff !important; color: var(--text-color-dark) !important; border: 1px solid var(--border-color) !important; }
      .btn-main { background: var(--p-primary-500) !important; border-color: var(--p-primary-500) !important; }

      /* Right Panel */
      .header-right {
        display: flex; align-items: center; gap: var(--space-3);
        background-color: var(--p-primary-500);
        color: #fff;
        padding: var(--space-3) var(--space-4);
      }
      .header-right .icon { font-size: 1.5rem; }
      .header-right .title { font-size: 1.1rem; font-weight: 600; margin: 0; }
      .output-container { padding: var(--space-4); flex-grow: 1; overflow-y: auto; }
      .empty { text-align: center; color: #aaa; padding: 48px 0; }
      .icon-empty { font-size: 3rem; margin-bottom: var(--space-3); display: block; }
      .result-content { white-space: pre-wrap; line-height: 1.6; }

      /* Result Card Styles */
      .card { background: #fff; border: 1px solid var(--border-color); border-radius: var(--radius); }
      .card-head {
        display: flex; justify-content: space-between; align-items: center;
        padding: var(--space-3); border-bottom: 1px solid var(--border-color);
      }
      .card-head h3 { margin: 0; font-size: 1rem; font-weight: 600; color: var(--text-color-dark); }
      .tools { display: flex; }
      .icon-btn { width: 34px !important; height: 34px !important; }
      .card-body { padding: var(--space-3); }

      /* Model Popover (Re-styled) */
      :host ::ng-deep .model-op .p-popover-content { padding: 0 !important; }
      .model-panel { background: var(--p-surface-0); padding: var(--space-2); }
      .search-bar { padding: 0; margin-bottom: var(--space-2); }
      .search-bar input { border: 1px solid var(--p-surface-300); border-radius: 8px; padding: 10px 12px 10px 36px; background-color: var(--p-surface-0); width: 100%; font-size: .95rem; }
      .search-bar .pi-search { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--p-surface-500); }
      .list { max-height: 60vh; overflow-y: auto; }
      .group { margin-bottom: var(--space-2); }
      .group-title { font-size: 0.8rem; font-weight: 600; color: var(--p-surface-600); background-color: var(--p-surface-100); padding: 6px 12px; border-radius: 6px; margin-bottom: var(--space-2); }
      .group-item { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-radius: 8px; cursor: pointer; transition: background-color 0.2s ease; }
      .group-item:hover { background-color: var(--p-surface-50); }
      .left-item { display: flex; align-items: center; gap: 12px; }
      .left-item img { width: 20px; height: 20px; }
      .name { color: var(--p-surface-800); font-weight: 500; }
      @media (max-width: 1024px){ .page-container { grid-template-columns: 1fr; } .left { border-right: none; } }
    `
  ]
})
export class InnovationToolComponent implements OnInit, OnDestroy {
  @ViewChild('modelPopover') modelPopover!: Popover;
  private aiModelService = inject(AiModelService);
  private authService = inject(AuthService);
  private modelsSubscription?: Subscription;

  selectedThinkingTool: SelectOption | null = null;
  researchSubject: string = '';
  selectedLanguage: SelectOption | null = null;
  generatedContent: string | null = null;

  thinkingTools: SelectOption[] = [
    { name: 'Phương pháp Đối tượng tiêu điểm', value: 'TDST' },
    { name: 'Phương pháp Tư duy hệ thống', value: 'system_thinking' },
    { name: 'Phương pháp Brainstorming', value: 'brainstorming' },
    { name: 'Phương pháp 5W1H', value: '5w1h' },
    { name: 'Phương pháp Bản đồ tư duy', value: 'mindmap' },
    { name: 'Phương pháp 6 chiếc mũ tư duy', value: 'sixhats' }
  ];
  languages: SelectOption[] = [
    { name: 'Tiếng Việt', value: 'vi' },
    { name: 'Tiếng Anh', value: 'en' }
  ];

  selectedModelName: string = 'Đang tải...';
  selectedModelIcon: string = '';
  aiModels: AICategory[] = []; 

  ngOnInit() {
    const currentUser = this.authService.currentUser();
    const allowedModelNames = currentUser?.quotaProfile?.models ?? null;

    this.modelsSubscription = this.aiModelService.getModels(allowedModelNames).subscribe((data: AICategory[]) => {
      this.aiModels = data;
      this.setDefaultModel();
    });
    this.selectedLanguage = this.languages[0];
    this.selectedThinkingTool = this.thinkingTools[0];
  }

  ngOnDestroy() {
    this.modelsSubscription?.unsubscribe();
  }
  
  setDefaultModel() {
    const defaultModelName = 'Trợ lý EVNGENCO1';
    let defaultModel: AIModel | undefined;
    for (const group of this.aiModels) {
        const found = group.models.find(m => m.name === defaultModelName);
        if (found) { defaultModel = found; break; }
    }
    if (!defaultModel && this.aiModels.length > 0 && this.aiModels[0].models.length > 0) {
        defaultModel = this.aiModels[0].models[0];
    }
    if (defaultModel) {
        this.selectedModelName = defaultModel.name;
        this.selectedModelIcon = defaultModel.icon;
    } else {
        this.selectedModelName = 'Không có model';
    }
  }
  
  selectModel(model: AIModel) {
    this.selectedModelName = model.name;
    this.selectedModelIcon = model.icon;
    this.modelPopover.hide();
  }

  generateContent() {
    if(!this.researchSubject.trim()){
      this.generatedContent = 'Vui lòng nhập đối tượng nghiên cứu để tạo nội dung.';
      return;
    }
    this.generatedContent = `Dưới đây là các ý tưởng được tạo ra bằng phương pháp "${this.selectedThinkingTool?.name}" cho vấn đề "${this.researchSubject}":\n\n1. Ý tưởng đầu tiên...\n2. Ý tưởng thứ hai...\n3. Ý tưởng thứ ba...\n\nCác ý tưởng này được đề xuất bằng ngôn ngữ "${this.selectedLanguage?.name}".`;
  }

  clearAll() {
    this.selectedThinkingTool = this.thinkingTools[0];
    this.researchSubject = '';
    this.selectedLanguage = this.languages[0];
    this.generatedContent = null;
  }
  
  copyContent() {
    if (!this.generatedContent) return;
    navigator.clipboard.writeText(this.generatedContent);
  }
}


================================================================================
File: initiative-writer.ts
Relative Path: src/app/pages/uikit/initiative-writer.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/initiative-writer.ts
Extension: .ts
Lines: 229
================================================================================

import { Component, OnInit, inject, OnDestroy, ViewChild } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { TextareaModule } from 'primeng/textarea';
import { TooltipModule } from 'primeng/tooltip';
import { Popover, PopoverModule } from 'primeng/popover';
import { Select } from 'primeng/select';
import { FileUploadModule } from 'primeng/fileupload';
import { Subscription } from 'rxjs';
import { AiModelService } from '../../core/services/ai-model.service'; 
import { AICategory, AIModel } from '../../core/models/ai-models.model';
import { AiModelSelectorComponent } from '../../core/shared/components/ai-model-selector.component';
import { AuthService } from '../../core/services/auth.service'; // **Import AuthService**

interface SelectOption { name: string; value: string; }

@Component({
  selector: 'app-initiative-writer',
  standalone: true,
  imports: [
    CommonModule, FormsModule, ButtonModule, InputTextModule, TextareaModule,
    TooltipModule, PopoverModule, Select, FileUploadModule, AiModelSelectorComponent
  ],
  template: `
    <div class="page-container h-full">
      <div class="col left">
        <div class="left-panel-container">
          <div class="header-left"><h1 class="title">Hỗ trợ viết sáng kiến</h1></div>
          <div class="field">
            <label class="label">Chọn model AI</label>
            <div class="model-selector" (click)="modelPopover.toggle($event)">
              <div class="model-info"><img [src]="selectedModel.icon" [alt]="selectedModel.name" *ngIf="selectedModel.icon"/><span>{{ selectedModel.name }}</span></div>
              <i class="pi pi-chevron-down"></i>
            </div>
          </div>
          <div class="field"><label class="label">Tên sáng kiến <span class="req">*</span></label><textarea pInputText [(ngModel)]="initiativeName" placeholder="Ví dụ: Ứng dụng AI để tối ưu hóa lịch sửa chữa" rows="2" class="control textarea"></textarea></div>
          <div class="field"><label class="label">Lĩnh vực áp dụng</label><p-select [options]="applicationFields" [(ngModel)]="selectedField" optionLabel="name" placeholder="Chọn lĩnh vực" styleClass="w-full custom-dropdown" appendTo="body"></p-select></div>
          <div class="field"><label class="label">Hiện trạng trước khi có sáng kiến <span class="req">*</span></label><textarea pInputText [(ngModel)]="currentState" placeholder="Mô tả vấn đề, khó khăn hoặc điểm cần cải tiến" rows="2" class="control textarea"></textarea></div>
          <div class="field"><label class="label">Nội dung giải pháp <span class="req">*</span></label><textarea pInputText [(ngModel)]="solution" placeholder="Mô tả chi tiết giải pháp, tính mới, tính sáng tạo" rows="2" class="control textarea"></textarea></div>
          <div class="field"><label class="label">Hiệu quả dự kiến <span class="req">*</span></label><textarea pInputText [(ngModel)]="expectedBenefits" placeholder="Về kinh tế, kỹ thuật, an toàn, môi trường..." rows="2" class="control textarea"></textarea></div>
          <div class="field"><label class="label">Tệp đính kèm (tùy chọn)</label><div class="attachment-grid"><p-fileUpload mode="basic" name="relatedDocs[]" chooseLabel="Tài liệu liên quan" chooseIcon="pi pi-paperclip" [auto]="true" styleClass="p-button-secondary p-button-outlined"></p-fileUpload><p-fileUpload mode="basic" name="sampleDocs[]" chooseLabel="File mẫu sáng kiến" chooseIcon="pi pi-file" [auto]="true" styleClass="p-button-secondary p-button-outlined"></p-fileUpload></div></div>
        </div>
        <div class="actions-footer"><button pButton label="Xóa sạch" icon="pi pi-trash" class="btn btn-clear" (click)="clearAll()"></button><button pButton label="Viết sáng kiến" icon="pi pi-file-edit" class="btn btn-main" (click)="generateInitiative()"></button></div>
      </div>
      <div class="col right">
        <div class="output-container">
            <div *ngIf="!generatedContent" class="empty"><i class="pi pi-file-edit icon-empty"></i><p>Nội dung sáng kiến sẽ được tạo ở đây.</p></div>
            <div *ngIf="generatedContent" class="card"><div class="card-head"><h3>Bản thảo Sáng kiến</h3><div class="tools"><button pButton icon="pi pi-copy" [text]="true" [rounded]="true" severity="secondary" class="icon-btn" pTooltip="Sao chép" tooltipPosition="top" (click)="copyContent()"></button></div></div><div class="card-body"><div class="result-content" [innerHTML]="generatedContent"></div></div></div>
        </div>
      </div>
      <p-popover #modelPopover [appendTo]="'body'" [style]="{width:'360px'}" styleClass="model-op"><ng-template pTemplate="content"><app-ai-model-selector [popoverRef]="modelPopover" (modelSelected)="onModelSelected($event)"></app-ai-model-selector></ng-template></p-popover>
    </div>
  `,
  styles: [
    `
      :host {
        --space-2: 8px;
        --space-3: 12px;
        --space-4: 16px;
        --radius: 8px;
        --text-color-light: #555;
        --text-color-dark: #222;
        --border-color: #e0e0e0;
        --left-bg: #f7f7f8;
      }
      .page-container {
        display: grid;
        grid-template-columns: 400px 1fr;
        font-family: 'Inter', sans-serif;
      }
      .col { height: 100%; overflow: hidden; display: flex; flex-direction: column; }
      .left { background-color: var(--left-bg); border-right: 1px solid var(--border-color); }
      .right { background-color: #fff; }

      /* Left Panel */
      .left-panel-container { padding: var(--space-4); overflow-y: auto; flex-grow: 1; }
      .header-left { margin-bottom: 24px; }
      .header-left .title { font-size: 1.1rem; font-weight: 600; color: var(--text-color-dark); }
      .field { margin-bottom: var(--space-4); }
      .label { display: block; margin-bottom: var(--space-2); font-weight: 500; font-size: 0.9rem; color: var(--text-color-light); }
      .req { color: var(--p-red-500); }
      .control { width:100%; }
      .textarea { min-height: 60px; }
      .model-selector {
        display: flex; justify-content: space-between; align-items: center;
        background: #fff; border: 1px solid var(--border-color);
        padding: 10px var(--space-3); border-radius: var(--radius);
        cursor: pointer; transition: border-color .2s;
      }
      .model-selector:hover { border-color: var(--p-primary-500); }
      .model-info { display: flex; align-items: center; gap: var(--space-2); font-weight: 500; }
      .model-info img { width: 20px; height: 20px; }
      :host ::ng-deep .custom-dropdown.p-select { border-radius: var(--radius); border: 1px solid var(--border-color); }
      :host ::ng-deep .custom-dropdown .p-select-label { font-weight: 500; }

      /* Attachment Styles */
      .attachment-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--space-2);
      }
      :host ::ng-deep .p-fileupload-basic .p-button {
        width: 100%;
        font-weight: 500 !important;
      }

      /* Actions Footer */
      .actions-footer {
        padding: var(--space-3) var(--space-4);
        border-top: 1px solid var(--border-color);
        display: flex; gap: var(--space-2); background: var(--left-bg);
      }
      .btn { flex-grow: 1; border-radius: var(--radius) !important; padding: 10px 0 !important; }
      .btn-clear { background: #fff !important; color: var(--text-color-dark) !important; border: 1px solid var(--border-color) !important; }
      .btn-main { background: var(--p-primary-500) !important; border-color: var(--p-primary-500) !important; }

      /* Right Panel */
      .header-right {
        display: flex; align-items: center; gap: var(--space-3);
        background-color: var(--p-primary-500);
        color: #fff;
        padding: var(--space-3) var(--space-4);
      }
      .header-right .icon { font-size: 1.5rem; }
      .header-right .title { font-size: 1.1rem; font-weight: 600; margin: 0; }
      .output-container { padding: var(--space-4); flex-grow: 1; overflow-y: auto; }
      .empty { text-align: center; color: #aaa; padding: 48px 0; }
      .icon-empty { font-size: 3rem; margin-bottom: var(--space-3); display: block; }
      .result-content { white-space: pre-wrap; line-height: 1.7; }
      .result-content h4 { font-size: 1.05rem; font-weight: 600; color: var(--p-primary-700); margin-bottom: 0.5rem; }
      .result-content p { margin: 0; }

      /* Result Card Styles */
      .card { background: #fff; border: 1px solid var(--border-color); border-radius: var(--radius); }
      .card-head {
        display: flex; justify-content: space-between; align-items: center;
        padding: var(--space-3); border-bottom: 1px solid var(--border-color);
      }
      .card-head h3 { margin: 0; font-size: 1rem; font-weight: 600; color: var(--text-color-dark); }
      .tools { display: flex; }
      .icon-btn { width: 34px !important; height: 34px !important; }
      .card-body { padding: var(--space-3); }

      /* Model Popover (Re-styled) */
      :host ::ng-deep .model-op .p-popover-content { padding: 0 !important; }
      .model-panel { background: var(--p-surface-0); padding: var(--space-2); }
      .search-bar { padding: 0; margin-bottom: var(--space-2); }
      .search-bar input { border: 1px solid var(--p-surface-300); border-radius: 8px; padding: 10px 12px 10px 36px; background-color: var(--p-surface-0); width: 100%; font-size: .95rem; }
      .search-bar .pi-search { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--p-surface-500); }
      .list { max-height: 60vh; overflow-y: auto; }
      .group { margin-bottom: var(--space-2); }
      .group-title { font-size: 0.8rem; font-weight: 600; color: var(--p-surface-600); background-color: var(--p-surface-100); padding: 6px 12px; border-radius: 6px; margin-bottom: var(--space-2); }
      .group-item { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-radius: 8px; cursor: pointer; transition: background-color 0.2s ease; }
      .group-item:hover { background-color: var(--p-surface-50); }
      .left-item { display: flex; align-items: center; gap: 12px; }
      .left-item img { width: 20px; height: 20px; }
      .name { color: var(--p-surface-800); font-weight: 500; }
      .model-tag { font-size: 0.75rem; font-weight: 600; padding: 4px 10px; border-radius: 9999px; }
      .tag-chuyen-sau { background-color: #fee2e2; color: #b91c1c; }
      .tag-toan-dien { background-color: #dbeafe; color: #1d4ed8; }
      .tag-sang-tao { background-color: #dcfce7; color: #15803d; }
      .tag-nhanh-gon { background-color: #f0fdf4; color: #16a34a; }

      @media (max-width: 1024px){ .page-container { grid-template-columns: 1fr; } .left { border-right: none; } }
    `
  ]
})
export class InitiativeWriterComponent implements OnInit, OnDestroy {
  @ViewChild('modelPopover') modelPopover!: Popover;
  private aiModelService = inject(AiModelService);
  private authService = inject(AuthService); // **Import AuthService**
  private modelsSubscription?: Subscription;

  initiativeName = ''; selectedField: SelectOption | null = null; currentState = ''; solution = ''; expectedBenefits = ''; generatedContent: string | null = null;
  
  applicationFields: SelectOption[] = [
    { name: 'Kỹ thuật - Vận hành', value: 'operation' }, { name: 'Kỹ thuật - Sửa chữa', value: 'maintenance' },
    { name: 'An toàn & Môi trường', value: 'hse' }, { name: 'Quản lý & Văn phòng', value: 'management' },
    { name: 'Chuyển đổi số & CNTT', value: 'digital' },
  ];

  selectedModel: AIModel = { id: '', name: 'Đang tải...', icon: '', profile: { description: '', sortOrder: 0 }, costType: 'free' };
  aiModels: AICategory[] = []; 

  ngOnInit() {
    // **SỬA LỖI**: Lấy danh sách model được phép và truyền vào service
    const currentUser = this.authService.currentUser();
    const allowedModelNames = currentUser?.quotaProfile?.models ?? [];
    
    this.modelsSubscription = this.aiModelService.getModels(allowedModelNames).subscribe((data: AICategory[]) => {
      this.aiModels = data;
      this.setDefaultModel();
    });
    this.selectedField = this.applicationFields[0];
  }

  ngOnDestroy() { this.modelsSubscription?.unsubscribe(); }
  
  setDefaultModel() {
    const defaultModelName = 'Trợ lý EVNGENCO1';
    let defaultModel: AIModel | undefined;
    for (const group of this.aiModels) {
        const found = group.models.find(m => m.name === defaultModelName);
        if (found) { defaultModel = found; break; }
    }
    if (!defaultModel && this.aiModels.length > 0 && this.aiModels[0].models.length > 0) {
        defaultModel = this.aiModels[0].models[0];
    }
    if (defaultModel) { this.selectedModel = defaultModel; } 
    else {
      this.selectedModel = { id: '', name: 'Không có model', icon: 'pi pi-exclamation-triangle', profile: { description: 'Không tìm thấy model nào', sortOrder: 0 }, costType: 'free' };
    }
  }
  
  onModelSelected(model: AIModel) { this.selectedModel = model; }

  generateInitiative() {
    if(!this.initiativeName.trim() || !this.currentState.trim() || !this.solution.trim() || !this.expectedBenefits.trim()){
      this.generatedContent = `<h4>Lỗi</h4><p>Vui lòng điền đầy đủ các trường thông tin bắt buộc (*).</p>`; return;
    }
    this.generatedContent = `<h4>1. Tên sáng kiến</h4><p>${this.initiativeName}</p><br><h4>2. Lĩnh vực áp dụng</h4><p>${this.selectedField?.name}</p><br>...`;
  }

  clearAll() { this.initiativeName = ''; this.selectedField = this.applicationFields[0]; this.currentState = ''; this.solution = ''; this.expectedBenefits = ''; this.generatedContent = null; }
  copyContent() { if (this.generatedContent) { const tempDiv = document.createElement('div'); tempDiv.innerHTML = this.generatedContent; navigator.clipboard.writeText(tempDiv.textContent || ""); } }
}


================================================================================
File: ai-marketplace.ts
Relative Path: src/app/pages/uikit/ai-marketplace.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/ai-marketplace.ts
Extension: .ts
Lines: 714
================================================================================

// src/app/pages/uikit/ai-marketplace.routes.ts
// ✅ Tách thành 3 "phân trang" (3 pages) dùng child routes thay vì tabs
//   - /ai-marketplace/models
//   - /ai-marketplace/api-keys
//   - /ai-marketplace/usage
// Chỉ cần import AI_MARKETPLACE_ROUTES vào app.routes.ts là có 3 trang riêng.

import { Component, OnInit, inject } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { RouterModule, Routes } from '@angular/router';

// PrimeNG v20 (standalone)
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { TextareaModule } from 'primeng/textarea';
import { TagModule } from 'primeng/tag';
import { SelectModule } from 'primeng/select';
import { DialogModule } from 'primeng/dialog';
import { TooltipModule } from 'primeng/tooltip';
import { IconFieldModule } from 'primeng/iconfield';
import { InputIconModule } from 'primeng/inputicon';
import { ConfirmDialogModule } from 'primeng/confirmdialog';
import { TableModule } from 'primeng/table';
import { FileUpload } from 'primeng/fileupload';
import { ConfirmationService } from 'primeng/api';

// ===== Types =====
export type ModelCategory = 'llm' | 'embedding' | 'guardrail' | 'stt' | 'tts' | 'vision';
export type RequestStatus = 'pending' | 'approved' | 'rejected';

export interface AIModel {
  id: string;
  name: string;
  provider: string;
  category: ModelCategory;
  description: string;
  capabilities: string[];
  downloadUrl?: string;
  icon?: string; // URL hoặc emoji
  contextWindow?: string;
  performance?: string;
}

export interface APIKeyRequest {
  id: string;
  userId: string;
  userName: string;
  userEmail: string;
  modelId: string;
  modelName: string;
  reason: string;
  duration: number; // ngày
  status: RequestStatus;
  apiKey?: string;
  approvedBy?: string;
  approvedAt?: string;
  rejectionReason?: string;
  expiresAt?: string;
  createdAt: string;
}

export interface APIUsage {
  apiKeyName: string;
  modelName: string;
  apiKey: string;
  status: 'active' | 'expired';
  totalRequests: number;
  inputTokens: number;
  outputTokens: number;
  totalTokens: number;
  lastUsedAt?: string;
}

// ===== Mock Service (localStorage) =====
class AIMarketplaceService {
  private readonly MODELS_KEY = 'ai_marketplace_models';
  private readonly REQUESTS_KEY = 'ai_marketplace_requests';
  private readonly USAGE_KEY = 'ai_marketplace_usage';

  constructor() { this.initModels(); }

  private initModels() {
    const saved = localStorage.getItem(this.MODELS_KEY);
    if (!saved) {
      const models: AIModel[] = [
        { id: '1', name: 'DeepSeek-R1', provider: 'DeepSeek', category: 'llm', description: 'RL-enhanced reasoning; comparable to o1 on math/coding.', capabilities: ['Text Generation'], icon: '🔵' },
        { id: '2', name: 'DeepSeek-V3', provider: 'DeepSeek', category: 'llm', description: 'Strong MoE general-purpose model.', capabilities: ['Text Generation'], icon: '🔵' },
        { id: '3', name: 'FPT.AI-KIEM-v1.7', provider: 'FPT.AI', category: 'vision', description: 'Key information extraction, structured output.', capabilities: ['Image & Text To Text'], icon: '📄' },
        { id: '4', name: 'GLM-4.5', provider: 'Zai', category: 'llm', description: 'Reasoning, coding, agentic capabilities.', capabilities: ['Free Trial', 'Text Generation'], icon: '💚' }
      ];
      localStorage.setItem(this.MODELS_KEY, JSON.stringify(models));
    }
  }

  listModels() {
    const models = localStorage.getItem(this.MODELS_KEY);
    return { subscribe: (obs: any) => setTimeout(() => obs.next(models ? JSON.parse(models) : []), 60) };
  }

  listRequests() {
    const requests = localStorage.getItem(this.REQUESTS_KEY);
    return { subscribe: (obs: any) => setTimeout(() => obs.next(requests ? JSON.parse(requests) : []), 60) };
  }

  submitRequest(payload: Omit<APIKeyRequest, 'id' | 'createdAt' | 'status'>) {
    const requests = this.getAllRequests();
    const newRequest: APIKeyRequest = { ...payload, id: crypto.randomUUID(), status: 'pending', createdAt: new Date().toISOString() };
    requests.push(newRequest);
    localStorage.setItem(this.REQUESTS_KEY, JSON.stringify(requests));
    return { subscribe: (obs: any) => setTimeout(() => obs.next(newRequest), 100) };
  }

  approveRequest(id: string, apiKey: string, approvedBy: string) {
    const requests = this.getAllRequests();
    const idx = requests.findIndex((r: APIKeyRequest) => r.id === id);
    if (idx >= 0) {
      const duration = requests[idx].duration;
      const expiresAt = new Date();
      expiresAt.setDate(expiresAt.getDate() + duration);
      requests[idx] = { ...requests[idx], status: 'approved', apiKey, approvedBy, approvedAt: new Date().toISOString(), expiresAt: expiresAt.toISOString() };
      localStorage.setItem(this.REQUESTS_KEY, JSON.stringify(requests));
    }
    return { subscribe: (obs: any) => setTimeout(() => obs.next(requests[idx]), 100) };
  }

  rejectRequest(id: string, reason: string) {
    const requests = this.getAllRequests();
    const idx = requests.findIndex((r: APIKeyRequest) => r.id === id);
    if (idx >= 0) {
      requests[idx] = { ...requests[idx], status: 'rejected', rejectionReason: reason };
      localStorage.setItem(this.REQUESTS_KEY, JSON.stringify(requests));
    }
    return { subscribe: (obs: any) => setTimeout(() => obs.next(requests[idx]), 100) };
  }

  listUsage() {
    const usage = localStorage.getItem(this.USAGE_KEY);
    return { subscribe: (obs: any) => setTimeout(() => obs.next(usage ? JSON.parse(usage) : []), 60) };
  }

  private getAllRequests(): APIKeyRequest[] {
    const saved = localStorage.getItem(this.REQUESTS_KEY);
    return saved ? JSON.parse(saved) : [];
  }
}

/* ==========================================================
 *  SHELL COMPONENT: khung trang + thanh nav link 3 page
 * ========================================================== */
@Component({
  selector: 'app-aimarketplace-shell',
  standalone: true,
  imports: [CommonModule, RouterModule, ButtonModule],
  template: `
  <div class="page p-4">
    <div class="page-header mb-4">
      <div>
        <h1 class="page-title">AI Marketplace</h1>
        <p class="page-subtitle">Quản lý models, API keys và theo dõi usage</p>
      </div>
    </div>

    <nav class="tabs-nav">
      <a routerLink="models" routerLinkActive="active">AI Model</a>
      <a routerLink="api-keys" routerLinkActive="active">Quản lý API Key</a>
      <a routerLink="usage" routerLinkActive="active">API Usage</a>
    </nav>

    <div class="tab-outlet">
      <router-outlet></router-outlet>
    </div>
  </div>
  `,
  styles: [`
    .page { background: var(--p-surface-50); min-height: 100vh; }
    .page-header { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,.05); }
    .page-title { font-size: 1.75rem; font-weight: 700; margin: 0; }
    .page-subtitle { color: var(--p-text-secondary-color); margin: .5rem 0 0; }
    .tabs-nav { display:flex; gap:.5rem; background:white; padding:.5rem; border-radius:12px; margin-bottom:.75rem; }
    .tabs-nav a { padding:.75rem 1rem; border-radius:8px; text-decoration:none; color: var(--p-text-color); }
    .tabs-nav a.active { background: var(--p-primary-50); color: var(--p-primary-color); font-weight:600; }
    .tab-outlet { background: white; border-radius: 12px; padding: 1rem; min-height: 520px; }
  `]
})
export class AIMarketplaceShellComponent {}

/* ==========================================================
 *  PAGE 1: AI MODELS
 * ========================================================== */
@Component({
  selector: 'app-aimodels-page',
  standalone: true,
  imports: [
    CommonModule, FormsModule,
    InputTextModule, SelectModule, TagModule, DialogModule, TooltipModule,
    IconFieldModule, InputIconModule, ButtonModule, TableModule, TextareaModule,
    FileUpload
  ],
  providers: [AIMarketplaceService, ConfirmationService],
  template: `
  <div>
    <div class="content-header">
      <div class="search-section">
        <p-iconfield iconPosition="left" class="search-box">
          <p-inputicon><i class="pi pi-search"></i></p-inputicon>
          <input pInputText type="text" [(ngModel)]="searchKeyword" placeholder="Tìm model theo tên, provider..." class="w-full"/>
        </p-iconfield>
        <p-select class="filter-select" appendTo="body" [options]="categoryOptionsWithAll" optionLabel="label" optionValue="value" [(ngModel)]="filterCategory"></p-select>
      </div>
      <button pButton label="Thêm Model" icon="pi pi-plus" (click)="openAddModelDialog()"></button>
    </div>

    <div class="models-grid">
      <div *ngFor="let model of paginatedModels" class="model-card" (click)="viewModelDetail(model)">
        <div class="model-card-header">
          <div class="model-logo-container">
            <img *ngIf="model.icon && model.icon.startsWith('http')" [src]="model.icon" [alt]="model.name" class="model-logo"/>
            <span *ngIf="!model.icon || !model.icon.startsWith('http')" class="model-placeholder">{{ model.icon || '🤖' }}</span>
          </div>
          <div class="model-info">
            <h3 class="model-title">{{ model.name }}</h3>
            <p class="model-provider">{{ model.provider }}</p>
          </div>
        </div>
        <p class="model-desc">{{ model.description }}</p>
        <div class="model-footer">
          <p-tag [value]="model.capabilities[0] || 'Capability'" severity="info"></p-tag>
        </div>
      </div>

      <div *ngIf="paginatedModels.length === 0" class="empty-state">
        <i class="pi pi-inbox"></i>
        <p>Không tìm thấy model nào</p>
      </div>
    </div>

    <div class="pagination-bar" *ngIf="filteredModels.length > 0">
      <span class="pagination-info">{{ (currentPage - 1) * pageSize + 1 }}-{{ Math.min(currentPage * pageSize, filteredModels.length) }} / {{ filteredModels.length }} models</span>
      <div class="pagination-controls">
        <button pButton icon="pi pi-chevron-left" [disabled]="currentPage === 1" class="p-button-text p-button-sm" (click)="changePage(currentPage - 1)"></button>
        <span class="page-number">{{ currentPage }} / {{ totalPages }}</span>
        <button pButton icon="pi pi-chevron-right" [disabled]="currentPage === totalPages" class="p-button-text p-button-sm" (click)="changePage(currentPage + 1)"></button>
      </div>
    </div>

    <!-- Dialog: Add/Edit Model -->
    <p-dialog [header]="editingModel ? 'Chỉnh sửa Model' : 'Thêm Model Mới'" [(visible)]="showAddModelDialog" [modal]="true" [style]="{width:'700px'}">
      <div class="mb-4">
        <label>Logo Model</label>
        <div class="flex items-center gap-3">
          <div class="preview-logo">
            <img *ngIf="modelForm.icon && modelForm.icon.startsWith('data:')" [src]="modelForm.icon" [alt]="modelForm.name || 'Logo'" class="model-logo"/>
            <span *ngIf="!modelForm.icon || !modelForm.icon.startsWith('data:')" class="text-surface-400">Chưa có logo</span>
          </div>
          <div class="flex-1">
            <input pInputText [(ngModel)]="modelForm.icon" class="w-full mb-2" placeholder="Nhập URL logo (VD: https://example.com/logo.png)"/>
            <p-fileUpload mode="basic" chooseLabel="Hoặc chọn file" accept="image/*" [auto]="true" customUpload (uploadHandler)="onLogoSelected($event)"></p-fileUpload>
          </div>
        </div>
        <small class="text-surface-500 block mt-2">Khuyến nghị: Logo PNG/SVG, kích thước 200x200px</small>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label>Tên Model *</label>
          <input pInputText [(ngModel)]="modelForm.name" class="w-full" placeholder="VD: GPT-4 Turbo"/>
        </div>
        <div>
          <label>Provider *</label>
          <input pInputText [(ngModel)]="modelForm.provider" class="w-full" placeholder="VD: OpenAI"/>
        </div>
        <div class="md:col-span-2">
          <label>Danh mục *</label>
          <p-select appendTo="body" class="w-full" [options]="categoryOptions" optionLabel="label" optionValue="value" [(ngModel)]="modelForm.category"></p-select>
        </div>
        <div class="md:col-span-2">
          <label>Mô tả *</label>
          <textarea pTextarea [(ngModel)]="modelForm.description" rows="3" class="w-full" placeholder="Mô tả chi tiết về model..."></textarea>
        </div>
        <div class="md:col-span-2">
          <label>Capabilities (ngăn cách bởi dấu phẩy) *</label>
          <input pInputText [(ngModel)]="capabilitiesText" class="w-full" placeholder="VD: Text Generation, Code Generation"/>
        </div>
        <div>
          <label>Download URL</label>
          <input pInputText [(ngModel)]="modelForm.downloadUrl" class="w-full" placeholder="https://..."/>
        </div>
        <div>
          <label>Context Window</label>
          <input pInputText [(ngModel)]="modelForm.contextWindow" class="w-full" placeholder="VD: 128K tokens"/>
        </div>
      </div>

      <ng-template pTemplate="footer">
        <button pButton label="Hủy" class="p-button-text" (click)="showAddModelDialog=false"></button>
        <button pButton label="Lưu" severity="primary" [disabled]="savingModel" [loading]="savingModel" (click)="saveModel()"></button>
      </ng-template>
    </p-dialog>

    <!-- Dialog: Model Detail -->
    <p-dialog header="Chi tiết Model" [(visible)]="showModelDetailDialog" [modal]="true" [style]="{width:'700px'}">
      <div *ngIf="selectedModel">
        <div class="flex items-center gap-4 mb-4 p-4 bg-surface-50 rounded-lg">
          <div class="model-icon-large">
            <img *ngIf="selectedModel.icon && selectedModel.icon.startsWith('http')" [src]="selectedModel.icon" [alt]="selectedModel.name"/>
            <span *ngIf="!selectedModel.icon || !selectedModel.icon.startsWith('http')">{{ selectedModel.icon || '🤖' }}</span>
          </div>
          <div class="flex-1">
            <h3 class="text-2xl font-semibold">{{ selectedModel.name }}</h3>
            <p class="text-surface-500">{{ selectedModel.provider }}</p>
          </div>
        </div>

        <div class="detail-section">
          <h4>Danh mục</h4>
          <p-tag [value]="getCategoryLabel(selectedModel.category)" severity="info"></p-tag>
        </div>
        <div class="detail-section">
          <h4>Mô tả</h4>
          <p class="text-surface-700">{{ selectedModel.description }}</p>
        </div>
        <div class="detail-section">
          <h4>Capabilities</h4>
          <div class="flex flex-wrap gap-2">
            <p-tag *ngFor="let cap of selectedModel.capabilities" [value]="cap" severity="secondary"></p-tag>
          </div>
        </div>
      </div>

      <ng-template pTemplate="footer">
        <button pButton label="Đóng" class="p-button-text" (click)="showModelDetailDialog=false"></button>
        <button pButton label="Sửa" icon="pi pi-pencil" severity="info" (click)="editModel(selectedModel!)"></button>
        <button pButton label="Xóa" icon="pi pi-trash" severity="danger" (click)="deleteModel(selectedModel!)"></button>
        <button pButton label="Request API" icon="pi pi-key" (click)="showModelDetailDialog=false; openRequestDialog(selectedModel!)"></button>
      </ng-template>
    </p-dialog>

    <!-- Dialog: Request API Key -->
    <p-dialog header="Request API Key" [(visible)]="showRequestDialog" [modal]="true" [style]="{width:'600px'}">
      <div *ngIf="selectedModel">
        <div class="mb-4 p-3 bg-surface-50 rounded">
          <div class="flex items-center gap-3">
            <span class="text-3xl">{{ selectedModel.icon }}</span>
            <div>
              <h3 class="font-semibold">{{ selectedModel.name }}</h3>
              <p class="text-sm text-surface-500">{{ selectedModel.provider }}</p>
            </div>
          </div>
        </div>
        <div class="mb-3">
          <label>Thời hạn sử dụng *</label>
          <p-select appendTo="body" class="w-full" [options]="durationOptions" optionLabel="label" optionValue="value" [(ngModel)]="requestForm.duration"></p-select>
        </div>
        <div class="mb-3">
          <label>Lý do yêu cầu *</label>
          <textarea pTextarea [(ngModel)]="requestForm.reason" rows="4" class="w-full" placeholder="Giải thích mục đích sử dụng..."></textarea>
        </div>
      </div>
      <ng-template pTemplate="footer">
        <button pButton label="Hủy" class="p-button-text" (click)="showRequestDialog=false"></button>
        <button pButton label="Gửi yêu cầu" severity="primary" [disabled]="submitting" [loading]="submitting" (click)="submitRequest()"></button>
      </ng-template>
    </p-dialog>
  </div>
  `,
  styles: [`
    .content-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}
    .search-section{display:flex;gap:.75rem;flex:1;max-width:600px}
    .search-box{flex:1}
    .filter-select{min-width:200px}
    .models-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.25rem;margin-bottom:1.5rem}
    .model-card{background:white;border:1px solid var(--p-surface-200);border-radius:12px;padding:1.25rem;cursor:pointer;transition:all .2s ease;display:flex;flex-direction:column;gap:1rem;min-height:180px}
    .model-card:hover{border-color:var(--p-primary-color);box-shadow:0 4px 12px rgba(0,0,0,.08);transform:translateY(-2px)}
    .model-card-header{display:flex;gap:1rem;align-items:flex-start}
    .model-logo-container{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden}
    .model-logo{width:100%;height:100%;object-fit:contain;padding:8px}
    .model-placeholder{font-size:2rem}
    .model-info{flex:1;min-width:0}
    .model-title{font-size:1.125rem;font-weight:600;margin:0 0 .25rem 0}
    .model-provider{font-size:.875rem;color:var(--p-text-secondary-color);margin:0}
    .model-desc{font-size:.875rem;line-height:1.5;color:var(--p-text-secondary-color);margin:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;flex:1}
    .model-footer{display:flex;align-items:center;justify-content:space-between}
    .empty-state{text-align:center;padding:3rem 1rem}
    .pagination-bar{display:flex;justify-content:space-between;align-items:center;padding-top:1rem;border-top:1px solid var(--p-surface-200)}
    .pagination-controls{display:flex;gap:1rem;align-items:center}
    .page-number{font-weight:500;min-width:60px;text-align:center}
    .preview-logo{width:80px;height:80px;border:2px solid var(--p-surface-200);border-radius:12px;display:flex;align-items:center;justify-content:center;background:var(--p-surface-50);overflow:hidden}
    .preview-logo img{width:100%;height:100%;object-fit:contain;padding:8px}
    .detail-section{margin-bottom:1.25rem;padding-bottom:1rem;border-bottom:1px solid var(--p-surface-200)}
    :host ::ng-deep .p-textarea{resize:vertical;min-height:100px}
  `]
})
export class AiModelsPageComponent implements OnInit {
  Math = Math;
  private svc = inject(AIMarketplaceService);
  private confirm = inject(ConfirmationService);

  models: AIModel[] = [];
  searchKeyword = '';
  filterCategory: ModelCategory | null = null;
  currentPage = 1;
  pageSize = 6;

  // dialogs
  showAddModelDialog = false;
  showModelDetailDialog = false;
  showRequestDialog = false;
  submitting = false;
  savingModel = false;

  selectedModel: AIModel | null = null;
  editingModel: AIModel | null = null;
  modelForm: Partial<AIModel> = {};
  capabilitiesText = '';
  requestForm = { duration: 30, reason: '' };

  categoryOptionsWithAll = [
    { label: 'Tất cả danh mục', value: null },
    { label: 'Large Language Model', value: 'llm' as ModelCategory },
    { label: 'Embedding Model', value: 'embedding' as ModelCategory },
    { label: 'Guardrail Model', value: 'guardrail' as ModelCategory },
    { label: 'Speech to Text', value: 'stt' as ModelCategory },
    { label: 'Text To Speech', value: 'tts' as ModelCategory },
    { label: 'Vision Language Model', value: 'vision' as ModelCategory },
  ];

  categoryOptions = [
    { label: 'Large Language Model', value: 'llm' as ModelCategory },
    { label: 'Embedding Model', value: 'embedding' as ModelCategory },
    { label: 'Guardrail Model', value: 'guardrail' as ModelCategory },
    { label: 'Speech to Text', value: 'stt' as ModelCategory },
    { label: 'Text To Speech', value: 'tts' as ModelCategory },
    { label: 'Vision Language Model', value: 'vision' as ModelCategory },
  ];

  durationOptions = [
    { label: '7 ngày', value: 7 },
    { label: '15 ngày', value: 15 },
    { label: '30 ngày', value: 30 },
    { label: '60 ngày', value: 60 },
    { label: '90 ngày', value: 90 },
  ];

  ngOnInit(){ this.fetchModels(); }

  fetchModels(){
    this.svc.listModels().subscribe({ next: (res: AIModel[]) => { this.models = res || []; this.currentPage = 1; } });
  }

  get filteredModels(): AIModel[] {
    return this.models.filter(m => {
      const kw = this.searchKeyword.trim().toLowerCase();
      const matchKeyword = !kw || m.name.toLowerCase().includes(kw) || m.description.toLowerCase().includes(kw) || m.provider.toLowerCase().includes(kw);
      const matchCategory = !this.filterCategory || m.category === this.filterCategory;
      return matchKeyword && matchCategory;
    });
  }
  get paginatedModels(): AIModel[] { const start=(this.currentPage-1)*this.pageSize; return this.filteredModels.slice(start, start+this.pageSize); }
  get totalPages(): number { return Math.ceil(this.filteredModels.length/this.pageSize)||1; }
  changePage(p:number){ if(p>=1 && p<=this.totalPages){ this.currentPage=p; window.scrollTo({top:0,behavior:'smooth'}); } }

  viewModelDetail(m:AIModel){ this.selectedModel=m; this.showModelDetailDialog=true; }
  editModel(m:AIModel){ this.editingModel=m; this.modelForm={...m}; this.capabilitiesText=(m.capabilities||[]).join(', '); this.showModelDetailDialog=false; this.showAddModelDialog=true; }
  openAddModelDialog(){ this.editingModel=null; this.modelForm={category:'llm',icon:'',capabilities:[]}; this.capabilitiesText=''; this.showAddModelDialog=true; }
  onLogoSelected(event:any){ const file=event.files?.[0]; if(!file) return; const reader=new FileReader(); reader.onload=(e:any)=>this.modelForm.icon=e.target.result; reader.readAsDataURL(file); }
  getCategoryLabel(c:ModelCategory){ const map:Record<ModelCategory,string>={llm:'Large Language Model',embedding:'Embedding Model',guardrail:'Guardrail Model',stt:'Speech to Text',tts:'Text To Speech',vision:'Vision Language Model'}; return map[c]??c; }

  openRequestDialog(m:AIModel){ this.selectedModel=m; this.requestForm={duration:30,reason:''}; this.showRequestDialog=true; }
  submitRequest(){ if(!this.selectedModel||!this.requestForm.reason.trim()) return; this.submitting=true; const payload={userId:'user-123',userName:'Nguyễn Văn A',userEmail:'nguyenvana@evngenco1.vn',modelId:this.selectedModel.id,modelName:this.selectedModel.name,reason:this.requestForm.reason.trim(),duration:this.requestForm.duration}; this.svc.submitRequest(payload).subscribe({next:()=>{this.submitting=false; this.showRequestDialog=false;},error:()=>this.submitting=false}); }

  saveModel(){ if(!this.modelForm.name||!this.modelForm.provider||!this.modelForm.description||!this.capabilitiesText) return; this.savingModel=true; const capabilities=this.capabilitiesText.split(',').map(c=>c.trim()).filter(Boolean); if(this.editingModel){ const updated:AIModel={...(this.editingModel as AIModel),...(this.modelForm as AIModel),capabilities}; const idx=this.models.findIndex(m=>m.id===this.editingModel!.id); if(idx>=0){ this.models[idx]=updated; localStorage.setItem('ai_marketplace_models', JSON.stringify(this.models)); } } else { const newModel:AIModel={ id:crypto.randomUUID(), name:this.modelForm.name!, provider:this.modelForm.provider!, category:this.modelForm.category!, description:this.modelForm.description!, capabilities, icon:this.modelForm.icon||'🤖', downloadUrl:this.modelForm.downloadUrl, contextWindow:this.modelForm.contextWindow, performance:(this.modelForm as any).performance }; this.models.push(newModel); localStorage.setItem('ai_marketplace_models', JSON.stringify(this.models)); } this.savingModel=false; this.showAddModelDialog=false; this.currentPage=1; }
  deleteModel(m:AIModel){ const ok=confirm(`Xóa model ${m.name}?`); if(ok){ this.models=this.models.filter(x=>x.id!==m.id); localStorage.setItem('ai_marketplace_models', JSON.stringify(this.models)); this.showModelDetailDialog=false; } }
}

/* ==========================================================
 *  PAGE 2: API KEYS MANAGEMENT
 * ========================================================== */
@Component({
  selector: 'app-apikeys-page',
  standalone: true,
  imports: [CommonModule, FormsModule, TableModule, TagModule, ButtonModule, SelectModule, DialogModule, TooltipModule],
  providers: [AIMarketplaceService],
  template: `
  <div>
    <div class="content-header">
      <h2 class="section-title">Quản lý API Key Requests</h2>
      <div class="header-actions">
        <p-select class="filter-select" appendTo="body" [options]="statusOptions" optionLabel="label" optionValue="value" placeholder="Lọc theo trạng thái" [(ngModel)]="filterRequestStatus" (onChange)="dt1.filter($event.value, 'status', 'equals')"></p-select>
      </div>
    </div>

    <p-table #dt1 [value]="requests" dataKey="id" [rows]="10" [rowHover]="true" [paginator]="true" [loading]="loadingRequests" [globalFilterFields]="['userName','userEmail','modelName','reason']" styleClass="modern-table">
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="userName">Người yêu cầu <p-sortIcon field="userName"/></th>
          <th>Model</th>
          <th>Thời hạn</th>
          <th pSortableColumn="status">Trạng thái <p-sortIcon field="status"/></th>
          <th pSortableColumn="createdAt">Ngày tạo <p-sortIcon field="createdAt"/></th>
          <th class="actions-col">Thao tác</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-request>
        <tr>
          <td>
            <div class="user-info">
              <span class="user-name">{{ request.userName }}</span>
              <span class="user-email">{{ request.userEmail }}</span>
            </div>
          </td>
          <td><span class="model-name-text">{{ request.modelName }}</span></td>
          <td><span class="duration-badge">{{ request.duration }} ngày</span></td>
          <td><p-tag [value]="getStatusLabel(request.status)" [severity]="getStatusSeverity(request.status)"></p-tag></td>
          <td class="date-col">{{ request.createdAt | date:'dd/MM/yyyy HH:mm' }}</td>
          <td class="actions-col">
            <div class="action-buttons">
              <button pButton icon="pi pi-eye" [rounded]="true" [text]="true" size="small" pTooltip="Xem chi tiết" tooltipPosition="top" (click)="viewRequest(request)"></button>
              <button pButton icon="pi pi-check" [rounded]="true" [text]="true" size="small" severity="success" pTooltip="Phê duyệt" tooltipPosition="top" (click)="openApproveDialog(request)" *ngIf="request.status==='pending'"></button>
              <button pButton icon="pi pi-times" [rounded]="true" [text]="true" size="small" severity="danger" pTooltip="Từ chối" tooltipPosition="top" (click)="openRejectDialog(request)" *ngIf="request.status==='pending'"></button>
            </div>
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6">
            <div class="empty-state"><i class="pi pi-inbox"></i><p>Chưa có request nào</p></div>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <!-- View Dialog -->
    <p-dialog header="Chi tiết API Key" [(visible)]="showDetailDialog" [modal]="true" [style]="{width:'700px'}">
      <div *ngIf="selectedRequest">
        <div class="detail-section"><h4>Model</h4><p class="font-semibold text-lg">{{ selectedRequest.modelName }}</p></div>
        <div class="detail-section"><h4>Người yêu cầu</h4><p>{{ selectedRequest.userName }} ({{ selectedRequest.userEmail }})</p></div>
        <div class="detail-section"><h4>Lý do</h4><div class="content-box">{{ selectedRequest.reason }}</div></div>
      </div>
      <ng-template pTemplate="footer"><button pButton label="Đóng" (click)="showDetailDialog=false"></button></ng-template>
    </p-dialog>

    <!-- Approve -->
    <p-dialog header="Phê duyệt Request" [(visible)]="showApproveDialog" [modal]="true" [style]="{width:'500px'}">
      <div class="mb-3"><label>API Key *</label><input pInputText [(ngModel)]="approveApiKey" class="w-full" placeholder="Nhập API Key"/></div>
      <ng-template pTemplate="footer">
        <button pButton label="Hủy" class="p-button-text" (click)="showApproveDialog=false"></button>
        <button pButton label="Phê duyệt" severity="success" (click)="confirmApprove()"></button>
      </ng-template>
    </p-dialog>

    <!-- Reject -->
    <p-dialog header="Từ chối Request" [(visible)]="showRejectDialog" [modal]="true" [style]="{width:'500px'}">
      <div class="mb-3"><label>Lý do từ chối *</label><textarea pTextarea [(ngModel)]="rejectReason" rows="4" class="w-full" placeholder="Nhập lý do..."></textarea></div>
      <ng-template pTemplate="footer">
        <button pButton label="Hủy" class="p-button-text" (click)="showRejectDialog=false"></button>
        <button pButton label="Xác nhận" severity="danger" (click)="confirmReject()"></button>
      </ng-template>
    </p-dialog>
  </div>
  `,
  styles: [`
    .content-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}
    .filter-select{min-width:200px}
    .user-info{display:flex;flex-direction:column;gap:.25rem}
    .duration-badge{display:inline-block;padding:.25rem .75rem;background:var(--p-surface-100);border-radius:16px;font-size:.875rem;font-weight:500}
    .date-col{color:var(--p-text-secondary-color);font-size:.875rem}
    .actions-col{text-align:center;width:140px}
    .action-buttons{display:flex;gap:.5rem;justify-content:center}
    .detail-section{margin-bottom:1.25rem;padding-bottom:1rem;border-bottom:1px solid var(--p-surface-200)}
    .content-box{white-space:pre-wrap;line-height:1.6;background:var(--p-surface-50);padding:1rem;border-radius:8px}
    :host ::ng-deep .modern-table .p-datatable-thead>tr>th{background:var(--p-surface-50)}
  `]
})
export class ApiKeysPageComponent implements OnInit {
  private svc = inject(AIMarketplaceService);

  requests: APIKeyRequest[] = [];
  loadingRequests = false;
  filterRequestStatus: RequestStatus | null = null;

  showDetailDialog=false; showApproveDialog=false; showRejectDialog=false;
  selectedRequest: APIKeyRequest | null = null;
  approveApiKey=''; rejectReason='';

  statusOptions = [
    { label: 'Chờ duyệt', value: 'pending' as RequestStatus },
    { label: 'Đã phê duyệt', value: 'approved' as RequestStatus },
    { label: 'Từ chối', value: 'rejected' as RequestStatus },
  ];

  ngOnInit(){ this.fetchRequests(); }
  fetchRequests(){ this.loadingRequests=true; this.svc.listRequests().subscribe({next:(res:APIKeyRequest[])=>{this.requests=res; this.loadingRequests=false;}, error:()=>this.loadingRequests=false}); }

  viewRequest(r:APIKeyRequest){ this.selectedRequest=r; this.showDetailDialog=true; }
  openApproveDialog(r:APIKeyRequest){ this.selectedRequest=r; this.approveApiKey=''; this.showApproveDialog=true; }
  confirmApprove(){ if(!this.selectedRequest||!this.approveApiKey.trim()) return; this.svc.approveRequest(this.selectedRequest.id,this.approveApiKey.trim(),'Admin KHCNĐMST').subscribe({next:()=>{this.showApproveDialog=false; this.fetchRequests();}}); }
  openRejectDialog(r:APIKeyRequest){ this.selectedRequest=r; this.rejectReason=''; this.showRejectDialog=true; }
  confirmReject(){ if(!this.selectedRequest||!this.rejectReason.trim()) return; this.svc.rejectRequest(this.selectedRequest.id,this.rejectReason.trim()).subscribe({next:()=>{this.showRejectDialog=false; this.fetchRequests();}}); }

  getStatusLabel(s:RequestStatus){ return s==='pending'?'Chờ duyệt':s==='approved'?'Đã phê duyệt':'Từ chối'; }
  getStatusSeverity(s:RequestStatus):'warn'|'success'|'danger'{ return s==='pending'?'warn':s==='approved'?'success':'danger'; }
}

/* ==========================================================
 *  PAGE 3: API USAGE
 * ========================================================== */
@Component({
  selector: 'app-aiusage-page',
  standalone: true,
  imports: [CommonModule, FormsModule, TableModule, TagModule, ButtonModule, TooltipModule],
  providers: [AIMarketplaceService],
  template: `
  <div>
    <div class="content-header">
      <h2 class="section-title">Theo dõi API Usage</h2>
      <div class="header-actions">
        <button pButton label="Xuất CSV" icon="pi pi-download" class="p-button-outlined" size="small"></button>
        <button pButton icon="pi pi-refresh" class="p-button-text" size="small" pTooltip="Làm mới dữ liệu" (click)="fetchUsage()"></button>
      </div>
    </div>

    <div class="stats-grid mb-4">
      <div class="stat-card"><div class="stat-icon blue"><i class="pi pi-server"></i></div><div class="stat-content"><span class="stat-label">Total Requests</span><span class="stat-value">{{ getTotalRequests() | number }}</span></div></div>
      <div class="stat-card"><div class="stat-icon green"><i class="pi pi-arrow-down"></i></div><div class="stat-content"><span class="stat-label">Input Tokens</span><span class="stat-value">{{ formatNumber(getTotalInputTokens()) }}</span></div></div>
      <div class="stat-card"><div class="stat-icon orange"><i class="pi pi-arrow-up"></i></div><div class="stat-content"><span class="stat-label">Output Tokens</span><span class="stat-value">{{ formatNumber(getTotalOutputTokens()) }}</span></div></div>
      <div class="stat-card"><div class="stat-icon purple"><i class="pi pi-chart-line"></i></div><div class="stat-content"><span class="stat-label">Total Tokens</span><span class="stat-value">{{ formatNumber(getTotalTokens()) }}</span></div></div>
    </div>

    <p-table [value]="usageData" dataKey="apiKey" [rows]="10" [rowHover]="true" [paginator]="true" [loading]="loadingUsage" styleClass="modern-table">
      <ng-template pTemplate="header">
        <tr>
          <th>API Key</th>
          <th>Model</th>
          <th pSortableColumn="totalRequests">Requests <p-sortIcon field="totalRequests"/></th>
          <th pSortableColumn="inputTokens">Input <p-sortIcon field="inputTokens"/></th>
          <th pSortableColumn="outputTokens">Output <p-sortIcon field="outputTokens"/></th>
          <th pSortableColumn="totalTokens">Total <p-sortIcon field="totalTokens"/></th>
          <th>Status</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-usage>
        <tr>
          <td><code class="api-key-code">{{ maskApiKey(usage.apiKey) }}</code></td>
          <td><span class="model-name-text">{{ usage.modelName }}</span></td>
          <td class="number-col">{{ usage.totalRequests | number }}</td>
          <td class="number-col">{{ formatNumber(usage.inputTokens) }}</td>
          <td class="number-col">{{ formatNumber(usage.outputTokens) }}</td>
          <td class="number-col strong">{{ formatNumber(usage.totalTokens) }}</td>
          <td><p-tag [value]="usage.status==='active'?'Active':'Expired'" [severity]="usage.status==='active'?'success':'secondary'"></p-tag></td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr><td colspan="7"><div class="empty-state"><i class="pi pi-chart-line"></i><p>Chưa có dữ liệu usage</p></div></td></tr>
      </ng-template>
    </p-table>

    <div class="update-time"><i class="pi pi-clock"></i> Cập nhật lúc: {{ latestDataTime }}</div>
  </div>
  `,
  styles: [`
    .content-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}
    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem}
    .stat-card{background:white;border:1px solid var(--p-surface-200);border-radius:12px;padding:1.25rem;display:flex;gap:1rem;align-items:center}
    .stat-icon{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:white}
    .stat-icon.blue{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}
    .stat-icon.green{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%)}
    .stat-icon.orange{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%)}
    .stat-icon.purple{background:linear-gradient(135deg,#43e97b 0%,#38f9d7 100%)}
    .stat-content{display:flex;flex-direction:column;gap:.25rem}
    .stat-label{font-size:.875rem;color:var(--p-text-secondary-color)}
    .stat-value{font-size:1.5rem;font-weight:700}
    .api-key-code{font-family:'Monaco','Courier New',monospace;font-size:.75rem;background:var(--p-surface-100);padding:.25rem .5rem;border-radius:4px}
    .number-col{text-align:right;font-variant-numeric:tabular-nums}
    .number-col.strong{font-weight:600;color:var(--p-primary-color)}
    .update-time{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:var(--p-text-secondary-color);margin-top:1rem;padding-top:1rem;border-top:1px solid var(--p-surface-200)}
  `]
})
export class AiUsagePageComponent implements OnInit {
  private svc = inject(AIMarketplaceService);

  usageData: APIUsage[] = [];
  loadingUsage=false; latestDataTime=new Date().toLocaleString('vi-VN');

  ngOnInit(){ this.fetchUsage(); }
  fetchUsage(){ this.loadingUsage=true; this.svc.listUsage().subscribe({next:(res:APIUsage[])=>{this.usageData=res; this.loadingUsage=false; this.latestDataTime=new Date().toLocaleString('vi-VN');}, error:()=>this.loadingUsage=false}); }

  maskApiKey(key:string){ if(!key||key.length<=8) return key; return `${key.slice(0,4)}••••••••${key.slice(-4)}`; }
  formatNumber(num:number){ if(num>=1_000_000) return (num/1_000_000).toFixed(1)+'M'; if(num>=1_000) return Math.round(num/1_000)+'K'; return num.toLocaleString(); }
  getTotalRequests(){ return this.usageData.reduce((s,u)=>s+u.totalRequests,0); }
  getTotalInputTokens(){ return this.usageData.reduce((s,u)=>s+u.inputTokens,0); }
  getTotalOutputTokens(){ return this.usageData.reduce((s,u)=>s+u.outputTokens,0); }
  getTotalTokens(){ return this.usageData.reduce((s,u)=>s+u.totalTokens,0); }
}

/* ==========================================================
 *  ROUTES: export để add vào app.routes.ts
 * ========================================================== */
export const AI_MARKETPLACE_ROUTES: Routes = [
  {
    path: 'ai-marketplace',
    component: AIMarketplaceShellComponent,
    children: [
      { path: '', pathMatch: 'full', redirectTo: 'models' },
      { path: 'models', component: AiModelsPageComponent },
      { path: 'api-keys', component: ApiKeysPageComponent },
      { path: 'usage', component: AiUsagePageComponent },
    ],
  },
];


================================================================================
File: feedback.ts
Relative Path: src/app/pages/uikit/feedback.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/feedback.ts
Extension: .ts
Lines: 642
================================================================================

import { Component, OnInit, inject, ViewChild, ElementRef } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { Table, TableModule } from 'primeng/table';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { DialogModule } from 'primeng/dialog';
import { ConfirmDialogModule } from 'primeng/confirmdialog';
import { TooltipModule } from 'primeng/tooltip';
import { TagModule } from 'primeng/tag';
import { SelectModule } from 'primeng/select';
import { FileUploadModule } from 'primeng/fileupload';
import { RatingModule } from 'primeng/rating';
import { IconFieldModule } from 'primeng/iconfield';
import { InputIconModule } from 'primeng/inputicon';

import { ConfirmationService } from 'primeng/api';
import { FeedbackService, Feedback, FeedbackStatus, FeedbackType } from '../../core/services/feedback.service';

@Component({
  selector: 'app-feedback',
  standalone: true,
  imports: [
    CommonModule, FormsModule,
    TableModule, ButtonModule, InputTextModule, DialogModule, ConfirmDialogModule,
    TooltipModule, TagModule, SelectModule, FileUploadModule, RatingModule,
    IconFieldModule, InputIconModule
  ],
  providers: [ConfirmationService],
  template: `
  <div class="page p-4">
    <div class="card mb-4">
      <h2 class="text-xl font-semibold mb-4">Gửi đánh giá & góp ý</h2>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label>Loại góp ý *</label>
          <p-select appendTo="body" class="w-full"
            [options]="typeOptions" optionLabel="label" optionValue="value"
            [(ngModel)]="form.type" (onChange)="onTypeChange()">
          </p-select>
        </div>

        <div *ngIf="!isRatingType()" class="md:col-span-2">
          <label>Tiêu đề *</label>
          <input pInputText [(ngModel)]="form.title" class="w-full" 
            placeholder="Mô tả ngắn gọn vấn đề"/>
        </div>

        <div *ngIf="isRatingType()" class="md:col-span-2">
          <label>Điểm đánh giá *</label>
          <div class="mt-1">
            <p-rating [(ngModel)]="form.rating" [stars]="5"></p-rating>
          </div>
          <small class="text-surface-500 block mt-1">Chọn từ 1-5 sao</small>
        </div>

        <div class="md:col-span-3">
          <label>Nội dung chi tiết *</label>
          <textarea pInputText [(ngModel)]="form.comment" rows="4" class="w-full" 
            placeholder="Mô tả chi tiết về lỗi, ý kiến hoặc đánh giá của bạn..."></textarea>
        </div>

        <div class="md:col-span-3">
          <label>Đính kèm ảnh</label>
          <p-fileUpload 
            name="files" 
            mode="basic" 
            chooseLabel="Chọn ảnh" 
            accept="image/*" 
            [multiple]="true"
            [auto]="true"
            customUpload
            (uploadHandler)="onFilesSelected($event)">
          </p-fileUpload>
          <small class="text-surface-500 block mt-1">Có thể đính kèm ảnh chụp màn hình</small>
        </div>
      </div>

      <div class="mt-4 flex justify-end gap-2">
        <button pButton label="Làm mới" class="p-button-outlined" 
          (click)="resetForm()"></button>
        <button pButton label="Gửi góp ý" icon="pi pi-send"
          [disabled]="submitting" [loading]="submitting"
          (click)="submit()"></button>
      </div>
    </div>

    <div class="card">
      <h2 class="text-xl font-semibold mb-4">Danh sách góp ý</h2>

      <p-table #dt
        [value]="list"
        dataKey="id"
        [rows]="10"
        [rowHover]="true"
        [showGridlines]="true"
        [paginator]="true"
        [rowsPerPageOptions]="[10,25,50]"
        [globalFilterFields]="['title', 'comment', 'reporterName', 'reporterEmail']"
        [loading]="loading"
        styleClass="p-datatable-sm">

        <ng-template pTemplate="caption">
          <div class="flex justify-between items-center flex-column sm:flex-row gap-3">
            <button pButton label="Xóa bộ lọc" class="p-button-outlined" 
              icon="pi pi-filter-slash" (click)="clearFilters(dt)"></button>

            <p-iconfield iconPosition="left" class="ml-auto">
              <p-inputicon>
                <i class="pi pi-search"></i>
              </p-inputicon>
              <input #globalSearch pInputText type="text" 
                (input)="onGlobalFilter(dt, $event)" 
                placeholder="Tìm kiếm..." 
                class="w-full sm:w-80"/>
            </p-iconfield>
          </div>
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <th style="min-width: 8rem">
              <div class="flex justify-between items-center">
                Loại
                <p-columnFilter field="type" matchMode="equals" display="menu">
                  <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                    <p-select [ngModel]="value" [options]="typeOptions" 
                      optionLabel="label" optionValue="value"
                      placeholder="Tất cả" (onChange)="filter($event.value)" 
                      [style]="{'min-width': '10rem'}">
                    </p-select>
                  </ng-template>
                </p-columnFilter>
              </div>
            </th>

            <th style="min-width: 15rem" pSortableColumn="title">
              <div class="flex justify-between items-center">
                Tiêu đề
                <p-sortIcon field="title" />
              </div>
            </th>

            <th style="min-width: 10rem" pSortableColumn="rating">
              <div class="flex justify-between items-center">
                Đánh giá
                <p-sortIcon field="rating" />
              </div>
            </th>

            <th style="min-width: 12rem">Người gửi</th>

            <th style="min-width: 10rem">
              <div class="flex justify-between items-center">
                Trạng thái
                <p-columnFilter field="status" matchMode="equals" display="menu">
                  <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                    <p-select [ngModel]="value" [options]="statusOptions" 
                      optionLabel="label" optionValue="value"
                      placeholder="Tất cả" (onChange)="filter($event.value)" 
                      [style]="{'min-width': '10rem'}">
                    </p-select>
                  </ng-template>
                </p-columnFilter>
              </div>
            </th>

            <th style="min-width: 10rem" pSortableColumn="createdAt">
              <div class="flex justify-between items-center">
                Ngày gửi
                <p-sortIcon field="createdAt" />
              </div>
            </th>

            <th style="width: 9rem; text-align: center">Thao tác</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-fb>
          <tr>
            <td>
              <p-tag [value]="typeLabel(fb.type)" 
                [severity]="getTypeSeverity(fb.type)"
                [icon]="getTypeIcon(fb.type)">
              </p-tag>
            </td>

            <td>
              <span class="font-semibold">{{ fb.title }}</span>
            </td>

            <td>
              <p-rating [ngModel]="fb.rating || 0" [readonly]="true" 
                [stars]="5" *ngIf="fb.type === 'rating'">
              </p-rating>
              <span class="text-surface-400 text-sm" *ngIf="fb.type !== 'rating'">-</span>
            </td>

            <td>
              <div class="flex flex-column gap-1">
                <span class="font-medium">{{ fb.reporterName || 'Ẩn danh' }}</span>
                <small class="text-surface-500" *ngIf="fb.reporterEmail">
                  {{ fb.reporterEmail }}
                </small>
              </div>
            </td>

            <td>
              <p-tag [value]="statusText(fb.status)" 
                [severity]="statusColor(fb.status)">
              </p-tag>
            </td>

            <td>
              <span class="text-sm">
                {{ fb.createdAt | date:'dd/MM/yyyy HH:mm' }}
              </span>
            </td>

            <td>
              <div class="flex justify-center gap-1">
                <button pButton icon="pi pi-eye" 
                  [rounded]="true" [text]="true" size="small"
                  pTooltip="Xem chi tiết" tooltipPosition="top"
                  (click)="openDetail(fb)"></button>
                <button pButton icon="pi pi-step-forward"
                  [rounded]="true" [text]="true" size="small"
                  severity="secondary" pTooltip="Chuyển trạng thái" tooltipPosition="top"
                  (click)="nextStatus(fb)"></button>
                <button pButton icon="pi pi-trash"
                  [rounded]="true" [text]="true" size="small"
                  severity="danger" pTooltip="Xóa" tooltipPosition="top"
                  (click)="confirmDelete(fb)"></button>
              </div>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="7" class="text-center py-6">
              <div class="flex flex-column items-center gap-3">
                <i class="pi pi-comments text-4xl text-surface-300"></i>
                <span class="text-surface-500">Chưa có góp ý nào</span>
              </div>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="loadingbody">
          <tr>
            <td colspan="7" class="text-center py-6">
              <i class="pi pi-spin pi-spinner text-2xl"></i>
              <div class="mt-2">Đang tải dữ liệu...</div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

  <!-- Dialog chi tiết -->
  <p-dialog 
    header="Chi tiết góp ý" 
    [(visible)]="showDetail" 
    [modal]="true" 
    [style]="{width:'720px'}" 
    [draggable]="false">
    
    <div *ngIf="selected">
      <div class="detail-section">
        <h4>Thông tin chung</h4>
        <div class="grid grid-cols-2 gap-3">
          <div class="detail-item">
            <span class="detail-label">Loại:</span>
            <p-tag [value]="typeLabel(selected.type)" 
              [severity]="getTypeSeverity(selected.type)"
              [icon]="getTypeIcon(selected.type)">
            </p-tag>
          </div>
          <div class="detail-item">
            <span class="detail-label">Trạng thái:</span>
            <p-tag [value]="statusText(selected.status)" 
              [severity]="statusColor(selected.status)">
            </p-tag>
          </div>
          <div class="detail-item">
            <span class="detail-label">Ngày gửi:</span>
            <span>{{ selected.createdAt | date:'dd/MM/yyyy HH:mm' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Người gửi:</span>
            <div>
              <div>{{ selected.reporterName || 'Ẩn danh' }}</div>
              <small class="text-surface-500" *ngIf="selected.reporterEmail">
                {{ selected.reporterEmail }}
              </small>
            </div>
          </div>
        </div>
      </div>

      <div class="detail-section" *ngIf="selected.type === 'rating'">
        <h4>Đánh giá</h4>
        <p-rating [ngModel]="selected.rating || 0" [readonly]="true" [stars]="5"></p-rating>
      </div>

      <div class="detail-section">
        <h4>Tiêu đề</h4>
        <p class="font-semibold">{{ selected.title }}</p>
      </div>

      <div class="detail-section">
        <h4>Nội dung chi tiết</h4>
        <div class="content-box">{{ selected.comment }}</div>
      </div>

      <div class="detail-section" *ngIf="selected.attachments?.length">
        <h4>Đính kèm ({{ selected.attachments?.length }})</h4>
        <div class="attachments">
          <img *ngFor="let img of selected.attachments" 
            [src]="img" alt="attachment"
            class="attachment-img"/>
        </div>
      </div>
    </div>

    <ng-template pTemplate="footer">
      <button pButton label="Đóng" class="p-button-text" 
        (click)="showDetail=false"></button>
      <button pButton label="Open" severity="contrast"
        (click)="setStatus(selected!, 'open')" 
        *ngIf="selected && selected.status !== 'open'"></button>
      <button pButton label="In Progress" severity="info"
        (click)="setStatus(selected!, 'in_progress')" 
        *ngIf="selected && selected.status !== 'in_progress'"></button>
      <button pButton label="Resolved" severity="success"
        (click)="setStatus(selected!, 'resolved')" 
        *ngIf="selected && selected.status !== 'resolved'"></button>
    </ng-template>
  </p-dialog>

  <p-confirmDialog [dismissableMask]="true"></p-confirmDialog>
  `,
  styles: [`
    .card {
      background: var(--p-content-background);
      border-radius: var(--p-content-border-radius);
      padding: 1.5rem;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
      margin-bottom: 1.5rem;
    }

    .card:last-child {
      margin-bottom: 0;
    }

    label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.375rem;
    }

    :host ::ng-deep .p-datatable .p-datatable-tbody > tr > td {
      padding: 0.75rem 1rem;
      vertical-align: middle;
    }

    :host ::ng-deep .p-datatable .p-datatable-thead > tr > th {
      padding: 0.75rem 1rem;
      background: var(--p-surface-50);
      font-weight: 600;
    }

    :host ::ng-deep .p-tag {
      font-size: 0.75rem;
      padding: 0.25rem 0.5rem;
    }

    :host ::ng-deep .p-button.p-button-text {
      padding: 0.5rem;
    }

    :host ::ng-deep .p-datatable-emptymessage > td {
      padding: 2rem !important;
    }

    :host ::ng-deep textarea.p-inputtext {
      resize: vertical;
      min-height: 100px;
    }

    .detail-section {
      margin-bottom: 1.25rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--p-surface-200);
    }

    .detail-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }

    .detail-section h4 {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
    }

    .detail-item {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .detail-label {
      font-size: 0.875rem;
      color: var(--p-text-muted-color);
    }

    .content-box {
      white-space: pre-wrap;
      line-height: 1.6;
      background: var(--p-surface-50);
      padding: 1rem;
      border-radius: 8px;
    }

    .attachments {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .attachment-img {
      width: 140px;
      height: 100px;
      object-fit: cover;
      border-radius: 8px;
      border: 1px solid var(--p-surface-200);
      cursor: pointer;
      transition: transform 0.2s;
    }

    .attachment-img:hover {
      transform: scale(1.05);
    }

    :host ::ng-deep .p-fileupload-choose {
      font-size: 0.875rem;
    }

    :host ::ng-deep .p-rating .p-rating-icon {
      font-size: 1.25rem;
    }
  `]
})
export class FeedbackPageComponent implements OnInit {
  @ViewChild('globalSearch') globalSearch!: ElementRef;

  private svc = inject(FeedbackService);
  private confirm = inject(ConfirmationService);

  list: Feedback[] = [];
  loading = false;
  submitting = false;

  form: Partial<Feedback> = { 
    type: 'bug', 
    title: '', 
    rating: 0, 
    comment: '', 
    attachments: []
  };

  showDetail = false;
  selected: Feedback | null = null;

  typeOptions = [
    { label: 'Lỗi (Bug)', value: 'bug' as FeedbackType },
    { label: 'Đánh giá (Rating)', value: 'rating' as FeedbackType }
  ];

  statusOptions = [
    { label: 'Open', value: 'open' as FeedbackStatus },
    { label: 'In Progress', value: 'in_progress' as FeedbackStatus },
    { label: 'Resolved', value: 'resolved' as FeedbackStatus }
  ];

  ngOnInit() { this.fetch(); }

  fetch() {
    this.loading = true;
    this.svc.list().subscribe({
      next: res => {
        this.list = res;
        this.loading = false;
      },
      error: () => this.loading = false
    });
  }

  isRatingType(): boolean {
    return this.form.type === 'rating';
  }

  onTypeChange() {
    // Reset rating khi không phải type rating
    if (!this.isRatingType()) {
      this.form.rating = 0;
    }
  }

  onFilesSelected(event: any) {
    const files: File[] = event.files || [];
    files.forEach(f => {
      this.svc.uploadAttachment(f).subscribe(url => {
        this.form.attachments = this.form.attachments || [];
        this.form.attachments.push(url);
      });
    });
  }

  resetForm() {
    this.form = { 
      type: 'bug', 
      title: '', 
      rating: 0, 
      comment: '', 
      attachments: []
    };
  }

  submit() {
    // Validate
    if (!this.form.type || !this.form.comment?.trim()) {
      return;
    }
    
    // Title bắt buộc cho bug và other, không bắt buộc cho rating
    if (!this.isRatingType() && !this.form.title?.trim()) {
      return;
    }
    
    // Rating bắt buộc cho type rating
    if (this.isRatingType() && (!this.form.rating || this.form.rating < 1)) {
      return;
    }

    this.submitting = true;
    
    // TODO: Lấy thông tin user từ auth service
    const currentUser = 'Current User'; // Thay bằng auth.currentUser
    const currentEmail = 'user@example.com'; // Thay bằng auth.currentUser.email
    
    const payload = {
      type: this.form.type!,
      title: this.form.title?.trim() || `Đánh giá ${this.form.rating} sao`,
      rating: this.isRatingType() ? this.form.rating : undefined,
      comment: this.form.comment!.trim(),
      attachments: this.form.attachments ?? [],
      reporterName: currentUser,
      reporterEmail: currentEmail,
      status: 'open' as FeedbackStatus
    };

    this.svc.add(payload).subscribe({
      next: () => { 
        this.submitting = false; 
        this.resetForm(); 
        this.fetch(); 
      },
      error: () => { 
        this.submitting = false; 
      }
    });
  }

  typeLabel(t: FeedbackType) {
    return t === 'bug' ? 'Lỗi' : t === 'rating' ? 'Đánh giá' : 'Khác';
  }

  getTypeSeverity(t: FeedbackType): any {
    return t === 'bug' ? 'danger' : t === 'rating' ? 'success' : 'secondary';
  }

  getTypeIcon(t: FeedbackType): string {
    return t === 'bug' ? 'pi-exclamation-circle' : t === 'rating' ? 'pi-star-fill' : 'pi-comment';
  }

  statusText(s: FeedbackStatus) {
    return s === 'open' ? 'Open' : s === 'in_progress' ? 'In Progress' : 'Resolved';
  }

  statusColor(s: FeedbackStatus): any {
    return s === 'open' ? 'contrast' : s === 'in_progress' ? 'info' : 'success';
  }

  openDetail(fb: Feedback) {
    this.selected = fb;
    this.showDetail = true;
  }

  setStatus(fb: Feedback, s: FeedbackStatus) {
    this.svc.setStatus(fb.id, s).subscribe(() => {
      this.fetch();
      this.showDetail = false;
    });
  }

  nextStatus(fb: Feedback) {
    const order: FeedbackStatus[] = ['open', 'in_progress', 'resolved'];
    const idx = order.indexOf(fb.status);
    const next = order[(idx + 1) % order.length];
    this.svc.setStatus(fb.id, next).subscribe(() => this.fetch());
  }

  confirmDelete(fb: Feedback) {
    this.confirm.confirm({
      header: 'Xóa góp ý',
      message: `Bạn có chắc muốn xóa góp ý <strong>${fb.title}</strong>?`,
      icon: 'pi pi-trash',
      acceptLabel: 'Xóa',
      rejectLabel: 'Hủy',
      acceptButtonStyleClass: 'p-button-danger',
      accept: () => this.svc.delete(fb.id).subscribe(() => this.fetch())
    });
  }

  onGlobalFilter(table: Table, event: Event) {
    table.filterGlobal((event.target as HTMLInputElement).value, 'contains');
  }

  clearFilters(table: Table) {
    table.clear();
    if (this.globalSearch) {
      this.globalSearch.nativeElement.value = '';
    }
  }
}

================================================================================
File: chatbot-ai.ts
Relative Path: src/app/pages/uikit/chatbot-ai.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/chatbot-ai.ts
Extension: .ts
Lines: 942
================================================================================

import {
  Component, ElementRef, ViewChild,
  AfterViewChecked, OnInit, OnDestroy, inject, HostListener, ChangeDetectorRef
} from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { HttpClientModule } from '@angular/common/http';

// PrimeNG
import { InputTextModule } from 'primeng/inputtext';
import { ButtonModule } from 'primeng/button';
import { DialogModule } from 'primeng/dialog';
import { TooltipModule } from 'primeng/tooltip';
import { AvatarModule } from 'primeng/avatar';
import { AvatarGroupModule } from 'primeng/avatargroup';
import { Popover, PopoverModule } from 'primeng/popover';
import { TagModule } from 'primeng/tag';
import { ConfirmDialogModule } from 'primeng/confirmdialog';
import { ConfirmationService, MenuItem, MessageService } from 'primeng/api';
import { MenuModule } from 'primeng/menu';
import { Menu } from 'primeng/menu';
import { ToastModule } from 'primeng/toast';

// Markdown
import { MarkdownModule, provideMarkdown } from 'ngx-markdown';

// Drag & Drop
import { DragDropModule, CdkDragDrop, moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';

import { Subscription } from 'rxjs';

// App services & models
import { AiModelService } from '../../core/services/ai-model.service';
import { AICategory, AIModel, ChatMessage, ChatSession } from '../../core/models/ai-models.model';
import { AiModelSelectorComponent } from '../../core/shared/components/ai-model-selector.component';
import { AuthService } from '../../core/services/auth.service';

type ChatBackend =
  | { mode: 'sse'; url:string }
  | { mode: 'http'; url: string };

interface ChatFolder {
  id: string;
  name: string;
  createdAt: Date;
  expanded?: boolean;
}

@Component({
  selector: 'app-chatbot',
  standalone: true,
  imports: [
    CommonModule,
    FormsModule,
    HttpClientModule,

    // PrimeNG
    InputTextModule,
    ButtonModule,
    DialogModule,
    TooltipModule,
    AvatarModule,
    AvatarGroupModule,
    PopoverModule,
    TagModule,
    ConfirmDialogModule,
    MenuModule,
    ToastModule,

    // Markdown
    MarkdownModule,

    // CDK
    DragDropModule,

    // Custom
    AiModelSelectorComponent
  ],
  template: `
<div class="chatbot-root">
  <p-toast position="top-center" key="t1"></p-toast>

  <p-confirmDialog
    [style]="{ width: '28rem' }"
    [closable]="false"
    [breakpoints]="{ '640px': '95vw' }"
    acceptLabel="Xoá"
    rejectLabel="Huỷ"
    icon="pi pi-exclamation-triangle"
    header="Xoá?"
    [acceptButtonStyleClass]="'p-button-danger'"
    [rejectButtonStyleClass]="'p-button-text p-button-secondary'">
  </p-confirmDialog>

  <p-menu #moveMenu [popup]="true" [model]="moveMenuModel" [appendTo]="'body'"></p-menu>

  <div *ngIf="!showSidebar" class="floating-hamburger">
    <p-button icon="pi pi-bars" [rounded]="true" severity="secondary" [raised]="true"
              (onClick)="toggleSidebar()" pTooltip="Hiện lịch sử" tooltipPosition="right"></p-button>
  </div>

  <div class="flex" style="height: calc(100vh - 12rem);">
    <div *ngIf="showSidebar"
         class="w-72 bg-white dark:bg-surface-800 border-r border-surface-200 dark:border-surface-700 flex flex-col shrink-0">
      <div class="p-3 border-b border-surface-200 dark:border-surface-700 flex items-center gap-2">
        <p-button icon="pi pi-bars" [text]="true" [rounded]="true" severity="secondary" size="small"
                  pTooltip="Ẩn lịch sử" tooltipPosition="bottom" (onClick)="toggleSidebar()"></p-button>

        <div class="ml-auto flex items-center gap-2">
          <p-button label="Folder" icon="pi pi-folder-plus" severity="secondary" size="small"
                    (onClick)="createFolder()"></p-button>
          <p-button label="Chat mới" icon="pi pi-plus" severity="primary" size="small"
                    (onClick)="createNewChat()"></p-button>
        </div>
      </div>

      <div class="px-3 pt-3 pb-1 flex items-center justify-between">
        <div class="text-xs uppercase tracking-wide text-surface-500 dark:text-surface-400">Folders ({{ folders.length }})</div>
        <button class="icon-btn" type="button" (click)="foldersVisible = !foldersVisible" pTooltip="{{foldersVisible ? 'Thu gọn' : 'Mở rộng'}}">
          <i class="pi text-sm" [ngClass]="foldersVisible ? 'pi-chevron-down' : 'pi-chevron-right'"></i>
        </button>
      </div>
      <div *ngIf="foldersVisible" class="flex-0 px-2">
        <div *ngFor="let f of folders; trackBy: trackByFolder" class="mb-2 rounded-lg overflow-hidden border border-surface-200 dark:border-surface-700">
          <div class="flex items-center gap-2 px-2 py-1.5 bg-surface-50 dark:bg-surface-700/40 group">
            <button class="icon-btn" type="button" (click)="f.expanded = !f.expanded" pTooltip="{{f.expanded ? 'Thu gọn' : 'Mở rộng'}}">
              <i class="pi" [ngClass]="f.expanded ? 'pi-chevron-down' : 'pi-chevron-right'"></i>
            </button>
            <i class="pi pi-folder text-surface-500"></i>

            <ng-container *ngIf="editingFolderId !== f.id; else editFolderTpl">
              <div class="flex-1 min-w-0 truncate" [pTooltip]="f.name" tooltipPosition="top">{{ f.name }}</div>
              <span class="text-xs text-surface-400 px-1.5 py-0.5 rounded-md bg-surface-200 dark:bg-surface-600">{{ sessionsByFolder[f.id]?.length || 0 }}</span>
              <div class="items-center gap-1 hidden group-hover:flex ml-auto">
                  <button class="icon-btn" type="button" (click)="startRenameFolder(f)" pTooltip="Đổi tên">
                      <i class="pi pi-pencil"></i>
                  </button>
                  <button class="icon-btn" type="button" (click)="confirmDeleteFolder(f)" pTooltip="Xoá folder">
                      <i class="pi pi-trash text-red-500"></i>
                  </button>
              </div>
            </ng-container>

            <ng-template #editFolderTpl>
              <input type="text" class="p-inputtext p-inputtext-sm w-full" [(ngModel)]="editingFolderName"
                     (keydown.enter)="commitRenameFolder(f)" />
              <button class="icon-btn" type="button" (click)="commitRenameFolder(f)" pTooltip="Lưu"><i class="pi pi-check text-green-500"></i></button>
              <button class="icon-btn" type="button" (click)="cancelRenameFolder()" pTooltip="Huỷ"><i class="pi pi-times"></i></button>
            </ng-template>
          </div>

          <div *ngIf="f.expanded" class="p-2">
            <div
              cdkDropList
              [id]="'folder-' + f.id"
              [cdkDropListData]="sessionsByFolder[f.id]"
              [cdkDropListConnectedTo]="connectedIdsForFolder(f.id)"
              (cdkDropListDropped)="dropOnFolder(f, $event)"
              class="drop-zone"
            >
              <div *ngIf="sessionsByFolder[f.id]?.length === 0" class="empty-hint">
                Kéo chat vào đây
              </div>

              <div *ngFor="let session of sessionsByFolder[f.id]; trackBy: trackBySession"
                   class="group px-2.5 py-1.5 mb-1 rounded-lg transition-all duration-150 flex items-center gap-2 relative"
                   [ngClass]="{
                     'bg-primary-50 dark:bg-primary-900/30': session.id === currentSessionId,
                     'hover:bg-surface-100 dark:hover:bg-surface-700/50': session.id !== currentSessionId
                   }"
                   cdkDrag
                   [cdkDragData]="session"
              >
                <div class="flex-1 min-w-0" (click)="switchChatSession(session.id)">
                  <ng-container *ngIf="editingSessionId !== session.id; else editSessionTpl">
                    <p class="m-0 text-sm font-medium truncate cursor-pointer">{{session.title}}</p>
                  </ng-container>
                  <ng-template #editSessionTpl>
                     <input type="text" class="p-inputtext p-inputtext-sm w-full" [(ngModel)]="editingSessionTitle"
                           (keydown.enter)="commitRenameSession(session)" />
                  </ng-template>
                  <p *ngIf="editingSessionId !== session.id" class="m-0 text-xs text-surface-500 dark:text-surface-400 cursor-pointer">{{formatTimestamp(session.timestamp)}}</p>
                </div>

                <div class="ml-auto items-center gap-1 absolute right-1.5 top-1/2 -translate-y-1/2 bg-inherit rounded-md"
                     [ngClass]="{'flex': editingSessionId === session.id, 'hidden group-hover:flex': editingSessionId !== session.id}">
                    <ng-container *ngIf="editingSessionId !== session.id; else editSessionButtons">
                        <button class="icon-btn" type="button" (click)="openMoveMenu($event, session)" pTooltip="Chuyển folder" tooltipPosition="top"><i class="pi pi-folder-open"></i></button>
                        <button class="icon-btn" type="button" (click)="startRenameSession(session, $event)" pTooltip="Đổi tên" tooltipPosition="top"><i class="pi pi-pencil"></i></button>
                        <button class="icon-btn" type="button" (click)="confirmDelete(session.id, $event)" pTooltip="Xoá chat" tooltipPosition="top"><i class="pi pi-trash"></i></button>
                    </ng-container>
                    <ng-template #editSessionButtons>
                        <button class="icon-btn" type="button" (click)="commitRenameSession(session)" pTooltip="Lưu"><i class="pi pi-check text-green-500"></i></button>
                        <button class="icon-btn" type="button" (click)="cancelRenameSession()" pTooltip="Huỷ"><i class="pi pi-times"></i></button>
                    </ng-template>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="px-3 pt-3 pb-1 flex items-center justify-between">
        <div class="text-xs uppercase tracking-wide text-surface-500 dark:text-surface-400">Chats ({{ rootSessions.length }})</div>
         <button class="icon-btn" type="button" (click)="chatsVisible = !chatsVisible" pTooltip="{{chatsVisible ? 'Thu gọn' : 'Mở rộng'}}">
          <i class="pi text-sm" [ngClass]="chatsVisible ? 'pi-chevron-down' : 'pi-chevron-right'"></i>
        </button>
      </div>
      <div *ngIf="chatsVisible" class="flex-1 overflow-y-auto p-2">
        <div
          cdkDropList
          id="root-list"
          [cdkDropListData]="rootSessions"
          [cdkDropListConnectedTo]="connectedIdsForRoot()"
          (cdkDropListDropped)="dropOnRoot($event)"
          class="drop-zone"
        >
          <div *ngIf="rootSessions.length === 0" class="text-center py-6 px-4 text-sm text-surface-500 dark:text-surface-400">
            Không có chat ở Root. Kéo chat ra đây để bỏ khỏi folder.
          </div>

          <div *ngFor="let session of rootSessions; trackBy: trackBySession"
               class="group px-2.5 py-1.5 mb-1 rounded-lg transition-all duration-150 flex items-center gap-2 relative"
               [ngClass]="{
                 'bg-primary-50 dark:bg-primary-900/30': session.id === currentSessionId,
                 'hover:bg-surface-100 dark:hover:bg-surface-700/50': session.id !== currentSessionId
               }"
               cdkDrag
               [cdkDragData]="session"
          >
            <div class="flex-1 min-w-0" (click)="switchChatSession(session.id)">
              <ng-container *ngIf="editingSessionId !== session.id; else editSessionTpl">
                  <p class="m-0 text-sm font-medium text-surface-800 dark:text-surface-100 truncate cursor-pointer">{{session.title}}</p>
              </ng-container>
              <ng-template #editSessionTpl>
                   <input type="text" class="p-inputtext p-inputtext-sm w-full" [(ngModel)]="editingSessionTitle"
                         (keydown.enter)="commitRenameSession(session)" />
              </ng-template>
              <p *ngIf="editingSessionId !== session.id" class="m-0 text-xs text-surface-500 dark:text-surface-400 cursor-pointer">{{formatTimestamp(session.timestamp)}}</p>
            </div>

            <div class="ml-auto items-center gap-1 absolute right-1.5 top-1/2 -translate-y-1/2 bg-inherit rounded-md"
                 [ngClass]="{'flex': editingSessionId === session.id, 'hidden group-hover:flex': editingSessionId !== session.id}">
                <ng-container *ngIf="editingSessionId !== session.id; else editSessionButtons">
                    <button class="icon-btn" type="button" (click)="openMoveMenu($event, session)" pTooltip="Chuyển folder" tooltipPosition="top"><i class="pi pi-folder-open"></i></button>
                    <button class="icon-btn" type="button" (click)="startRenameSession(session, $event)" pTooltip="Đổi tên" tooltipPosition="top"><i class="pi pi-pencil"></i></button>
                    <button class="icon-btn" type="button" (click)="confirmDelete(session.id, $event)" pTooltip="Xoá chat" tooltipPosition="top"><i class="pi pi-trash"></i></button>
                </ng-container>
                <ng-template #editSessionButtons>
                    <button class="icon-btn" type="button" (click)="commitRenameSession(session)" pTooltip="Lưu"><i class="pi pi-check text-green-500"></i></button>
                    <button class="icon-btn" type="button" (click)="cancelRenameSession()" pTooltip="Huỷ"><i class="pi pi-times"></i></button>
                </ng-template>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="flex-1 flex flex-col bg-gradient-to-br from-surface-50 via-surface-0 to-surface-100 dark:from-surface-900 dark:via-surface-800 dark:to-surface-950">
      <div #scrollContainer class="flex-1 overflow-y-auto relative" style="min-height: 0;">
        <div class="max-w-6xl w-full mx-auto px-4 pt-6 pb-2">

          <ng-container *ngIf="chatMessages.length === 0">
            <div class="welcome-abs">
              <div class="rw-root">
                <div class="rw-center">
                  <div class="rw-robot animate-float">
                    <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg" class="rw-shadow">
                      <line x1="60" y1="20" x2="60" y2="8" stroke="#6366F1" stroke-width="3" stroke-linecap="round"/>
                      <circle cx="60" cy="6" r="4" fill="#6366F1">
                        <animate attributeName="fill" values="#6366F1;#818CF8;#6366F1" dur="2s" repeatCount="indefinite"/>
                      </circle>
                      <rect x="30" y="22" width="60" height="50" rx="12" fill="white" stroke="#6366F1" stroke-width="3"/>
                      <circle cx="45" cy="42" r="5" fill="#6366F1"></circle>
                      <circle cx="75" cy="42" r="5" fill="#6366F1"></circle>
                      <path d="M 45 56 Q 60 64 75 56" stroke="#6366F1" stroke-width="3" stroke-linecap="round" fill="none"/>
                      <rect x="35" y="75" width="50" height="35" rx="8" fill="white" stroke="#6366F1" stroke-width="3"/>
                      <image href="assets/logo-evn.png" x="45" y="83" width="30" height="20" preserveAspectRatio="xMidYMid meet"></image>
                      <rect x="20" y="75" width="12" height="28" rx="6" fill="#6366F1"/>
                      <rect x="88" y="75" width="12" height="28" rx="6" fill="#6366F1"/>
                    </svg>
                  </div>
                  <div class="rw-cloud animate-fadeIn">
                    <svg width="380" height="180" viewBox="0 0 380 180" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <defs>
                        <filter id="cloudShadow" x="-50%" y="-50%" width="200%" height="200%">
                          <feOffset dx="0" dy="8" in="SourceAlpha" result="off"/>
                          <feGaussianBlur in="off" stdDeviation="10" result="blur"/>
                          <feColorMatrix in="blur" type="matrix"
                            values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0   0 0 0 0.18 0" result="shadow"/>
                          <feMerge>
                            <feMergeNode in="shadow"/>
                            <feMergeNode in="SourceGraphic"/>
                          </feMerge>
                        </filter>
                      </defs>
                      <path d="M 75 55 C 75 42, 87 32, 103 32 C 108 22, 123 17, 135 23 C 147 17, 163 21, 170 32 C 188 32, 203 45, 203 62 C 215 64, 223 75, 223 88 C 223 105, 211 117, 195 117 L 95 117 C 77 117, 63 105, 63 88 C 63 75, 70 64, 75 55 Z"
                            fill="#FFFFFF" stroke="#E6ECFF" stroke-width="2" filter="url(#cloudShadow)"/>
                      <circle cx="8"  cy="88" r="3"  fill="#FFFFFF" stroke="#E6ECFF" stroke-width="2" filter="url(#cloudShadow)" class="dot dot-1"/>
                      <circle cx="25" cy="85" r="6"  fill="#FFFFFF" stroke="#E6ECFF" stroke-width="2" filter="url(#cloudShadow)" class="dot dot-2"/>
                      <circle cx="50" cy="82" r="10" fill="#FFFFFF" stroke="#E6ECFF" stroke-width="2" filter="url(#cloudShadow)" class="dot dot-3"/>
                    </svg>
                    <div class="rw-cloud-text">
                      <p class="rw-cloud-title">
                        Xin chào! 👋<br/>
                        Tôi có thể giúp gì<br/>
                        cho bạn hôm nay?
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ng-container>

          <div *ngIf="chatMessages.length > 0" class="py-2">
            <div *ngFor="let msg of chatMessages; let i = index; trackBy: trackByMsg" class="w-full">
              <div *ngIf="msg.sender === 'user'" class="flex justify-end mb-6">
                <div class="bg-surface-100 dark:bg-surface-700 p-4 rounded-2xl max-w-xl shadow-sm">
                  <p class="m-0 text-surface-800 dark:text-surface-100 text-base leading-relaxed">{{msg.text}}</p>
                </div>
              </div>

              <div *ngIf="msg.sender === 'ai'" class="mb-8">
                <div class="flex items-center gap-2 mb-3">
                  <img [src]="msg.modelIcon" [alt]="msg.modelName" class="w-6 h-6 rounded-full" *ngIf="msg.modelIcon"/>
                  <span class="font-semibold text-surface-700 dark:text-surface-200 text-base">{{msg.modelName}}</span>

                  <p-button *ngIf="msg.thinking" size="small" [text]="true" [rounded]="true" severity="primary"
                            styleClass="ml-2"
                            [icon]="msg.__showThinking ? 'pi pi-eye-slash' : 'pi pi-eye'"
                            [label]="msg.__showThinking ? 'Ẩn suy luận' : 'Hiển thị suy luận'"
                            (onClick)="toggleThinkingForMessage(i)"></p-button>
                </div>

                <div *ngIf="msg.thinking && msg.__showThinking"
                     class="mb-3 rounded-xl border border-dashed border-surface-300 dark:border-surface-600 bg-surface-0/60 dark:bg-surface-800/50 p-3">
                  <div class="text-xs uppercase tracking-wide text-surface-500 dark:text-surface-400 mb-1">AI đang phân tích</div>
                  <pre class="m-0 whitespace-pre-wrap text-sm text-surface-700 dark:text-surface-200">{{msg.thinking}}</pre>
                </div>

                <div *ngIf="msg.thinking && !msg.__showThinking" class="text-xs text-surface-500 dark:text-surface-400 mb-2">
                  Đã ẩn phần suy luận. <a class="text-primary cursor-pointer" (click)="toggleThinkingForMessage(i)">Hiển thị</a>
                </div>

                <markdown [data]="msg.text" class="prose dark:prose-invert max-w-none"></markdown>

                <div class="mt-4 flex items-center gap-2 text-surface-500 dark:text-surface-400">
                  <p-button icon="pi pi-refresh" [text]="true" [rounded]="true" severity="secondary"
                            pTooltip="Tạo lại" tooltipPosition="top" (onClick)="regenerate(msg)"></p-button>
                  <p-button icon="pi pi-clone" [text]="true" [rounded]="true" severity="secondary"
                            pTooltip="So sánh" tooltipPosition="top"></p-button>
                </div>
              </div>
            </div>

            <div *ngIf="isStreaming" class="mb-8">
              <div class="flex items-center gap-2 mb-2 text-surface-500 dark:text-surface-400">
                <i class="pi pi-spinner pi-spin"></i>
                <span>{{ liveStatus || 'Đang tạo câu trả lời…' }}</span>

                <p-button *ngIf="!!liveThinking" size="small" [text]="true" [rounded]="true" severity="primary"
                          styleClass="ml-2"
                          [icon]="showThinkingLive ? 'pi pi-eye-slash' : 'pi pi-eye'"
                          [label]="showThinkingLive ? 'Ẩn suy luận' : 'Hiển thị suy luận'"
                          (onClick)="toggleThinkingLive()"></p-button>
              </div>

              <div *ngIf="liveThinking && showThinkingLive"
                   class="mb-3 rounded-xl border border-dashed border-surface-300 dark:border-surface-600 bg-surface-0/60 dark:bg-surface-800/50 p-3">
                <div class="text-xs uppercase tracking-wide text-surface-500 dark:text-surface-400 mb-1">AI đang phân tích</div>
                <pre class="m-0 whitespace-pre-wrap text-sm text-surface-700 dark:text-surface-200">{{liveThinking}}</pre>
              </div>

              <div *ngIf="liveThinking && !showThinkingLive" class="text-xs text-surface-500 dark:text-surface-400 mb-2">
                Đang ẩn phần suy luận. <a class="text-primary cursor-pointer" (click)="toggleThinkingLive()">Hiển thị</a>
              </div>

              <div class="rounded-xl bg-surface-100 dark:bg-surface-700 p-3">
                <markdown [data]="liveDelta" class="prose dark:prose-invert max-w-none text-sm"></markdown>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="shrink-0 w-full mt-auto">
        <div class="max-w-4xl mx-auto px-4 pb-2">
          <div class="bg-white dark:bg-surface-800 rounded-3xl shadow-xl p-3 sm:p-4 border border-surface-100 dark:border-surface-700 w-full">
            <div class="flex items-center gap-1.5 mb-2 flex-wrap">
              <p-button icon="pi pi-paperclip" [text]="true" [rounded]="true" severity="secondary"
                        pTooltip="Đính kèm file" tooltipPosition="top"
                        (onClick)="triggerFile()" styleClass="btn-toggle"></p-button>
              <input #fileInput type="file" multiple class="hidden" (change)="onFilesChosen($event)" />

              <p-button label="Tìm kiếm web" icon="pi pi-search"
                        severity="primary" [outlined]="!webSearch" [raised]="webSearch"
                        styleClass="btn-toggle" [ngClass]="{'is-active': webSearch}"
                        (onClick)="webSearch = !webSearch"></p-button>
              <p-button label="Suy luận" icon="pi pi-sparkles"
                        severity="primary" [outlined]="!extendedReasoning" [raised]="extendedReasoning"
                        styleClass="btn-toggle" [ngClass]="{'is-active': extendedReasoning}"
                        (onClick)="extendedReasoning = !extendedReasoning"></p-button>
              <p-button label="Nghiên cứu sâu" icon="pi pi-book"
                        severity="primary" [outlined]="!deepResearch" [raised]="deepResearch"
                        styleClass="btn-toggle" [ngClass]="{'is-active': deepResearch}"
                        (onClick)="deepResearch = !deepResearch"></p-button>
            </div>
            <div class="relative">
              <textarea
                [(ngModel)]="message"
                (keydown.enter)="sendMessage(); $event.preventDefault()"
                placeholder="Hỏi tôi bất cứ điều gì..."
                rows="2"
                class="p-inputtextarea p-inputtext w-full border-2 border-surface-200 dark:border-surface-600 rounded-2xl p-3 focus:border-primary-500 dark:bg-surface-700 dark:text-surface-0 resize-none transition-colors text-base"
                style="padding-bottom: 45px;"></textarea>
              <div class="absolute bottom-2.5 right-2.5 flex items-center gap-2">
                <button type="button"
                  class="px-3 py-1.5 bg-surface-100 hover:bg-surface-200 dark:bg-surface-700 dark:hover:bg-surface-600 text-surface-800 dark:text-surface-100 rounded-full flex items-center gap-2 font-medium transition-colors text-sm"
                  (click)="modelPopover.toggle($event)">
                  <i class="pi pi-bolt text-sm" [style]="{'color': 'var(--primary-color)'}"></i>
                  <span>{{selectedModel.name}}</span>
                  <i class="pi pi-chevron-down" style="font-size: 0.7rem"></i>
                </button>
                <p-button icon="pi pi-send" [rounded]="true" (onClick)="sendMessage()"
                          [disabled]="!message.trim() || isStreaming" styleClass="send-button"></p-button>
                <p-popover #modelPopover [style]="{width: '400px'}" [appendTo]="'body'">
                  <ng-template pTemplate="content">
                    <app-ai-model-selector [popoverRef]="modelPopover" (modelSelected)="onModelSelected($event)"></app-ai-model-selector>
                  </ng-template>
                </p-popover>
              </div>
            </div>
            <div *ngIf="selectedFiles.length>0" class="attachments-row mt-3 flex flex-wrap items-center gap-2">
              <div class="flex flex-wrap gap-2 items-center">
                <span *ngFor="let f of selectedFiles; let idx = index" class="file-chip inline-flex items-center gap-2">
                  <i class="pi pi-file"></i>
                  <span class="truncate max-w-[14rem]">{{f.name}}</span>
                  <button type="button" class="chip-close" (click)="removeFile(idx)"><i class="pi pi-times"></i></button>
                </span>
              </div>
              <a class="clear-link ml-auto" (click)="clearFiles()">Xoá tất cả</a>
            </div>
          </div>
          <p class="max-w-4xl mx-auto text-center text-sm text-surface-500 dark:text-surface-400 mt-2">
            Hãy xác minh thông tin quan trọng từ các nguồn khác trước khi đưa ra quyết định.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
  `,
  styles: [`
  /* CSS styles remain identical */
  .chatbot-root { position: relative; }
  .floating-hamburger { position: absolute; left: 12px; top: 12px; z-index: 10; pointer-events: auto; }

  .btn-toggle.p-button { transition: transform .12s ease, box-shadow .12s ease, background-color .15s ease, color .15s ease, border-color .15s ease; border-radius: 9999px; }
  .btn-toggle.is-active { background: var(--primary-color) !important; color: var(--primary-color-text) !important; border-color: var(--primary-color) !important; }
  .btn-toggle:not(.is-active).p-button { background: transparent; color: var(--text-color); border-color: var(--surface-400); }
  .btn-toggle:hover { transform: translateY(-1px); box-shadow: 0 8px 20px rgba(0,0,0,.10); }
  .btn-toggle:active { transform: translateY(0); box-shadow: 0 4px 10px rgba(0,0,0,.10); }
  .send-button.p-button { transition: transform .12s ease, box-shadow .12s ease; }
  .send-button.p-button:hover { transform: translateY(-1px); box-shadow: 0 10px 22px rgba(0,0,0,.12); }
  .send-button.p-button:active { transform: translateY(0); }
  .p-button { transition: transform .12s ease, box-shadow .12s ease; }
  .p-button:hover { transform: translateY(-1px); box-shadow: 0 8px 20px rgba(0,0,0,.10); }
  .p-button:active { transform: translateY(0); box-shadow: 0 4px 10px rgba(0,0,0,.10); }

  .attachments-row { align-items: center; }
  .file-chip { background: var(--surface-100); color: var(--text-color); border: 1px solid var(--surface-300); border-radius: 9999px; padding: 6px 10px; font-size: 12px; line-height: 1; box-shadow: inset 0 -1px 0 rgba(0,0,0,0.03); }
  .file-chip i { font-size: 12px; opacity: .7; }
  .chip-close { border: none; background: transparent; padding: 0; margin: 0; cursor: pointer; display: inline-flex; align-items: center; }
  .chip-close i { font-size: 12px; opacity: .7; }
  .chip-close:hover i { opacity: 1; }
  .clear-link { color: var(--primary-color); font-size: 12px; cursor: pointer; text-decoration: none; }
  .clear-link:hover { text-decoration: underline; }

  .welcome-abs{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none; }
  .rw-root{ background:transparent; padding:0; }
  .rw-center{ display:inline-flex; align-items:center; justify-content:center; gap:20px; }
  .rw-robot{ position:relative; z-index:10; }
  .rw-shadow{ filter:none !important; }
  .rw-cloud{ position:relative; }
  .rw-cloud-text{ position:absolute; top:40px; left:40px; width:208px; text-align:center; }
  .rw-cloud-title{ color:#4F46E5; font-weight:600; font-size:1rem; line-height:1.5; margin:0; }

  @keyframes dotPulse { 0%{opacity:.35; transform:scale(.85)} 50%{opacity:1; transform:scale(1)} 100%{opacity:.35; transform:scale(.85)} }
  .dot{ animation: dotPulse 1.4s ease-in-out infinite; transform-origin:center; }
  .dot-1{ animation-delay: 0s; }
  .dot-2{ animation-delay: .18s; }
  .dot-3{ animation-delay: .36s; }

  @keyframes float { 0%,100%{ transform: translateY(0); } 50%{ transform: translateY(-8px); } }
  .animate-float{ animation: float 3s ease-in-out infinite; }
  @keyframes fadeIn { from{ opacity:0; transform: translateX(-16px);} to{opacity:1; transform: translateX(0);} }
  .animate-fadeIn{ animation: fadeIn .8s ease-out .4s both; }

  .icon-btn{ background:transparent; border:none; padding:6px; border-radius:8px; cursor:pointer; color:var(--text-color); }
  .icon-btn:hover{ background: var(--surface-100); }
  .dark .icon-btn:hover { background: var(--surface-700); }
  .drop-zone{ min-height: 24px; }
  .empty-hint{ font-size:.8rem; color: var(--text-color-secondary); padding: .25rem .25rem .5rem; }

  .cdk-drag-preview { box-shadow: 0 8px 24px rgba(0,0,0,.2); border-radius: .5rem; }
  .cdk-drag-placeholder { opacity: .3; }
  .drop-zone.cdk-drop-list-dragging { outline: 1px dashed var(--primary-color); outline-offset: 4px; border-radius: .5rem; }
  `],
  providers: [
    ConfirmationService,
    MessageService,
    provideMarkdown()
  ]
})
export class ChatbotComponent implements AfterViewChecked, OnInit, OnDestroy {
  @ViewChild('scrollContainer') private scrollContainer!: ElementRef;
  @ViewChild('modelPopover') modelPopover!: Popover;
  @ViewChild('fileInput') fileInput!: ElementRef<HTMLInputElement>;
  @ViewChild('moveMenu') moveMenu!: Menu;

  private messageService = inject(MessageService);
  private aiModelService = inject(AiModelService);
  private authService = inject(AuthService);
  private modelsSubscription?: Subscription;
  private confirmationService = inject(ConfirmationService);
  private cdr = inject(ChangeDetectorRef);

  useMock = true;
  showSidebar = true;
  collapseBreakpoint = 1024;
  private forceHiddenByViewport = false;

  sseBackend: ChatBackend = { mode: 'sse', url: '/api/chat/stream' };
  httpBackend: ChatBackend = { mode: 'http', url: '/api/chat' };

  message = '';
  selectedModel: AIModel = { id: '', name: 'Đang tải...', icon: '', profile: { description: '', sortOrder: 0 }, costType: 'free' };

  // === Sessions & Folders ===
  chatMessages: Array<ChatMessage & { thinking?: string; __showThinking?: boolean }> = [];
  chatSessions: Array<ChatSession & { folderId?: string | null }> = [];
  currentSessionId = '';

  folders: ChatFolder[] = [];
  sessionsByFolder: Record<string, Array<ChatSession & { folderId?: string | null }>> = {};
  get rootSessions() {
    return this.chatSessions.filter(s => !s.folderId);
  }

  // UI state
  foldersVisible = true;
  chatsVisible = true;

  // inline rename state
  editingFolderId: string | null = null;
  editingFolderName = '';
  editingSessionId: string | null = null;
  editingSessionTitle = '';

  // Menu state
  moveMenuModel: MenuItem[] = [];
  private menuSession: (ChatSession & { folderId?: string | null }) | null = null;

  // === Models & toggles ===
  aiModels: AICategory[] = [];
  webSearch = false;
  extendedReasoning = false;
  deepResearch = false;
  selectedFiles: File[] = [];
  isStreaming = false;
  liveStatus = '';
  liveThinking = '';
  liveDelta = '';
  showThinkingLive = true;

  ngOnInit() {
    const currentUser = this.authService.currentUser();
    const allowedModelNames = currentUser?.quotaProfile?.models ?? null;

    this.modelsSubscription = this.aiModelService.getModels(allowedModelNames).subscribe((data: AICategory[]) => {
      this.aiModels = data;
      this.setDefaultModel();
    });

    this.createNewChat();
    this.updateSidebarForViewport();
    this.rebuildFolderIndex();
  }

  ngOnDestroy(): void { this.modelsSubscription?.unsubscribe(); }

  @HostListener('window:resize') onWindowResize() { this.updateSidebarForViewport(); }

  private updateSidebarForViewport() {
    const narrow = window.innerWidth < this.collapseBreakpoint;
    if (narrow) { this.forceHiddenByViewport = true; this.showSidebar = false; }
    else if (this.forceHiddenByViewport) { this.showSidebar = true; this.forceHiddenByViewport = false; }
  }

  toggleSidebar() { this.showSidebar = !this.showSidebar; }

  setDefaultModel() {
    const defaultModelName = 'Trợ lý EVNGENCO1';
    let foundModel: AIModel | undefined;
    for (const group of this.aiModels) {
      const f = group.models.find(m => m.name === defaultModelName);
      if (f) { foundModel = f; break; }
    }
    if (!foundModel && this.aiModels.length && this.aiModels[0].models.length) {
      foundModel = this.aiModels[0].models[0];
    }
    this.selectedModel = foundModel ?? {
      id: '', name: 'Không có model', icon: 'pi pi-exclamation-triangle',
      profile: { description: 'Không tìm thấy model nào', sortOrder: 0 },
      costType: 'free'
    };
  }

  onModelSelected(model: AIModel): void { this.selectedModel = model; }

  ngAfterViewChecked() { this.scrollToBottom(); }
  scrollToBottom(): void {
    try {
      this.scrollContainer.nativeElement.scrollTop = this.scrollContainer.nativeElement.scrollHeight;
    } catch {}
  }

  private sortSessionsDesc() {
    this.chatSessions.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());
  }

  private rebuildFolderIndex() {
    this.sessionsByFolder = this.folders.reduce((acc, f) => {
      acc[f.id] = this.chatSessions.filter(s => s.folderId === f.id);
      return acc;
    }, {} as Record<string, Array<ChatSession & { folderId?: string | null }>>);
  }

  // ======== FOLDER ACTIONS ========
  createFolder() {
    const folder: ChatFolder = {
      id: this.generateId(),
      name: 'Folder mới',
      createdAt: new Date(),
      expanded: true
    };
    this.folders.unshift(folder);
    this.rebuildFolderIndex();
    this.editingFolderId = folder.id;
    this.editingFolderName = folder.name;
  }

  startRenameFolder(f: ChatFolder) {
    this.editingFolderId = f.id;
    this.editingFolderName = f.name;
  }

  commitRenameFolder(f: ChatFolder) {
    if (this.editingFolderId !== f.id) return;
    const name = (this.editingFolderName || '').trim();
    if (name) {
      const isDuplicate = this.folders.some(folder => folder.id !== f.id && folder.name.toLowerCase() === name.toLowerCase());
      if (isDuplicate) {
          this.messageService.add({
            key: 't1',
            severity: 'warn',
            summary: 'Tên đã tồn tại',
            detail: 'Vui lòng chọn một tên khác cho folder.'
          });
          return;
      }
      f.name = name;
    }
    this.cancelRenameFolder();
  }

  cancelRenameFolder() {
    this.editingFolderId = null;
    this.editingFolderName = '';
  }

  confirmDeleteFolder(f: ChatFolder) {
    const hasSessions = this.chatSessions.some(s => s.folderId === f.id);
    const msg = hasSessions
      ? 'Folder đang chứa một số chat. Xoá folder sẽ chuyển các chat về Root. Bạn có chắc chắn muốn xoá?'
      : 'Bạn có chắc chắn muốn xoá folder này?';
    this.confirmationService.confirm({
      message: msg,
      header: 'Xoá folder?',
      icon: 'pi pi-exclamation-triangle',
      acceptLabel: 'Xoá',
      rejectLabel: 'Huỷ',
      acceptButtonStyleClass: 'p-button-danger',
      rejectButtonStyleClass: 'p-button-text p-button-secondary',
      accept: () => this.deleteFolder(f)
    });
  }

  private deleteFolder(f: ChatFolder) {
    for (const s of this.chatSessions) {
      if (s.folderId === f.id) s.folderId = null;
    }
    const idx = this.folders.findIndex(x => x.id === f.id);
    if (idx > -1) this.folders.splice(idx, 1);
    this.rebuildFolderIndex();
  }

  // ======== SESSION ACTIONS ========
  createNewChat(): void {
    const newSession: ChatSession & { folderId?: string | null } = {
      id: this.generateId(),
      title: 'Chat mới',
      timestamp: new Date(),
      messages: [],
      folderId: null
    };
    this.chatSessions.unshift(newSession);
    this.sortSessionsDesc();
    this.currentSessionId = newSession.id;
    this.chatMessages = [];
    this.rebuildFolderIndex();
  }

  switchChatSession(sessionId: string): void {
    if(this.editingSessionId) return;
    const session = this.chatSessions.find(s => s.id === sessionId);
    if (session) { this.currentSessionId = sessionId; this.chatMessages = [...(session.messages as any)]; }
  }

  confirmDelete(sessionId: string, event?: Event) {
    event?.stopPropagation();
    this.confirmationService.confirm({
      message: 'Bạn có chắc chắn muốn xoá phiên chat này? Hành động này không thể hoàn tác.',
      header: 'Xoá phiên chat?',
      icon: 'pi pi-exclamation-triangle',
      acceptLabel: 'Xoá',
      rejectLabel: 'Huỷ',
      acceptButtonStyleClass: 'p-button-danger',
      rejectButtonStyleClass: 'p-button-text p-button-secondary',
      accept: () => this.deleteChatSession(sessionId),
    });
  }

  private deleteChatSession(sessionId: string) {
    const index = this.chatSessions.findIndex(s => s.id === sessionId);
    if (index > -1) {
      this.chatSessions.splice(index, 1);
      if (this.currentSessionId === sessionId) {
        if (this.chatSessions.length) { this.sortSessionsDesc(); this.switchChatSession(this.chatSessions[0].id); }
        else { this.createNewChat(); }
      }
      this.rebuildFolderIndex();
    }
  }

  startRenameSession(s: ChatSession, event?: MouseEvent) {
    event?.stopPropagation();
    this.editingSessionId = s.id;
    this.editingSessionTitle = s.title;
    this.cdr.detectChanges();
  }
  commitRenameSession(s: ChatSession & { folderId?: string | null }) {
    if (this.editingSessionId !== s.id) return;
    const title = (this.editingSessionTitle || '').trim();
    if (title) s.title = title;
    this.cancelRenameSession();
  }
  cancelRenameSession() {
    this.editingSessionId = null;
    this.editingSessionTitle = '';
  }

  openMoveMenu(event: MouseEvent, session: ChatSession & { folderId?: string | null }) {
    event.stopPropagation();
    this.menuSession = session;

    this.moveMenuModel = [
      {
        label: 'Chuyển ra Root',
        icon: 'pi pi-sign-out',
        disabled: !session.folderId,
        command: () => this.moveSessionToFolder(null)
      },
      { separator: true },
      ...this.folders
        .filter(f => f.id !== session.folderId)
        .map<MenuItem>(f => ({
          label: f.name,
          icon: 'pi pi-folder',
          command: () => this.moveSessionToFolder(f.id)
      }))
    ];

    if (this.moveMenuModel.length === 2 && this.folders.filter(f => f.id !== session.folderId).length === 0) {
        this.moveMenuModel.splice(1);
    }

    this.moveMenu.toggle(event);
  }

  private moveSessionToFolder(folderId: string | null) {
    if (!this.menuSession) return;
    this.menuSession.folderId = folderId;
    this.sortSessionsDesc();
    this.rebuildFolderIndex();
  }

  // ======== DRAG & DROP ========
  dropOnRoot(event: CdkDragDrop<Array<ChatSession & { folderId?: string | null }>>) {
    if (event.previousContainer === event.container) {
      moveItemInArray(this.rootSessions, event.previousIndex, event.currentIndex);
    } else {
      transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex);
      const moved = event.container.data[event.currentIndex];
      if (moved) moved.folderId = null;
    }
    this.sortSessionsDesc();
    this.rebuildFolderIndex();
  }

  dropOnFolder(folder: ChatFolder, event: CdkDragDrop<Array<ChatSession & { folderId?: string | null }>>) {
    if (event.previousContainer === event.container) {
      moveItemInArray(this.sessionsByFolder[folder.id], event.previousIndex, event.currentIndex);
    } else {
      transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex);
      const moved = event.container.data[event.currentIndex];
      if (moved) moved.folderId = folder.id;
    }
    this.sortSessionsDesc();
    this.rebuildFolderIndex();
  }

  private allDropIds(): string[] {
    const folderIds = this.folders.map(f => `folder-${f.id}`);
    return ['root-list', ...folderIds];
  }
  connectedIdsForRoot(): string[] {
    return this.allDropIds().filter(id => id !== 'root-list');
  }
  connectedIdsForFolder(folderId: string): string[] {
    const me = `folder-${folderId}`;
    return this.allDropIds().filter(id => id !== me);
  }

  // ======== Utilities ========
  formatTimestamp(date: Date): string {
    const now = new Date();
    const diff = now.getTime() - date.getTime();
    const hours = Math.floor(diff / 3600000);
    if (hours < 1) return 'Vừa xong';
    if (hours < 24) return `${hours} giờ trước`;
    const days = Math.floor(hours / 24);
    if (days < 7) return `${days} ngày trước`;
    return date.toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit', year: 'numeric' });
  }

  generateId(): string { return Date.now().toString(36) + Math.random().toString(36).substring(2); }

  triggerFile() { this.fileInput?.nativeElement?.click(); }
  onFilesChosen(e: Event) { const input = e.target as HTMLInputElement; if (input.files && input.files.length > 0) this.selectedFiles = Array.from(input.files); }
  removeFile(index: number) { this.selectedFiles.splice(index, 1); }
  clearFiles() { this.selectedFiles = []; if (this.fileInput?.nativeElement) this.fileInput.nativeElement.value = ''; }

  async sendMessage(): Promise<void> {
    if (!this.message.trim() || this.isStreaming) return;
    const text = this.message.trim();
    const userMessage: ChatMessage = { sender: 'user', text };
    this.chatMessages.push(userMessage);
    const currentSession = this.chatSessions.find(s => s.id === this.currentSessionId);
    if (currentSession) {
      if (currentSession.messages.length === 0) { currentSession.title = text.substring(0, 30) + (text.length > 30 ? '...' : ''); }
      currentSession.messages = [...this.chatMessages];
      currentSession.timestamp = new Date();
      this.sortSessionsDesc();
    }
    this.message = '';
    this.isStreaming = true; this.liveStatus = 'Khởi tạo…'; this.liveThinking = ''; this.liveDelta = ''; this.showThinkingLive = true;
    if (this.useMock) { this.runMockStream(text); } else { this.runMockStream(text); }
  }

  toggleThinkingLive() { this.showThinkingLive = !this.showThinkingLive; }
  toggleThinkingForMessage(i: number) { const msg = this.chatMessages[i]; if (msg) { msg.__showThinking = !msg.__showThinking; } }

  private runMockStream(prompt: string) {
    const steps = [
      'Phân tích yêu cầu…',
      this.webSearch ? 'Đang tìm kiếm trên web…' : 'Đang truy xuất tri thức nội bộ…',
      this.deepResearch ? 'Đào sâu bằng nhiều nguồn…' : 'Tạo dàn ý trả lời…',
      this.extendedReasoning ? 'Suy luận đa bước…' : 'Tổng hợp kết quả…'
    ];
    const thinkingPieces = [
      `• Hiểu đề bài: "${prompt}"`,
      this.webSearch ? '• Tìm nguồn web phù hợp…' : '• Dùng tri thức nội bộ…',
      this.deepResearch ? '• So sánh chéo nguồn…' : '• Lập cấu trúc trả lời…',
      this.extendedReasoning ? '• Chuỗi suy luận…' : '• Tổng kết & kiểm tra…'
    ];
    const finalText = `Dưới đây là câu trả lời mô phỏng cho prompt của bạn:\n\n1) **Tóm tắt vấn đề** \n2) **Các điểm chính** \n3) **Đề xuất hành động**\n\n> Lưu ý: Đây là phản hồi *giả lập* từ **${this.selectedModel.name}**.`;
    let i = 0;
    const statusTimer = setInterval(() => {
      if (i < steps.length) { this.liveStatus = steps[i]; this.liveThinking += (this.liveThinking ? '\n' : '') + thinkingPieces[i]; i++; }
      else {
        clearInterval(statusTimer);
        let idx = 0;
        const deltaTimer = setInterval(() => {
          this.liveStatus = 'Đang tạo câu trả lời…';
          this.liveDelta = finalText.slice(0, idx);
          idx += Math.max(1, Math.floor(Math.random() * 8));
          if (idx >= finalText.length) {
            clearInterval(deltaTimer);
            const aiMessage: ChatMessage & { thinking?: string; __showThinking?: boolean } = {
              sender: 'ai',
              text: finalText,
              modelName: this.selectedModel.name,
              modelIcon: this.selectedModel.icon,
              thinking: this.liveThinking || undefined,
              __showThinking: false
            };
            this.chatMessages.push(aiMessage);
            const currentSession = this.chatSessions.find(s => s.id === this.currentSessionId);
            if (currentSession) {
              currentSession.messages = [...this.chatMessages];
              currentSession.timestamp = new Date();
              this.sortSessionsDesc();
            }
            this.isStreaming = false; this.liveStatus = ''; this.liveThinking = ''; this.liveDelta = ''; this.showThinkingLive = false;
          }
        }, 20);
      }
    }, 450);
  }

  regenerate(orig: ChatMessage & { thinking?: string }) {
    this.message = (orig as any).prompt || 'Hãy tạo lại câu trả lời theo hướng ngắn gọn và có bullet.';
    this.sendMessage();
  }

  // ======== trackBy helpers ========
  trackByFolder = (_: number, item: ChatFolder) => item.id;
  trackBySession = (_: number, item: ChatSession) => item.id;
  trackByMsg = (_: number, item: ChatMessage) => (item as any).__uuid || (item as any).id || JSON.stringify(item);
}

================================================================================
File: ai-tool-hub.ts
Relative Path: src/app/pages/uikit/ai-tool-hub.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/ai-tool-hub.ts
Extension: .ts
Lines: 981
================================================================================

import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterModule } from '@angular/router';
import { FormsModule } from '@angular/forms';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { BadgeModule } from 'primeng/badge';
import { PaginatorModule } from 'primeng/paginator';

@Component({
  selector: 'app-ai-tool-hub',
  standalone: true,
  imports: [
    CommonModule,
    RouterModule,
    FormsModule,
    ButtonModule,
    InputTextModule,
    BadgeModule,
    PaginatorModule
  ],
  template: `
    <div class="ai-hub-container">
      <!-- Header Section -->
      <div class="header-section">
        <div class="header-background">
          <div class="gradient-orb orb-1"></div>
          <div class="gradient-orb orb-2"></div>
          <div class="gradient-orb orb-3"></div>
        </div>
        <div class="header-content">
          <div class="header-icon-wrapper">
            <div class="header-icon">
              <div class="robot-3d">
                <div class="robot-head">
                  <div class="robot-antenna"></div>
                  <div class="robot-eyes">
                    <div class="eye left"></div>
                    <div class="eye right"></div>
                  </div>
                  <div class="robot-mouth"></div>
                </div>
                <div class="robot-body">
                  <div class="body-light"></div>
                </div>
              </div>
            </div>
            <div class="icon-glow"></div>
          </div>
          <h1 class="header-title">KHÁM PHÁ CÁC CÔNG CỤ AI</h1>
          <p class="header-subtitle">Tối ưu hóa công việc với sức mạnh của trí tuệ nhân tạo</p>
          
          <!-- Search Section -->
          <div class="search-wrapper">
            <i class="pi pi-search search-icon"></i>
            <input 
              pInputText 
              type="text" 
              placeholder="Tìm kiếm công cụ AI..." 
              class="search-input" 
              [(ngModel)]="searchQuery" 
              (input)="filterTools()" 
            />
          </div>
        </div>
      </div>

      <!-- Tabs Section -->
      <div class="tabs-section">
        <div class="tabs-container">
          <button 
            *ngFor="let tab of tabs" 
            type="button" 
            class="tab-button" 
            [class.active]="selectedTab === tab.value"
            (click)="selectTab(tab.value)">
            <i [class]="tab.icon"></i>
            <span>{{ tab.label }}</span>
            <span class="tab-count">{{ getToolCount(tab.value) }}</span>
          </button>
        </div>
      </div>

      <!-- Tools Grid Section -->
      <div class="tools-grid">
        <ng-container *ngFor="let tool of paginatedTools">
          <a [routerLink]="tool.route" class="tool-card">
            <div class="tool-icon" [style.background]="tool.color">
              <i [class]="tool.icon"></i>
            </div>
            <div class="tool-content">
              <div class="tool-header-inline">
                <h3 class="tool-title">{{ tool.name }}</h3>
                <span class="tool-badge">{{ getCategoryLabel(tool.category) }}</span>
              </div>
              <p class="tool-description">{{ tool.description }}</p>
            </div>
          </a>
        </ng-container>
        
        <div *ngIf="filteredTools.length === 0" class="empty-state">
          <i class="pi pi-inbox empty-icon"></i>
          <h3 class="empty-title">Không tìm thấy công cụ</h3>
          <p class="empty-text">Thử tìm kiếm với từ khóa khác hoặc chọn danh mục khác</p>
        </div>
      </div>

      <!-- Pagination -->
      <div class="pagination-wrapper" *ngIf="filteredTools.length > 0">
        <p-paginator 
          [rows]="pageSize" 
          [totalRecords]="filteredTools.length"
          [first]="first"
          (onPageChange)="onPageChange($event)"
          [showCurrentPageReport]="true"
          currentPageReportTemplate="Hiển thị {first} - {last} trong tổng số {totalRecords} công cụ">
        </p-paginator>
      </div>
    </div>
  `,
  styles: [`
    .ai-hub-container {
      padding: 0 2rem 2rem 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    /* Header Section */
    .header-section {
      margin-bottom: 2rem;
      margin-top: 0;
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, 
        rgba(99, 102, 241, 0.05) 0%, 
        rgba(168, 85, 247, 0.05) 50%,
        rgba(236, 72, 153, 0.05) 100%);
      border-radius: 1.5rem;
      padding: 1.5rem 2rem 2rem 2rem;
    }

    .header-background {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      overflow: hidden;
      z-index: 0;
    }

    .gradient-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(60px);
      opacity: 0.6;
      animation: float 8s ease-in-out infinite;
    }

    .orb-1 {
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, rgba(99, 102, 241, 0.4) 0%, transparent 70%);
      top: -100px;
      left: -50px;
      animation-delay: 0s;
    }

    .orb-2 {
      width: 250px;
      height: 250px;
      background: radial-gradient(circle, rgba(168, 85, 247, 0.3) 0%, transparent 70%);
      top: -50px;
      right: -30px;
      animation-delay: 2s;
    }

    .orb-3 {
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, rgba(236, 72, 153, 0.3) 0%, transparent 70%);
      bottom: -50px;
      left: 50%;
      transform: translateX(-50%);
      animation-delay: 4s;
    }

    @keyframes float {
      0%, 100% {
        transform: translate(0, 0) scale(1);
      }
      33% {
        transform: translate(30px, -30px) scale(1.1);
      }
      66% {
        transform: translate(-20px, 20px) scale(0.9);
      }
    }

    .header-content {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 0.75rem;
    }

    .header-icon-wrapper {
      position: relative;
      margin-bottom: 0;
    }

    .header-icon {
      width: 3.5rem;
      height: 3.5rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 1.125rem;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4);
      position: relative;
      z-index: 2;
      animation: float-icon 3s ease-in-out infinite;
      overflow: hidden;
    }

    @keyframes float-icon {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      25% {
        transform: translateY(-5px) rotate(2deg);
      }
      50% {
        transform: translateY(0) rotate(0deg);
      }
      75% {
        transform: translateY(-5px) rotate(-2deg);
      }
    }

    /* Robot 3D */
    .robot-3d {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transform-style: preserve-3d;
      transform: scale(0.8);
    }

    .robot-head {
      width: 2rem;
      height: 2rem;
      background: linear-gradient(145deg, #ffffff, #e6e6ff);
      border-radius: 0.5rem;
      position: relative;
      box-shadow: 
        inset 0 2px 4px rgba(255, 255, 255, 0.3),
        0 2px 8px rgba(0, 0, 0, 0.2);
      animation: head-tilt 4s ease-in-out infinite;
      margin-bottom: 0.25rem;
    }

    @keyframes head-tilt {
      0%, 100% {
        transform: rotate(0deg);
      }
      25% {
        transform: rotate(-5deg);
      }
      50% {
        transform: rotate(0deg);
      }
      75% {
        transform: rotate(5deg);
      }
    }

    .robot-antenna {
      position: absolute;
      top: -0.5rem;
      left: 50%;
      transform: translateX(-50%);
      width: 2px;
      height: 0.5rem;
      background: linear-gradient(to bottom, #fff, transparent);
    }

    .robot-antenna::after {
      content: '';
      position: absolute;
      top: -4px;
      left: 50%;
      transform: translateX(-50%);
      width: 6px;
      height: 6px;
      background: #4facfe;
      border-radius: 50%;
      box-shadow: 0 0 8px #4facfe;
      animation: blink-light 2s ease-in-out infinite;
    }

    @keyframes blink-light {
      0%, 100% {
        opacity: 1;
        box-shadow: 0 0 8px #4facfe;
      }
      50% {
        opacity: 0.3;
        box-shadow: 0 0 4px #4facfe;
      }
    }

    .robot-eyes {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
      margin-top: 0.4rem;
    }

    .eye {
      width: 6px;
      height: 6px;
      background: #667eea;
      border-radius: 50%;
      box-shadow: 0 0 6px #667eea;
      animation: blink 3s ease-in-out infinite;
    }

    .eye.right {
      animation-delay: 0.1s;
    }

    @keyframes blink {
      0%, 90%, 100% {
        transform: scaleY(1);
        opacity: 1;
      }
      95% {
        transform: scaleY(0.1);
        opacity: 0.5;
      }
    }

    .robot-mouth {
      position: absolute;
      bottom: 0.3rem;
      left: 50%;
      transform: translateX(-50%);
      width: 0.8rem;
      height: 3px;
      background: #667eea;
      border-radius: 0 0 4px 4px;
      opacity: 0.6;
    }

    .robot-body {
      width: 2.5rem;
      height: 1.5rem;
      background: linear-gradient(145deg, #ffffff, #e6e6ff);
      border-radius: 0.4rem;
      position: relative;
      box-shadow: 
        inset 0 2px 4px rgba(255, 255, 255, 0.3),
        0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .body-light {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 8px;
      height: 8px;
      background: #4facfe;
      border-radius: 50%;
      box-shadow: 0 0 12px #4facfe;
      animation: pulse-light 2s ease-in-out infinite;
    }

    @keyframes pulse-light {
      0%, 100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      50% {
        opacity: 0.5;
        transform: translate(-50%, -50%) scale(1.2);
      }
    }

    .icon-glow {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 4.5rem;
      height: 4.5rem;
      background: radial-gradient(circle, rgba(102, 126, 234, 0.3) 0%, transparent 70%);
      border-radius: 50%;
      animation: glow 2s ease-in-out infinite;
      z-index: 1;
    }

    @keyframes glow {
      0%, 100% {
        opacity: 0.5;
        transform: translate(-50%, -50%) scale(1);
      }
      50% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.2);
      }
    }

    .header-title {
      font-size: 1.75rem;
      font-weight: 800;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 0;
      letter-spacing: -0.02em;
      line-height: 1.2;
    }

    .header-subtitle {
      font-size: 0.9375rem;
      color: var(--text-color-secondary);
      margin: 0.125rem 0 0.375rem 0;
      max-width: 600px;
      font-weight: 500;
      line-height: 1.4;
    }

    /* Search Section */
    .search-wrapper {
      position: relative;
      width: 100%;
      max-width: 600px;
    }

    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-color-secondary);
      font-size: 1rem;
      z-index: 1;
    }

    .search-input {
      width: 100%;
      padding: 0.75rem 0.75rem 0.75rem 3rem;
      font-size: 0.9375rem;
      border: 2px solid rgba(255, 255, 255, 0.8);
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 1rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    }

    .search-input:focus {
      border-color: #667eea;
      background: white;
      box-shadow: 0 8px 24px rgba(102, 126, 234, 0.2);
      outline: none;
    }

    .search-input::placeholder {
      color: var(--text-color-secondary);
    }

    /* Tabs Section */
    .tabs-section {
      margin-bottom: 2.5rem;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    .tabs-container {
      display: flex;
      gap: 0.75rem;
      padding-bottom: 0.5rem;
    }

    .tab-button {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--surface-card);
      border: 1.5px solid var(--surface-border);
      border-radius: 0.5rem;
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--text-color);
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    .tab-button:hover {
      border-color: var(--primary-color);
      background: var(--primary-50);
      color: var(--primary-color);
    }

    .tab-button.active {
      background: var(--primary-color);
      border-color: var(--primary-color);
      color: white;
      box-shadow: 0 2px 8px rgba(var(--primary-color-rgb), 0.3);
    }

    .tab-button i {
      font-size: 1rem;
    }

    .tab-count {
      background: rgba(0, 0, 0, 0.15);
      padding: 0.125rem 0.5rem;
      border-radius: 1rem;
      font-size: 0.75rem;
      font-weight: 700;
      min-width: 1.5rem;
      text-align: center;
    }

    .tab-button.active .tab-count {
      background: rgba(255, 255, 255, 0.25);
      color: white;
    }

    .tab-button:not(.active) .tab-count {
      background: var(--surface-200);
      color: var(--text-color);
    }

    /* Tools Grid */
    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
    }

    .tool-card {
      background: var(--surface-card);
      border: 1px solid var(--surface-border);
      border-radius: 0.75rem;
      padding: 1rem;
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      gap: 1rem;
      transition: all 0.3s ease;
      cursor: pointer;
      text-decoration: none;
      position: relative;
      overflow: hidden;
    }

    .tool-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--primary-color), var(--primary-400));
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }

    .tool-card:hover {
      border-color: var(--primary-color);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
      transform: translateY(-2px);
    }

    .tool-card:hover::before {
      transform: scaleX(1);
    }

    .tool-icon {
      flex-shrink: 0;
      width: 3rem;
      height: 3rem;
      border-radius: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: white;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
    }

    .tool-content {
      flex: 1;
      min-width: 0;
    }

    .tool-header-inline {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.75rem;
      margin-bottom: 0.375rem;
    }

    .tool-title {
      font-size: 1rem;
      font-weight: 700;
      color: var(--text-color);
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .tool-badge {
      flex-shrink: 0;
      font-size: 0.6875rem;
      font-weight: 600;
      padding: 0.2rem 0.5rem;
      background: var(--surface-100);
      color: var(--text-color-secondary);
      border-radius: 0.75rem;
      white-space: nowrap;
    }

    .tool-description {
      font-size: 0.8125rem;
      color: var(--text-color-secondary);
      line-height: 1.5;
      margin: 0;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    /* Empty State */
    .empty-state {
      grid-column: 1 / -1;
      text-align: center;
      padding: 4rem 2rem;
    }

    .empty-icon {
      font-size: 4rem;
      color: var(--text-color-secondary);
      opacity: 0.5;
      margin-bottom: 1rem;
    }

    .empty-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-color);
      margin: 0 0 0.5rem 0;
    }

    .empty-text {
      font-size: 1rem;
      color: var(--text-color-secondary);
      margin: 0;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .ai-hub-container {
        padding: 0 1.5rem 1.5rem 1.5rem;
      }

      .header-section {
        padding: 1.25rem 1.5rem 1.75rem 1.5rem;
        margin-bottom: 1.5rem;
      }

      .header-icon {
        width: 3rem;
        height: 3rem;
      }

      .icon-glow {
        width: 4rem;
        height: 4rem;
      }

      .header-title {
        font-size: 1.375rem;
      }

      .header-subtitle {
        font-size: 0.875rem;
      }

      .search-input {
        padding: 0.625rem 0.625rem 0.625rem 2.5rem;
        font-size: 0.875rem;
      }

      .search-icon {
        left: 0.875rem;
        font-size: 0.9375rem;
      }

      .tools-grid {
        grid-template-columns: 1fr;
      }

      .tabs-container {
        gap: 0.5rem;
      }

      .tab-button {
        padding: 0.625rem 1rem;
        font-size: 0.875rem;
      }

      .gradient-orb {
        filter: blur(40px);
      }

      .orb-1 {
        width: 200px;
        height: 200px;
      }

      .orb-2 {
        width: 150px;
        height: 150px;
      }

      .orb-3 {
        width: 120px;
        height: 120px;
      }
    }

    /* Pagination */
    .pagination-wrapper {
      margin-top: 2rem;
      margin-bottom: 1rem;
      display: flex;
      justify-content: center;
    }

    .pagination-wrapper ::ng-deep .p-paginator {
      background: var(--surface-card);
      border: 1px solid var(--surface-border);
      border-radius: 0.625rem;
      padding: 0.625rem 1rem;
    }

    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-current {
      color: var(--text-color-secondary);
      font-size: 0.8125rem;
      padding: 0 0.5rem;
    }

    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-pages .p-paginator-page {
      min-width: 2rem;
      height: 2rem;
      margin: 0 0.125rem;
      border-radius: 0.375rem;
      border: 1px solid var(--surface-border);
      color: var(--text-color);
      transition: all 0.3s ease;
      font-size: 0.875rem;
    }

    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-pages .p-paginator-page:hover {
      background: var(--primary-50);
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-pages .p-paginator-page.p-highlight {
      background: var(--primary-color);
      border-color: var(--primary-color);
      color: white;
    }

    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-first,
    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-prev,
    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-next,
    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-last {
      min-width: 2rem;
      height: 2rem;
      border-radius: 0.375rem;
      border: 1px solid var(--surface-border);
      color: var(--text-color);
      margin: 0 0.125rem;
      transition: all 0.3s ease;
    }

    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-first:not(.p-disabled):hover,
    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-prev:not(.p-disabled):hover,
    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-next:not(.p-disabled):hover,
    .pagination-wrapper ::ng-deep .p-paginator .p-paginator-last:not(.p-disabled):hover {
      background: var(--primary-50);
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .pagination-wrapper ::ng-deep .p-paginator .p-disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    @media (max-width: 768px) {
      .pagination-wrapper {
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
      }

      .pagination-wrapper ::ng-deep .p-paginator {
        padding: 0.5rem 0.75rem;
      }

      .pagination-wrapper ::ng-deep .p-paginator .p-paginator-current {
        font-size: 0.75rem;
      }

      .pagination-wrapper ::ng-deep .p-paginator .p-paginator-pages .p-paginator-page {
        min-width: 1.75rem;
        height: 1.75rem;
        font-size: 0.8125rem;
      }

      .pagination-wrapper ::ng-deep .p-paginator .p-paginator-first,
      .pagination-wrapper ::ng-deep .p-paginator .p-paginator-prev,
      .pagination-wrapper ::ng-deep .p-paginator .p-paginator-next,
      .pagination-wrapper ::ng-deep .p-paginator .p-paginator-last {
        min-width: 1.75rem;
        height: 1.75rem;
      }
    }
  `]
})
export class AiToolHubComponent {
  searchQuery = '';
  selectedTab = 'all';
  
  // Pagination
  pageSize = 9;
  first = 0;
  paginatedTools: any[] = [];

  tabs = [
    { label: 'Tất cả', value: 'all', icon: 'pi pi-th-large' },
    { label: 'Văn phòng', value: 'office', icon: 'pi pi-briefcase' },
    { label: 'Sáng kiến', value: 'innovation', icon: 'pi pi-lightbulb' },
    { label: 'Dịch thuật', value: 'translation', icon: 'pi pi-globe' },
  ];

  allTools = [
    { 
      name: 'Hỗ trợ viết Email', 
      description: 'Soạn email chuyên nghiệp, đúng ngữ điệu', 
      category: 'office', 
      route: '/uikit/soan-email',
      icon: 'pi pi-envelope',
      color: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'
    },
    { 
      name: 'Viết bài phát biểu', 
      description: 'Tạo bài phát biểu cuốn hút cho mọi sự kiện', 
      category: 'office', 
      route: '/uikit/speech-writer.component',
      icon: 'pi pi-megaphone',
      color: 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)'
    },
    { 
      name: 'Tóm tắt văn bản', 
      description: 'Rút gọn các tài liệu dài thành ý chính', 
      category: 'office', 
      route: '/uikit/text-summarizer',
      icon: 'pi pi-file-edit',
      color: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)'
    },
    { 
      name: 'Hỗ trợ sáng kiến', 
      description: 'Hỗ trợ xây dựng và phát triển ý tưởng sáng kiến', 
      category: 'innovation', 
      route: '/uikit/initiative-writer',
      icon: 'pi pi-star',
      color: 'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)'
    },
    { 
      name: 'Tư duy Đổi mới sáng tạo', 
      description: 'Cung cấp các framework tư duy để sáng tạo', 
      category: 'innovation', 
      route: '/uikit/innovation_tool',
      icon: 'pi pi-bolt',
      color: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)'
    },
    { 
      name: 'Dịch văn bản', 
      description: 'Dịch và giữ nguyên định dạng tệp', 
      category: 'translation', 
      route: '/uikit/document-translator',
      icon: 'pi pi-language',
      color: 'linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)'
    },
    { 
      name: 'Nâng cấp Prompt', 
      description: 'Biến prompt đơn giản thành prompt hiệu quả', 
      category: 'tools', 
      route: '/uikit/prompt-enhancer',
      icon: 'pi pi-sparkles',
      color: 'linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%)'
    },
  ];

  filteredTools = [...this.allTools];

  ngOnInit() {
    this.updatePagination();
  }

  filterTools() {
    let tempTools = this.selectedTab === 'all' 
      ? this.allTools 
      : this.allTools.filter(tool => tool.category === this.selectedTab);
    
    if (this.searchQuery) {
      const query = this.searchQuery.toLowerCase();
      tempTools = tempTools.filter(tool => 
        tool.name.toLowerCase().includes(query) || 
        tool.description.toLowerCase().includes(query)
      );
    }
    
    this.filteredTools = tempTools;
    this.first = 0; // Reset to first page when filtering
    this.updatePagination();
  }
  
  selectTab(tab: string) {
    this.selectedTab = tab;
    this.filterTools();
  }

  onPageChange(event: any) {
    this.first = event.first;
    this.updatePagination();
    // Scroll to top of the page
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  updatePagination() {
    const startIndex = this.first;
    const endIndex = this.first + this.pageSize;
    this.paginatedTools = this.filteredTools.slice(startIndex, endIndex);
  }

  getToolCount(category: string): number {
    if (category === 'all') {
      return this.allTools.length;
    }
    return this.allTools.filter(tool => tool.category === category).length;
  }

  getCategoryLabel(category: string): string {
    const tab = this.tabs.find(t => t.value === category);
    return tab ? tab.label : category;
  }
}

================================================================================
File: prompt-enhancer.ts
Relative Path: src/app/pages/uikit/prompt-enhancer.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/prompt-enhancer.ts
Extension: .ts
Lines: 253
================================================================================

import { Component, OnInit, inject, OnDestroy, ViewChild } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { TextareaModule } from 'primeng/textarea';
import { TooltipModule } from 'primeng/tooltip';
import { Popover, PopoverModule } from 'primeng/popover';
import { TagModule } from 'primeng/tag';
import { Subscription } from 'rxjs';
import { AiModelService } from '../../core/services/ai-model.service'; 
import { AICategory, AIModel } from '../../core/models/ai-models.model';
import { AuthService } from '../../core/services/auth.service';
import { AiModelSelectorComponent } from '../../core/shared/components/ai-model-selector.component';

interface FrameworkOption {
  name: string;
  tag: string;
  description: string;
  selected: boolean;
  template: (prompt: string) => string;
}

@Component({
  selector: 'app-prompt-enhancer',
  standalone: true,
  imports: [
    CommonModule, FormsModule, ButtonModule, InputTextModule, TextareaModule,
    TooltipModule, PopoverModule, TagModule, AiModelSelectorComponent
  ],
  template: `
    <div class="page h-full bg-surface-50 dark:bg-surface-900">
      <div class="col left border-r border-surface-200 dark:border-surface-700">
        <div class="container">
          <div class="header"><h1 class="title">Nâng cấp Prompt</h1></div>
          <div class="field">
            <label class="label">Prompt gốc <span class="req">*</span></label>
            <textarea pInputTextarea [(ngModel)]="originalPrompt" 
                      placeholder="Ví dụ: viết báo cáo sự cố..." 
                      rows="8" class="control textarea" 
                      [class.ng-invalid]="showError && !originalPrompt"></textarea>
            <small *ngIf="showError && !originalPrompt" class="error">Prompt gốc là bắt buộc</small>
          </div>
          <div class="field">
            <label class="label">Framework</label>
            <div class="framework-options-container">
              <div *ngFor="let fw of frameworks" 
                   class="framework-option" 
                   [class.selected]="fw.selected"
                   (click)="selectFramework(fw)">
                <div class="fw-header">
                  <span class="fw-name">{{ fw.name }}</span>
                  <span class="fw-tag">{{ fw.tag }}</span>
                </div>
                <p class="fw-description">{{ fw.description }}</p>
              </div>
            </div>
          </div>
          <div class="actions">
            <button pButton class="btn btn-ghost" (click)="modelPopover.toggle($event)">
              <span class="inline-flex items-center gap-2">
                <img [src]="selectedModelIcon" alt="icon" class="w-5 h-5" *ngIf="selectedModelIcon"/>
                <span>{{ selectedModelName }}</span>
              </span>
              <i class="pi pi-chevron-down caret"></i>
            </button>
            <button pButton label="Nâng cấp" icon="pi pi-sparkles" severity="primary" class="btn btn-primary" (click)="enhancePrompt()"></button>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="container">
          <div *ngIf="!enhancedPrompt" class="empty">
            <i class="pi pi-lightbulb icon"></i>
            <p>Prompt nâng cấp sẽ được hiển thị tại đây.</p>
          </div>
          <div *ngIf="enhancedPrompt" class="w-full max-w-3xl mx-auto">
            <div class="card">
                <div class="card-head">
                    <h3>Prompt nâng cấp</h3>
                    <div class="tools">
                        <button pButton icon="pi pi-copy" [text]="true" [rounded]="true" severity="secondary" class="icon-btn" pTooltip="Sao chép" tooltipPosition="top" (click)="copyContent()"></button>
                        <button pButton icon="pi pi-refresh" [text]="true" [rounded]="true" severity="secondary" class="icon-btn" pTooltip="Tạo lại" tooltipPosition="top" (click)="regenerateContent()"></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="prompt-output">{{enhancedPrompt}}</div>
                </div>
            </div>
          </div>
        </div>
      </div>
       <p-popover #modelPopover [appendTo]="'body'" [style]="{width:'360px'}" styleClass="model-op">
          <ng-template pTemplate="content">
            <app-ai-model-selector 
              [popoverRef]="modelPopover" 
              (modelSelected)="selectModel($event)">
            </app-ai-model-selector>
          </ng-template>
       </p-popover>
    </div>
  `,
  styles: [
    `
      :host{
        --space-1: 6px; --space-2: 8px; --space-3: 12px; --space-4: 14px; --space-5: 16px; --radius: 10px;
        --fs-base: clamp(14px, 0.8vw + 9px, 15px); --fs-btn: 0.875rem; --fs-label: 0.92rem; --fs-small: 0.75rem; --fs-h1: 1.02rem;
        --lh: 1.55; --lh-tight: 1.4;
      }
      .page{ display:grid; grid-template-columns: 1fr 1fr; }
      .col{ overflow:auto; }
      .container{ padding: clamp(12px, 1.6vw, 18px); max-width: 720px; margin: 0 auto; }
      .header{ margin-bottom: var(--space-5); }
      .title{ font-size: var(--fs-h1); font-weight: 600; margin:0; color: var(--p-surface-900); line-height:1.2; }
      .field{ margin-bottom: var(--space-3); }
      .label{ display:block; margin-bottom: .5rem; font-weight: 600; font-size: var(--fs-label); color: var(--p-surface-700); }
      .req{ color:#ef4444; }
      .control{ width:100%; padding: 10px 12px; border-radius: var(--radius); font-size: var(--fs-base); line-height: var(--lh); }
      .textarea{ resize: vertical; font-size: 0.93rem; line-height: var(--lh); }
      .control::placeholder{ font-size: 0.9rem; color: var(--p-surface-500); }
      .error{ color:#ef4444; font-size: var(--fs-small); margin-top: 4px; display:block; }
      .actions{ display:flex; justify-content:space-between; align-items:center; gap: var(--space-2); padding-top: var(--space-3); margin-top: var(--space-2); border-top: 1px solid var(--p-surface-200); }
      .btn{ font-size: var(--fs-btn); padding: 7px 12px; border-radius: 8px; }
      .btn-ghost{ display:flex; align-items:center; gap:6px; background:var(--p-surface-0); border:1px solid var(--p-surface-300); color: var(--p-surface-700); }
      .caret{ font-size: 11px; }
      .empty{ height: calc(100% - 2*var(--space-5)); display:flex; flex-direction:column; justify-content:center; align-items:center; gap:6px; text-align:center; color:var(--p-surface-500); }
      .empty .icon{ font-size: 52px; color: var(--p-surface-300); }
      .card{ background:var(--p-surface-0); border:1px solid var(--p-surface-200); border-radius: var(--radius); box-shadow: 0 6px 20px rgba(0,0,0,.04); padding: clamp(12px, 1.6vw, 18px); }
      .card-head{ display:flex; justify-content:space-between; align-items:center; padding-bottom: var(--space-2); margin-bottom: var(--space-2); border-bottom: 1px solid var(--p-surface-200); }
      .tools{ display:flex; gap:4px; }
      .icon-btn{ width:34px; height:34px; }
      .prompt-output { white-space:pre-line; font-size: var(--fs-base); line-height: var(--lh); color: var(--p-surface-800); background-color: var(--p-surface-50); padding: var(--space-3); border-radius: var(--radius); border: 1px solid var(--p-surface-200); }
      
      /* --- Framework Styles --- */
      .framework-options-container { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-2); }
      .framework-option { border: 1px solid var(--p-surface-300); border-radius: var(--radius); padding: var(--space-3); cursor: pointer; transition: border-color .2s ease, box-shadow .2s ease; background: var(--p-surface-0); }
      .framework-option:hover { border-color: var(--p-primary-400); }
      .framework-option.selected { border-color: var(--p-primary-500); box-shadow: 0 0 0 1px var(--p-primary-500); }
      .fw-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
      .fw-name { font-weight: 600; font-size: 1rem; color: var(--p-surface-800); }
      .fw-tag { font-size: 0.75rem; font-weight: 600; padding: 3px 8px; border-radius: 9999px; background-color: var(--p-surface-200); color: var(--p-surface-700); }
      .framework-option.selected .fw-tag { background-color: var(--p-surface-800); color: var(--p-surface-0); }
      .fw-description { font-size: 0.85rem; color: var(--p-surface-600); margin: 0; line-height: 1.4; }
      
      /* --- New Model Popover Styles --- */
      :host ::ng-deep .model-op .p-popover-content { padding: 0 !important; }
      .model-panel { background: var(--p-surface-0); padding: var(--space-2); }
      .search-bar { padding: 0; margin-bottom: var(--space-2); }
      .search-bar input { border: 1px solid var(--p-surface-300); border-radius: 8px; padding: 10px 12px 10px 36px; background-color: var(--p-surface-0); width: 100%; font-size: .95rem; }
      .search-bar .pi-search { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--p-surface-500); }
      .list { max-height: 60vh; overflow-y: auto; }
      .group { margin-bottom: var(--space-2); }
      .group-title { font-size: 0.8rem; font-weight: 600; color: var(--p-surface-600); background-color: var(--p-surface-100); padding: 6px 12px; border-radius: 6px; margin-bottom: var(--space-2); }
      .group-item { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-radius: 8px; cursor: pointer; transition: background-color 0.2s ease; }
      .group-item:hover { background-color: var(--p-surface-50); }
      .left { display: flex; align-items: center; gap: 12px; }
      .left img { width: 20px; height: 20px; }
      .name { color: var(--p-surface-800); font-weight: 500; }
      .model-tag { font-size: 0.75rem; font-weight: 600; padding: 4px 10px; border-radius: 9999px; }
      .tag-chuyen-sau { background-color: #fee2e2; color: #b91c1c; }
      .tag-toan-dien { background-color: #dbeafe; color: #1d4ed8; }
      .tag-sang-tao { background-color: #dcfce7; color: #15803d; }
      .tag-nhanh-gon { background-color: #f0fdf4; color: #16a34a; }

      @media (max-width: 1024px){ .page{ grid-template-columns: 1fr; } .left{ border-right: none; border-bottom: 1px solid var(--p-surface-200); } }
    `
  ]
})
export class PromptEnhancerComponent implements OnInit, OnDestroy {
  @ViewChild('modelPopover') modelPopover!: Popover;

  private aiModelService = inject(AiModelService);
  private authService = inject(AuthService);
  private modelsSubscription?: Subscription;

  originalPrompt: string = '';
  enhancedPrompt: string | null = null;
  showError = false;

  frameworks: FrameworkOption[] = [
    {
      name: 'CORGI', tag: 'Core', description: 'Context, Output, Role, Goal, Instruction', selected: false,
      template: (prompt) => `**Bối cảnh (Context):** [Mô tả tình huống...]\n\n**Vai trò (Role):** Hãy đóng vai là [Mô tả vai trò...]\n\n**Mục tiêu (Goal):** Mục tiêu cuối cùng là [Mô tả kết quả...]\n\n**Định dạng (Output):** Cung cấp câu trả lời dưới dạng [Mô tả định dạng...]\n\n**Yêu cầu (Instruction):** Dựa trên thông tin trên, hãy: ${prompt}`
    },
    {
      name: 'CORGICE', tag: 'Extended', description: 'Thêm Constraints và Examples', selected: true,
      template: (prompt) => `**Bối cảnh (Context):** [Mô tả tình huống...]\n\n**Vai trò (Role):** Hãy đóng vai là [Mô tả vai trò...]\n\n**Mục tiêu (Goal):** Mục tiêu cuối cùng là [Mô tả kết quả...]\n\n**Định dạng (Output):** Cung cấp câu trả lời dưới dạng [Mô tả định dạng...]\n\n**Ràng buộc (Constraints):** [Liệt kê các giới hạn...]\n\n**Ví dụ (Examples):** Dưới đây là một ví dụ: [Cung cấp ví dụ mẫu...]\n\n**Yêu cầu (Instruction):** Dựa trên tất cả thông tin trên, hãy: ${prompt}`
    }
  ];
  selectedFramework: FrameworkOption = this.frameworks[1];

  selectedModelName: string = 'Đang tải...';
  selectedModelIcon: string = '';
  aiModels: AICategory[] = []; 

  ngOnInit() {
    const currentUser = this.authService.currentUser();
    const allowedModelNames = currentUser?.quotaProfile?.models ?? null;

    this.modelsSubscription = this.aiModelService.getModels(allowedModelNames).subscribe((data: AICategory[]) => {
      this.aiModels = data;
      this.setDefaultModel();
    });
  }

  ngOnDestroy() {
    this.modelsSubscription?.unsubscribe();
  }
  
  selectFramework(selectedFw: FrameworkOption) {
    this.frameworks.forEach(fw => fw.selected = false);
    selectedFw.selected = true;
    this.selectedFramework = selectedFw;
  }

  setDefaultModel() {
    const defaultModelName = 'Trợ lý EVNGENCO1';
    let defaultModel: AIModel | undefined;
    for (const group of this.aiModels) {
        const found = group.models.find(m => m.name === defaultModelName);
        if (found) { defaultModel = found; break; }
    }
    if (!defaultModel && this.aiModels.length > 0 && this.aiModels[0].models.length > 0) {
        defaultModel = this.aiModels[0].models[0];
    }
    if (defaultModel) {
        this.selectedModelName = defaultModel.name;
        this.selectedModelIcon = defaultModel.icon;
    } else {
        this.selectedModelName = 'Không có model';
    }
  }

  selectModel(model: AIModel) {
    this.selectedModelName = model.name;
    this.selectedModelIcon = model.icon;
    this.modelPopover.hide();
  }

  enhancePrompt() {
    if (!this.originalPrompt.trim()) { 
      this.showError = true; 
      return; 
    }
    this.showError = false;
    this.enhancedPrompt = this.selectedFramework.template(this.originalPrompt);
  }

  regenerateContent() { this.enhancePrompt(); }
  copyContent() { if (this.enhancedPrompt) navigator.clipboard.writeText(this.enhancedPrompt); }
}



================================================================================
File: app.dashboard.ts
Relative Path: src/app/pages/uikit/app.dashboard.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/app.dashboard.ts
Extension: .ts
Lines: 717
================================================================================

import { Component, OnInit, OnDestroy, AfterViewInit, ViewChild } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';

// PrimeNG
import { ButtonModule } from 'primeng/button';
import { Select } from 'primeng/select';
import { InputTextModule } from 'primeng/inputtext';
import { TooltipModule } from 'primeng/tooltip';
import { ChartModule } from 'primeng/chart';
import { TableModule } from 'primeng/table';
import { TagModule } from 'primeng/tag';
import { AvatarModule } from 'primeng/avatar';
import { ProgressBarModule } from 'primeng/progressbar';

type Option = { label: string; value: string };

@Component({
  selector: 'app-dashboard',
  standalone: true,
  imports: [
    CommonModule, FormsModule,
    ButtonModule, Select, InputTextModule, TooltipModule,
    ChartModule, TableModule, TagModule, AvatarModule, ProgressBarModule
  ],
  template: `
  <div class="page-container">
    <!-- Header -->
    <div class="header">
      <div>
        <h1 class="page-title">Tổng quan tình hình sử dụng</h1>
        <p class="page-subtitle">Dữ liệu được cập nhật từ 01/10/2025 đến 04/10/2025</p>
      </div>
      <div class="header-actions">
        <p-select [(ngModel)]="unit" [options]="units" optionLabel="label" optionValue="value" placeholder="Tất cả đơn vị"></p-select>
        <p-select [(ngModel)]="departmentFilter" [options]="departmentOptions" optionLabel="label" optionValue="value" placeholder="Tất cả phòng ban"></p-select>
        <p-select [(ngModel)]="period" [options]="periods" optionLabel="label" optionValue="value" placeholder="Thời gian"></p-select>
        <button pButton icon="pi pi-refresh" severity="secondary" [text]="true" [rounded]="true" pTooltip="Làm mới dữ liệu" (click)="manualRefresh()"></button>
      </div>
    </div>

    <!-- KPI -->
    <div class="kpi-grid">
      <div class="kpi-card">
        <div class="kpi-icon icon-primary"><i class="pi pi-bolt"></i></div>
        <div class="kpi-content">
          <div class="kpi-title">Credit đã dùng</div>
          <div class="kpi-value">10,000</div>
        </div>
        <p-tag [value]="kpiChange(-100)" severity="danger" [rounded]="true"></p-tag>
      </div>
      <div class="kpi-card">
        <div class="kpi-icon icon-primary"><i class="pi pi-users"></i></div>
        <div class="kpi-content">
          <div class="kpi-title">Tổng số người dùng</div>
          <div class="kpi-value">2,000</div>
        </div>
        <p-tag [value]="kpiChange(+5.39)" severity="success" [rounded]="true"></p-tag>
      </div>
      <div class="kpi-card">
        <div class="kpi-icon icon-primary"><i class="pi pi-chart-pie"></i></div>
        <div class="kpi-content">
          <div class="kpi-title">Tỷ lệ sử dụng</div>
          <div class="kpi-value">50%</div>
        </div>
        <p-tag [value]="kpiChange(-3.96)" severity="danger" [rounded]="true"></p-tag>
      </div>
      <div class="kpi-card">
        <div class="kpi-icon icon-primary"><i class="pi pi-calendar"></i></div>
        <div class="kpi-content">
          <div class="kpi-title">Tỷ lệ sử dụng hàng ngày</div>
          <div class="kpi-value">50%</div>
        </div>
        <p-tag [value]="kpiChange(+5.39)" severity="success" [rounded]="true"></p-tag>
      </div>
    </div>

    <!-- ROW 2: 3 doughnut - viewport vuông + legend custom -->
    <div class="row-3">
      <!-- Tasks -->
      <div class="card pie">
        <div class="card-header"><h3>Thống kê theo tác vụ</h3></div>
        <div class="card-body">
          <div class="pie-viewport">
            <p-chart type="doughnut" [data]="tasksData" [options]="doughnutOptions"></p-chart>
          </div>
          <div class="pie-legend" *ngIf="tasksData?.labels?.length">
            <div class="item" *ngFor="let lb of tasksData.labels; let i = index">
              <span class="dot" [style.background]="tasksData.datasets[0].backgroundColor[i]"></span>
              <span>{{ lb }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Models -->
      <div class="card pie">
        <div class="card-header"><h3>Thống kê theo mô hình AI</h3></div>
        <div class="card-body">
          <div class="pie-viewport">
            <p-chart type="doughnut" [data]="modelsData" [options]="doughnutOptions"></p-chart>
          </div>
          <div class="pie-legend" *ngIf="modelsData?.labels?.length">
            <div class="item" *ngFor="let lb of modelsData.labels; let i = index">
              <span class="dot" [style.background]="modelsData.datasets[0].backgroundColor[i]"></span>
              <span>{{ lb }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Token type -->
      <div class="card pie">
        <div class="card-header"><h3>Token theo loại</h3><span class="muted">Miễn phí vs Trả phí</span></div>
        <div class="card-body">
          <div class="pie-viewport">
            <p-chart type="doughnut" [data]="tokenTypeData" [options]="doughnutOptions"></p-chart>
          </div>
          <div class="pie-legend" *ngIf="tokenTypeData?.labels?.length">
            <div class="item" *ngFor="let lb of tokenTypeData.labels; let i = index">
              <span class="dot" [style.background]="tokenTypeData.datasets[0].backgroundColor[i]"></span>
              <span>{{ lb }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ROW 1: Line -->
    <div class="row-1">
      <div class="card compact">
        <div class="card-header">
          <h3>Biến động theo thời gian</h3>
          <p-select [(ngModel)]="timespan" [options]="timespans" optionLabel="label" optionValue="value"></p-select>
        </div>
        <div class="card-body">
          <div class="chart-wrap" style="height: var(--h-line);">
            <p-chart #lineChart type="line" [data]="lineData" [options]="lineOptions"></p-chart>
          </div>
        </div>
      </div>
    </div>

    

    <!-- ROW 3: Nhân viên + Top10 -->
    <div class="row-emp">
      <div class="card">
        <div class="card-header">
          <h3>Thống kê theo nhân viên</h3>
          <div class="table-header-actions">
            <p-select [(ngModel)]="selectedEmployeeSort" [options]="employeeSortOptions" optionLabel="label" optionValue="value"></p-select>
            <span class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input pInputText type="text" [(ngModel)]="employeeSearchQuery" placeholder="Tìm kiếm nhân viên..." class="w-full md:w-64"/>
            </span>
            <button pButton icon="pi pi-download" severity="secondary" [text]="true" [rounded]="true" pTooltip="Tải xuống"></button>
          </div>
        </div>
        <div class="card-body p-0">
          <p-table [value]="employeeStats" [paginator]="true" [rows]="5" [showCurrentPageReport]="true"
                   currentPageReportTemplate="Hiển thị {first} đến {last} của {totalRecords} bản ghi"
                   [rowsPerPageOptions]="[5, 10, 20]" [tableStyle]="{'min-width': '74rem'}">
            <ng-template pTemplate="header">
              <tr>
                <th>Người dùng</th>
                <th>Email</th>
                <th>Vị trí</th>
                <th>Phòng ban</th>
                <th>Định mức</th>
                <th class="text-right">Requests (all models)</th>
                <th class="text-right">Free-tier requests</th>
                <th class="text-right">Paid-model requests</th>
                <th class="text-right">Token miễn phí</th>
                <th class="text-right">Token trả phí</th>
                <th class="text-right">Chi phí đã dùng</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-emp>
              <tr>
                <td>
                  <div class="user-cell">
                    <p-avatar [label]="emp.initials" shape="circle" size="large"></p-avatar>
                    <div class="user-cell-info">
                      <div class="user-cell-name">{{emp.name}}</div>
                      <div class="user-cell-id">{{emp.id}}</div>
                    </div>
                  </div>
                </td>
                <td>{{emp.email}}</td>
                <td>{{emp.position}}</td>
                <td>{{emp.department}}</td>
                <td>
                  <div class="font-medium">{{emp.quota.type}}</div>
                  <div class="text-sm text-surface-500">{{emp.quota.limit}}</div>
                </td>
                <td class="text-right">{{emp.requests.total | number}}</td>
                <td class="text-right">{{emp.requests.free | number}}</td>
                <td class="text-right">{{emp.requests.paid | number}}</td>
                <td class="text-right">{{emp.tokens.free | number}}</td>
                <td class="text-right">{{emp.tokens.paid | number}}</td>
                <td class="text-right">
                  <div class="cost-cell">
                    <div class="cost-value">{{emp.cost.value | number:'1.2-2'}} <i class="pi pi-bolt cost-icon text-sm"></i></div>
                    <div class="cost-currency">{{emp.cost.currency | number}}đ</div>
                  </div>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>

      <div class="card top-card">
        <div class="card-header">
          <h3>Top 10 người dùng nhiều nhất</h3>
          <p-select [(ngModel)]="topSort" [options]="topSortOptions" optionLabel="label" optionValue="value"></p-select>
        </div>
        <div class="card-body">
          <ol class="rank-list">
            <li *ngFor="let u of sortedTopUsers(); let i = index">
              <div class="rank-badge" [class.gold]="i===0" [class.silver]="i===1" [class.bronze]="i===2">{{i+1}}</div>
              <p-avatar [image]="u.avatar" shape="circle" size="large"></p-avatar>
              <div class="user-info">
                <div class="user-name">{{u.name}}</div>
                <div class="user-dept">{{u.dept}}</div>
              </div>
              <div class="user-credit">
                {{formatTopValue(u)}} <span class="unit">{{currentMetricUnit}}</span>
              </div>
            </li>
          </ol>
        </div>
      </div>
    </div>

    <!-- ROW 4: Phòng ban -->
    <div class="row-1">
      <div class="card">
        <div class="card-header">
          <h3>Thống kê theo phòng ban</h3>
          <div class="flex items-center gap-2">
            <span class="text-sm font-medium text-surface-500">Sắp xếp theo</span>
            <p-select [(ngModel)]="sortBy" [options]="sortOptions" optionLabel="label" optionValue="value"></p-select>
            <button pButton icon="pi pi-download" severity="secondary" [text]="true" [rounded]="true" pTooltip="Tải xuống CSV"></button>
          </div>
        </div>
        <div class="card-body p-0">
          <p-table [value]="departments" [tableStyle]="{'min-width': '68rem'}" [stripedRows]="true">
            <ng-template pTemplate="header">
              <tr>
                <th>Phòng ban</th>
                <th class="text-right">Số credit</th>
                <th class="text-right">Người dùng</th>
                <th class="text-right">Đã dùng</th>
                <th class="text-right">Token miễn phí</th>
                <th class="text-right">Token trả phí</th>
                <th>Tỷ lệ sử dụng</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-r>
              <tr>
                <td><span class="font-semibold">{{r.name}}</span></td>
                <td class="text-right font-semibold">{{r.credit | number}}</td>
                <td class="text-right">{{r.users | number}}</td>
                <td class="text-right">{{r.active | number}}</td>
                <td class="text-right">{{r.tokens.free | number}}</td>
                <td class="text-right">{{r.tokens.paid | number}}</td>
                <td>
                  <div class="flex items-center gap-3">
                    <p-progressBar [value]="r.rate" [showValue]="false" styleClass="flex-1"></p-progressBar>
                    <span class="font-medium text-sm w-10 text-right">{{r.rate}}%</span>
                  </div>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
    </div>
  </div>
  `,
  styles: [`
    :host {
      --gap: 1rem;
      --radius: 0.875rem;
      --card-padding: 1.0rem;
      --border-color: var(--p-surface-200);
      --card-bg: var(--p-surface-0);
      --card-shadow: 0 6px 30px rgba(0,0,0,.05);
      --kpi-icon-size: 32px;

      /* Line chart height */
      --h-line: 220px;

      /* Chiều cao card pie & khu vực legend (đồng nhất giữa 3 card) */
      --h-pie-card: 470px;   /* tăng/giảm để vòng tròn to hơn/nhỏ hơn */
      --legend-h: 150px;     /* chỗ dành cho legend phía dưới */
    }

    .page-container { padding: var(--gap); background: var(--p-surface-50); display:flex; flex-direction:column; gap: var(--gap); }
    .header { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:1rem; }
    .page-title { font-size:1.5rem; font-weight:700; margin:0; color: var(--p-surface-900); }
    .page-subtitle { font-size:.9rem; color: var(--p-surface-600); margin:.25rem 0 0; }
    .header-actions { display:flex; align-items:center; gap:.5rem; }

    /* KPI */
    .kpi-grid { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: var(--gap); }
    .kpi-card { background:var(--card-bg); border:1px solid var(--border-color); border-radius:var(--radius); padding:1rem; display:flex; align-items:center; gap:1rem; box-shadow:var(--card-shadow); }
    .kpi-icon { width:64px; height:64px; border-radius:50%; display:grid; place-items:center; }
    .kpi-icon i { font-size: var(--kpi-icon-size); }
    .kpi-content { flex:1; }
    .kpi-title { font-weight:600; color: var(--p-surface-600); font-size:.95rem; margin-bottom:.25rem; }
    .kpi-value { font-weight:800; font-size:1.6rem; color: var(--p-primary-700); }
    .icon-primary { background: var(--p-primary-100); color: var(--p-primary-600); }

    /* Grid rows */
    .row-1 { display:grid; grid-template-columns: minmax(0,1fr); gap: var(--gap); }
    .row-3 { display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: var(--gap); align-items: stretch; }
    .row-emp { display:grid; grid-template-columns: minmax(0,2fr) minmax(0,1fr); gap: var(--gap); align-items: stretch; }

    /* Card */
    .card { background:var(--card-bg); border:1px solid var(--border-color); border-radius:var(--radius); box-shadow:var(--card-shadow); display:flex; flex-direction:column; height:100%; }
    .card.compact .card-body { flex: 0 0 auto; padding-top: .5rem; padding-bottom: .25rem; }
    .card-header { padding:1rem var(--card-padding); border-bottom:1px solid var(--border-color); display:flex; justify-content:space-between; align-items:center; gap:.5rem; }
    .card-header h3 { font-size:1.1rem; font-weight:600; margin:0; }
    .card-header .muted { color: var(--p-surface-500); font-size: .85rem; }
    .card-body { padding: var(--card-padding); flex:1; display:flex; flex-direction:column; }
    .card-body.p-0 { padding:0; }

    /* Line chart wrapper */
    .chart-wrap { width: 100%; height: 100%; }
    .chart-wrap canvas { display:block; margin:0 !important; }

    /* Pie cards: 2 hàng -> viewport (canvas) + legend */
    .card.pie { min-height: var(--h-pie-card); }
    .card.pie .card-body{
      display: grid;
      grid-template-rows: 1fr auto;
      gap: .75rem;
    }
    /* Viewport vuông, chiếm tối đa chiều cao còn lại */
    .pie-viewport{
      width: 100%;
      height: calc(var(--h-pie-card) - var(--legend-h));
      aspect-ratio: 1 / 1;
      max-width: 100%;
      margin-inline: auto;
    }
    .pie-viewport canvas{ display:block; width:100% !important; height:100% !important; }

    /* Legend custom: 2 cột gọn gàng */
    .pie-legend{
      height: auto;
      max-height: var(--legend-h);
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:.5rem 1.25rem;
      align-items:center;
    }
    .pie-legend .item{display:flex; align-items:center; gap:.5rem; white-space:nowrap;}
    .pie-legend .dot{width:.65rem; height:.65rem; border-radius:999px; flex:0 0 auto;}

    /* Lists / tables */
    .table-header-actions { display:flex; align-items:center; gap:.5rem; flex-wrap:wrap; }
    .rank-list { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:0.75rem; }
    .rank-list li { display:flex; align-items:center; gap:0.75rem; border-radius:0.75rem; padding:0.5rem 0.6rem; }
    .rank-badge { width:28px; height:28px; border-radius:999px; display:grid; place-items:center; font-weight:700; color:#fff; background: var(--p-surface-500); }
    .rank-badge.gold { background:#eab308; } .rank-badge.silver { background:#9ca3af; } .rank-badge.bronze { background:#b45309; }
    .user-info { flex:1; }
    .user-name { font-weight:600; }
    .user-dept { font-size:.85rem; color: var(--p-surface-500); }
    .user-credit { font-weight:700; font-size:1.05rem; }
    .user-credit .unit { font-weight:600; font-size:.85rem; color: var(--p-surface-500); margin-left:4px; }

    .user-cell { display:flex; align-items:center; gap:.75rem; }
    .user-cell-info { line-height:1.3; }
    .user-cell-name { font-weight:600; }
    .user-cell-id { font-size:.8rem; color: var(--p-surface-500); }
    .cost-cell { line-height:1.3; }
    .cost-value { font-weight:600; }
    .cost-currency { font-size:.8rem; color: var(--p-surface-500); }
    .cost-icon { color: var(--p-primary-500); }

    :host ::ng-deep {
      .p-progressbar .p-progressbar-value { background: var(--p-primary-color); }
      .p-select { border:1px solid var(--p-surface-300) !important; border-radius:.5rem; background:var(--p-surface-0); }
      .p-inputtext { border-radius:.5rem; }
      .p-progressbar { height:.75rem; border-radius:999px; }
      .p-table .p-table-thead > tr > th { background:var(--p-surface-50); font-weight:600; color:var(--p-surface-600); padding:.75rem 1.25rem; }
      .p-table .p-table-tbody > tr > td { padding:.75rem 1.25rem; border-color: var(--p-surface-100); }
      .p-paginator { border-top:1px solid var(--border-color); border-radius: 0 0 var(--radius) var(--radius); }
    }

    /* Responsive */
    @media (max-width: 1280px) {
      :host { --h-pie-card: 440px; --legend-h: 130px; }
      .row-3 { grid-template-columns: repeat(2, minmax(0,1fr)); }
      .row-emp { grid-template-columns: 1fr; }
      .kpi-grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
    }
    @media (max-width: 820px) {
      :host { --h-pie-card: 420px; --legend-h: 120px; }
      .row-3 { grid-template-columns: minmax(0,1fr); }
      .pie-legend{ grid-template-columns: 1fr; } /* màn nhỏ -> legend 1 cột */
      .kpi-grid { grid-template-columns: 1fr; }
      .header { flex-direction:column; align-items:flex-start; }
    }
  `]
})
export class AppDashboardComponent implements OnInit, AfterViewInit, OnDestroy {
  // filters
  unit = 'all';
  departmentFilter = 'all';
  period = 'month';
  timespan = 'd';
  sortBy = 'credit';
  selectedEmployeeSort = 'cost';
  employeeSearchQuery = '';

  // Top10 sort
  topSort = 'requests_total';
  topSortOptions: Option[] = [
    { label: 'Requests (all models)', value: 'requests_total' },
    { label: 'Free-tier requests', value: 'requests_free' },
    { label: 'Paid-model requests', value: 'requests_paid' },
    { label: 'Total tokens', value: 'tokens_total' },
    { label: 'Free-tier tokens', value: 'tokens_free' },
    { label: 'Paid tokens', value: 'tokens_paid' }
  ];
  get currentMetricUnit(): string { return this.topSort.startsWith('requests') ? 'req' : 'tok'; }

  units: Option[] = [
    { label: 'Tất cả đơn vị', value: 'all' },
    { label: 'EVNGENCO1', value: 'genco1' },
    { label: 'Công ty Cổ phần MISA', value: 'misa' }
  ];
  departmentOptions: Option[] = [
    { label: 'Tất cả phòng ban', value: 'all' },
    { label: 'Phòng Phát triển Thị trường', value: 'pdt' },
    { label: 'Phòng Quản lý XNK', value: 'xnk' },
    { label: 'Phòng Kinh doanh HAN', value: 'han' },
    { label: 'Phòng Quản trị nhân lực', value: 'hr' }
  ];
  periods: Option[] = [
    { label: 'Tuần này', value: 'week' },
    { label: 'Tháng này', value: 'month' },
    { label: 'Quý này', value: 'quarter' }
  ];
  timespans: Option[] = [
    { label: 'Theo ngày', value: 'd' },
    { label: 'Theo tuần', value: 'w' },
    { label: 'Theo tháng', value: 'm' }
  ];
  sortOptions: Option[] = [
    { label: 'Số credit', value: 'credit' },
    { label: 'Tỷ lệ sử dụng', value: 'rate' }
  ];
  employeeSortOptions: Option[] = [
    { label: 'Dùng nhiều nhất', value: 'cost' },
    { label: 'Dùng ít nhất', value: 'cost_asc' },
    { label: 'Tên A-Z', value: 'name' }
  ];

  // charts
  tasksData: any; modelsData: any; tokenTypeData: any;
  doughnutOptions: any;
  lineData: any; lineOptions: any;

  @ViewChild('lineChart') lineChart?: any;
  @ViewChild('tasksChart') tasksChart?: any;
  @ViewChild('modelsChart') modelsChart?: any;

  private themeLinkObserver?: MutationObserver;
  private primaryColorPoll?: any;
  private lastPrimary = '';

  // data
  topUsers: any[] = [];
  departments: any[] = [];
  employeeStats: any[] = [];

  ngOnInit(): void {
    this.initData();
    setTimeout(() => this.buildChartsFromCSSVars(), 0);
  }

  ngAfterViewInit(): void {
    const link = document.getElementById('theme-link');
    if (link) {
      this.themeLinkObserver = new MutationObserver(() => {
        setTimeout(() => this.rebuildChartsIfPrimaryChanged(), 50);
      });
      this.themeLinkObserver.observe(link, { attributes: true, attributeFilter: ['href'] });
    }
    this.primaryColorPoll = setInterval(() => this.rebuildChartsIfPrimaryChanged(), 1000);
  }

  ngOnDestroy(): void {
    this.themeLinkObserver?.disconnect();
    if (this.primaryColorPoll) clearInterval(this.primaryColorPoll);
  }

  manualRefresh(): void {
    this.buildChartsFromCSSVars();
    this.forceChartRefresh();
  }

  private rebuildChartsIfPrimaryChanged(): void {
    const currentPrimary = getComputedStyle(document.documentElement).getPropertyValue('--p-primary-500').trim();
    if (!this.lastPrimary) this.lastPrimary = currentPrimary;
    if (currentPrimary && currentPrimary !== this.lastPrimary) {
      this.lastPrimary = currentPrimary;
      this.buildChartsFromCSSVars();
      this.forceChartRefresh();
    }
  }
  private forceChartRefresh(): void {
    try { this.lineChart?.refresh?.(); } catch {}
    try { this.tasksChart?.refresh?.(); } catch {}
    try { this.modelsChart?.refresh?.(); } catch {}
  }

  // ====== Dummy data ======
  initData(): void {
    // Top users
    this.topUsers = [
      { avatar: 'https://i.pravatar.cc/150?u=1',  name: 'Nguyễn Minh Tuấn', dept: 'Phòng Phát triển Thị trường Quốc tế',
        requests: { total: 480, free: 150, paid: 330 }, tokens: { total: 220_000, free: 40_000,  paid: 180_000 } },
      { avatar: 'https://i.pravatar.cc/150?u=2',  name: 'Lê Thị Hương',    dept: 'Phòng Quản lý Xuất nhập khẩu',
        requests: { total: 430, free: 180, paid: 250 }, tokens: { total: 210_000, free: 55_000,  paid: 155_000 } },
      { avatar: 'https://i.pravatar.cc/150?u=3',  name: 'Phạm Văn An',     dept: 'Phòng Chiến lược Thị trường Toàn cầu',
        requests: { total: 410, free: 120, paid: 290 }, tokens: { total: 195_000, free: 35_000,  paid: 160_000 } },
      { avatar: 'https://i.pravatar.cc/150?u=4',  name: 'Trần Thị Mai',    dept: 'Phòng Kinh doanh Quốc tế',
        requests: { total: 395, free: 160, paid: 235 }, tokens: { total: 185_000, free: 60_000,  paid: 125_000 } },
      { avatar: 'https://i.pravatar.cc/150?u=5',  name: 'Bùi Đức Long',    dept: 'Phòng Kỹ thuật',
        requests: { total: 360, free: 200, paid: 160 }, tokens: { total: 170_000, free: 80_000,  paid: 90_000 } },
      { avatar: 'https://i.pravatar.cc/150?u=6',  name: 'Hoàng Thu Trang', dept: 'Phòng Marketing',
        requests: { total: 340, free: 190, paid: 150 }, tokens: { total: 165_000, free: 75_000,  paid: 90_000 } },
      { avatar: 'https://i.pravatar.cc/150?u=7',  name: 'Đỗ Quốc Khánh',   dept: 'Phòng Sản phẩm',
        requests: { total: 330, free: 140, paid: 190 }, tokens: { total: 150_000, free: 50_000,  paid: 100_000 } },
      { avatar: 'https://i.pravatar.cc/150?u=8',  name: 'Ngô Thùy Linh',   dept: 'Phòng Dữ liệu',
        requests: { total: 320, free: 130, paid: 190 }, tokens: { total: 148_000, free: 42_000,  paid: 106_000 } },
      { avatar: 'https://i.pravatar.cc/150?u=9',  name: 'Vũ Anh Quân',     dept: 'Phòng Tài chính',
        requests: { total: 300, free: 110, paid: 190 }, tokens: { total: 130_000, free: 35_000,  paid: 95_000 } },
      { avatar: 'https://i.pravatar.cc/150?u=10', name: 'Phan Thanh Tùng', dept: 'Phòng Vận hành',
        requests: { total: 280, free: 100, paid: 180 }, tokens: { total: 120_000, free: 30_000,  paid: 90_000 } }
    ];

    this.departments = [
      { name: 'Công ty Cổ phần MISA', credit: 10000, users: 2000, active: 1000, rate: 50, tokens: { free: 500_000, paid: 1_000_000 } },
      { name: 'Phòng Kinh doanh Thị trường nước ngoài', credit: 5000, users: 500, active: 500, rate: 100, tokens: { free: 120_000, paid: 380_000 } },
      { name: 'Phòng Kinh doanh HAN', credit: 300, users: 300, active: 300, rate: 100, tokens: { free: 80_000, paid: 220_000 } },
      { name: 'Phòng Quản trị nhân lực', credit: 400, users: 400, active: 200, rate: 50, tokens: { free: 60_000, paid: 60_000 } }
    ];

    this.employeeStats = [
      { initials: 'QH', name: 'Nguyễn Quang Huy', id: 'NV000001', email: 'nqh306@gmail.com', position: 'Trưởng phòng', department: 'bencode.vn',
        quota: { type: 'Định mức mặc định', limit: 'Không giới hạn' },
        requests: { total: 510, free: 180, paid: 330 }, tokens: { free: 30_000, paid: 95_000 },
        cost: { value: 1250.50, currency: 250100 } },
      { initials: 'MT', name: 'Nguyễn Minh Tuấn', id: 'NV000002', email: 'tuan.nm@misa.vn', position: 'Chuyên viên', department: 'Phòng Phát triển Thị trường',
        quota: { type: 'Định mức tháng', limit: '5.000 credit' },
        requests: { total: 480, free: 150, paid: 330 }, tokens: { free: 20_000, paid: 80_000 },
        cost: { value: 1200, currency: 240000 } },
      { initials: 'LH', name: 'Lê Thị Hương', id: 'NV000003', email: 'huong.lt@misa.vn', position: 'Chuyên viên', department: 'Phòng Quản lý XNK',
        quota: { type: 'Định mức mặc định', limit: 'Không giới hạn' },
        requests: { total: 430, free: 180, paid: 250 }, tokens: { free: 18_000, paid: 70_000 },
        cost: { value: 1150, currency: 230000 } },
      { initials: 'VA', name: 'Phạm Văn An', id: 'NV000004', email: 'an.pv@misa.vn', position: 'Nhân viên', department: 'Phòng Chiến lược',
        quota: { type: 'Định mức mặc định', limit: 'Không giới hạn' },
        requests: { total: 120, free: 120, paid: 0 }, tokens: { free: 5_000, paid: 0 },
        cost: { value: 0, currency: 0 } }
    ];
  }

  // ====== Helpers ======
  hexToRgba(hex: string, alpha: number = 1): string {
    const hexValue = hex.replace('#', '');
    const isShortHex = hexValue.length === 3;
    const rHex = isShortHex ? hexValue[0] + hexValue[0] : hexValue.substring(0, 2);
    const gHex = isShortHex ? hexValue[1] + hexValue[1] : hexValue.substring(2, 4);
    const bHex = isShortHex ? hexValue[2] + hexValue[2] : hexValue.substring(4, 6);
    return `rgba(${parseInt(rHex, 16)}, ${parseInt(gHex, 16)}, ${parseInt(bHex, 16)}, ${alpha})`;
  }

  // ====== Charts ======
  private buildChartsFromCSSVars(): void {
    const css = getComputedStyle(document.documentElement);
    const textColor = css.getPropertyValue('--p-surface-700').trim();
    const textColorSecondary = css.getPropertyValue('--p-surface-500').trim();
    const surfaceBorder = css.getPropertyValue('--p-surface-200').trim();
    const primary500 = css.getPropertyValue('--p-primary-500').trim();

    this.lastPrimary = primary500 || this.lastPrimary;

    // Palette đơn sắc theo theme
    const mono = [
      css.getPropertyValue('--p-primary-700').trim(),
      css.getPropertyValue('--p-primary-600').trim(),
      css.getPropertyValue('--p-primary-500').trim(),
      css.getPropertyValue('--p-primary-400').trim(),
      css.getPropertyValue('--p-primary-300').trim(),
      css.getPropertyValue('--p-primary-200').trim()
    ].filter(Boolean);

    // Doughnut options: tắt legend mặc định, viewport vuông
    this.doughnutOptions = {
      responsive: true,
      maintainAspectRatio: true,
      aspectRatio: 1,
      cutout: '65%',
      plugins: {
        legend: { display: false },
        tooltip: {
          callbacks: {
            label: (ctx: any) => {
              const ds = ctx.dataset.data as number[];
              const total = ds.reduce((s, v) => s + v, 0);
              const val = ds[ctx.dataIndex] || 0;
              const pct = total ? ((val / total) * 100).toFixed(1) : '0.0';
              return ` ${ctx.label}: ${Number(val).toLocaleString('vi-VN')} (${pct}%)`;
            }
          }
        }
      }
    };

    // Doughnut data
    const tasksRaw = this.sortForDoughnut(
      ['Trò chuyện','Suy luận','Tạo sinh hình ảnh','Tìm kiếm web','Nghiên cứu sâu','Khác'],
      [5000, 2000, 3000, 2000, 5000, 200]
    );
    this.tasksData = { labels: tasksRaw.labels, datasets: [{ data: tasksRaw.values, backgroundColor: mono, borderWidth: 0, hoverOffset: 8 }] };

    const modelsRaw = this.sortForDoughnut(
      ['GPT o4 mini','Gemini 2.5 Flash','Gemini 2.5 Pro','GPT-4.1 mini','GPT o3','Khác'],
      [5000, 2000, 3000, 5000, 2000, 200]
    );
    this.modelsData = { labels: modelsRaw.labels, datasets: [{ data: modelsRaw.values, backgroundColor: mono, borderWidth: 0, hoverOffset: 8 }] };

    const freeTokens = this.departments.reduce((s, d) => s + d.tokens.free, 0);
    const paidTokens = this.departments.reduce((s, d) => s + d.tokens.paid, 0);
    this.tokenTypeData = {
      labels: ['Miễn phí', 'Trả phí'],
      datasets: [{ data: [freeTokens, paidTokens], backgroundColor: [css.getPropertyValue('--p-primary-300').trim(), css.getPropertyValue('--p-primary-600').trim()], borderWidth: 0 }]
    };

    // Line
    const days = Array.from({length: 30}, (_, i) => (i + 1).toString());
    const series = [0, 5000, 10000, 13000, 16000, 15000, 14000, 9000, 6000, 5000, 3000, 2000, 1000, 4000, 9000, 15000, 18000, 20000, 19000, 17000, 16000, 12000, 10000, 9000, 10000, 11000, 9000, 7000, 3000, 0];

    this.lineData = {
      labels: days,
      datasets: [{
        label: 'Credit đã dùng',
        data: series,
        fill: true,
        backgroundColor: this.hexToRgba(primary500 || '#3B82F6', 0.12),
        borderColor: primary500 || '#3B82F6',
        tension: 0.4,
        pointRadius: 0,
        borderWidth: 2
      }]
    };

    this.lineOptions = {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: true, position: 'top', align: 'end', labels: { color: textColor } },
        tooltip: { callbacks: { label: (ctx: any) => ` ${ctx.dataset.label}: ${Number(ctx.parsed.y).toLocaleString('vi-VN')}` } }
      },
      layout: { padding: { bottom: 0 } },
      scales: {
        x: { ticks: { color: textColorSecondary, maxTicksLimit: 10 }, grid: { display: false } },
        y: { ticks: { color: textColorSecondary }, grid: { color: surfaceBorder } }
      }
    };
  }

  private sortForDoughnut(labels: string[], values: number[]) {
    const arr = labels.map((label, i) => ({ label, value: values[i] }));
    arr.sort((a, b) => b.value - a.value);
    return { labels: arr.map(a => a.label), values: arr.map(a => a.value) };
  }

  // ====== Top10 helpers ======
  sortedTopUsers() {
    const clone = [...this.topUsers];
    const pick = (u: any) => {
      switch (this.topSort) {
        case 'requests_total': return u.requests.total;
        case 'requests_free':  return u.requests.free;
        case 'requests_paid':  return u.requests.paid;
        case 'tokens_total':   return u.tokens.total ?? (u.tokens.free + u.tokens.paid);
        case 'tokens_free':    return u.tokens.free;
        case 'tokens_paid':    return u.tokens.paid;
        default: return u.requests.total;
      }
    };
    clone.sort((a, b) => pick(b) - pick(a));
    return clone.slice(0, 10);
  }
  formatTopValue(u: any): string {
    const v = this.topSort.startsWith('requests')
      ? (this.topSort === 'requests_total' ? u.requests.total : this.topSort === 'requests_free' ? u.requests.free : u.requests.paid)
      : (this.topSort === 'tokens_total' ? (u.tokens.total ?? (u.tokens.free + u.tokens.paid)) : this.topSort === 'tokens_free' ? u.tokens.free : u.tokens.paid);
    return Number(v).toLocaleString('vi-VN');
  }

  kpiChange(val: number): string {
    const arrow = val >= 0 ? '▲' : '▼';
    return `${arrow} ${Math.abs(val).toFixed(2)}%`;
  }
}


================================================================================
File: document-translator.ts
Relative Path: src/app/pages/uikit/document-translator.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/document-translator.ts
Extension: .ts
Lines: 277
================================================================================

import { Component, OnInit, inject, OnDestroy, ViewChild } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { ButtonModule } from 'primeng/button';
import { TooltipModule } from 'primeng/tooltip';
import { Popover, PopoverModule } from 'primeng/popover';
import { Select } from 'primeng/select';
import { FileUpload, FileUploadModule } from 'primeng/fileupload';
import { CheckboxModule } from 'primeng/checkbox';
import { TableModule } from 'primeng/table';
import { TagModule } from 'primeng/tag';
import { Subscription } from 'rxjs';
import { AiModelService } from '../../core/services/ai-model.service'; 
import { AICategory, AIModel } from '../../core/models/ai-models.model';
import { AuthService } from '../../core/services/auth.service';

interface SelectOption { name: string; value: string; }
type TranslationStatus = 'processing' | 'completed' | 'failed';
interface TranslationJob {
  id: number;
  fileName: string;
  status: TranslationStatus;
  timestamp: Date;
  resultUrl?: string;
}

@Component({
  selector: 'app-document-translator',
  standalone: true,
  imports: [
    CommonModule, FormsModule, ButtonModule, TooltipModule, PopoverModule, Select,
    FileUploadModule, CheckboxModule, TableModule, TagModule
  ],
  template: `
    <div class="page-container h-full">
      <div class="col left">
        <div class="left-panel-container">
          <div class="header-left"><h1 class="title">Tùy chọn dịch thuật</h1></div>
          <div class="options-grid">
            <div class="field"><label class="label">Ngôn ngữ gốc</label><p-select [options]="languages" [(ngModel)]="sourceLanguage" optionLabel="name" placeholder="Phát hiện ngôn ngữ" styleClass="w-full custom-dropdown" appendTo="body"></p-select></div>
            <div class="field"><label class="label">Dịch ra ngôn ngữ</label><p-select [options]="languages" [(ngModel)]="targetLanguage" optionLabel="name" placeholder="Chọn ngôn ngữ" styleClass="w-full custom-dropdown" appendTo="body"></p-select></div>
            <div class="field"><label class="label">Phong cách</label><p-select [options]="styles" [(ngModel)]="selectedStyle" optionLabel="name" placeholder="Nghiêm túc" styleClass="w-full custom-dropdown" appendTo="body"></p-select></div>
            <div class="field"><label class="label">Chuyên ngành</label><p-select [options]="domains" [(ngModel)]="selectedDomain" optionLabel="name" placeholder="AI tự nhận diện" styleClass="w-full custom-dropdown" appendTo="body"></p-select></div>
          </div>
          <div class="switches-grid">
              <div class="switch-field"><p-checkbox [(ngModel)]="bilingualMode" [binary]="true" inputId="bilingualSwitch"></p-checkbox><label for="bilingualSwitch">Dịch song ngữ</label></div>
              <div class="switch-field"><p-checkbox [(ngModel)]="useGlossary" [binary]="true" inputId="glossarySwitch"></p-checkbox><label for="glossarySwitch">Từ điển của tôi</label></div>
              <div class="switch-field"><p-checkbox [(ngModel)]="useOCR" [binary]="true" inputId="ocrSwitch"></p-checkbox><label for="ocrSwitch">OCR (cho PDF scan)</label></div>
          </div>
          <div class="field">
              <label class="label">Tải tệp lên</label>
              <p-fileUpload #fileUploader name="document[]" (onSelect)="onFileSelect($event)"
                  [multiple]="true" accept=".doc,.docx,.pdf,.xls,.xlsx,.ppt,.pptx,.txt"
                  [maxFileSize]="300000000" [showUploadButton]="false" [showCancelButton]="true"
                  chooseLabel="Chọn tệp để tải lên" styleClass="custom-uploader" (onClear)="onClearFiles()" (onRemove)="onRemoveFile($event)">
                  <ng-template pTemplate="content">
                      <div class="uploader-content" *ngIf="filesToTranslate.length === 0">
                          <i class="pi pi-upload"></i>
                          <span>Kéo và thả tệp vào đây</span>
                          <span class="formats">Hỗ trợ: Word, PDF, Excel, PowerPoint, Text</span>
                      </div>
                  </ng-template>
              </p-fileUpload>
          </div>
        </div>
        <div class="actions-footer"><button pButton label="Dịch ngay" icon="pi pi-language" class="btn btn-main" (click)="startTranslation()" [disabled]="!filesToTranslate.length"></button></div>
      </div>
      <div class="col right">
        <div class="header-right"><i class="pi pi-language icon"></i><h1 class="title">Dịch thuật tài liệu</h1></div>
        <div class="output-container">
          <p-table [value]="translationJobs" styleClass="p-datatable-striped custom-table" responsiveLayout="scroll">
              <ng-template pTemplate="header"><tr><th>Tên tệp</th><th style="width: 15rem">Thời gian</th><th style="width: 12rem">Trạng thái</th><th style="width: 10rem">Thao tác</th></tr></ng-template>
              <ng-template pTemplate="body" let-job>
                  <tr>
                      <td>{{ job.fileName }}</td><td>{{ job.timestamp | date:'dd/MM/yyyy HH:mm' }}</td>
                      <td><p-tag [severity]="getStatusSeverity(job.status)" [value]="job.status" [icon]="getStatusIcon(job.status)"></p-tag></td>
                      <td>
                        <div class="action-buttons" *ngIf="job.status === 'completed'"><button pButton icon="pi pi-eye" class="p-button-text p-button-secondary" pTooltip="Xem nhanh"></button><button pButton icon="pi pi-download" class="p-button-text p-button-secondary" pTooltip="Tải về"></button></div>
                        <span *ngIf="job.status === 'failed'" class="text-danger-500 text-sm">Thất bại</span>
                      </td>
                  </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage"><tr><td colspan="4" class="text-center py-8"><div class="empty"><i class="pi pi-history icon-empty"></i><p>Lịch sử dịch sẽ được hiển thị ở đây.</p></div></td></tr></ng-template>
          </p-table>
        </div>
      </div>
    </div>
  `,
  styles: [
    `
      :host {
        --space-2: 8px;
        --space-3: 12px;
        --space-4: 16px;
        --radius: 8px;
        --text-color-light: #555;
        --text-color-dark: #222;
        --border-color: #e0e0e0;
        --left-bg: #f7f7f8;
      }
      .page-container {
        display: grid;
        grid-template-columns: 450px 1fr;
        font-family: 'Inter', sans-serif;
      }
      .col { height: 100%; overflow: hidden; display: flex; flex-direction: column; }
      .left { background-color: var(--left-bg); border-right: 1px solid var(--border-color); }
      .right { background-color: #fff; }

      /* Left Panel */
      .left-panel-container { padding: var(--space-4); overflow-y: auto; flex-grow: 1; }
      .header-left { margin-bottom: 24px; }
      .header-left .title { font-size: 1.1rem; font-weight: 600; color: var(--text-color-dark); }
      .field { margin-bottom: var(--space-4); }
      .label { display: block; margin-bottom: var(--space-2); font-weight: 500; font-size: 0.9rem; color: var(--text-color-light); }
      :host ::ng-deep .custom-dropdown.p-select { border-radius: var(--radius); border: 1px solid var(--border-color); }
      :host ::ng-deep .custom-dropdown .p-select-label { font-weight: 500; }
      
      .options-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--space-3) var(--space-4);
        margin-bottom: var(--space-4);
      }
      
      .switches-grid {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-4);
        margin-bottom: var(--space-4);
      }

      .switch-field {
        display: flex;
        align-items: center;
        gap: var(--space-2);
      }
      .switch-field label {
        font-weight: 500;
        cursor: pointer;
        color: var(--text-color-dark);
      }

      /* Uploader */
       :host ::ng-deep .custom-uploader .p-fileupload-buttonbar {
         display: none;
       }
      :host ::ng-deep .custom-uploader .p-fileupload-content {
        border: 2px dashed var(--border-color);
        border-radius: var(--radius);
        padding: 0;
      }
       .uploader-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        text-align: center;
        color: var(--text-color-light);
      }
      .uploader-content i {
        font-size: 2rem;
        color: var(--p-primary-500);
        margin-bottom: var(--space-3);
      }
       .uploader-content span {
        font-weight: 500;
      }
       .uploader-content .formats {
        font-size: 0.8rem;
        color: #aaa;
        margin-top: var(--space-2);
      }

      /* Actions Footer */
      .actions-footer {
        padding: var(--space-3) var(--space-4);
        border-top: 1px solid var(--border-color);
        display: flex; gap: var(--space-2); background: var(--left-bg);
      }
      .btn { flex-grow: 1; border-radius: var(--radius) !important; padding: 10px 0 !important; }
      .btn-main { background: var(--p-primary-500) !important; border-color: var(--p-primary-500) !important; }

      /* Right Panel */
      .header-right {
        display: flex; align-items: center; gap: var(--space-3);
        background-color: var(--p-primary-500);
        color: #fff;
        padding: var(--space-3) var(--space-4);
      }
      .header-right .icon { font-size: 1.5rem; }
      .header-right .title { font-size: 1.1rem; font-weight: 600; margin: 0; }
      .output-container { flex-grow: 1; overflow-y: auto; }
      .empty { text-align: center; color: #aaa; padding: 48px 0; }
      .icon-empty { font-size: 3rem; margin-bottom: var(--space-3); display: block; }
      
      /* Table Styles */
      :host ::ng-deep .custom-table.p-datatable .p-datatable-thead > tr > th {
        background: var(--left-bg);
        color: var(--text-color-light);
        font-weight: 600;
      }
      .action-buttons {
        display: flex;
        gap: var(--space-2);
      }
    `
  ]
})
export class DocumentTranslatorComponent implements OnInit, OnDestroy {
  @ViewChild('fileUploader') fileUploader!: FileUpload;

  private aiModelService = inject(AiModelService);
  private authService = inject(AuthService);
  private modelsSubscription?: Subscription;

  sourceLanguage: SelectOption | null = null; targetLanguage: SelectOption | null = null;
  selectedStyle: SelectOption | null = null; selectedDomain: SelectOption | null = null;
  bilingualMode = false; useGlossary = false; useOCR = false;
  filesToTranslate: File[] = [];
  translationJobs: TranslationJob[] = [];
  
  languages: SelectOption[] = [ { name: 'Tiếng Việt', value: 'vi' }, { name: 'Tiếng Anh', value: 'en' }, { name: 'Tiếng Pháp', value: 'fr' }, { name: 'Tiếng Nhật', value: 'ja' }, ];
  styles: SelectOption[] = [ { name: 'Nghiêm túc', value: 'formal' }, { name: 'Thân thiện', value: 'informal' }, ];
  domains: SelectOption[] = [ { name: 'Kỹ thuật', value: 'technical' }, { name: 'Tài chính', value: 'financial' }, { name: 'Pháp lý', value: 'legal' }, ];
  
  aiModels: AICategory[] = [];

  ngOnInit() {
    const currentUser = this.authService.currentUser();
    const allowedModelNames = currentUser?.quotaProfile?.models ?? null;

    this.modelsSubscription = this.aiModelService.getModels(allowedModelNames).subscribe((data: AICategory[]) => {
      this.aiModels = data;
    });
    this.targetLanguage = this.languages[1];
    this.selectedStyle = this.styles[0];
  }

  ngOnDestroy() { this.modelsSubscription?.unsubscribe(); }

  onFileSelect(event: any) { this.filesToTranslate = [...event.files]; }
  onClearFiles() { this.filesToTranslate = []; }
  onRemoveFile(event: any) { this.filesToTranslate = this.filesToTranslate.filter(f => f.name !== event.file.name); }

  startTranslation() {
    if (!this.filesToTranslate.length) return;
    this.filesToTranslate.forEach(file => {
      const newJob: TranslationJob = { id: Date.now() + Math.random(), fileName: file.name, status: 'processing', timestamp: new Date(), };
      this.translationJobs.unshift(newJob);
      this.simulateApiCall(newJob);
    });
    this.filesToTranslate = [];
    this.fileUploader.clear();
  }

  private simulateApiCall(job: TranslationJob) {
    const randomDelay = Math.random() * 3000 + 2000;
    setTimeout(() => {
      const jobIndex = this.translationJobs.findIndex(j => j.id === job.id);
      if (jobIndex !== -1) {
        const success = Math.random() > 0.2;
        this.translationJobs[jobIndex].status = success ? 'completed' : 'failed';
        if (success) { this.translationJobs[jobIndex].resultUrl = '#'; }
      }
    }, randomDelay);
  }
  
  getStatusSeverity(status: string): 'success' | 'info' | 'warn' | 'danger' | 'secondary' {
    switch (status) { case 'completed': return 'success'; case 'processing': return 'warn'; case 'failed': return 'danger'; default: return 'secondary'; }
  }

  getStatusIcon(status: string): string {
    switch (status) { case 'processing': return 'pi pi-spin pi-spinner'; case 'completed': return 'pi pi-check'; case 'failed': return 'pi pi-times'; default: return ''; }
  }
}

================================================================================
File: text-summarizer.ts
Relative Path: src/app/pages/uikit/text-summarizer.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/uikit/text-summarizer.ts
Extension: .ts
Lines: 225
================================================================================

import { Component, OnInit, inject, OnDestroy, ViewChild } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { ButtonModule } from 'primeng/button';
import { InputTextModule } from 'primeng/inputtext';
import { TooltipModule } from 'primeng/tooltip';
import { Popover, PopoverModule } from 'primeng/popover';
import { Select } from 'primeng/select';
import { SelectButtonModule } from 'primeng/selectbutton';
import { Subscription } from 'rxjs';
import { AiModelService } from '../../core/services/ai-model.service';
import { AICategory, AIModel } from '../../core/models/ai-models.model';
import { AiModelSelectorComponent } from '../../core/shared/components/ai-model-selector.component';
import { AuthService } from '../../core/services/auth.service'; // **Import AuthService**

interface SelectOption { name: string; value: string; }
interface ButtonOption { label: string; value: string; icon?: string; }

@Component({
  selector: 'app-text-summarizer',
  standalone: true,
  imports: [
    CommonModule, FormsModule, ButtonModule, InputTextModule, TooltipModule,
    PopoverModule, Select, SelectButtonModule, AiModelSelectorComponent
  ],
  template: `
    <div class="page-container h-full">
      <div class="col left">
        <div class="left-panel-container">
          <div class="header-left"><h1 class="title">Nhập liệu tóm tắt</h1></div>
          <div class="field">
            <label class="label">Chọn model AI</label>
            <div class="model-selector" (click)="modelPopover.toggle($event)">
              <div class="model-info"><img [src]="selectedModel.icon" [alt]="selectedModel.name" *ngIf="selectedModel.icon"/><span>{{ selectedModel.name }}</span></div>
              <i class="pi pi-chevron-down"></i>
            </div>
          </div>
          <div class="field"><label class="label">Nội dung cần tóm tắt <span class="req">*</span></label><textarea pInputText [(ngModel)]="sourceText" placeholder="Dán văn bản hoặc URL vào đây..." rows="10" class="control textarea"></textarea></div>
          <div class="field"><label class="label">Độ dài bản tóm tắt</label><p-selectButton [options]="summaryLengths" [(ngModel)]="selectedLength" optionLabel="label" optionValue="value"></p-selectButton></div>
          <div class="field"><label class="label">Định dạng kết quả</label><p-selectButton [options]="summaryFormats" [(ngModel)]="selectedFormat" optionLabel="label" optionValue="value"></p-selectButton></div>
          <div class="field"><label class="label">Ngôn ngữ</label><p-select [options]="languages" [(ngModel)]="selectedLanguage" optionLabel="name" placeholder="Chọn ngôn ngữ" styleClass="w-full custom-dropdown" appendTo="body"></p-select></div>
        </div>
        <div class="actions-footer"><button pButton label="Xóa sạch" icon="pi pi-trash" class="btn btn-clear" (click)="clearAll()"></button><button pButton label="Tóm tắt" icon="pi pi-file-export" class="btn btn-main" (click)="generateSummary()"></button></div>
      </div>
      <div class="col right">
        <div class="header-right"><i class="pi pi-align-left icon"></i><h1 class="title">Tóm tắt văn bản</h1></div>
        <div class="output-container">
            <div *ngIf="!generatedContent" class="empty"><i class="pi pi-file-export icon-empty"></i><p>Nội dung tóm tắt sẽ được hiển thị ở đây.</p></div>
            <div *ngIf="generatedContent" class="card"><div class="card-head"><h3>Kết quả tóm tắt</h3><div class="tools"><button pButton icon="pi pi-copy" [text]="true" [rounded]="true" severity="secondary" class="icon-btn" pTooltip="Sao chép" tooltipPosition="top" (click)="copyContent()"></button></div></div><div class="card-body"><div class="result-content" [innerHTML]="generatedContent"></div></div></div>
        </div>
      </div>
      <p-popover #modelPopover [appendTo]="'body'" [style]="{width:'360px'}" styleClass="model-op"><ng-template pTemplate="content"><app-ai-model-selector [popoverRef]="modelPopover" (modelSelected)="onModelSelected($event)"></app-ai-model-selector></ng-template></p-popover>
    </div>
  `,
  styles: [
    `
      :host {
        --space-2: 8px;
        --space-3: 12px;
        --space-4: 16px;
        --radius: 8px;
        --text-color-light: #555;
        --text-color-dark: #222;
        --border-color: #e0e0e0;
        --left-bg: var(--p-surface-0); /* Nền trắng cho Left Panel */
      }
      .page-container {
        display: grid;
        grid-template-columns: 400px 1fr;
        font-family: 'Inter', sans-serif;
      }
      .col { height: 100%; overflow: hidden; display: flex; flex-direction: column; }
      .left { background-color: var(--left-bg); border-right: 1px solid var(--border-color); }
      .right { background-color: #fff; }

      /* Left Panel */
      .left-panel-container { padding: var(--space-4); overflow-y: auto; flex-grow: 1; }
      .header-left { margin-bottom: 24px; }
      .header-left .title { font-size: 1.1rem; font-weight: 600; color: var(--text-color-dark); }
      .field { margin-bottom: var(--space-4); }
      .label { display: block; margin-bottom: var(--space-2); font-weight: 500; font-size: 0.9rem; color: var(--text-color-light); }
      .req { color: var(--p-red-500); }
      .control { width:100%; }
      .textarea { min-height: 60px; }
      .model-selector {
        display: flex; justify-content: space-between; align-items: center;
        background: #fff; border: 1px solid var(--border-color);
        padding: 10px var(--space-3); border-radius: var(--radius);
        cursor: pointer; transition: border-color .2s;
      }
      .model-selector:hover { border-color: var(--p-primary-500); }
      .model-info { display: flex; align-items: center; gap: var(--space-2); font-weight: 500; }
      .model-info img { width: 20px; height: 20px; }
      :host ::ng-deep .custom-dropdown.p-select { border-radius: var(--radius); border: 1px solid var(--border-color); }
      :host ::ng-deep .custom-dropdown .p-select-label { font-weight: 500; }
      :host ::ng-deep .p-selectbutton .p-button {
          background: #fff;
          border-color: var(--border-color);
          color: var(--text-color-light);
      }
      :host ::ng-deep .p-selectbutton .p-button.p-highlight {
          background: var(--p-primary-50);
          border-color: var(--p-primary-500);
          color: var(--p-primary-700);
      }
      :host ::ng-deep .p-selectbutton .p-button:not(.p-highlight):hover {
          background: var(--p-surface-50);
          border-color: var(--p-primary-500);
          color: var(--p-primary-700);
      }
      /* Actions Footer */
      .actions-footer {
        padding: var(--space-3) var(--space-4);
        border-top: 1px solid var(--border-color);
        display: flex; gap: var(--space-2); background: var(--left-bg);
      }
      .btn { flex-grow: 1; border-radius: var(--radius) !important; padding: 10px 0 !important; }
      .btn-clear { background: #fff !important; color: var(--text-color-dark) !important; border: 1px solid var(--border-color) !important; }
      .btn-main { background: var(--p-primary-500) !important; border-color: var(--p-primary-500) !important; }
      /* Right Panel */
      .header-right {
        display: flex; align-items: center; gap: var(--space-3);
        background-color: var(--p-primary-500);
        color: #fff;
        padding: var(--space-3) var(--space-4);
      }
      .header-right .icon { font-size: 1.5rem; }
      .header-right .title { font-size: 1.1rem; font-weight: 600; margin: 0; }
      .output-container { padding: var(--space-4); flex-grow: 1; overflow-y: auto; }
      .empty { text-align: center; color: #aaa; padding: 48px 0; }
      .icon-empty { font-size: 3rem; margin-bottom: var(--space-3); display: block; }
      .result-content { white-space: pre-wrap; line-height: 1.7; }
      .result-content ul { padding-left: 20px; margin: 0; }
      .result-content li { margin-bottom: 0.5rem; }
      /* Result Card Styles */
      .card { background: #fff; border: 1px solid var(--border-color); border-radius: var(--radius); }
      .card-head {
        display: flex; justify-content: space-between; align-items: center;
        padding: var(--space-3); border-bottom: 1px solid var(--border-color);
      }
      .card-head h3 { margin: 0; font-size: 1rem; font-weight: 600; color: var(--text-color-dark); }
      .tools { display: flex; }
      .icon-btn { width: 34px !important; height: 34px !important; }
      .card-body { padding: var(--space-3); }
      /* Model Popover (Re-styled) */
      :host ::ng-deep .model-op .p-popover-content { padding: 0 !important; }
      .model-panel { background: var(--p-surface-0); padding: var(--space-2); }
      .search-bar { padding: 0; margin-bottom: var(--space-2); }
      .search-bar input { border: 1px solid var(--p-surface-300); border-radius: 8px; padding: 10px 12px 10px 36px; background-color: var(--p-surface-0); width: 100%; font-size: .95rem; }
      .search-bar .pi-search { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--p-surface-500); }
      .list { max-height: 60vh; overflow-y: auto; }
      .group { margin-bottom: var(--space-2); }
      .group-title { font-size: 0.8rem; font-weight: 600; color: var(--p-surface-600); background-color: var(--p-surface-100); padding: 6px 12px; border-radius: 6px; margin-bottom: var(--space-2); }
      .group-item { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-radius: 8px; cursor: pointer; transition: background-color 0.2s ease; }
      .group-item:hover { background-color: var(--p-surface-50); }
      .left-item { display: flex; align-items: center; gap: 12px; }
      .left-item img { width: 20px; height: 20px; }
      .name { color: var(--p-surface-800); font-weight: 500; }
      .model-tag { font-size: 0.75rem; font-weight: 600; padding: 4px 10px; border-radius: 9999px; }
      .tag-chuyen-sau { background-color: #fee2e2; color: #b91c1c; }
      .tag-toan-dien { background-color: #dbeafe; color: #1d4ed8; }
      .tag-sang-tao { background-color: #dcfce7; color: #15803d; }
      .tag-nhanh-gon { background-color: #f0fdf4; color: #16a34a; }
      @media (max-width: 1024px){ .page-container { grid-template-columns: 1fr; } .left { border-right: none; } }
    `
  ]
})
export class TextSummarizerComponent implements OnInit, OnDestroy {
  @ViewChild('modelPopover') modelPopover!: Popover;

  private aiModelService = inject(AiModelService);
  private authService = inject(AuthService); // **Import AuthService**
  private modelsSubscription?: Subscription;

  sourceText = ''; selectedLength = 'medium'; selectedFormat = 'paragraph'; selectedLanguage: SelectOption | null = null; generatedContent: string | null = null;
  summaryLengths: ButtonOption[] = [{ label: 'Ngắn', value: 'short' }, { label: 'Vừa', value: 'medium' }, { label: 'Dài', value: 'long' }];
  summaryFormats: ButtonOption[] = [{ label: 'Đoạn văn', value: 'paragraph' }, { label: 'Gạch đầu dòng', value: 'bullets' }];
  languages: SelectOption[] = [{ name: 'Tiếng Việt', value: 'vi' }, { name: 'Tiếng Anh', value: 'en' }];

  selectedModel: AIModel = { id: '', name: 'Đang tải...', icon: '', profile: { description: '', sortOrder: 0 }, costType: 'free' };
  aiModels: AICategory[] = [];
  
  ngOnInit() {
    // **SỬA LỖI**: Lấy danh sách model được phép và truyền vào service
    const currentUser = this.authService.currentUser();
    const allowedModelNames = currentUser?.quotaProfile?.models ?? [];

    this.modelsSubscription = this.aiModelService.getModels(allowedModelNames).subscribe((data: AICategory[]) => {
      this.aiModels = data;
      this.setDefaultModel();
    });
    this.selectedLanguage = this.languages[0];
  }

  ngOnDestroy() { this.modelsSubscription?.unsubscribe(); }
  
  setDefaultModel() {
    const defaultModelName = 'Trợ lý EVNGENCO1';
    let defaultModel: AIModel | undefined;
    for (const group of this.aiModels) {
        const found = group.models.find(m => m.name === defaultModelName);
        if (found) { defaultModel = found; break; }
    }
    if (!defaultModel && this.aiModels.length > 0 && this.aiModels[0].models.length > 0) {
        defaultModel = this.aiModels[0].models[0];
    }
    if (defaultModel) { this.selectedModel = defaultModel; } 
    else {
      this.selectedModel = { id: '', name: 'Không có model', icon: 'pi pi-exclamation-triangle', profile: { description: 'Không tìm thấy model nào', sortOrder: 0 }, costType: 'free' };
    }
  }

  onModelSelected(model: AIModel): void { this.selectedModel = model; }
  
  generateSummary() {
    if(!this.sourceText.trim()){ this.generatedContent = `Vui lòng nhập nội dung cần tóm tắt.`; return; }
    const lengthText = this.summaryLengths.find(l => l.value === this.selectedLength)?.label.toLowerCase();
    if (this.selectedFormat === 'paragraph') { this.generatedContent = `Đây là bản tóm tắt ${lengthText} của văn bản...`; } 
    else { this.generatedContent = `<ul><li>Đây là ý chính đầu tiên.</li><li>Đây là điểm quan trọng thứ hai.</li></ul>`; }
  }

  clearAll() { this.sourceText = ''; this.selectedLength = 'medium'; this.selectedFormat = 'paragraph'; this.selectedLanguage = this.languages[0]; this.generatedContent = null; }
  copyContent() { if (this.generatedContent) { const tempDiv = document.createElement('div'); tempDiv.innerHTML = this.generatedContent; navigator.clipboard.writeText(tempDiv.textContent || ""); } }
}


================================================================================
File: crud.ts
Relative Path: src/app/pages/crud/crud.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/crud/crud.ts
Extension: .ts
Lines: 388
================================================================================

import { Component, OnInit, signal, ViewChild } from '@angular/core';
import { ConfirmationService, MessageService } from 'primeng/api';
import { Table, TableModule } from 'primeng/table';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { ButtonModule } from 'primeng/button';
import { RippleModule } from 'primeng/ripple';
import { ToastModule } from 'primeng/toast';
import { ToolbarModule } from 'primeng/toolbar';
import { RatingModule } from 'primeng/rating';
import { InputTextModule } from 'primeng/inputtext';
import { TextareaModule } from 'primeng/textarea';
import { SelectModule } from 'primeng/select';
import { RadioButtonModule } from 'primeng/radiobutton';
import { InputNumberModule } from 'primeng/inputnumber';
import { DialogModule } from 'primeng/dialog';
import { TagModule } from 'primeng/tag';
import { InputIconModule } from 'primeng/inputicon';
import { IconFieldModule } from 'primeng/iconfield';
import { ConfirmDialogModule } from 'primeng/confirmdialog';
import { Product, ProductService } from '../service/product.service';

interface Column {
    field: string;
    header: string;
    customExportHeader?: string;
}

interface ExportColumn {
    title: string;
    dataKey: string;
}

@Component({
    selector: 'app-crud',
    standalone: true,
    imports: [
        CommonModule,
        TableModule,
        FormsModule,
        ButtonModule,
        RippleModule,
        ToastModule,
        ToolbarModule,
        RatingModule,
        InputTextModule,
        TextareaModule,
        SelectModule,
        RadioButtonModule,
        InputNumberModule,
        DialogModule,
        TagModule,
        InputIconModule,
        IconFieldModule,
        ConfirmDialogModule
    ],
    template: `
        <p-toolbar styleClass="mb-6">
            <ng-template #start>
                <p-button label="New" icon="pi pi-plus" severity="secondary" class="mr-2" (onClick)="openNew()" />
                <p-button severity="secondary" label="Delete" icon="pi pi-trash" outlined (onClick)="deleteSelectedProducts()" [disabled]="!selectedProducts || !selectedProducts.length" />
            </ng-template>

            <ng-template #end>
                <p-button label="Export" icon="pi pi-upload" severity="secondary" (onClick)="exportCSV()" />
            </ng-template>
        </p-toolbar>

        <p-table
            #dt
            [value]="products()"
            [rows]="10"
            [columns]="cols"
            [paginator]="true"
            [globalFilterFields]="['name', 'country.name', 'representative.name', 'status']"
            [tableStyle]="{ 'min-width': '75rem' }"
            [(selection)]="selectedProducts"
            [rowHover]="true"
            dataKey="id"
            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} products"
            [showCurrentPageReport]="true"
            [rowsPerPageOptions]="[10, 20, 30]"
        >
            <ng-template #caption>
                <div class="flex items-center justify-between">
                    <h5 class="m-0">Manage Products</h5>
                    <p-iconfield>
                        <p-inputicon styleClass="pi pi-search" />
                        <input pInputText type="text" (input)="onGlobalFilter(dt, $event)" placeholder="Search..." />
                    </p-iconfield>
                </div>
            </ng-template>
            <ng-template #header>
                <tr>
                    <th style="width: 3rem">
                        <p-tableHeaderCheckbox />
                    </th>
                    <th style="min-width: 16rem">Code</th>
                    <th pSortableColumn="name" style="min-width:16rem">
                        Name
                        <p-sortIcon field="name" />
                    </th>
                    <th>Image</th>
                    <th pSortableColumn="price" style="min-width: 8rem">
                        Price
                        <p-sortIcon field="price" />
                    </th>
                    <th pSortableColumn="category" style="min-width:10rem">
                        Category
                        <p-sortIcon field="category" />
                    </th>
                    <th pSortableColumn="rating" style="min-width: 12rem">
                        Reviews
                        <p-sortIcon field="rating" />
                    </th>
                    <th pSortableColumn="inventoryStatus" style="min-width: 12rem">
                        Status
                        <p-sortIcon field="inventoryStatus" />
                    </th>
                    <th style="min-width: 12rem"></th>
                </tr>
            </ng-template>
            <ng-template #body let-product>
                <tr>
                    <td style="width: 3rem">
                        <p-tableCheckbox [value]="product" />
                    </td>
                    <td style="min-width: 12rem">{{ product.code }}</td>
                    <td style="min-width: 16rem">{{ product.name }}</td>
                    <td>
                        <img [src]="'https://primefaces.org/cdn/primeng/images/demo/product/' + product.image" [alt]="product.name" style="width: 64px" class="rounded" />
                    </td>
                    <td>{{ product.price | currency: 'USD' }}</td>
                    <td>{{ product.category }}</td>
                    <td>
                        <p-rating [(ngModel)]="product.rating" [readonly]="true" />
                    </td>
                    <td>
                        <p-tag [value]="product.inventoryStatus" [severity]="getSeverity(product.inventoryStatus)" />
                    </td>
                    <td>
                        <p-button icon="pi pi-pencil" class="mr-2" [rounded]="true" [outlined]="true" (click)="editProduct(product)" />
                        <p-button icon="pi pi-trash" severity="danger" [rounded]="true" [outlined]="true" (click)="deleteProduct(product)" />
                    </td>
                </tr>
            </ng-template>
        </p-table>

        <p-dialog [(visible)]="productDialog" [style]="{ width: '450px' }" header="Product Details" [modal]="true">
            <ng-template #content>
                <div class="flex flex-col gap-6">
                    <img [src]="'https://primefaces.org/cdn/primeng/images/demo/product/' + product.image" [alt]="product.image" class="block m-auto pb-4" *ngIf="product.image" />
                    <div>
                        <label for="name" class="block font-bold mb-3">Name</label>
                        <input type="text" pInputText id="name" [(ngModel)]="product.name" required autofocus fluid />
                        <small class="text-red-500" *ngIf="submitted && !product.name">Name is required.</small>
                    </div>
                    <div>
                        <label for="description" class="block font-bold mb-3">Description</label>
                        <textarea id="description" pTextarea [(ngModel)]="product.description" required rows="3" cols="20" fluid></textarea>
                    </div>

                    <div>
                        <label for="inventoryStatus" class="block font-bold mb-3">Inventory Status</label>
                        <p-select [(ngModel)]="product.inventoryStatus" inputId="inventoryStatus" [options]="statuses" optionLabel="label" optionValue="label" placeholder="Select a Status" fluid />
                    </div>

                    <div>
                        <span class="block font-bold mb-4">Category</span>
                        <div class="grid grid-cols-12 gap-4">
                            <div class="flex items-center gap-2 col-span-6">
                                <p-radiobutton id="category1" name="category" value="Accessories" [(ngModel)]="product.category" />
                                <label for="category1">Accessories</label>
                            </div>
                            <div class="flex items-center gap-2 col-span-6">
                                <p-radiobutton id="category2" name="category" value="Clothing" [(ngModel)]="product.category" />
                                <label for="category2">Clothing</label>
                            </div>
                            <div class="flex items-center gap-2 col-span-6">
                                <p-radiobutton id="category3" name="category" value="Electronics" [(ngModel)]="product.category" />
                                <label for="category3">Electronics</label>
                            </div>
                            <div class="flex items-center gap-2 col-span-6">
                                <p-radiobutton id="category4" name="category" value="Fitness" [(ngModel)]="product.category" />
                                <label for="category4">Fitness</label>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-12 gap-4">
                        <div class="col-span-6">
                            <label for="price" class="block font-bold mb-3">Price</label>
                            <p-inputnumber id="price" [(ngModel)]="product.price" mode="currency" currency="USD" locale="en-US" fluid />
                        </div>
                        <div class="col-span-6">
                            <label for="quantity" class="block font-bold mb-3">Quantity</label>
                            <p-inputnumber id="quantity" [(ngModel)]="product.quantity" fluid />
                        </div>
                    </div>
                </div>
            </ng-template>

            <ng-template #footer>
                <p-button label="Cancel" icon="pi pi-times" text (click)="hideDialog()" />
                <p-button label="Save" icon="pi pi-check" (click)="saveProduct()" />
            </ng-template>
        </p-dialog>

        <p-confirmdialog [style]="{ width: '450px' }" />
    `,
    providers: [MessageService, ProductService, ConfirmationService]
})
export class Crud implements OnInit {
    productDialog: boolean = false;

    products = signal<Product[]>([]);

    product!: Product;

    selectedProducts!: Product[] | null;

    submitted: boolean = false;

    statuses!: any[];

    @ViewChild('dt') dt!: Table;

    exportColumns!: ExportColumn[];

    cols!: Column[];

    constructor(
        private productService: ProductService,
        private messageService: MessageService,
        private confirmationService: ConfirmationService
    ) {}

    exportCSV() {
        this.dt.exportCSV();
    }

    ngOnInit() {
        this.loadDemoData();
    }

    loadDemoData() {
        this.productService.getProducts().then((data) => {
            this.products.set(data);
        });

        this.statuses = [
            { label: 'INSTOCK', value: 'instock' },
            { label: 'LOWSTOCK', value: 'lowstock' },
            { label: 'OUTOFSTOCK', value: 'outofstock' }
        ];

        this.cols = [
            { field: 'code', header: 'Code', customExportHeader: 'Product Code' },
            { field: 'name', header: 'Name' },
            { field: 'image', header: 'Image' },
            { field: 'price', header: 'Price' },
            { field: 'category', header: 'Category' }
        ];

        this.exportColumns = this.cols.map((col) => ({ title: col.header, dataKey: col.field }));
    }

    onGlobalFilter(table: Table, event: Event) {
        table.filterGlobal((event.target as HTMLInputElement).value, 'contains');
    }

    openNew() {
        this.product = {};
        this.submitted = false;
        this.productDialog = true;
    }

    editProduct(product: Product) {
        this.product = { ...product };
        this.productDialog = true;
    }

    deleteSelectedProducts() {
        this.confirmationService.confirm({
            message: 'Are you sure you want to delete the selected products?',
            header: 'Confirm',
            icon: 'pi pi-exclamation-triangle',
            accept: () => {
                this.products.set(this.products().filter((val) => !this.selectedProducts?.includes(val)));
                this.selectedProducts = null;
                this.messageService.add({
                    severity: 'success',
                    summary: 'Successful',
                    detail: 'Products Deleted',
                    life: 3000
                });
            }
        });
    }

    hideDialog() {
        this.productDialog = false;
        this.submitted = false;
    }

    deleteProduct(product: Product) {
        this.confirmationService.confirm({
            message: 'Are you sure you want to delete ' + product.name + '?',
            header: 'Confirm',
            icon: 'pi pi-exclamation-triangle',
            accept: () => {
                this.products.set(this.products().filter((val) => val.id !== product.id));
                this.product = {};
                this.messageService.add({
                    severity: 'success',
                    summary: 'Successful',
                    detail: 'Product Deleted',
                    life: 3000
                });
            }
        });
    }

    findIndexById(id: string): number {
        let index = -1;
        for (let i = 0; i < this.products().length; i++) {
            if (this.products()[i].id === id) {
                index = i;
                break;
            }
        }

        return index;
    }

    createId(): string {
        let id = '';
        var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        for (var i = 0; i < 5; i++) {
            id += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return id;
    }

    getSeverity(status: string) {
        switch (status) {
            case 'INSTOCK':
                return 'success';
            case 'LOWSTOCK':
                return 'warn';
            case 'OUTOFSTOCK':
                return 'danger';
            default:
                return 'info';
        }
    }

    saveProduct() {
        this.submitted = true;
        let _products = this.products();
        if (this.product.name?.trim()) {
            if (this.product.id) {
                _products[this.findIndexById(this.product.id)] = this.product;
                this.products.set([..._products]);
                this.messageService.add({
                    severity: 'success',
                    summary: 'Successful',
                    detail: 'Product Updated',
                    life: 3000
                });
            } else {
                this.product.id = this.createId();
                this.product.image = 'product-placeholder.svg';
                this.messageService.add({
                    severity: 'success',
                    summary: 'Successful',
                    detail: 'Product Created',
                    life: 3000
                });
                this.products.set([..._products, this.product]);
            }

            this.productDialog = false;
            this.product = {};
        }
    }
}


================================================================================
File: node.service.ts
Relative Path: src/app/pages/service/node.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/service/node.service.ts
Extension: .ts
Lines: 817
================================================================================

import { HttpClient } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { TreeNode } from 'primeng/api';

@Injectable()
export class NodeService {
    getTreeNodesData() {
        return [
            {
                key: '0',
                label: 'Documents',
                data: 'Documents Folder',
                icon: 'pi pi-fw pi-inbox',
                children: [
                    {
                        key: '0-0',
                        label: 'Work',
                        data: 'Work Folder',
                        icon: 'pi pi-fw pi-cog',
                        children: [
                            { key: '0-0-0', label: 'Expenses.doc', icon: 'pi pi-fw pi-file', data: 'Expenses Document' },
                            { key: '0-0-1', label: 'Resume.doc', icon: 'pi pi-fw pi-file', data: 'Resume Document' }
                        ]
                    },
                    {
                        key: '0-1',
                        label: 'Home',
                        data: 'Home Folder',
                        icon: 'pi pi-fw pi-home',
                        children: [{ key: '0-1-0', label: 'Invoices.txt', icon: 'pi pi-fw pi-file', data: 'Invoices for this month' }]
                    }
                ]
            },
            {
                key: '1',
                label: 'Events',
                data: 'Events Folder',
                icon: 'pi pi-fw pi-calendar',
                children: [
                    { key: '1-0', label: 'Meeting', icon: 'pi pi-fw pi-calendar-plus', data: 'Meeting' },
                    { key: '1-1', label: 'Product Launch', icon: 'pi pi-fw pi-calendar-plus', data: 'Product Launch' },
                    { key: '1-2', label: 'Report Review', icon: 'pi pi-fw pi-calendar-plus', data: 'Report Review' }
                ]
            },
            {
                key: '2',
                label: 'Movies',
                data: 'Movies Folder',
                icon: 'pi pi-fw pi-star-fill',
                children: [
                    {
                        key: '2-0',
                        icon: 'pi pi-fw pi-star-fill',
                        label: 'Al Pacino',
                        data: 'Pacino Movies',
                        children: [
                            { key: '2-0-0', label: 'Scarface', icon: 'pi pi-fw pi-video', data: 'Scarface Movie' },
                            { key: '2-0-1', label: 'Serpico', icon: 'pi pi-fw pi-video', data: 'Serpico Movie' }
                        ]
                    },
                    {
                        key: '2-1',
                        label: 'Robert De Niro',
                        icon: 'pi pi-fw pi-star-fill',
                        data: 'De Niro Movies',
                        children: [
                            { key: '2-1-0', label: 'Goodfellas', icon: 'pi pi-fw pi-video', data: 'Goodfellas Movie' },
                            { key: '2-1-1', label: 'Untouchables', icon: 'pi pi-fw pi-video', data: 'Untouchables Movie' }
                        ]
                    }
                ]
            }
        ];
    }

    getTreeTableNodesData() {
        return [
            {
                key: '0',
                data: {
                    name: 'Applications',
                    size: '100kb',
                    type: 'Folder'
                },
                children: [
                    {
                        key: '0-0',
                        data: {
                            name: 'Angular',
                            size: '25kb',
                            type: 'Folder'
                        },
                        children: [
                            {
                                key: '0-0-0',
                                data: {
                                    name: 'angular.app',
                                    size: '10kb',
                                    type: 'Application'
                                }
                            },
                            {
                                key: '0-0-1',
                                data: {
                                    name: 'native.app',
                                    size: '10kb',
                                    type: 'Application'
                                }
                            },
                            {
                                key: '0-0-2',
                                data: {
                                    name: 'mobile.app',
                                    size: '5kb',
                                    type: 'Application'
                                }
                            }
                        ]
                    },
                    {
                        key: '0-1',
                        data: {
                            name: 'editor.app',
                            size: '25kb',
                            type: 'Application'
                        }
                    },
                    {
                        key: '0-2',
                        data: {
                            name: 'settings.app',
                            size: '50kb',
                            type: 'Application'
                        }
                    }
                ]
            },
            {
                key: '1',
                data: {
                    name: 'Cloud',
                    size: '20kb',
                    type: 'Folder'
                },
                children: [
                    {
                        key: '1-0',
                        data: {
                            name: 'backup-1.zip',
                            size: '10kb',
                            type: 'Zip'
                        }
                    },
                    {
                        key: '1-1',
                        data: {
                            name: 'backup-2.zip',
                            size: '10kb',
                            type: 'Zip'
                        }
                    }
                ]
            },
            {
                key: '2',
                data: {
                    name: 'Desktop',
                    size: '150kb',
                    type: 'Folder'
                },
                children: [
                    {
                        key: '2-0',
                        data: {
                            name: 'note-meeting.txt',
                            size: '50kb',
                            type: 'Text'
                        }
                    },
                    {
                        key: '2-1',
                        data: {
                            name: 'note-todo.txt',
                            size: '100kb',
                            type: 'Text'
                        }
                    }
                ]
            },
            {
                key: '3',
                data: {
                    name: 'Documents',
                    size: '75kb',
                    type: 'Folder'
                },
                children: [
                    {
                        key: '3-0',
                        data: {
                            name: 'Work',
                            size: '55kb',
                            type: 'Folder'
                        },
                        children: [
                            {
                                key: '3-0-0',
                                data: {
                                    name: 'Expenses.doc',
                                    size: '30kb',
                                    type: 'Document'
                                }
                            },
                            {
                                key: '3-0-1',
                                data: {
                                    name: 'Resume.doc',
                                    size: '25kb',
                                    type: 'Resume'
                                }
                            }
                        ]
                    },
                    {
                        key: '3-1',
                        data: {
                            name: 'Home',
                            size: '20kb',
                            type: 'Folder'
                        },
                        children: [
                            {
                                key: '3-1-0',
                                data: {
                                    name: 'Invoices',
                                    size: '20kb',
                                    type: 'Text'
                                }
                            }
                        ]
                    }
                ]
            },
            {
                key: '4',
                data: {
                    name: 'Downloads',
                    size: '25kb',
                    type: 'Folder'
                },
                children: [
                    {
                        key: '4-0',
                        data: {
                            name: 'Spanish',
                            size: '10kb',
                            type: 'Folder'
                        },
                        children: [
                            {
                                key: '4-0-0',
                                data: {
                                    name: 'tutorial-a1.txt',
                                    size: '5kb',
                                    type: 'Text'
                                }
                            },
                            {
                                key: '4-0-1',
                                data: {
                                    name: 'tutorial-a2.txt',
                                    size: '5kb',
                                    type: 'Text'
                                }
                            }
                        ]
                    },
                    {
                        key: '4-1',
                        data: {
                            name: 'Travel',
                            size: '15kb',
                            type: 'Text'
                        },
                        children: [
                            {
                                key: '4-1-0',
                                data: {
                                    name: 'Hotel.pdf',
                                    size: '10kb',
                                    type: 'PDF'
                                }
                            },
                            {
                                key: '4-1-1',
                                data: {
                                    name: 'Flight.pdf',
                                    size: '5kb',
                                    type: 'PDF'
                                }
                            }
                        ]
                    }
                ]
            },
            {
                key: '5',
                data: {
                    name: 'Main',
                    size: '50kb',
                    type: 'Folder'
                },
                children: [
                    {
                        key: '5-0',
                        data: {
                            name: 'bin',
                            size: '50kb',
                            type: 'Link'
                        }
                    },
                    {
                        key: '5-1',
                        data: {
                            name: 'etc',
                            size: '100kb',
                            type: 'Link'
                        }
                    },
                    {
                        key: '5-2',
                        data: {
                            name: 'var',
                            size: '100kb',
                            type: 'Link'
                        }
                    }
                ]
            },
            {
                key: '6',
                data: {
                    name: 'Other',
                    size: '5kb',
                    type: 'Folder'
                },
                children: [
                    {
                        key: '6-0',
                        data: {
                            name: 'todo.txt',
                            size: '3kb',
                            type: 'Text'
                        }
                    },
                    {
                        key: '6-1',
                        data: {
                            name: 'logo.png',
                            size: '2kb',
                            type: 'Picture'
                        }
                    }
                ]
            },
            {
                key: '7',
                data: {
                    name: 'Pictures',
                    size: '150kb',
                    type: 'Folder'
                },
                children: [
                    {
                        key: '7-0',
                        data: {
                            name: 'barcelona.jpg',
                            size: '90kb',
                            type: 'Picture'
                        }
                    },
                    {
                        key: '7-1',
                        data: {
                            name: 'primeng.png',
                            size: '30kb',
                            type: 'Picture'
                        }
                    },
                    {
                        key: '7-2',
                        data: {
                            name: 'prime.jpg',
                            size: '30kb',
                            type: 'Picture'
                        }
                    }
                ]
            },
            {
                key: '8',
                data: {
                    name: 'Videos',
                    size: '1500kb',
                    type: 'Folder'
                },
                children: [
                    {
                        key: '8-0',
                        data: {
                            name: 'primefaces.mkv',
                            size: '1000kb',
                            type: 'Video'
                        }
                    },
                    {
                        key: '8-1',
                        data: {
                            name: 'intro.avi',
                            size: '500kb',
                            type: 'Video'
                        }
                    }
                ]
            }
        ];
    }

    getLazyNodesData() {
        return [
            {
                label: 'Lazy Node 0',
                data: 'Node 0',
                expandedIcon: 'pi pi-folder-open',
                collapsedIcon: 'pi pi-folder',
                leaf: false
            },
            {
                label: 'Lazy Node 1',
                data: 'Node 1',
                expandedIcon: 'pi pi-folder-open',
                collapsedIcon: 'pi pi-folder',
                leaf: false
            },
            {
                label: 'Lazy Node 1',
                data: 'Node 2',
                expandedIcon: 'pi pi-folder-open',
                collapsedIcon: 'pi pi-folder',
                leaf: false
            }
        ];
    }

    getFileSystemNodesData() {
        return [
            {
                data: {
                    name: 'Applications',
                    size: '200mb',
                    type: 'Folder'
                },
                children: [
                    {
                        data: {
                            name: 'Angular',
                            size: '25mb',
                            type: 'Folder'
                        },
                        children: [
                            {
                                data: {
                                    name: 'angular.app',
                                    size: '10mb',
                                    type: 'Application'
                                }
                            },
                            {
                                data: {
                                    name: 'cli.app',
                                    size: '10mb',
                                    type: 'Application'
                                }
                            },
                            {
                                data: {
                                    name: 'mobile.app',
                                    size: '5mb',
                                    type: 'Application'
                                }
                            }
                        ]
                    },
                    {
                        data: {
                            name: 'editor.app',
                            size: '25mb',
                            type: 'Application'
                        }
                    },
                    {
                        data: {
                            name: 'settings.app',
                            size: '50mb',
                            type: 'Application'
                        }
                    }
                ]
            },
            {
                data: {
                    name: 'Cloud',
                    size: '20mb',
                    type: 'Folder'
                },
                children: [
                    {
                        data: {
                            name: 'backup-1.zip',
                            size: '10mb',
                            type: 'Zip'
                        }
                    },
                    {
                        data: {
                            name: 'backup-2.zip',
                            size: '10mb',
                            type: 'Zip'
                        }
                    }
                ]
            },
            {
                data: {
                    name: 'Desktop',
                    size: '150kb',
                    type: 'Folder'
                },
                children: [
                    {
                        data: {
                            name: 'note-meeting.txt',
                            size: '50kb',
                            type: 'Text'
                        }
                    },
                    {
                        data: {
                            name: 'note-todo.txt',
                            size: '100kb',
                            type: 'Text'
                        }
                    }
                ]
            },
            {
                data: {
                    name: 'Documents',
                    size: '75kb',
                    type: 'Folder'
                },
                children: [
                    {
                        data: {
                            name: 'Work',
                            size: '55kb',
                            type: 'Folder'
                        },
                        children: [
                            {
                                data: {
                                    name: 'Expenses.doc',
                                    size: '30kb',
                                    type: 'Document'
                                }
                            },
                            {
                                data: {
                                    name: 'Resume.doc',
                                    size: '25kb',
                                    type: 'Resume'
                                }
                            }
                        ]
                    },
                    {
                        data: {
                            name: 'Home',
                            size: '20kb',
                            type: 'Folder'
                        },
                        children: [
                            {
                                data: {
                                    name: 'Invoices',
                                    size: '20kb',
                                    type: 'Text'
                                }
                            }
                        ]
                    }
                ]
            },
            {
                data: {
                    name: 'Downloads',
                    size: '25mb',
                    type: 'Folder'
                },
                children: [
                    {
                        data: {
                            name: 'Spanish',
                            size: '10mb',
                            type: 'Folder'
                        },
                        children: [
                            {
                                data: {
                                    name: 'tutorial-a1.txt',
                                    size: '5mb',
                                    type: 'Text'
                                }
                            },
                            {
                                data: {
                                    name: 'tutorial-a2.txt',
                                    size: '5mb',
                                    type: 'Text'
                                }
                            }
                        ]
                    },
                    {
                        data: {
                            name: 'Travel',
                            size: '15mb',
                            type: 'Text'
                        },
                        children: [
                            {
                                data: {
                                    name: 'Hotel.pdf',
                                    size: '10mb',
                                    type: 'PDF'
                                }
                            },
                            {
                                data: {
                                    name: 'Flight.pdf',
                                    size: '5mb',
                                    type: 'PDF'
                                }
                            }
                        ]
                    }
                ]
            },
            {
                data: {
                    name: 'Main',
                    size: '50mb',
                    type: 'Folder'
                },
                children: [
                    {
                        data: {
                            name: 'bin',
                            size: '50kb',
                            type: 'Link'
                        }
                    },
                    {
                        data: {
                            name: 'etc',
                            size: '100kb',
                            type: 'Link'
                        }
                    },
                    {
                        data: {
                            name: 'var',
                            size: '100kb',
                            type: 'Link'
                        }
                    }
                ]
            },
            {
                data: {
                    name: 'Other',
                    size: '5mb',
                    type: 'Folder'
                },
                children: [
                    {
                        data: {
                            name: 'todo.txt',
                            size: '3mb',
                            type: 'Text'
                        }
                    },
                    {
                        data: {
                            name: 'logo.png',
                            size: '2mb',
                            type: 'Picture'
                        }
                    }
                ]
            },
            {
                data: {
                    name: 'Pictures',
                    size: '150kb',
                    type: 'Folder'
                },
                children: [
                    {
                        data: {
                            name: 'barcelona.jpg',
                            size: '90kb',
                            type: 'Picture'
                        }
                    },
                    {
                        data: {
                            name: 'primeng.png',
                            size: '30kb',
                            type: 'Picture'
                        }
                    },
                    {
                        data: {
                            name: 'prime.jpg',
                            size: '30kb',
                            type: 'Picture'
                        }
                    }
                ]
            },
            {
                data: {
                    name: 'Videos',
                    size: '1500mb',
                    type: 'Folder'
                },
                children: [
                    {
                        data: {
                            name: 'primefaces.mkv',
                            size: '1000mb',
                            type: 'Video'
                        }
                    },
                    {
                        data: {
                            name: 'intro.avi',
                            size: '500mb',
                            type: 'Video'
                        }
                    }
                ]
            }
        ];
    }

    getDynamicTreeNodes(parentCount: number, childrenCount: number): TreeNode[] {
        const nodes: TreeNode[] = [];

        for (let parentIndex = 0; parentIndex < parentCount; parentIndex++) {
            const children: TreeNode[] = [];

            for (let childIndex = 0; childIndex < childrenCount; childIndex++) {
                children.push({
                    key: `${parentIndex}-${childIndex}`,
                    label: `Child ${parentIndex}-${childIndex}`,
                    selectable: true
                });
            }

            nodes.push({
                key: parentIndex.toString(),
                label: `Parent ${parentIndex}`,
                selectable: true,
                children: children
            });
        }

        return nodes;
    }

    getLargeTreeNodes() {
        return Promise.resolve(this.getDynamicTreeNodes(10, 100));
    }

    getTreeTableNodes() {
        return Promise.resolve(this.getTreeTableNodesData());
    }

    getTreeNodes() {
        return Promise.resolve(this.getTreeNodesData());
    }

    getFiles() {
        return Promise.resolve(this.getTreeNodesData());
    }

    getLazyFiles() {
        return Promise.resolve(this.getLazyNodesData());
    }

    getFilesystem() {
        return Promise.resolve(this.getFileSystemNodesData());
    }
}


================================================================================
File: photo.service.ts
Relative Path: src/app/pages/service/photo.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/service/photo.service.ts
Extension: .ts
Lines: 104
================================================================================

import { Injectable } from '@angular/core';

@Injectable()
export class PhotoService {
    getData() {
        return [
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria1.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria1s.jpg',
                alt: 'Description for Image 1',
                title: 'Title 1'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria2.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria2s.jpg',
                alt: 'Description for Image 2',
                title: 'Title 2'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria3.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria3s.jpg',
                alt: 'Description for Image 3',
                title: 'Title 3'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria4.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria4s.jpg',
                alt: 'Description for Image 4',
                title: 'Title 4'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria5.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria5s.jpg',
                alt: 'Description for Image 5',
                title: 'Title 5'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria6.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria6s.jpg',
                alt: 'Description for Image 6',
                title: 'Title 6'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria7.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria7s.jpg',
                alt: 'Description for Image 7',
                title: 'Title 7'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria8.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria8s.jpg',
                alt: 'Description for Image 8',
                title: 'Title 8'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria9.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria9s.jpg',
                alt: 'Description for Image 9',
                title: 'Title 9'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria10.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria10s.jpg',
                alt: 'Description for Image 10',
                title: 'Title 10'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria11.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria11s.jpg',
                alt: 'Description for Image 11',
                title: 'Title 11'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria12.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria12s.jpg',
                alt: 'Description for Image 12',
                title: 'Title 12'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria13.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria13s.jpg',
                alt: 'Description for Image 13',
                title: 'Title 13'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria14.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria14s.jpg',
                alt: 'Description for Image 14',
                title: 'Title 14'
            },
            {
                itemImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria15.jpg',
                thumbnailImageSrc: 'https://primefaces.org/cdn/primeng/images/galleria/galleria15s.jpg',
                alt: 'Description for Image 15',
                title: 'Title 15'
            }
        ];
    }

    getImages() {
        return Promise.resolve(this.getData());
    }
}


================================================================================
File: country.service.ts
Relative Path: src/app/pages/service/country.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/service/country.service.ts
Extension: .ts
Lines: 256
================================================================================

import { Injectable } from '@angular/core';

@Injectable()
export class CountryService {
    getData() {
        return [
            { name: 'Afghanistan', code: 'AF' },
            { name: 'Albania', code: 'AL' },
            { name: 'Algeria', code: 'DZ' },
            { name: 'American Samoa', code: 'AS' },
            { name: 'Andorra', code: 'AD' },
            { name: 'Angola', code: 'AO' },
            { name: 'Anguilla', code: 'AI' },
            { name: 'Antarctica', code: 'AQ' },
            { name: 'Antigua and Barbuda', code: 'AG' },
            { name: 'Argentina', code: 'AR' },
            { name: 'Armenia', code: 'AM' },
            { name: 'Aruba', code: 'AW' },
            { name: 'Australia', code: 'AU' },
            { name: 'Austria', code: 'AT' },
            { name: 'Azerbaijan', code: 'AZ' },
            { name: 'Bahamas', code: 'BS' },
            { name: 'Bahrain', code: 'BH' },
            { name: 'Bangladesh', code: 'BD' },
            { name: 'Barbados', code: 'BB' },
            { name: 'Belarus', code: 'BY' },
            { name: 'Belgium', code: 'BE' },
            { name: 'Belize', code: 'BZ' },
            { name: 'Benin', code: 'BJ' },
            { name: 'Bermuda', code: 'BM' },
            { name: 'Bhutan', code: 'BT' },
            { name: 'Bolivia', code: 'BO' },
            { name: 'Bosnia and Herzegovina', code: 'BA' },
            { name: 'Botswana', code: 'BW' },
            { name: 'Bouvet Island', code: 'BV' },
            { name: 'Brazil', code: 'BR' },
            { name: 'British Indian Ocean Territory', code: 'IO' },
            { name: 'Brunei Darussalam', code: 'BN' },
            { name: 'Bulgaria', code: 'BG' },
            { name: 'Burkina Faso', code: 'BF' },
            { name: 'Burundi', code: 'BI' },
            { name: 'Cambodia', code: 'KH' },
            { name: 'Cameroon', code: 'CM' },
            { name: 'Canada', code: 'CA' },
            { name: 'Cape Verde', code: 'CV' },
            { name: 'Cayman Islands', code: 'KY' },
            { name: 'Central African Republic', code: 'CF' },
            { name: 'Chad', code: 'TD' },
            { name: 'Chile', code: 'CL' },
            { name: 'China', code: 'CN' },
            { name: 'Christmas Island', code: 'CX' },
            { name: 'Cocos (Keeling) Islands', code: 'CC' },
            { name: 'Colombia', code: 'CO' },
            { name: 'Comoros', code: 'KM' },
            { name: 'Congo', code: 'CG' },
            { name: 'Congo, The Democratic Republic of the', code: 'CD' },
            { name: 'Cook Islands', code: 'CK' },
            { name: 'Costa Rica', code: 'CR' },
            { name: 'Cote D"Ivoire', code: 'CI' },
            { name: 'Croatia', code: 'HR' },
            { name: 'Cuba', code: 'CU' },
            { name: 'Cyprus', code: 'CY' },
            { name: 'Czech Republic', code: 'CZ' },
            { name: 'Denmark', code: 'DK' },
            { name: 'Djibouti', code: 'DJ' },
            { name: 'Dominica', code: 'DM' },
            { name: 'Dominican Republic', code: 'DO' },
            { name: 'Ecuador', code: 'EC' },
            { name: 'Egypt', code: 'EG' },
            { name: 'El Salvador', code: 'SV' },
            { name: 'Equatorial Guinea', code: 'GQ' },
            { name: 'Eritrea', code: 'ER' },
            { name: 'Estonia', code: 'EE' },
            { name: 'Ethiopia', code: 'ET' },
            { name: 'Falkland Islands (Malvinas)', code: 'FK' },
            { name: 'Faroe Islands', code: 'FO' },
            { name: 'Fiji', code: 'FJ' },
            { name: 'Finland', code: 'FI' },
            { name: 'France', code: 'FR' },
            { name: 'French Guiana', code: 'GF' },
            { name: 'French Polynesia', code: 'PF' },
            { name: 'French Southern Territories', code: 'TF' },
            { name: 'Gabon', code: 'GA' },
            { name: 'Gambia', code: 'GM' },
            { name: 'Georgia', code: 'GE' },
            { name: 'Germany', code: 'DE' },
            { name: 'Ghana', code: 'GH' },
            { name: 'Gibraltar', code: 'GI' },
            { name: 'Greece', code: 'GR' },
            { name: 'Greenland', code: 'GL' },
            { name: 'Grenada', code: 'GD' },
            { name: 'Guadeloupe', code: 'GP' },
            { name: 'Guam', code: 'GU' },
            { name: 'Guatemala', code: 'GT' },
            { name: 'Guernsey', code: 'GG' },
            { name: 'Guinea', code: 'GN' },
            { name: 'Guinea-Bissau', code: 'GW' },
            { name: 'Guyana', code: 'GY' },
            { name: 'Haiti', code: 'HT' },
            { name: 'Heard Island and Mcdonald Islands', code: 'HM' },
            { name: 'Holy See (Vatican City State)', code: 'VA' },
            { name: 'Honduras', code: 'HN' },
            { name: 'Hong Kong', code: 'HK' },
            { name: 'Hungary', code: 'HU' },
            { name: 'Iceland', code: 'IS' },
            { name: 'India', code: 'IN' },
            { name: 'Indonesia', code: 'ID' },
            { name: 'Iran, Islamic Republic Of', code: 'IR' },
            { name: 'Iraq', code: 'IQ' },
            { name: 'Ireland', code: 'IE' },
            { name: 'Isle of Man', code: 'IM' },
            { name: 'Israel', code: 'IL' },
            { name: 'Italy', code: 'IT' },
            { name: 'Jamaica', code: 'JM' },
            { name: 'Japan', code: 'JP' },
            { name: 'Jersey', code: 'JE' },
            { name: 'Jordan', code: 'JO' },
            { name: 'Kazakhstan', code: 'KZ' },
            { name: 'Kenya', code: 'KE' },
            { name: 'Kiribati', code: 'KI' },
            { name: 'Korea, Democratic People"S Republic of', code: 'KP' },
            { name: 'Korea, Republic of', code: 'KR' },
            { name: 'Kuwait', code: 'KW' },
            { name: 'Kyrgyzstan', code: 'KG' },
            { name: 'Lao People"S Democratic Republic', code: 'LA' },
            { name: 'Latvia', code: 'LV' },
            { name: 'Lebanon', code: 'LB' },
            { name: 'Lesotho', code: 'LS' },
            { name: 'Liberia', code: 'LR' },
            { name: 'Libyan Arab Jamahiriya', code: 'LY' },
            { name: 'Liechtenstein', code: 'LI' },
            { name: 'Lithuania', code: 'LT' },
            { name: 'Luxembourg', code: 'LU' },
            { name: 'Macao', code: 'MO' },
            { name: 'Macedonia, The Former Yugoslav Republic of', code: 'MK' },
            { name: 'Madagascar', code: 'MG' },
            { name: 'Malawi', code: 'MW' },
            { name: 'Malaysia', code: 'MY' },
            { name: 'Maldives', code: 'MV' },
            { name: 'Mali', code: 'ML' },
            { name: 'Malta', code: 'MT' },
            { name: 'Marshall Islands', code: 'MH' },
            { name: 'Martinique', code: 'MQ' },
            { name: 'Mauritania', code: 'MR' },
            { name: 'Mauritius', code: 'MU' },
            { name: 'Mayotte', code: 'YT' },
            { name: 'Mexico', code: 'MX' },
            { name: 'Micronesia, Federated States of', code: 'FM' },
            { name: 'Moldova, Republic of', code: 'MD' },
            { name: 'Monaco', code: 'MC' },
            { name: 'Mongolia', code: 'MN' },
            { name: 'Montserrat', code: 'MS' },
            { name: 'Morocco', code: 'MA' },
            { name: 'Mozambique', code: 'MZ' },
            { name: 'Myanmar', code: 'MM' },
            { name: 'Namibia', code: 'NA' },
            { name: 'Nauru', code: 'NR' },
            { name: 'Nepal', code: 'NP' },
            { name: 'Netherlands', code: 'NL' },
            { name: 'Netherlands Antilles', code: 'AN' },
            { name: 'New Caledonia', code: 'NC' },
            { name: 'New Zealand', code: 'NZ' },
            { name: 'Nicaragua', code: 'NI' },
            { name: 'Niger', code: 'NE' },
            { name: 'Nigeria', code: 'NG' },
            { name: 'Niue', code: 'NU' },
            { name: 'Norfolk Island', code: 'NF' },
            { name: 'Northern Mariana Islands', code: 'MP' },
            { name: 'Norway', code: 'NO' },
            { name: 'Oman', code: 'OM' },
            { name: 'Pakistan', code: 'PK' },
            { name: 'Palau', code: 'PW' },
            { name: 'Palestinian Territory, Occupied', code: 'PS' },
            { name: 'Panama', code: 'PA' },
            { name: 'Papua New Guinea', code: 'PG' },
            { name: 'Paraguay', code: 'PY' },
            { name: 'Peru', code: 'PE' },
            { name: 'Philippines', code: 'PH' },
            { name: 'Pitcairn', code: 'PN' },
            { name: 'Poland', code: 'PL' },
            { name: 'Portugal', code: 'PT' },
            { name: 'Puerto Rico', code: 'PR' },
            { name: 'Qatar', code: 'QA' },
            { name: 'Reunion', code: 'RE' },
            { name: 'Romania', code: 'RO' },
            { name: 'Russian Federation', code: 'RU' },
            { name: 'RWANDA', code: 'RW' },
            { name: 'Saint Helena', code: 'SH' },
            { name: 'Saint Kitts and Nevis', code: 'KN' },
            { name: 'Saint Lucia', code: 'LC' },
            { name: 'Saint Pierre and Miquelon', code: 'PM' },
            { name: 'Saint Vincent and the Grenadines', code: 'VC' },
            { name: 'Samoa', code: 'WS' },
            { name: 'San Marino', code: 'SM' },
            { name: 'Sao Tome and Principe', code: 'ST' },
            { name: 'Saudi Arabia', code: 'SA' },
            { name: 'Senegal', code: 'SN' },
            { name: 'Serbia and Montenegro', code: 'CS' },
            { name: 'Seychelles', code: 'SC' },
            { name: 'Sierra Leone', code: 'SL' },
            { name: 'Singapore', code: 'SG' },
            { name: 'Slovakia', code: 'SK' },
            { name: 'Slovenia', code: 'SI' },
            { name: 'Solomon Islands', code: 'SB' },
            { name: 'Somalia', code: 'SO' },
            { name: 'South Africa', code: 'ZA' },
            { name: 'South Georgia and the South Sandwich Islands', code: 'GS' },
            { name: 'Spain', code: 'ES' },
            { name: 'Sri Lanka', code: 'LK' },
            { name: 'Sudan', code: 'SD' },
            { name: 'Suriname', code: 'SR' },
            { name: 'Svalbard and Jan Mayen', code: 'SJ' },
            { name: 'Swaziland', code: 'SZ' },
            { name: 'Sweden', code: 'SE' },
            { name: 'Switzerland', code: 'CH' },
            { name: 'Syrian Arab Republic', code: 'SY' },
            { name: 'Taiwan, Province of China', code: 'TW' },
            { name: 'Tajikistan', code: 'TJ' },
            { name: 'Tanzania, United Republic of', code: 'TZ' },
            { name: 'Thailand', code: 'TH' },
            { name: 'Timor-Leste', code: 'TL' },
            { name: 'Togo', code: 'TG' },
            { name: 'Tokelau', code: 'TK' },
            { name: 'Tonga', code: 'TO' },
            { name: 'Trinidad and Tobago', code: 'TT' },
            { name: 'Tunisia', code: 'TN' },
            { name: 'Turkey', code: 'TR' },
            { name: 'Turkmenistan', code: 'TM' },
            { name: 'Turks and Caicos Islands', code: 'TC' },
            { name: 'Tuvalu', code: 'TV' },
            { name: 'Uganda', code: 'UG' },
            { name: 'Ukraine', code: 'UA' },
            { name: 'United Arab Emirates', code: 'AE' },
            { name: 'United Kingdom', code: 'GB' },
            { name: 'United States', code: 'US' },
            { name: 'United States Minor Outlying Islands', code: 'UM' },
            { name: 'Uruguay', code: 'UY' },
            { name: 'Uzbekistan', code: 'UZ' },
            { name: 'Vanuatu', code: 'VU' },
            { name: 'Venezuela', code: 'VE' },
            { name: 'Viet Nam', code: 'VN' },
            { name: 'Virgin Islands, British', code: 'VG' },
            { name: 'Virgin Islands, U.S.', code: 'VI' },
            { name: 'Wallis and Futuna', code: 'WF' },
            { name: 'Western Sahara', code: 'EH' },
            { name: 'Yemen', code: 'YE' },
            { name: 'Zambia', code: 'ZM' },
            { name: 'Zimbabwe', code: 'ZW' }
        ];
    }

    getCountries() {
        return Promise.resolve(this.getData());
    }
}


================================================================================
File: icon.service.ts
Relative Path: src/app/pages/service/icon.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/service/icon.service.ts
Extension: .ts
Lines: 24
================================================================================

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { map } from 'rxjs/operators';

@Injectable()
export class IconService {
    constructor(private http: HttpClient) {}

    icons!: any[];

    selectedIcon: any;

    apiUrl = 'assets/demo/data/icons.json';

    getIcons() {
        return this.http.get(this.apiUrl).pipe(
            map((response: any) => {
                this.icons = response.icons;
                return this.icons;
            })
        );
    }
}


================================================================================
File: customer.service.ts
Relative Path: src/app/pages/service/customer.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/service/customer.service.ts
Extension: .ts
Lines: 9058
================================================================================

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';

export interface Country {
    name?: string;
    code?: string;
}

export interface Representative {
    name?: string;
    image?: string;
}

export interface Customer {
    id?: number;
    name?: string;
    country?: Country;
    company?: string;
    date?: string;
    status?: string;
    activity?: number;
    representative?: Representative;
}

@Injectable()
export class CustomerService {
    getData() {
        return [
            {
                id: 1000,
                name: 'James Butt',
                country: {
                    name: 'Algeria',
                    code: 'dz'
                },
                company: 'Benton, John B Jr',
                date: '2015-09-13',
                status: 'unqualified',
                verified: true,
                activity: 17,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 70663
            },
            {
                id: 1001,
                name: 'Josephine Darakjy',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'Chanay, Jeffrey A Esq',
                date: '2019-02-09',
                status: 'negotiation',
                verified: true,
                activity: 0,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 82429
            },
            {
                id: 1002,
                name: 'Art Venere',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'Chemel, James L Cpa',
                date: '2017-05-13',
                status: 'qualified',
                verified: false,
                activity: 63,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 28334
            },
            {
                id: 1003,
                name: 'Lenna Paprocki',
                country: {
                    name: 'Slovenia',
                    code: 'si'
                },
                company: 'Feltz Printing Service',
                date: '2020-09-15',
                status: 'new',
                verified: false,
                activity: 37,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 88521
            },
            {
                id: 1004,
                name: 'Donette Foller',
                country: {
                    name: 'South Africa',
                    code: 'za'
                },
                company: 'Printing Dimensions',
                date: '2016-05-20',
                status: 'negotiation',
                verified: true,
                activity: 33,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 93905
            },
            {
                id: 1005,
                name: 'Simona Morasca',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'Chapman, Ross E Esq',
                date: '2018-02-16',
                status: 'qualified',
                verified: false,
                activity: 68,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 50041
            },
            {
                id: 1006,
                name: 'Mitsue Tollner',
                country: {
                    name: 'Paraguay',
                    code: 'py'
                },
                company: 'Morlong Associates',
                date: '2018-02-19',
                status: 'renewal',
                verified: true,
                activity: 54,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 58706
            },
            {
                id: 1007,
                name: 'Leota Dilliard',
                country: {
                    name: 'Serbia',
                    code: 'rs'
                },
                company: 'Commercial Press',
                date: '2019-08-13',
                status: 'renewal',
                verified: true,
                activity: 69,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 26640
            },
            {
                id: 1008,
                name: 'Sage Wieser',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'Truhlar And Truhlar Attys',
                date: '2018-11-21',
                status: 'unqualified',
                verified: true,
                activity: 76,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 65369
            },
            {
                id: 1009,
                name: 'Kris Marrier',
                country: {
                    name: 'Mexico',
                    code: 'mx'
                },
                company: 'King, Christopher A Esq',
                date: '2015-07-07',
                status: 'negotiation',
                verified: false,
                activity: 3,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 63451
            },
            {
                id: 1010,
                name: 'Minna Amigon',
                country: {
                    name: 'Romania',
                    code: 'ro'
                },
                company: 'Dorl, James J Esq',
                date: '2018-11-07',
                status: 'qualified',
                verified: false,
                activity: 38,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 71169
            },
            {
                id: 1011,
                name: 'Abel Maclead',
                country: {
                    name: 'Singapore',
                    code: 'sg'
                },
                company: 'Rangoni Of Florence',
                date: '2017-03-11',
                status: 'qualified',
                verified: true,
                activity: 87,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 96842
            },
            {
                id: 1012,
                name: 'Kiley Caldarera',
                country: {
                    name: 'Serbia',
                    code: 'rs'
                },
                company: 'Feiner Bros',
                date: '2015-10-20',
                status: 'unqualified',
                verified: false,
                activity: 80,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 92734
            },
            {
                id: 1013,
                name: 'Graciela Ruta',
                country: {
                    name: 'Chile',
                    code: 'cl'
                },
                company: 'Buckley Miller & Wright',
                date: '2016-07-25',
                status: 'negotiation',
                verified: false,
                activity: 59,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 45250
            },
            {
                id: 1014,
                name: 'Cammy Albares',
                country: {
                    name: 'Philippines',
                    code: 'ph'
                },
                company: 'Rousseaux, Michael Esq',
                date: '2019-06-25',
                status: 'new',
                verified: true,
                activity: 90,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 30236
            },
            {
                id: 1015,
                name: 'Mattie Poquette',
                country: {
                    name: 'Venezuela',
                    code: 've'
                },
                company: 'Century Communications',
                date: '2017-12-12',
                status: 'negotiation',
                verified: false,
                activity: 52,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 64533
            },
            {
                id: 1016,
                name: 'Meaghan Garufi',
                country: {
                    name: 'Malaysia',
                    code: 'my'
                },
                company: 'Bolton, Wilbur Esq',
                date: '2018-07-04',
                status: 'unqualified',
                verified: false,
                activity: 31,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 37279
            },
            {
                id: 1017,
                name: 'Gladys Rim',
                country: {
                    name: 'Netherlands',
                    code: 'nl'
                },
                company: 'T M Byxbee Company Pc',
                date: '2020-02-27',
                status: 'renewal',
                verified: true,
                activity: 48,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 27381
            },
            {
                id: 1018,
                name: 'Yuki Whobrey',
                country: {
                    name: 'Israel',
                    code: 'il'
                },
                company: 'Farmers Insurance Group',
                date: '2017-12-21',
                status: 'negotiation',
                verified: true,
                activity: 16,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 9257
            },
            {
                id: 1019,
                name: 'Fletcher Flosi',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'Post Box Services Plus',
                date: '2016-01-04',
                status: 'renewal',
                verified: true,
                activity: 19,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 67783
            },
            {
                id: 1020,
                name: 'Bette Nicka',
                country: {
                    name: 'Paraguay',
                    code: 'py'
                },
                company: 'Sport En Art',
                date: '2016-10-21',
                status: 'renewal',
                verified: false,
                activity: 100,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 4609
            },
            {
                id: 1021,
                name: 'Veronika Inouye',
                country: {
                    name: 'Ecuador',
                    code: 'ec'
                },
                company: 'C 4 Network Inc',
                date: '2017-03-24',
                status: 'renewal',
                verified: false,
                activity: 72,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 26565
            },
            {
                id: 1022,
                name: 'Willard Kolmetz',
                country: {
                    name: 'Tunisia',
                    code: 'tn'
                },
                company: 'Ingalls, Donald R Esq',
                date: '2017-04-15',
                status: 'renewal',
                verified: true,
                activity: 94,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 75876
            },
            {
                id: 1023,
                name: 'Maryann Royster',
                country: {
                    name: 'Belarus',
                    code: 'by'
                },
                company: 'Franklin, Peter L Esq',
                date: '2017-03-11',
                status: 'qualified',
                verified: false,
                activity: 56,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 41121
            },
            {
                id: 1024,
                name: 'Alisha Slusarski',
                country: {
                    name: 'Iceland',
                    code: 'is'
                },
                company: 'Wtlz Power 107 Fm',
                date: '2018-03-27',
                status: 'qualified',
                verified: true,
                activity: 7,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 91691
            },
            {
                id: 1025,
                name: 'Allene Iturbide',
                country: {
                    name: 'Italy',
                    code: 'it'
                },
                company: 'Ledecky, David Esq',
                date: '2016-02-20',
                status: 'qualified',
                verified: true,
                activity: 1,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 40137
            },
            {
                id: 1026,
                name: 'Chanel Caudy',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'Professional Image Inc',
                date: '2018-06-24',
                status: 'new',
                verified: true,
                activity: 26,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 21304
            },
            {
                id: 1027,
                name: 'Ezekiel Chui',
                country: {
                    name: 'Ireland',
                    code: 'ie'
                },
                company: 'Sider, Donald C Esq',
                date: '2016-09-24',
                status: 'new',
                verified: false,
                activity: 76,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 60454
            },
            {
                id: 1028,
                name: 'Willow Kusko',
                country: {
                    name: 'Romania',
                    code: 'ro'
                },
                company: 'U Pull It',
                date: '2020-04-11',
                status: 'qualified',
                verified: true,
                activity: 7,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 17565
            },
            {
                id: 1029,
                name: 'Bernardo Figeroa',
                country: {
                    name: 'Israel',
                    code: 'il'
                },
                company: 'Clark, Richard Cpa',
                date: '2018-04-11',
                status: 'renewal',
                verified: true,
                activity: 81,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 17774
            },
            {
                id: 1030,
                name: 'Ammie Corrio',
                country: {
                    name: 'Hungary',
                    code: 'hu'
                },
                company: 'Moskowitz, Barry S',
                date: '2016-06-11',
                status: 'negotiation',
                verified: true,
                activity: 56,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 49201
            },
            {
                id: 1031,
                name: 'Francine Vocelka',
                country: {
                    name: 'Honduras',
                    code: 'hn'
                },
                company: 'Cascade Realty Advisors Inc',
                date: '2017-08-02',
                status: 'qualified',
                verified: true,
                activity: 94,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 67126
            },
            {
                id: 1032,
                name: 'Ernie Stenseth',
                country: {
                    name: 'Australia',
                    code: 'au'
                },
                company: 'Knwz Newsradio',
                date: '2018-06-06',
                status: 'renewal',
                verified: true,
                activity: 68,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 76017
            },
            {
                id: 1033,
                name: 'Albina Glick',
                country: {
                    name: 'Ukraine',
                    code: 'ua'
                },
                company: 'Giampetro, Anthony D',
                date: '2019-08-08',
                status: 'negotiation',
                verified: true,
                activity: 85,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 91201
            },
            {
                id: 1034,
                name: 'Alishia Sergi',
                country: {
                    name: 'Qatar',
                    code: 'qa'
                },
                company: 'Milford Enterprises Inc',
                date: '2018-05-19',
                status: 'negotiation',
                verified: false,
                activity: 46,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 12237
            },
            {
                id: 1035,
                name: 'Solange Shinko',
                country: {
                    name: 'Cameroon',
                    code: 'cm'
                },
                company: 'Mosocco, Ronald A',
                date: '2015-02-12',
                status: 'qualified',
                verified: true,
                activity: 32,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 34072
            },
            {
                id: 1036,
                name: 'Jose Stockham',
                country: {
                    name: 'Italy',
                    code: 'it'
                },
                company: 'Tri State Refueler Co',
                date: '2018-04-25',
                status: 'qualified',
                verified: true,
                activity: 77,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 94909
            },
            {
                id: 1037,
                name: 'Rozella Ostrosky',
                country: {
                    name: 'Venezuela',
                    code: 've'
                },
                company: 'Parkway Company',
                date: '2016-02-27',
                status: 'unqualified',
                verified: true,
                activity: 66,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 57245
            },
            {
                id: 1038,
                name: 'Valentine Gillian',
                country: {
                    name: 'Paraguay',
                    code: 'py'
                },
                company: 'Fbs Business Finance',
                date: '2019-09-17',
                status: 'qualified',
                verified: true,
                activity: 25,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 75502
            },
            {
                id: 1039,
                name: 'Kati Rulapaugh',
                country: {
                    name: 'Puerto Rico',
                    code: 'pr'
                },
                company: 'Eder Assocs Consltng Engrs Pc',
                date: '2016-12-03',
                status: 'renewal',
                verified: false,
                activity: 51,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 82075
            },
            {
                id: 1040,
                name: 'Youlanda Schemmer',
                country: {
                    name: 'Bolivia',
                    code: 'bo'
                },
                company: 'Tri M Tool Inc',
                date: '2017-12-15',
                status: 'negotiation',
                verified: true,
                activity: 49,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 19208
            },
            {
                id: 1041,
                name: 'Dyan Oldroyd',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'International Eyelets Inc',
                date: '2017-02-02',
                status: 'qualified',
                verified: false,
                activity: 5,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 50194
            },
            {
                id: 1042,
                name: 'Roxane Campain',
                country: {
                    name: 'France',
                    code: 'fr'
                },
                company: 'Rapid Trading Intl',
                date: '2018-12-25',
                status: 'unqualified',
                verified: false,
                activity: 100,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 77714
            },
            {
                id: 1043,
                name: 'Lavera Perin',
                country: {
                    name: 'Vietnam',
                    code: 'vn'
                },
                company: 'Abc Enterprises Inc',
                date: '2018-04-10',
                status: 'qualified',
                verified: false,
                activity: 71,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 35740
            },
            {
                id: 1044,
                name: 'Erick Ferencz',
                country: {
                    name: 'Belgium',
                    code: 'be'
                },
                company: 'Cindy Turner Associates',
                date: '2018-05-06',
                status: 'unqualified',
                verified: true,
                activity: 54,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 30790
            },
            {
                id: 1045,
                name: 'Fatima Saylors',
                country: {
                    name: 'Canada',
                    code: 'ca'
                },
                company: 'Stanton, James D Esq',
                date: '2019-07-10',
                status: 'renewal',
                verified: true,
                activity: 93,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 52343
            },
            {
                id: 1046,
                name: 'Jina Briddick',
                country: {
                    name: 'Mexico',
                    code: 'mx'
                },
                company: 'Grace Pastries Inc',
                date: '2018-02-19',
                status: 'unqualified',
                verified: false,
                activity: 97,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 53966
            },
            {
                id: 1047,
                name: 'Kanisha Waycott',
                country: {
                    name: 'Ecuador',
                    code: 'ec'
                },
                company: 'Schroer, Gene E Esq',
                date: '2019-11-27',
                status: 'new',
                verified: false,
                activity: 80,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 9920
            },
            {
                id: 1048,
                name: 'Emerson Bowley',
                country: {
                    name: 'Finland',
                    code: 'fi'
                },
                company: 'Knights Inn',
                date: '2018-11-24',
                status: 'new',
                verified: false,
                activity: 63,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 78069
            },
            {
                id: 1049,
                name: 'Blair Malet',
                country: {
                    name: 'Finland',
                    code: 'fi'
                },
                company: 'Bollinger Mach Shp & Shipyard',
                date: '2018-04-19',
                status: 'new',
                verified: true,
                activity: 92,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 65005
            },
            {
                id: 1050,
                name: 'Brock Bolognia',
                country: {
                    name: 'Bolivia',
                    code: 'bo'
                },
                company: 'Orinda News',
                date: '2019-09-06',
                status: 'renewal',
                verified: true,
                activity: 72,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 51038
            },
            {
                id: 1051,
                name: 'Lorrie Nestle',
                country: {
                    name: 'Germany',
                    code: 'de'
                },
                company: 'Ballard Spahr Andrews',
                date: '2018-04-26',
                status: 'renewal',
                verified: false,
                activity: 36,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 28218
            },
            {
                id: 1052,
                name: 'Sabra Uyetake',
                country: {
                    name: 'Peru',
                    code: 'pe'
                },
                company: 'Lowy Limousine Service',
                date: '2018-04-12',
                status: 'new',
                verified: false,
                activity: 31,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 78527
            },
            {
                id: 1053,
                name: 'Marjory Mastella',
                country: {
                    name: 'Netherlands',
                    code: 'nl'
                },
                company: 'Vicon Corporation',
                date: '2018-01-24',
                status: 'negotiation',
                verified: false,
                activity: 89,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 23381
            },
            {
                id: 1054,
                name: 'Karl Klonowski',
                country: {
                    name: 'Saudi Arabia',
                    code: 'sa'
                },
                company: 'Rossi, Michael M',
                date: '2017-04-17',
                status: 'unqualified',
                verified: true,
                activity: 27,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 64821
            },
            {
                id: 1055,
                name: 'Tonette Wenner',
                country: {
                    name: 'Australia',
                    code: 'au'
                },
                company: 'Northwest Publishing',
                date: '2019-04-14',
                status: 'qualified',
                verified: false,
                activity: 27,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 55334
            },
            {
                id: 1056,
                name: 'Amber Monarrez',
                country: {
                    name: 'Sweden',
                    code: 'se'
                },
                company: 'Branford Wire & Mfg Co',
                date: '2019-09-09',
                status: 'new',
                verified: false,
                activity: 79,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 83391
            },
            {
                id: 1057,
                name: 'Shenika Seewald',
                country: {
                    name: 'Australia',
                    code: 'au'
                },
                company: 'East Coast Marketing',
                date: '2017-02-18',
                status: 'renewal',
                verified: true,
                activity: 39,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 31580
            },
            {
                id: 1058,
                name: 'Delmy Ahle',
                country: {
                    name: 'Belgium',
                    code: 'be'
                },
                company: 'Wye Technologies Inc',
                date: '2020-10-05',
                status: 'unqualified',
                verified: false,
                activity: 55,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 11723
            },
            {
                id: 1059,
                name: 'Deeanna Juhas',
                country: {
                    name: 'Sweden',
                    code: 'se'
                },
                company: 'Healy, George W Iv',
                date: '2018-09-28',
                status: 'negotiation',
                verified: false,
                activity: 79,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 8454
            },
            {
                id: 1060,
                name: 'Blondell Pugh',
                country: {
                    name: 'Ireland',
                    code: 'ie'
                },
                company: 'Alpenlite Inc',
                date: '2016-06-16',
                status: 'renewal',
                verified: false,
                activity: 49,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 99235
            },
            {
                id: 1061,
                name: 'Jamal Vanausdal',
                country: {
                    name: 'Morocco',
                    code: 'ma'
                },
                company: 'Hubbard, Bruce Esq',
                date: '2017-05-25',
                status: 'negotiation',
                verified: true,
                activity: 87,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 15656
            },
            {
                id: 1062,
                name: 'Cecily Hollack',
                country: {
                    name: 'Bolivia',
                    code: 'bo'
                },
                company: 'Arthur A Oliver & Son Inc',
                date: '2020-05-09',
                status: 'negotiation',
                verified: true,
                activity: 5,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 60586
            },
            {
                id: 1063,
                name: 'Carmelina Lindall',
                country: {
                    name: 'Puerto Rico',
                    code: 'pr'
                },
                company: 'George Jessop Carter Jewelers',
                date: '2019-09-07',
                status: 'qualified',
                verified: true,
                activity: 77,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 86239
            },
            {
                id: 1064,
                name: 'Maurine Yglesias',
                country: {
                    name: 'Taiwan',
                    code: 'tw'
                },
                company: 'Schultz, Thomas C Md',
                date: '2015-08-10',
                status: 'renewal',
                verified: false,
                activity: 94,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 15621
            },
            {
                id: 1065,
                name: 'Tawna Buvens',
                country: {
                    name: 'Indonesia',
                    code: 'id'
                },
                company: 'H H H Enterprises Inc',
                date: '2018-03-20',
                status: 'new',
                verified: false,
                activity: 25,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 77248
            },
            {
                id: 1066,
                name: 'Penney Weight',
                country: {
                    name: 'South Africa',
                    code: 'za'
                },
                company: 'Hawaiian King Hotel',
                date: '2020-03-03',
                status: 'qualified',
                verified: false,
                activity: 96,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 478
            },
            {
                id: 1067,
                name: 'Elly Morocco',
                country: {
                    name: 'Thailand',
                    code: 'th'
                },
                company: 'Killion Industries',
                date: '2018-09-18',
                status: 'qualified',
                verified: true,
                activity: 38,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 62505
            },
            {
                id: 1068,
                name: 'Ilene Eroman',
                country: {
                    name: 'Netherlands',
                    code: 'nl'
                },
                company: 'Robinson, William J Esq',
                date: '2019-06-08',
                status: 'new',
                verified: true,
                activity: 49,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 91480
            },
            {
                id: 1069,
                name: 'Vallie Mondella',
                country: {
                    name: 'Latvia',
                    code: 'lv'
                },
                company: 'Private Properties',
                date: '2018-12-06',
                status: 'new',
                verified: false,
                activity: 16,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 21671
            },
            {
                id: 1070,
                name: 'Kallie Blackwood',
                country: {
                    name: 'Iceland',
                    code: 'is'
                },
                company: 'Rowley Schlimgen Inc',
                date: '2017-04-05',
                status: 'unqualified',
                verified: false,
                activity: 25,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 13775
            },
            {
                id: 1071,
                name: 'Johnetta Abdallah',
                country: {
                    name: 'Netherlands',
                    code: 'nl'
                },
                company: 'Forging Specialties',
                date: '2015-02-02',
                status: 'new',
                verified: false,
                activity: 16,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 60253
            },
            {
                id: 1072,
                name: 'Bobbye Rhym',
                country: {
                    name: 'Ukraine',
                    code: 'ua'
                },
                company: 'Smits, Patricia Garity',
                date: '2018-08-17',
                status: 'qualified',
                verified: true,
                activity: 85,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 75225
            },
            {
                id: 1073,
                name: 'Micaela Rhymes',
                country: {
                    name: 'France',
                    code: 'fr'
                },
                company: 'H Lee Leonard Attorney At Law',
                date: '2018-09-08',
                status: 'renewal',
                verified: true,
                activity: 92,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 3308
            },
            {
                id: 1074,
                name: 'Tamar Hoogland',
                country: {
                    name: 'Guatemala',
                    code: 'gt'
                },
                company: 'A K Construction Co',
                date: '2018-11-13',
                status: 'negotiation',
                verified: true,
                activity: 22,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 19711
            },
            {
                id: 1075,
                name: 'Moon Parlato',
                country: {
                    name: 'Czech Republic',
                    code: 'cz'
                },
                company: 'Ambelang, Jessica M Md',
                date: '2019-08-18',
                status: 'renewal',
                verified: false,
                activity: 64,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 55110
            },
            {
                id: 1076,
                name: 'Laurel Reitler',
                country: {
                    name: 'United Kingdom',
                    code: 'gb'
                },
                company: 'Q A Service',
                date: '2015-04-02',
                status: 'negotiation',
                verified: false,
                activity: 80,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 62392
            },
            {
                id: 1077,
                name: 'Delisa Crupi',
                country: {
                    name: 'Taiwan',
                    code: 'tw'
                },
                company: 'Wood & Whitacre Contractors',
                date: '2017-09-15',
                status: 'unqualified',
                verified: false,
                activity: 70,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 76530
            },
            {
                id: 1078,
                name: 'Viva Toelkes',
                country: {
                    name: 'United States',
                    code: 'us'
                },
                company: 'Mark Iv Press Ltd',
                date: '2017-03-27',
                status: 'qualified',
                verified: false,
                activity: 16,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 7460
            },
            {
                id: 1079,
                name: 'Elza Lipke',
                country: {
                    name: 'Ireland',
                    code: 'ie'
                },
                company: 'Museum Of Science & Industry',
                date: '2017-06-01',
                status: 'negotiation',
                verified: true,
                activity: 90,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 42251
            },
            {
                id: 1080,
                name: 'Devorah Chickering',
                country: {
                    name: 'Spain',
                    code: 'es'
                },
                company: 'Garrison Ind',
                date: '2017-03-14',
                status: 'negotiation',
                verified: true,
                activity: 96,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 36435
            },
            {
                id: 1081,
                name: 'Timothy Mulqueen',
                country: {
                    name: 'Netherlands',
                    code: 'nl'
                },
                company: 'Saronix Nymph Products',
                date: '2018-07-09',
                status: 'renewal',
                verified: true,
                activity: 77,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 39197
            },
            {
                id: 1082,
                name: 'Arlette Honeywell',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'Smc Inc',
                date: '2018-09-11',
                status: 'negotiation',
                verified: true,
                activity: 46,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 72707
            },
            {
                id: 1083,
                name: 'Dominque Dickerson',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'E A I Electronic Assocs Inc',
                date: '2017-11-12',
                status: 'qualified',
                verified: true,
                activity: 83,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 97965
            },
            {
                id: 1084,
                name: 'Lettie Isenhower',
                country: {
                    name: 'Canada',
                    code: 'ca'
                },
                company: 'Conte, Christopher A Esq',
                date: '2016-03-01',
                status: 'qualified',
                verified: true,
                activity: 83,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 5823
            },
            {
                id: 1085,
                name: 'Myra Munns',
                country: {
                    name: 'Lithuania',
                    code: 'lt'
                },
                company: 'Anker Law Office',
                date: '2016-05-21',
                status: 'unqualified',
                verified: true,
                activity: 49,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 96471
            },
            {
                id: 1086,
                name: 'Stephaine Barfield',
                country: {
                    name: 'Belgium',
                    code: 'be'
                },
                company: 'Beutelschies & Company',
                date: '2016-01-22',
                status: 'new',
                verified: true,
                activity: 34,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 33710
            },
            {
                id: 1087,
                name: 'Lai Gato',
                country: {
                    name: 'Nigeria',
                    code: 'ng'
                },
                company: 'Fligg, Kenneth I Jr',
                date: '2016-07-26',
                status: 'unqualified',
                verified: false,
                activity: 64,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 30611
            },
            {
                id: 1088,
                name: 'Stephen Emigh',
                country: {
                    name: 'Cuba',
                    code: 'cu'
                },
                company: 'Sharp, J Daniel Esq',
                date: '2020-07-24',
                status: 'renewal',
                verified: false,
                activity: 51,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 32960
            },
            {
                id: 1089,
                name: 'Tyra Shields',
                country: {
                    name: 'Honduras',
                    code: 'hn'
                },
                company: 'Assink, Anne H Esq',
                date: '2019-11-10',
                status: 'negotiation',
                verified: false,
                activity: 11,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 57423
            },
            {
                id: 1090,
                name: 'Tammara Wardrip',
                country: {
                    name: 'Saudi Arabia',
                    code: 'sa'
                },
                company: 'Jewel My Shop Inc',
                date: '2016-06-05',
                status: 'renewal',
                verified: true,
                activity: 64,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 23027
            },
            {
                id: 1091,
                name: 'Cory Gibes',
                country: {
                    name: 'Malaysia',
                    code: 'my'
                },
                company: 'Chinese Translation Resources',
                date: '2016-02-28',
                status: 'new',
                verified: false,
                activity: 44,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 84182
            },
            {
                id: 1092,
                name: 'Danica Bruschke',
                country: {
                    name: 'Taiwan',
                    code: 'tw'
                },
                company: 'Stevens, Charles T',
                date: '2018-12-13',
                status: 'unqualified',
                verified: true,
                activity: 62,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 25237
            },
            {
                id: 1093,
                name: 'Wilda Giguere',
                country: {
                    name: 'Iceland',
                    code: 'is'
                },
                company: 'Mclaughlin, Luther W Cpa',
                date: '2017-06-16',
                status: 'new',
                verified: true,
                activity: 79,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 87736
            },
            {
                id: 1094,
                name: 'Elvera Benimadho',
                country: {
                    name: 'Malaysia',
                    code: 'my'
                },
                company: 'Tree Musketeers',
                date: '2019-02-17',
                status: 'negotiation',
                verified: true,
                activity: 50,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 38674
            },
            {
                id: 1095,
                name: 'Carma Vanheusen',
                country: {
                    name: 'Turkey',
                    code: 'tr'
                },
                company: 'Springfield Div Oh Edison Co',
                date: '2019-11-26',
                status: 'renewal',
                verified: false,
                activity: 84,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 67762
            },
            {
                id: 1096,
                name: 'Malinda Hochard',
                country: {
                    name: 'Serbia',
                    code: 'rs'
                },
                company: 'Logan Memorial Hospital',
                date: '2016-07-06',
                status: 'new',
                verified: false,
                activity: 88,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 81299
            },
            {
                id: 1097,
                name: 'Natalie Fern',
                country: {
                    name: 'Canada',
                    code: 'ca'
                },
                company: 'Kelly, Charles G Esq',
                date: '2019-10-02',
                status: 'negotiation',
                verified: true,
                activity: 44,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 64794
            },
            {
                id: 1098,
                name: 'Lisha Centini',
                country: {
                    name: 'Netherlands',
                    code: 'nl'
                },
                company: 'Industrial Paper Shredders Inc',
                date: '2018-07-05',
                status: 'new',
                verified: true,
                activity: 7,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 7815
            },
            {
                id: 1099,
                name: 'Arlene Klusman',
                country: {
                    name: 'Jamaica',
                    code: 'jm'
                },
                company: 'Beck Horizon Builders',
                date: '2018-05-14',
                status: 'negotiation',
                verified: true,
                activity: 99,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 37976
            },
            {
                id: 1100,
                name: 'Alease Buemi',
                country: {
                    name: 'Costa Rica',
                    code: 'cr'
                },
                company: 'Porto Cayo At Hawks Cay',
                date: '2018-03-14',
                status: 'unqualified',
                verified: true,
                activity: 0,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 59594
            },
            {
                id: 1101,
                name: 'Louisa Cronauer',
                country: {
                    name: 'Costa Rica',
                    code: 'cr'
                },
                company: 'Pacific Grove Museum Ntrl Hist',
                date: '2018-09-23',
                status: 'qualified',
                verified: false,
                activity: 3,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 92528
            },
            {
                id: 1102,
                name: 'Angella Cetta',
                country: {
                    name: 'Vietnam',
                    code: 'vn'
                },
                company: 'Bender & Hatley Pc',
                date: '2018-04-10',
                status: 'qualified',
                verified: false,
                activity: 88,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 58964
            },
            {
                id: 1103,
                name: 'Cyndy Goldammer',
                country: {
                    name: 'Burkina Faso',
                    code: 'bf'
                },
                company: 'Di Cristina J & Son',
                date: '2017-09-18',
                status: 'unqualified',
                verified: false,
                activity: 92,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 65860
            },
            {
                id: 1104,
                name: 'Rosio Cork',
                country: {
                    name: 'Singapore',
                    code: 'sg'
                },
                company: 'Green Goddess',
                date: '2017-08-19',
                status: 'negotiation',
                verified: true,
                activity: 19,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 63863
            },
            {
                id: 1105,
                name: 'Celeste Korando',
                country: {
                    name: 'Costa Rica',
                    code: 'cr'
                },
                company: 'American Arts & Graphics',
                date: '2020-06-18',
                status: 'negotiation',
                verified: true,
                activity: 21,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 37510
            },
            {
                id: 1106,
                name: 'Twana Felger',
                country: {
                    name: 'Croatia',
                    code: 'hr'
                },
                company: 'Opryland Hotel',
                date: '2016-11-18',
                status: 'negotiation',
                verified: false,
                activity: 97,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 63876
            },
            {
                id: 1107,
                name: 'Estrella Samu',
                country: {
                    name: 'Vietnam',
                    code: 'vn'
                },
                company: 'Marking Devices Pubg Co',
                date: '2017-06-25',
                status: 'unqualified',
                verified: false,
                activity: 27,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 93263
            },
            {
                id: 1108,
                name: 'Donte Kines',
                country: {
                    name: 'Slovakia',
                    code: 'sk'
                },
                company: 'W Tc Industries Inc',
                date: '2019-02-16',
                status: 'new',
                verified: true,
                activity: 35,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 57198
            },
            {
                id: 1109,
                name: 'Tiffiny Steffensmeier',
                country: {
                    name: 'Pakistan',
                    code: 'pk'
                },
                company: 'Whitehall Robbins Labs Divsn',
                date: '2018-03-11',
                status: 'new',
                verified: true,
                activity: 81,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 89147
            },
            {
                id: 1110,
                name: 'Edna Miceli',
                country: {
                    name: 'France',
                    code: 'fr'
                },
                company: 'Sampler',
                date: '2017-10-15',
                status: 'renewal',
                verified: true,
                activity: 54,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 41466
            },
            {
                id: 1111,
                name: 'Sue Kownacki',
                country: {
                    name: 'Jamaica',
                    code: 'jm'
                },
                company: 'Juno Chefs Incorporated',
                date: '2017-03-17',
                status: 'negotiation',
                verified: false,
                activity: 31,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 38918
            },
            {
                id: 1112,
                name: 'Jesusa Shin',
                country: {
                    name: 'Ukraine',
                    code: 'ua'
                },
                company: 'Carroccio, A Thomas Esq',
                date: '2017-04-06',
                status: 'renewal',
                verified: false,
                activity: 28,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 11397
            },
            {
                id: 1113,
                name: 'Rolland Francescon',
                country: {
                    name: 'United Kingdom',
                    code: 'gb'
                },
                company: 'Stanley, Richard L Esq',
                date: '2019-02-03',
                status: 'qualified',
                verified: false,
                activity: 45,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 40930
            },
            {
                id: 1114,
                name: 'Pamella Schmierer',
                country: {
                    name: 'Belgium',
                    code: 'be'
                },
                company: 'K Cs Cstm Mouldings Windows',
                date: '2016-09-22',
                status: 'unqualified',
                verified: true,
                activity: 34,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 40847
            },
            {
                id: 1115,
                name: 'Glory Kulzer',
                country: {
                    name: 'Croatia',
                    code: 'hr'
                },
                company: 'Comfort Inn',
                date: '2017-09-27',
                status: 'unqualified',
                verified: true,
                activity: 36,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 27832
            },
            {
                id: 1116,
                name: 'Shawna Palaspas',
                country: {
                    name: 'Estonia',
                    code: 'ee'
                },
                company: 'Windsor, James L Esq',
                date: '2017-06-25',
                status: 'unqualified',
                verified: true,
                activity: 69,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 89060
            },
            {
                id: 1117,
                name: 'Brandon Callaro',
                country: {
                    name: 'Romania',
                    code: 'ro'
                },
                company: 'Jackson Shields Yeiser',
                date: '2016-07-13',
                status: 'negotiation',
                verified: true,
                activity: 55,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 52474
            },
            {
                id: 1118,
                name: 'Scarlet Cartan',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'Box, J Calvin Esq',
                date: '2018-09-13',
                status: 'renewal',
                verified: false,
                activity: 1,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 19094
            },
            {
                id: 1119,
                name: 'Oretha Menter',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'Custom Engineering Inc',
                date: '2017-09-11',
                status: 'renewal',
                verified: false,
                activity: 8,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 93756
            },
            {
                id: 1120,
                name: 'Ty Smith',
                country: {
                    name: 'United States',
                    code: 'us'
                },
                company: 'Bresler Eitel Framg Gllry Ltd',
                date: '2019-07-06',
                status: 'unqualified',
                verified: false,
                activity: 50,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 77388
            },
            {
                id: 1121,
                name: 'Xuan Rochin',
                country: {
                    name: 'Colombia',
                    code: 'co'
                },
                company: 'Carol, Drake Sparks Esq',
                date: '2018-05-22',
                status: 'negotiation',
                verified: true,
                activity: 77,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 48759
            },
            {
                id: 1122,
                name: 'Lindsey Dilello',
                country: {
                    name: 'Austria',
                    code: 'at'
                },
                company: 'Biltmore Investors Bank',
                date: '2017-07-18',
                status: 'renewal',
                verified: true,
                activity: 65,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 37568
            },
            {
                id: 1123,
                name: 'Devora Perez',
                country: {
                    name: 'Uruguay',
                    code: 'uy'
                },
                company: 'Desco Equipment Corp',
                date: '2017-10-09',
                status: 'unqualified',
                verified: true,
                activity: 30,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 4477
            },
            {
                id: 1124,
                name: 'Herman Demesa',
                country: {
                    name: 'Paraguay',
                    code: 'py'
                },
                company: 'Merlin Electric Co',
                date: '2019-05-23',
                status: 'negotiation',
                verified: true,
                activity: 10,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 13764
            },
            {
                id: 1125,
                name: 'Rory Papasergi',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'Bailey Cntl Co Div Babcock',
                date: '2019-03-02',
                status: 'qualified',
                verified: false,
                activity: 22,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 68222
            },
            {
                id: 1126,
                name: 'Talia Riopelle',
                country: {
                    name: 'Guatemala',
                    code: 'gt'
                },
                company: 'Ford Brothers Wholesale Inc',
                date: '2017-02-18',
                status: 'new',
                verified: false,
                activity: 69,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 29164
            },
            {
                id: 1127,
                name: 'Van Shire',
                country: {
                    name: 'Netherlands',
                    code: 'nl'
                },
                company: 'Cambridge Inn',
                date: '2020-05-12',
                status: 'new',
                verified: false,
                activity: 4,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 61651
            },
            {
                id: 1128,
                name: 'Lucina Lary',
                country: {
                    name: 'Switzerland',
                    code: 'ch'
                },
                company: 'Matricciani, Albert J Jr',
                date: '2019-11-20',
                status: 'negotiation',
                verified: true,
                activity: 11,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 79938
            },
            {
                id: 1129,
                name: 'Bok Isaacs',
                country: {
                    name: 'Chile',
                    code: 'cl'
                },
                company: 'Nelson Hawaiian Ltd',
                date: '2016-11-10',
                status: 'negotiation',
                verified: true,
                activity: 41,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 44037
            },
            {
                id: 1130,
                name: 'Rolande Spickerman',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'Neland Travel Agency',
                date: '2016-07-11',
                status: 'renewal',
                verified: true,
                activity: 84,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 89918
            },
            {
                id: 1131,
                name: 'Howard Paulas',
                country: {
                    name: 'Indonesia',
                    code: 'id'
                },
                company: 'Asendorf, J Alan Esq',
                date: '2017-07-17',
                status: 'negotiation',
                verified: false,
                activity: 22,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 32372
            },
            {
                id: 1132,
                name: 'Kimbery Madarang',
                country: {
                    name: 'Senegal',
                    code: 'sn'
                },
                company: 'Silberman, Arthur L Esq',
                date: '2018-08-19',
                status: 'negotiation',
                verified: true,
                activity: 63,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 46478
            },
            {
                id: 1133,
                name: 'Thurman Manno',
                country: {
                    name: 'Colombia',
                    code: 'co'
                },
                company: 'Honey Bee Breeding Genetics &',
                date: '2016-05-02',
                status: 'qualified',
                verified: true,
                activity: 47,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 30674
            },
            {
                id: 1134,
                name: 'Becky Mirafuentes',
                country: {
                    name: 'Serbia',
                    code: 'rs'
                },
                company: 'Wells Kravitz Schnitzer',
                date: '2018-04-13',
                status: 'unqualified',
                verified: true,
                activity: 62,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 47714
            },
            {
                id: 1135,
                name: 'Beatriz Corrington',
                country: {
                    name: 'South Africa',
                    code: 'za'
                },
                company: 'Prohab Rehabilitation Servs',
                date: '2020-01-04',
                status: 'renewal',
                verified: true,
                activity: 55,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 14307
            },
            {
                id: 1136,
                name: 'Marti Maybury',
                country: {
                    name: 'Thailand',
                    code: 'th'
                },
                company: 'Eldridge, Kristin K Esq',
                date: '2016-02-05',
                status: 'unqualified',
                verified: false,
                activity: 3,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 82069
            },
            {
                id: 1137,
                name: 'Nieves Gotter',
                country: {
                    name: 'Latvia',
                    code: 'lv'
                },
                company: 'Vlahos, John J Esq',
                date: '2017-03-12',
                status: 'negotiation',
                verified: false,
                activity: 3,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 11182
            },
            {
                id: 1138,
                name: 'Leatha Hagele',
                country: {
                    name: 'Ukraine',
                    code: 'ua'
                },
                company: 'Ninas Indian Grs & Videos',
                date: '2019-03-27',
                status: 'unqualified',
                verified: false,
                activity: 67,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 17126
            },
            {
                id: 1139,
                name: 'Valentin Klimek',
                country: {
                    name: 'Ivory Coast',
                    code: 'ci'
                },
                company: 'Schmid, Gayanne K Esq',
                date: '2019-08-06',
                status: 'unqualified',
                verified: true,
                activity: 14,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 19724
            },
            {
                id: 1140,
                name: 'Melissa Wiklund',
                country: {
                    name: 'Japan',
                    code: 'jp'
                },
                company: 'Moapa Valley Federal Credit Un',
                date: '2018-03-20',
                status: 'qualified',
                verified: true,
                activity: 8,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 91888
            },
            {
                id: 1141,
                name: 'Sheridan Zane',
                country: {
                    name: 'Croatia',
                    code: 'hr'
                },
                company: 'Kentucky Tennessee Clay Co',
                date: '2016-02-15',
                status: 'qualified',
                verified: true,
                activity: 17,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 15016
            },
            {
                id: 1142,
                name: 'Bulah Padilla',
                country: {
                    name: 'Philippines',
                    code: 'ph'
                },
                company: 'Admiral Party Rentals & Sales',
                date: '2016-02-10',
                status: 'negotiation',
                verified: false,
                activity: 58,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 23118
            },
            {
                id: 1143,
                name: 'Audra Kohnert',
                country: {
                    name: 'Netherlands',
                    code: 'nl'
                },
                company: 'Nelson, Karolyn King Esq',
                date: '2019-07-16',
                status: 'unqualified',
                verified: false,
                activity: 82,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 90560
            },
            {
                id: 1144,
                name: 'Daren Weirather',
                country: {
                    name: 'Israel',
                    code: 'il'
                },
                company: 'Panasystems',
                date: '2015-07-23',
                status: 'negotiation',
                verified: false,
                activity: 96,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 34155
            },
            {
                id: 1145,
                name: 'Fernanda Jillson',
                country: {
                    name: 'Mexico',
                    code: 'mx'
                },
                company: 'Shank, Edward L Esq',
                date: '2017-07-02',
                status: 'unqualified',
                verified: true,
                activity: 92,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 6350
            },
            {
                id: 1146,
                name: 'Gearldine Gellinger',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'Megibow & Edwards',
                date: '2019-08-17',
                status: 'negotiation',
                verified: true,
                activity: 18,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 77641
            },
            {
                id: 1147,
                name: 'Chau Kitzman',
                country: {
                    name: 'Paraguay',
                    code: 'py'
                },
                company: 'Benoff, Edward Esq',
                date: '2019-07-04',
                status: 'new',
                verified: true,
                activity: 9,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 43289
            },
            {
                id: 1148,
                name: 'Theola Frey',
                country: {
                    name: 'Vietnam',
                    code: 'vn'
                },
                company: 'Woodbridge Free Public Library',
                date: '2020-03-14',
                status: 'unqualified',
                verified: true,
                activity: 44,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 85657
            },
            {
                id: 1149,
                name: 'Cheryl Haroldson',
                country: {
                    name: 'France',
                    code: 'fr'
                },
                company: 'New York Life John Thune',
                date: '2018-04-03',
                status: 'new',
                verified: false,
                activity: 55,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 82733
            },
            {
                id: 1150,
                name: 'Laticia Merced',
                country: {
                    name: 'Burkina Faso',
                    code: 'bf'
                },
                company: 'Alinabal Inc',
                date: '2017-03-04',
                status: 'unqualified',
                verified: false,
                activity: 21,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 38004
            },
            {
                id: 1151,
                name: 'Carissa Batman',
                country: {
                    name: 'Greece',
                    code: 'gr'
                },
                company: 'Poletto, Kim David Esq',
                date: '2016-05-05',
                status: 'negotiation',
                verified: true,
                activity: 91,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 29038
            },
            {
                id: 1152,
                name: 'Lezlie Craghead',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'Chang, Carolyn Esq',
                date: '2019-05-28',
                status: 'renewal',
                verified: false,
                activity: 30,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 75123
            },
            {
                id: 1153,
                name: 'Ozell Shealy',
                country: {
                    name: 'Pakistan',
                    code: 'pk'
                },
                company: 'Silver Bros Inc',
                date: '2016-08-19',
                status: 'negotiation',
                verified: true,
                activity: 14,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 33214
            },
            {
                id: 1154,
                name: 'Arminda Parvis',
                country: {
                    name: 'Indonesia',
                    code: 'id'
                },
                company: 'Newtec Inc',
                date: '2020-02-09',
                status: 'negotiation',
                verified: true,
                activity: 77,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 80651
            },
            {
                id: 1155,
                name: 'Reita Leto',
                country: {
                    name: 'Belgium',
                    code: 'be'
                },
                company: 'Creative Business Systems',
                date: '2020-04-03',
                status: 'unqualified',
                verified: true,
                activity: 58,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 5085
            },
            {
                id: 1156,
                name: 'Yolando Luczki',
                country: {
                    name: 'France',
                    code: 'fr'
                },
                company: 'Dal Tile Corporation',
                date: '2015-01-27',
                status: 'renewal',
                verified: true,
                activity: 78,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 93021
            },
            {
                id: 1157,
                name: 'Lizette Stem',
                country: {
                    name: 'Slovakia',
                    code: 'sk'
                },
                company: 'Edward S Katz',
                date: '2018-08-06',
                status: 'new',
                verified: false,
                activity: 67,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 37287
            },
            {
                id: 1158,
                name: 'Gregoria Pawlowicz',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'Oh My Goodknits Inc',
                date: '2020-02-20',
                status: 'renewal',
                verified: false,
                activity: 29,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 73070
            },
            {
                id: 1159,
                name: 'Carin Deleo',
                country: {
                    name: 'China',
                    code: 'cn'
                },
                company: 'Redeker, Debbie',
                date: '2015-05-28',
                status: 'qualified',
                verified: true,
                activity: 13,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 64422
            },
            {
                id: 1160,
                name: 'Chantell Maynerich',
                country: {
                    name: 'Estonia',
                    code: 'ee'
                },
                company: 'Desert Sands Motel',
                date: '2016-09-05',
                status: 'unqualified',
                verified: true,
                activity: 75,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 36826
            },
            {
                id: 1161,
                name: 'Dierdre Yum',
                country: {
                    name: 'Czech Republic',
                    code: 'cz'
                },
                company: 'Cummins Southern Plains Inc',
                date: '2016-12-20',
                status: 'negotiation',
                verified: true,
                activity: 1,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 93101
            },
            {
                id: 1162,
                name: 'Larae Gudroe',
                country: {
                    name: 'Slovenia',
                    code: 'si'
                },
                company: 'Lehigh Furn Divsn Lehigh',
                date: '2015-11-28',
                status: 'unqualified',
                verified: false,
                activity: 13,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 60177
            },
            {
                id: 1163,
                name: 'Latrice Tolfree',
                country: {
                    name: 'Jamaica',
                    code: 'jm'
                },
                company: 'United Van Lines Agent',
                date: '2018-11-11',
                status: 'renewal',
                verified: false,
                activity: 73,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 47198
            },
            {
                id: 1164,
                name: 'Kerry Theodorov',
                country: {
                    name: 'Romania',
                    code: 'ro'
                },
                company: 'Capitol Reporters',
                date: '2016-11-05',
                status: 'unqualified',
                verified: true,
                activity: 76,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 71305
            },
            {
                id: 1165,
                name: 'Dorthy Hidvegi',
                country: {
                    name: 'Poland',
                    code: 'pl'
                },
                company: 'Kwik Kopy Printing',
                date: '2020-08-13',
                status: 'qualified',
                verified: true,
                activity: 60,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 17526
            },
            {
                id: 1166,
                name: 'Fannie Lungren',
                country: {
                    name: 'Belarus',
                    code: 'by'
                },
                company: 'Centro Inc',
                date: '2015-07-06',
                status: 'negotiation',
                verified: true,
                activity: 24,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 16596
            },
            {
                id: 1167,
                name: 'Evangelina Radde',
                country: {
                    name: 'Ivory Coast',
                    code: 'ci'
                },
                company: 'Campbell, Jan Esq',
                date: '2020-02-25',
                status: 'unqualified',
                verified: true,
                activity: 93,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 56870
            },
            {
                id: 1168,
                name: 'Novella Degroot',
                country: {
                    name: 'Slovenia',
                    code: 'si'
                },
                company: 'Evans, C Kelly Esq',
                date: '2017-12-19',
                status: 'unqualified',
                verified: false,
                activity: 30,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 82928
            },
            {
                id: 1169,
                name: 'Clay Hoa',
                country: {
                    name: 'Paraguay',
                    code: 'py'
                },
                company: 'Scat Enterprises',
                date: '2016-02-22',
                status: 'negotiation',
                verified: false,
                activity: 93,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 64181
            },
            {
                id: 1170,
                name: 'Jennifer Fallick',
                country: {
                    name: 'Australia',
                    code: 'au'
                },
                company: 'Nagle, Daniel J Esq',
                date: '2016-12-24',
                status: 'unqualified',
                verified: true,
                activity: 88,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 30561
            },
            {
                id: 1171,
                name: 'Irma Wolfgramm',
                country: {
                    name: 'Belgium',
                    code: 'be'
                },
                company: 'Serendiquity Bed & Breakfast',
                date: '2020-10-18',
                status: 'negotiation',
                verified: true,
                activity: 70,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 24617
            },
            {
                id: 1172,
                name: 'Eun Coody',
                country: {
                    name: 'Taiwan',
                    code: 'tw'
                },
                company: 'Ray Carolyne Realty',
                date: '2018-02-12',
                status: 'qualified',
                verified: true,
                activity: 61,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 77860
            },
            {
                id: 1173,
                name: 'Sylvia Cousey',
                country: {
                    name: 'Ireland',
                    code: 'ie'
                },
                company: 'Berg, Charles E',
                date: '2018-06-10',
                status: 'unqualified',
                verified: false,
                activity: 91,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 25664
            },
            {
                id: 1174,
                name: 'Nana Wrinkles',
                country: {
                    name: 'Austria',
                    code: 'at'
                },
                company: 'Ray, Milbern D',
                date: '2017-04-11',
                status: 'renewal',
                verified: true,
                activity: 98,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 98113
            },
            {
                id: 1175,
                name: 'Layla Springe',
                country: {
                    name: 'South Africa',
                    code: 'za'
                },
                company: 'Chadds Ford Winery',
                date: '2019-07-27',
                status: 'unqualified',
                verified: true,
                activity: 97,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 14763
            },
            {
                id: 1176,
                name: 'Joesph Degonia',
                country: {
                    name: 'Serbia',
                    code: 'rs'
                },
                company: 'A R Packaging',
                date: '2020-04-23',
                status: 'renewal',
                verified: true,
                activity: 56,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 31317
            },
            {
                id: 1177,
                name: 'Annabelle Boord',
                country: {
                    name: 'Guatemala',
                    code: 'gt'
                },
                company: 'Corn Popper',
                date: '2020-09-16',
                status: 'negotiation',
                verified: true,
                activity: 76,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 30883
            },
            {
                id: 1178,
                name: 'Stephaine Vinning',
                country: {
                    name: 'Australia',
                    code: 'au'
                },
                company: 'Birite Foodservice Distr',
                date: '2016-05-14',
                status: 'negotiation',
                verified: true,
                activity: 43,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 93785
            },
            {
                id: 1179,
                name: 'Nelida Sawchuk',
                country: {
                    name: 'South Africa',
                    code: 'za'
                },
                company: 'Anchorage Museum Of Hist & Art',
                date: '2018-06-22',
                status: 'qualified',
                verified: true,
                activity: 58,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 68380
            },
            {
                id: 1180,
                name: 'Marguerita Hiatt',
                country: {
                    name: 'United Kingdom',
                    code: 'gb'
                },
                company: 'Haber, George D Md',
                date: '2018-10-25',
                status: 'qualified',
                verified: false,
                activity: 72,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 93454
            },
            {
                id: 1181,
                name: 'Carmela Cookey',
                country: {
                    name: 'France',
                    code: 'fr'
                },
                company: 'Royal Pontiac Olds Inc',
                date: '2018-07-19',
                status: 'negotiation',
                verified: false,
                activity: 24,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 30570
            },
            {
                id: 1182,
                name: 'Junita Brideau',
                country: {
                    name: 'Indonesia',
                    code: 'id'
                },
                company: 'Leonards Antiques Inc',
                date: '2015-03-15',
                status: 'negotiation',
                verified: true,
                activity: 86,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 79506
            },
            {
                id: 1183,
                name: 'Claribel Varriano',
                country: {
                    name: 'Ecuador',
                    code: 'ec'
                },
                company: 'Meca',
                date: '2017-04-14',
                status: 'unqualified',
                verified: true,
                activity: 15,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 8654
            },
            {
                id: 1184,
                name: 'Benton Skursky',
                country: {
                    name: 'Iceland',
                    code: 'is'
                },
                company: 'Nercon Engineering & Mfg Inc',
                date: '2015-02-19',
                status: 'negotiation',
                verified: true,
                activity: 9,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 13368
            },
            {
                id: 1185,
                name: 'Hillary Skulski',
                country: {
                    name: 'France',
                    code: 'fr'
                },
                company: 'Replica I',
                date: '2016-03-25',
                status: 'unqualified',
                verified: true,
                activity: 82,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 92631
            },
            {
                id: 1186,
                name: 'Merilyn Bayless',
                country: {
                    name: 'Jamaica',
                    code: 'jm'
                },
                company: '20 20 Printing Inc',
                date: '2020-10-13',
                status: 'unqualified',
                verified: true,
                activity: 13,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 4989
            },
            {
                id: 1187,
                name: 'Teri Ennaco',
                country: {
                    name: 'Pakistan',
                    code: 'pk'
                },
                company: 'Publishers Group West',
                date: '2019-12-21',
                status: 'unqualified',
                verified: true,
                activity: 57,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 77668
            },
            {
                id: 1188,
                name: 'Merlyn Lawler',
                country: {
                    name: 'Germany',
                    code: 'de'
                },
                company: 'Nischwitz, Jeffrey L Esq',
                date: '2016-02-26',
                status: 'renewal',
                verified: true,
                activity: 45,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 3525
            },
            {
                id: 1189,
                name: 'Georgene Montezuma',
                country: {
                    name: 'Senegal',
                    code: 'sn'
                },
                company: 'Payne Blades & Wellborn Pa',
                date: '2018-10-11',
                status: 'new',
                verified: true,
                activity: 64,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 45838
            },
            {
                id: 1190,
                name: 'Jettie Mconnell',
                country: {
                    name: 'Denmark',
                    code: 'dk'
                },
                company: 'Coldwell Bnkr Wright Real Est',
                date: '2015-10-18',
                status: 'negotiation',
                verified: false,
                activity: 74,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 49148
            },
            {
                id: 1191,
                name: 'Lemuel Latzke',
                country: {
                    name: 'Colombia',
                    code: 'co'
                },
                company: 'Computer Repair Service',
                date: '2016-02-13',
                status: 'negotiation',
                verified: false,
                activity: 79,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 96709
            },
            {
                id: 1192,
                name: 'Melodie Knipp',
                country: {
                    name: 'Finland',
                    code: 'fi'
                },
                company: 'Fleetwood Building Block Inc',
                date: '2018-03-08',
                status: 'negotiation',
                verified: false,
                activity: 19,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 23253
            },
            {
                id: 1193,
                name: 'Candida Corbley',
                country: {
                    name: 'Poland',
                    code: 'pl'
                },
                company: 'Colts Neck Medical Assocs Inc',
                date: '2017-12-02',
                status: 'negotiation',
                verified: true,
                activity: 11,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 40836
            },
            {
                id: 1194,
                name: 'Karan Karpin',
                country: {
                    name: 'Estonia',
                    code: 'ee'
                },
                company: 'New England Taxidermy',
                date: '2019-01-07',
                status: 'negotiation',
                verified: true,
                activity: 4,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 60719
            },
            {
                id: 1195,
                name: 'Andra Scheyer',
                country: {
                    name: 'Romania',
                    code: 'ro'
                },
                company: 'Ludcke, George O Esq',
                date: '2016-08-14',
                status: 'qualified',
                verified: true,
                activity: 62,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 17419
            },
            {
                id: 1196,
                name: 'Felicidad Poullion',
                country: {
                    name: 'Greece',
                    code: 'gr'
                },
                company: 'Mccorkle, Tom S Esq',
                date: '2016-03-05',
                status: 'renewal',
                verified: true,
                activity: 64,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 94052
            },
            {
                id: 1197,
                name: 'Belen Strassner',
                country: {
                    name: 'Ivory Coast',
                    code: 'ci'
                },
                company: 'Eagle Software Inc',
                date: '2015-12-14',
                status: 'qualified',
                verified: true,
                activity: 91,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 54241
            },
            {
                id: 1198,
                name: 'Gracia Melnyk',
                country: {
                    name: 'Costa Rica',
                    code: 'cr'
                },
                company: 'Juvenile & Adult Super',
                date: '2019-06-01',
                status: 'unqualified',
                verified: true,
                activity: 40,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 87668
            },
            {
                id: 1199,
                name: 'Jolanda Hanafan',
                country: {
                    name: 'Cameroon',
                    code: 'cm'
                },
                company: 'Perez, Joseph J Esq',
                date: '2015-12-09',
                status: 'qualified',
                verified: true,
                activity: 27,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 99417
            },
            {
                id: 1200,
                name: 'Barrett Toyama',
                country: {
                    name: 'Thailand',
                    code: 'th'
                },
                company: 'Case Foundation Co',
                date: '2019-08-16',
                status: 'new',
                verified: true,
                activity: 82,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 89792
            },
            {
                id: 1201,
                name: 'Helga Fredicks',
                country: {
                    name: 'Guatemala',
                    code: 'gt'
                },
                company: 'Eis Environmental Engrs Inc',
                date: '2018-06-20',
                status: 'new',
                verified: true,
                activity: 33,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 42356
            },
            {
                id: 1202,
                name: 'Ashlyn Pinilla',
                country: {
                    name: 'Japan',
                    code: 'jp'
                },
                company: 'Art Crafters',
                date: '2018-04-11',
                status: 'unqualified',
                verified: true,
                activity: 5,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 90979
            },
            {
                id: 1203,
                name: 'Fausto Agramonte',
                country: {
                    name: 'Belgium',
                    code: 'be'
                },
                company: 'Marriott Hotels Resorts Suites',
                date: '2019-06-25',
                status: 'new',
                verified: false,
                activity: 22,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 45082
            },
            {
                id: 1204,
                name: 'Ronny Caiafa',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'Remaco Inc',
                date: '2020-07-21',
                status: 'new',
                verified: true,
                activity: 61,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 9871
            },
            {
                id: 1205,
                name: 'Marge Limmel',
                country: {
                    name: 'Cameroon',
                    code: 'cm'
                },
                company: 'Bjork, Robert D Jr',
                date: '2015-03-12',
                status: 'unqualified',
                verified: true,
                activity: 90,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 47043
            },
            {
                id: 1206,
                name: 'Norah Waymire',
                country: {
                    name: 'United States',
                    code: 'us'
                },
                company: 'Carmichael, Jeffery L Esq',
                date: '2019-06-11',
                status: 'renewal',
                verified: true,
                activity: 48,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 92763
            },
            {
                id: 1207,
                name: 'Aliza Baltimore',
                country: {
                    name: 'Malaysia',
                    code: 'my'
                },
                company: 'Andrews, J Robert Esq',
                date: '2020-11-25',
                status: 'unqualified',
                verified: true,
                activity: 59,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 18075
            },
            {
                id: 1208,
                name: 'Mozell Pelkowski',
                country: {
                    name: 'Latvia',
                    code: 'lv'
                },
                company: 'Winship \u0026 Byrne',
                date: '2018-04-13',
                status: 'unqualified',
                verified: true,
                activity: 94,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 34393
            },
            {
                id: 1209,
                name: 'Viola Bitsuie',
                country: {
                    name: 'Denmark',
                    code: 'dk'
                },
                company: 'Burton \u0026 Davis',
                date: '2018-07-07',
                status: 'new',
                verified: true,
                activity: 94,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 16410
            },
            {
                id: 1210,
                name: 'Franklyn Emard',
                country: {
                    name: 'Iceland',
                    code: 'is'
                },
                company: 'Olympic Graphic Arts',
                date: '2018-02-25',
                status: 'qualified',
                verified: true,
                activity: 95,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 1017
            },
            {
                id: 1211,
                name: 'Willodean Konopacki',
                country: {
                    name: 'Hong Kong',
                    code: 'hk'
                },
                company: 'Magnuson',
                date: '2017-10-03',
                status: 'renewal',
                verified: false,
                activity: 20,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 77843
            },
            {
                id: 1212,
                name: 'Beckie Silvestrini',
                country: {
                    name: 'Poland',
                    code: 'pl'
                },
                company: 'A All American Travel Inc',
                date: '2016-11-26',
                status: 'renewal',
                verified: true,
                activity: 81,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 30549
            },
            {
                id: 1213,
                name: 'Rebecka Gesick',
                country: {
                    name: 'Philippines',
                    code: 'ph'
                },
                company: 'Polykote Inc',
                date: '2019-06-22',
                status: 'renewal',
                verified: true,
                activity: 45,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 51738
            },
            {
                id: 1214,
                name: 'Frederica Blunk',
                country: {
                    name: 'Lithuania',
                    code: 'lt'
                },
                company: 'Jets Cybernetics',
                date: '2019-06-07',
                status: 'renewal',
                verified: true,
                activity: 56,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 13111
            },
            {
                id: 1215,
                name: 'Glen Bartolet',
                country: {
                    name: 'Germany',
                    code: 'de'
                },
                company: 'Metlab Testing Services',
                date: '2015-02-13',
                status: 'negotiation',
                verified: true,
                activity: 99,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 85802
            },
            {
                id: 1216,
                name: 'Freeman Gochal',
                country: {
                    name: 'Slovenia',
                    code: 'si'
                },
                company: 'Kellermann, William T Esq',
                date: '2019-08-27',
                status: 'negotiation',
                verified: false,
                activity: 2,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 89221
            },
            {
                id: 1217,
                name: 'Vincent Meinerding',
                country: {
                    name: 'United States',
                    code: 'us'
                },
                company: 'Arturi, Peter D Esq',
                date: '2018-06-18',
                status: 'new',
                verified: true,
                activity: 58,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 32661
            },
            {
                id: 1218,
                name: 'Rima Bevelacqua',
                country: {
                    name: 'Taiwan',
                    code: 'tw'
                },
                company: 'Mcauley Mfg Co',
                date: '2019-05-18',
                status: 'new',
                verified: true,
                activity: 31,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 18809
            },
            {
                id: 1219,
                name: 'Glendora Sarbacher',
                country: {
                    name: 'Lithuania',
                    code: 'lt'
                },
                company: 'Defur Voran Hanley Radcliff',
                date: '2018-04-21',
                status: 'new',
                verified: true,
                activity: 79,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 94374
            },
            {
                id: 1220,
                name: 'Avery Steier',
                country: {
                    name: 'Mexico',
                    code: 'mx'
                },
                company: 'Dill Dill Carr \u0026 Stonbraker Pc',
                date: '2017-07-27',
                status: 'negotiation',
                verified: true,
                activity: 63,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 45436
            },
            {
                id: 1221,
                name: 'Cristy Lother',
                country: {
                    name: 'Burkina Faso',
                    code: 'bf'
                },
                company: 'Kleensteel',
                date: '2018-05-19',
                status: 'renewal',
                verified: true,
                activity: 55,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 72645
            },
            {
                id: 1222,
                name: 'Nicolette Brossart',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'Goulds Pumps Inc Slurry Pump',
                date: '2015-05-26',
                status: 'new',
                verified: false,
                activity: 25,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 61023
            },
            {
                id: 1223,
                name: 'Tracey Modzelewski',
                country: {
                    name: 'Denmark',
                    code: 'dk'
                },
                company: 'Kansas City Insurance Report',
                date: '2019-07-02',
                status: 'renewal',
                verified: true,
                activity: 4,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 13685
            },
            {
                id: 1224,
                name: 'Virgina Tegarden',
                country: {
                    name: 'Cameroon',
                    code: 'cm'
                },
                company: 'Berhanu International Foods',
                date: '2017-10-09',
                status: 'qualified',
                verified: true,
                activity: 62,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 84436
            },
            {
                id: 1225,
                name: 'Tiera Frankel',
                country: {
                    name: 'India',
                    code: 'in'
                },
                company: 'Roland Ashcroft',
                date: '2018-03-27',
                status: 'unqualified',
                verified: true,
                activity: 90,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 61860
            },
            {
                id: 1226,
                name: 'Alaine Bergesen',
                country: {
                    name: 'Peru',
                    code: 'pe'
                },
                company: 'Hispanic Magazine',
                date: '2017-08-10',
                status: 'qualified',
                verified: true,
                activity: 34,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 76679
            },
            {
                id: 1227,
                name: 'Earleen Mai',
                country: {
                    name: 'Italy',
                    code: 'it'
                },
                company: 'Little Sheet Metal Co',
                date: '2016-06-22',
                status: 'negotiation',
                verified: true,
                activity: 38,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 14959
            },
            {
                id: 1228,
                name: 'Leonida Gobern',
                country: {
                    name: 'Cuba',
                    code: 'cu'
                },
                company: 'Holmes, Armstead J Esq',
                date: '2020-02-24',
                status: 'renewal',
                verified: true,
                activity: 96,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 14174
            },
            {
                id: 1229,
                name: 'Ressie Auffrey',
                country: {
                    name: 'Japan',
                    code: 'jp'
                },
                company: 'Faw, James C Cpa',
                date: '2016-10-21',
                status: 'negotiation',
                verified: false,
                activity: 28,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 80328
            },
            {
                id: 1230,
                name: 'Justine Mugnolo',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'Evans Rule Company',
                date: '2016-02-21',
                status: 'negotiation',
                verified: true,
                activity: 83,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 56392
            },
            {
                id: 1231,
                name: 'Eladia Saulter',
                country: {
                    name: 'Switzerland',
                    code: 'ch'
                },
                company: 'Tyee Productions Inc',
                date: '2016-03-10',
                status: 'new',
                verified: true,
                activity: 16,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 17176
            },
            {
                id: 1232,
                name: 'Chaya Malvin',
                country: {
                    name: 'Cuba',
                    code: 'cu'
                },
                company: 'Dunnells \u0026 Duvall',
                date: '2016-07-22',
                status: 'renewal',
                verified: true,
                activity: 12,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 90141
            },
            {
                id: 1233,
                name: 'Gwenn Suffield',
                country: {
                    name: 'Austria',
                    code: 'at'
                },
                company: 'Deltam Systems Inc',
                date: '2019-06-23',
                status: 'qualified',
                verified: true,
                activity: 67,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 38187
            },
            {
                id: 1234,
                name: 'Salena Karpel',
                country: {
                    name: 'Puerto Rico',
                    code: 'pr'
                },
                company: 'Hammill Mfg Co',
                date: '2016-08-02',
                status: 'renewal',
                verified: true,
                activity: 0,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 35596
            },
            {
                id: 1235,
                name: 'Yoko Fishburne',
                country: {
                    name: 'Croatia',
                    code: 'hr'
                },
                company: 'Sams Corner Store',
                date: '2017-08-06',
                status: 'unqualified',
                verified: true,
                activity: 73,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 73926
            },
            {
                id: 1236,
                name: 'Taryn Moyd',
                country: {
                    name: 'Serbia',
                    code: 'rs'
                },
                company: 'Siskin, Mark J Esq',
                date: '2016-12-18',
                status: 'negotiation',
                verified: true,
                activity: 57,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 38375
            },
            {
                id: 1237,
                name: 'Katina Polidori',
                country: {
                    name: 'Nigeria',
                    code: 'ng'
                },
                company: 'Cape \u0026 Associates Real Estate',
                date: '2016-08-25',
                status: 'unqualified',
                verified: true,
                activity: 37,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 35932
            },
            {
                id: 1238,
                name: 'Rickie Plumer',
                country: {
                    name: 'Turkey',
                    code: 'tr'
                },
                company: 'Merrill Lynch',
                date: '2018-11-04',
                status: 'unqualified',
                verified: true,
                activity: 71,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 28331
            },
            {
                id: 1239,
                name: 'Alex Loader',
                country: {
                    name: 'Italy',
                    code: 'it'
                },
                company: 'Sublett, Scott Esq',
                date: '2016-01-07',
                status: 'unqualified',
                verified: false,
                activity: 22,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 33549
            },
            {
                id: 1240,
                name: 'Lashon Vizarro',
                country: {
                    name: 'Ecuador',
                    code: 'ec'
                },
                company: 'Sentry Signs',
                date: '2019-08-02',
                status: 'negotiation',
                verified: true,
                activity: 46,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 63860
            },
            {
                id: 1241,
                name: 'Lauran Burnard',
                country: {
                    name: 'Czech Republic',
                    code: 'cz'
                },
                company: 'Professionals Unlimited',
                date: '2016-04-27',
                status: 'renewal',
                verified: true,
                activity: 30,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 34992
            },
            {
                id: 1242,
                name: 'Ceola Setter',
                country: {
                    name: 'Taiwan',
                    code: 'tw'
                },
                company: 'Southern Steel Shelving Co',
                date: '2017-05-13',
                status: 'qualified',
                verified: true,
                activity: 43,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 97068
            },
            {
                id: 1243,
                name: 'My Rantanen',
                country: {
                    name: 'Philippines',
                    code: 'ph'
                },
                company: 'Bosco, Paul J',
                date: '2017-09-11',
                status: 'negotiation',
                verified: true,
                activity: 60,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 2316
            },
            {
                id: 1244,
                name: 'Lorrine Worlds',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'Longo, Nicholas J Esq',
                date: '2018-05-10',
                status: 'renewal',
                verified: true,
                activity: 51,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 89374
            },
            {
                id: 1245,
                name: 'Peggie Sturiale',
                country: {
                    name: 'Malaysia',
                    code: 'my'
                },
                company: 'Henry County Middle School',
                date: '2019-11-03',
                status: 'renewal',
                verified: true,
                activity: 41,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 51152
            },
            {
                id: 1246,
                name: 'Marvel Raymo',
                country: {
                    name: 'Belgium',
                    code: 'be'
                },
                company: 'Edison Supply \u0026 Equipment Co',
                date: '2016-03-08',
                status: 'renewal',
                verified: true,
                activity: 9,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 39848
            },
            {
                id: 1247,
                name: 'Daron Dinos',
                country: {
                    name: 'Hungary',
                    code: 'hu'
                },
                company: 'Wolf, Warren R Esq',
                date: '2016-03-25',
                status: 'unqualified',
                verified: true,
                activity: 30,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 35060
            },
            {
                id: 1248,
                name: 'An Fritz',
                country: {
                    name: 'Netherlands',
                    code: 'nl'
                },
                company: 'Linguistic Systems Inc',
                date: '2017-08-04',
                status: 'negotiation',
                verified: true,
                activity: 86,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 23037
            },
            {
                id: 1249,
                name: 'Portia Stimmel',
                country: {
                    name: 'Australia',
                    code: 'au'
                },
                company: 'Peace Christian Center',
                date: '2020-01-13',
                status: 'qualified',
                verified: true,
                activity: 30,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 35637
            },
            {
                id: 1250,
                name: 'Rhea Aredondo',
                country: {
                    name: 'Greece',
                    code: 'gr'
                },
                company: 'Double B Foods Inc',
                date: '2016-06-19',
                status: 'qualified',
                verified: true,
                activity: 68,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 70379
            },
            {
                id: 1251,
                name: 'Benedict Sama',
                country: {
                    name: 'Israel',
                    code: 'il'
                },
                company: 'Alexander \u0026 Alexander Inc',
                date: '2018-08-18',
                status: 'negotiation',
                verified: true,
                activity: 79,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 99271
            },
            {
                id: 1252,
                name: 'Alyce Arias',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'Fairbanks Scales',
                date: '2018-09-14',
                status: 'new',
                verified: true,
                activity: 77,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 69658
            },
            {
                id: 1253,
                name: 'Heike Berganza',
                country: {
                    name: 'Bulgaria',
                    code: 'bg'
                },
                company: 'Cali Sportswear Cutting Dept',
                date: '2019-01-21',
                status: 'unqualified',
                verified: true,
                activity: 95,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 78159
            },
            {
                id: 1254,
                name: 'Carey Dopico',
                country: {
                    name: 'Saudi Arabia',
                    code: 'sa'
                },
                company: 'Garofani, John Esq',
                date: '2020-05-25',
                status: 'negotiation',
                verified: true,
                activity: 35,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 84097
            },
            {
                id: 1255,
                name: 'Dottie Hellickson',
                country: {
                    name: 'Chile',
                    code: 'cl'
                },
                company: 'Thompson Fabricating Co',
                date: '2016-02-12',
                status: 'qualified',
                verified: true,
                activity: 7,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 54606
            },
            {
                id: 1256,
                name: 'Deandrea Hughey',
                country: {
                    name: 'South Africa',
                    code: 'za'
                },
                company: 'Century 21 Krall Real Estate',
                date: '2018-09-26',
                status: 'unqualified',
                verified: true,
                activity: 96,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 2730
            },
            {
                id: 1257,
                name: 'Kimberlie Duenas',
                country: {
                    name: 'Bulgaria',
                    code: 'bg'
                },
                company: 'Mid Contntl Rlty \u0026 Prop Mgmt',
                date: '2015-07-27',
                status: 'qualified',
                verified: true,
                activity: 96,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 71836
            },
            {
                id: 1258,
                name: 'Martina Staback',
                country: {
                    name: 'Luxembourg',
                    code: 'lu'
                },
                company: 'Ace Signs Inc',
                date: '2017-02-14',
                status: 'new',
                verified: true,
                activity: 47,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 37044
            },
            {
                id: 1259,
                name: 'Skye Fillingim',
                country: {
                    name: 'Belgium',
                    code: 'be'
                },
                company: 'Rodeway Inn',
                date: '2017-02-12',
                status: 'new',
                verified: true,
                activity: 86,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 5990
            },
            {
                id: 1260,
                name: 'Jade Farrar',
                country: {
                    name: 'Mexico',
                    code: 'mx'
                },
                company: 'Bonnet \u0026 Daughter',
                date: '2017-02-23',
                status: 'new',
                verified: true,
                activity: 73,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 7878
            },
            {
                id: 1261,
                name: 'Charlene Hamilton',
                country: {
                    name: 'India',
                    code: 'in'
                },
                company: 'Oshins \u0026 Gibbons',
                date: '2017-09-23',
                status: 'unqualified',
                verified: true,
                activity: 32,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 38077
            },
            {
                id: 1262,
                name: 'Geoffrey Acey',
                country: {
                    name: 'Hong Kong',
                    code: 'hk'
                },
                company: 'Price Business Services',
                date: '2019-10-11',
                status: 'negotiation',
                verified: true,
                activity: 98,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 24537
            },
            {
                id: 1263,
                name: 'Stevie Westerbeck',
                country: {
                    name: 'Lithuania',
                    code: 'lt'
                },
                company: 'Wise, Dennis W Md',
                date: '2017-08-01',
                status: 'renewal',
                verified: true,
                activity: 57,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 19164
            },
            {
                id: 1264,
                name: 'Pamella Fortino',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'Super 8 Motel',
                date: '2018-09-03',
                status: 'new',
                verified: true,
                activity: 100,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 21880
            },
            {
                id: 1265,
                name: 'Harrison Haufler',
                country: {
                    name: 'Malaysia',
                    code: 'my'
                },
                company: 'John Wagner Associates',
                date: '2016-08-25',
                status: 'qualified',
                verified: true,
                activity: 85,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 14975
            },
            {
                id: 1266,
                name: 'Johnna Engelberg',
                country: {
                    name: 'Thailand',
                    code: 'th'
                },
                company: 'Thrifty Oil Co',
                date: '2019-06-02',
                status: 'renewal',
                verified: true,
                activity: 1,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 28001
            },
            {
                id: 1267,
                name: 'Buddy Cloney',
                country: {
                    name: 'Hungary',
                    code: 'hu'
                },
                company: 'Larkfield Photo',
                date: '2020-05-14',
                status: 'qualified',
                verified: true,
                activity: 9,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 44811
            },
            {
                id: 1268,
                name: 'Dalene Riden',
                country: {
                    name: 'Bolivia',
                    code: 'bo'
                },
                company: 'Silverman Planetarium',
                date: '2019-08-23',
                status: 'renewal',
                verified: true,
                activity: 31,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 70963
            },
            {
                id: 1269,
                name: 'Jerry Zurcher',
                country: {
                    name: 'Ukraine',
                    code: 'ua'
                },
                company: 'J \u0026 F Lumber',
                date: '2015-05-11',
                status: 'renewal',
                verified: true,
                activity: 52,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 27808
            },
            {
                id: 1270,
                name: 'Haydee Denooyer',
                country: {
                    name: 'Ivory Coast',
                    code: 'ci'
                },
                company: 'Cleaning Station Inc',
                date: '2016-04-17',
                status: 'qualified',
                verified: true,
                activity: 80,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 41216
            },
            {
                id: 1271,
                name: 'Joseph Cryer',
                country: {
                    name: 'Philippines',
                    code: 'ph'
                },
                company: 'Ames Stationers',
                date: '2019-11-26',
                status: 'qualified',
                verified: true,
                activity: 53,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 8819
            },
            {
                id: 1272,
                name: 'Deonna Kippley',
                country: {
                    name: 'South Africa',
                    code: 'za'
                },
                company: 'Midas Muffler Shops',
                date: '2017-08-26',
                status: 'qualified',
                verified: true,
                activity: 52,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 77610
            },
            {
                id: 1273,
                name: 'Raymon Calvaresi',
                country: {
                    name: 'South Africa',
                    code: 'za'
                },
                company: 'Seaboard Securities Inc',
                date: '2017-07-09',
                status: 'qualified',
                verified: true,
                activity: 45,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 80612
            },
            {
                id: 1274,
                name: 'Alecia Bubash',
                country: {
                    name: 'Poland',
                    code: 'pl'
                },
                company: 'Petersen, James E Esq',
                date: '2016-05-19',
                status: 'new',
                verified: false,
                activity: 28,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 45311
            },
            {
                id: 1275,
                name: 'Ma Layous',
                country: {
                    name: 'Latvia',
                    code: 'lv'
                },
                company: 'Development Authority',
                date: '2016-02-11',
                status: 'qualified',
                verified: false,
                activity: 2,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 88737
            },
            {
                id: 1276,
                name: 'Detra Coyier',
                country: {
                    name: 'Ivory Coast',
                    code: 'ci'
                },
                company: 'Schott Fiber Optics Inc',
                date: '2019-06-05',
                status: 'negotiation',
                verified: true,
                activity: 95,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 13224
            },
            {
                id: 1277,
                name: 'Terrilyn Rodeigues',
                country: {
                    name: 'Thailand',
                    code: 'th'
                },
                company: 'Stuart J Agins',
                date: '2016-08-04',
                status: 'renewal',
                verified: true,
                activity: 35,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 64656
            },
            {
                id: 1278,
                name: 'Salome Lacovara',
                country: {
                    name: 'Romania',
                    code: 'ro'
                },
                company: 'Mitsumi Electronics Corp',
                date: '2015-06-05',
                status: 'unqualified',
                verified: true,
                activity: 78,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 61947
            },
            {
                id: 1279,
                name: 'Garry Keetch',
                country: {
                    name: 'Luxembourg',
                    code: 'lu'
                },
                company: 'Italian Express Franchise Corp',
                date: '2015-06-20',
                status: 'unqualified',
                verified: true,
                activity: 86,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 6380
            },
            {
                id: 1280,
                name: 'Matthew Neither',
                country: {
                    name: 'United Kingdom',
                    code: 'gb'
                },
                company: 'American Council On Sci \u0026 Hlth',
                date: '2018-06-24',
                status: 'qualified',
                verified: true,
                activity: 4,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 80112
            },
            {
                id: 1281,
                name: 'Theodora Restrepo',
                country: {
                    name: 'Paraguay',
                    code: 'py'
                },
                company: 'Kleri, Patricia S Esq',
                date: '2017-08-15',
                status: 'renewal',
                verified: true,
                activity: 66,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 42038
            },
            {
                id: 1282,
                name: 'Noah Kalafatis',
                country: {
                    name: 'Saudi Arabia',
                    code: 'sa'
                },
                company: 'Twiggs Abrams Blanchard',
                date: '2020-06-24',
                status: 'negotiation',
                verified: true,
                activity: 35,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 36052
            },
            {
                id: 1283,
                name: 'Carmen Sweigard',
                country: {
                    name: 'Bolivia',
                    code: 'bo'
                },
                company: 'Maui Research \u0026 Technology Pk',
                date: '2019-08-08',
                status: 'new',
                verified: true,
                activity: 96,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 51660
            },
            {
                id: 1284,
                name: 'Lavonda Hengel',
                country: {
                    name: 'Hungary',
                    code: 'hu'
                },
                company: 'Bradley Nameplate Corp',
                date: '2019-10-25',
                status: 'negotiation',
                verified: true,
                activity: 48,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 56142
            },
            {
                id: 1285,
                name: 'Junita Stoltzman',
                country: {
                    name: 'Turkey',
                    code: 'tr'
                },
                company: 'Geonex Martel Inc',
                date: '2015-03-19',
                status: 'negotiation',
                verified: true,
                activity: 64,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 21631
            },
            {
                id: 1286,
                name: 'Herminia Nicolozakes',
                country: {
                    name: 'Venezuela',
                    code: 've'
                },
                company: 'Sea Island Div Of Fstr Ind Inc',
                date: '2019-09-09',
                status: 'negotiation',
                verified: true,
                activity: 0,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 59171
            },
            {
                id: 1287,
                name: 'Casie Good',
                country: {
                    name: 'Japan',
                    code: 'jp'
                },
                company: 'Papay, Debbie J Esq',
                date: '2016-11-27',
                status: 'new',
                verified: true,
                activity: 87,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 97858
            },
            {
                id: 1288,
                name: 'Reena Maisto',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'Lane Promotions',
                date: '2016-08-22',
                status: 'new',
                verified: true,
                activity: 16,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 90388
            },
            {
                id: 1289,
                name: 'Mirta Mallett',
                country: {
                    name: 'Singapore',
                    code: 'sg'
                },
                company: 'Stephen Kennerly Archts Inc Pc',
                date: '2017-11-27',
                status: 'renewal',
                verified: true,
                activity: 14,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 68632
            },
            {
                id: 1290,
                name: 'Cathrine Pontoriero',
                country: {
                    name: 'Finland',
                    code: 'fi'
                },
                company: 'Business Systems Of Wis Inc',
                date: '2020-02-07',
                status: 'negotiation',
                verified: true,
                activity: 58,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 95552
            },
            {
                id: 1291,
                name: 'Filiberto Tawil',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'Flash, Elena Salerno Esq',
                date: '2018-01-28',
                status: 'negotiation',
                verified: true,
                activity: 0,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 39725
            },
            {
                id: 1292,
                name: 'Raul Upthegrove',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'Neeley, Gregory W Esq',
                date: '2019-11-16',
                status: 'renewal',
                verified: true,
                activity: 59,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 62251
            },
            {
                id: 1293,
                name: 'Sarah Candlish',
                country: {
                    name: 'Hong Kong',
                    code: 'hk'
                },
                company: 'Alabama Educational Tv Comm',
                date: '2019-06-09',
                status: 'negotiation',
                verified: true,
                activity: 30,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 73523
            },
            {
                id: 1294,
                name: 'Lucy Treston',
                country: {
                    name: 'Jamaica',
                    code: 'jm'
                },
                company: 'Franz Inc',
                date: '2017-02-07',
                status: 'negotiation',
                verified: true,
                activity: 59,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 41331
            },
            {
                id: 1295,
                name: 'Judy Aquas',
                country: {
                    name: 'Romania',
                    code: 'ro'
                },
                company: 'Plantation Restaurant',
                date: '2020-09-14',
                status: 'renewal',
                verified: true,
                activity: 86,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 24208
            },
            {
                id: 1296,
                name: 'Yvonne Tjepkema',
                country: {
                    name: 'United Kingdom',
                    code: 'gb'
                },
                company: 'Radio Communications Co',
                date: '2017-01-06',
                status: 'renewal',
                verified: true,
                activity: 33,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 56409
            },
            {
                id: 1297,
                name: 'Kayleigh Lace',
                country: {
                    name: 'Denmark',
                    code: 'dk'
                },
                company: 'Dentalaw Divsn Hlth Care',
                date: '2019-11-04',
                status: 'negotiation',
                verified: true,
                activity: 70,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 70025
            },
            {
                id: 1298,
                name: 'Felix Hirpara',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'American Speedy Printing Ctrs',
                date: '2015-03-13',
                status: 'new',
                verified: true,
                activity: 8,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 88115
            },
            {
                id: 1299,
                name: 'Tresa Sweely',
                country: {
                    name: 'Germany',
                    code: 'de'
                },
                company: 'Grayson, Grant S Esq',
                date: '2019-12-22',
                status: 'negotiation',
                verified: true,
                activity: 22,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 69703
            },
            {
                id: 1300,
                name: 'Kristeen Turinetti',
                country: {
                    name: 'Burkina Faso',
                    code: 'bf'
                },
                company: 'Jeanerette Middle School',
                date: '2017-09-28',
                status: 'new',
                verified: true,
                activity: 67,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 10718
            },
            {
                id: 1301,
                name: 'Jenelle Regusters',
                country: {
                    name: 'Hungary',
                    code: 'hu'
                },
                company: 'Haavisto, Brian F Esq',
                date: '2019-07-27',
                status: 'qualified',
                verified: true,
                activity: 13,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 29825
            },
            {
                id: 1302,
                name: 'Renea Monterrubio',
                country: {
                    name: 'Greece',
                    code: 'gr'
                },
                company: 'Wmmt Radio Station',
                date: '2016-03-28',
                status: 'negotiation',
                verified: true,
                activity: 73,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 90351
            },
            {
                id: 1303,
                name: 'Olive Matuszak',
                country: {
                    name: 'Germany',
                    code: 'de'
                },
                company: 'Colony Paints Sales Ofc \u0026 Plnt',
                date: '2018-04-15',
                status: 'unqualified',
                verified: true,
                activity: 70,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 75682
            },
            {
                id: 1304,
                name: 'Ligia Reiber',
                country: {
                    name: 'Cameroon',
                    code: 'cm'
                },
                company: 'Floral Expressions',
                date: '2017-02-02',
                status: 'negotiation',
                verified: true,
                activity: 51,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 74935
            },
            {
                id: 1305,
                name: 'Christiane Eschberger',
                country: {
                    name: 'Romania',
                    code: 'ro'
                },
                company: 'Casco Services Inc',
                date: '2018-03-27',
                status: 'unqualified',
                verified: true,
                activity: 81,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 5254
            },
            {
                id: 1306,
                name: 'Goldie Schirpke',
                country: {
                    name: 'Paraguay',
                    code: 'py'
                },
                company: 'Reuter, Arthur C Jr',
                date: '2015-04-21',
                status: 'renewal',
                verified: true,
                activity: 8,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 37306
            },
            {
                id: 1307,
                name: 'Loreta Timenez',
                country: {
                    name: 'Burkina Faso',
                    code: 'bf'
                },
                company: 'Kaminski, Katherine Andritsaki',
                date: '2015-07-17',
                status: 'negotiation',
                verified: true,
                activity: 29,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 70520
            },
            {
                id: 1308,
                name: 'Fabiola Hauenstein',
                country: {
                    name: 'Czech Republic',
                    code: 'cz'
                },
                company: 'Sidewinder Products Corp',
                date: '2015-12-12',
                status: 'renewal',
                verified: true,
                activity: 42,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 74510
            },
            {
                id: 1309,
                name: 'Amie Perigo',
                country: {
                    name: 'Russia',
                    code: 'ru'
                },
                company: 'General Foam Corporation',
                date: '2016-06-13',
                status: 'new',
                verified: true,
                activity: 55,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 74410
            },
            {
                id: 1310,
                name: 'Raina Brachle',
                country: {
                    name: 'Greece',
                    code: 'gr'
                },
                company: 'Ikg Borden Divsn Harsco Corp',
                date: '2016-11-28',
                status: 'negotiation',
                verified: true,
                activity: 12,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 56116
            },
            {
                id: 1311,
                name: 'Erinn Canlas',
                country: {
                    name: 'United Kingdom',
                    code: 'gb'
                },
                company: 'Anchor Computer Inc',
                date: '2018-12-08',
                status: 'negotiation',
                verified: true,
                activity: 89,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 46518
            },
            {
                id: 1312,
                name: 'Cherry Lietz',
                country: {
                    name: 'Bulgaria',
                    code: 'bg'
                },
                company: 'Sebring \u0026 Co',
                date: '2017-11-04',
                status: 'qualified',
                verified: true,
                activity: 22,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 92213
            },
            {
                id: 1313,
                name: 'Kattie Vonasek',
                country: {
                    name: 'Austria',
                    code: 'at'
                },
                company: 'H A C Farm Lines Co Optv Assoc',
                date: '2017-02-17',
                status: 'negotiation',
                verified: true,
                activity: 58,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 6405
            },
            {
                id: 1314,
                name: 'Lilli Scriven',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'Hunter, John J Esq',
                date: '2017-04-15',
                status: 'qualified',
                verified: true,
                activity: 79,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 92900
            },
            {
                id: 1315,
                name: 'Whitley Tomasulo',
                country: {
                    name: 'Qatar',
                    code: 'qa'
                },
                company: 'Freehold Fence Co',
                date: '2017-11-16',
                status: 'qualified',
                verified: true,
                activity: 6,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 86727
            },
            {
                id: 1316,
                name: 'Barbra Adkin',
                country: {
                    name: 'Nigeria',
                    code: 'ng'
                },
                company: 'Binswanger',
                date: '2019-07-24',
                status: 'qualified',
                verified: true,
                activity: 64,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 48040
            },
            {
                id: 1317,
                name: 'Hermila Thyberg',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'Chilton Malting Co',
                date: '2016-11-05',
                status: 'qualified',
                verified: true,
                activity: 57,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 24026
            },
            {
                id: 1318,
                name: 'Jesusita Flister',
                country: {
                    name: 'Ukraine',
                    code: 'ua'
                },
                company: 'Schoen, Edward J Jr',
                date: '2017-03-03',
                status: 'negotiation',
                verified: true,
                activity: 29,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 76388
            },
            {
                id: 1319,
                name: 'Caitlin Julia',
                country: {
                    name: 'Israel',
                    code: 'il'
                },
                company: 'Helderman, Seymour Cpa',
                date: '2018-03-13',
                status: 'renewal',
                verified: true,
                activity: 19,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 89068
            },
            {
                id: 1320,
                name: 'Roosevelt Hoffis',
                country: {
                    name: 'Puerto Rico',
                    code: 'pr'
                },
                company: 'Denbrook, Myron',
                date: '2019-04-14',
                status: 'new',
                verified: true,
                activity: 49,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 12727
            },
            {
                id: 1321,
                name: 'Helaine Halter',
                country: {
                    name: 'Estonia',
                    code: 'ee'
                },
                company: 'Lippitt, Mike',
                date: '2019-09-28',
                status: 'renewal',
                verified: true,
                activity: 62,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 83411
            },
            {
                id: 1322,
                name: 'Lorean Martabano',
                country: {
                    name: 'Slovakia',
                    code: 'sk'
                },
                company: 'Hiram, Hogg P Esq',
                date: '2017-03-23',
                status: 'negotiation',
                verified: true,
                activity: 8,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 44242
            },
            {
                id: 1323,
                name: 'France Buzick',
                country: {
                    name: 'Nigeria',
                    code: 'ng'
                },
                company: 'In Travel Agency',
                date: '2016-12-14',
                status: 'renewal',
                verified: true,
                activity: 22,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 5644
            },
            {
                id: 1324,
                name: 'Justine Ferrario',
                country: {
                    name: 'Ukraine',
                    code: 'ua'
                },
                company: 'Newhart Foods Inc',
                date: '2015-09-07',
                status: 'unqualified',
                verified: true,
                activity: 7,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 29321
            },
            {
                id: 1325,
                name: 'Adelina Nabours',
                country: {
                    name: 'Mexico',
                    code: 'mx'
                },
                company: 'Courtyard By Marriott',
                date: '2018-05-26',
                status: 'renewal',
                verified: true,
                activity: 59,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 13353
            },
            {
                id: 1326,
                name: 'Derick Dhamer',
                country: {
                    name: 'Hungary',
                    code: 'hu'
                },
                company: 'Studer, Eugene A Esq',
                date: '2020-07-04',
                status: 'new',
                verified: true,
                activity: 72,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 53454
            },
            {
                id: 1327,
                name: 'Jerry Dallen',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'Seashore Supply Co Waretown',
                date: '2015-10-23',
                status: 'renewal',
                verified: false,
                activity: 21,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 30074
            },
            {
                id: 1328,
                name: 'Leota Ragel',
                country: {
                    name: 'Qatar',
                    code: 'qa'
                },
                company: 'Mayar Silk Inc',
                date: '2019-06-15',
                status: 'negotiation',
                verified: true,
                activity: 74,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 36310
            },
            {
                id: 1329,
                name: 'Jutta Amyot',
                country: {
                    name: 'Cameroon',
                    code: 'cm'
                },
                company: 'National Medical Excess Corp',
                date: '2019-09-01',
                status: 'negotiation',
                verified: true,
                activity: 8,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 27563
            },
            {
                id: 1330,
                name: 'Aja Gehrett',
                country: {
                    name: 'Sweden',
                    code: 'se'
                },
                company: 'Stero Company',
                date: '2018-01-28',
                status: 'qualified',
                verified: true,
                activity: 46,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 45163
            },
            {
                id: 1331,
                name: 'Kirk Herritt',
                country: {
                    name: 'Morocco',
                    code: 'ma'
                },
                company: 'Hasting, H Duane Esq',
                date: '2018-10-24',
                status: 'renewal',
                verified: false,
                activity: 2,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 52970
            },
            {
                id: 1332,
                name: 'Leonora Mauson',
                country: {
                    name: 'Hong Kong',
                    code: 'hk'
                },
                company: 'Insty Prints',
                date: '2019-02-02',
                status: 'negotiation',
                verified: true,
                activity: 8,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 18922
            },
            {
                id: 1333,
                name: 'Winfred Brucato',
                country: {
                    name: 'Austria',
                    code: 'at'
                },
                company: 'Glenridge Manor Mobile Home Pk',
                date: '2019-08-16',
                status: 'renewal',
                verified: true,
                activity: 8,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 59632
            },
            {
                id: 1334,
                name: 'Tarra Nachor',
                country: {
                    name: 'Panama',
                    code: 'pa'
                },
                company: 'Circuit Solution Inc',
                date: '2019-07-10',
                status: 'negotiation',
                verified: true,
                activity: 88,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 6733
            },
            {
                id: 1335,
                name: 'Corinne Loder',
                country: {
                    name: 'Brazil',
                    code: 'br'
                },
                company: 'Local Office',
                date: '2016-05-21',
                status: 'negotiation',
                verified: true,
                activity: 85,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 22704
            },
            {
                id: 1336,
                name: 'Dulce Labreche',
                country: {
                    name: 'South Africa',
                    code: 'za'
                },
                company: 'Lee Kilkelly Paulson \u0026 Kabaker',
                date: '2019-11-10',
                status: 'qualified',
                verified: true,
                activity: 24,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 82613
            },
            {
                id: 1337,
                name: 'Kate Keneipp',
                country: {
                    name: 'Latvia',
                    code: 'lv'
                },
                company: 'Davis, Maxon R Esq',
                date: '2019-06-20',
                status: 'negotiation',
                verified: true,
                activity: 44,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 97960
            },
            {
                id: 1338,
                name: 'Kaitlyn Ogg',
                country: {
                    name: 'Tunisia',
                    code: 'tn'
                },
                company: 'Garrison, Paul E Esq',
                date: '2019-08-01',
                status: 'negotiation',
                verified: true,
                activity: 91,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 63123
            },
            {
                id: 1339,
                name: 'Sherita Saras',
                country: {
                    name: 'Taiwan',
                    code: 'tw'
                },
                company: 'Black History Resource Center',
                date: '2017-06-09',
                status: 'unqualified',
                verified: true,
                activity: 79,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 38090
            },
            {
                id: 1340,
                name: 'Lashawnda Stuer',
                country: {
                    name: 'Indonesia',
                    code: 'id'
                },
                company: 'Rodriguez, J Christopher Esq',
                date: '2018-01-08',
                status: 'negotiation',
                verified: true,
                activity: 6,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 58826
            },
            {
                id: 1341,
                name: 'Ernest Syrop',
                country: {
                    name: 'Jamaica',
                    code: 'jm'
                },
                company: 'Grant Family Health Center',
                date: '2016-10-06',
                status: 'unqualified',
                verified: true,
                activity: 90,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 22419
            },
            {
                id: 1342,
                name: 'Nobuko Halsey',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'Goeman Wood Products Inc',
                date: '2019-01-02',
                status: 'unqualified',
                verified: true,
                activity: 72,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 86006
            },
            {
                id: 1343,
                name: 'Lavonna Wolny',
                country: {
                    name: 'Czech Republic',
                    code: 'cz'
                },
                company: 'Linhares, Kenneth A Esq',
                date: '2019-03-09',
                status: 'negotiation',
                verified: true,
                activity: 77,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 40641
            },
            {
                id: 1344,
                name: 'Lashaunda Lizama',
                country: {
                    name: 'Ecuador',
                    code: 'ec'
                },
                company: 'Earnhardt Printing',
                date: '2016-02-16',
                status: 'negotiation',
                verified: true,
                activity: 76,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 73493
            },
            {
                id: 1345,
                name: 'Mariann Bilden',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'H P G Industrys Inc',
                date: '2019-12-15',
                status: 'negotiation',
                verified: true,
                activity: 20,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 87704
            },
            {
                id: 1346,
                name: 'Helene Rodenberger',
                country: {
                    name: 'Bolivia',
                    code: 'bo'
                },
                company: 'Bailey Transportation Prod Inc',
                date: '2016-09-22',
                status: 'unqualified',
                verified: true,
                activity: 26,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 19662
            },
            {
                id: 1347,
                name: 'Roselle Estell',
                country: {
                    name: 'Hungary',
                    code: 'hu'
                },
                company: 'Mcglynn Bliss Pc',
                date: '2016-11-25',
                status: 'negotiation',
                verified: true,
                activity: 80,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 80534
            },
            {
                id: 1348,
                name: 'Samira Heintzman',
                country: {
                    name: 'Vietnam',
                    code: 'vn'
                },
                company: 'Mutual Fish Co',
                date: '2019-11-26',
                status: 'qualified',
                verified: true,
                activity: 70,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 19473
            },
            {
                id: 1349,
                name: 'Margart Meisel',
                country: {
                    name: 'Serbia',
                    code: 'rs'
                },
                company: 'Yeates, Arthur L Aia',
                date: '2019-10-27',
                status: 'negotiation',
                verified: true,
                activity: 77,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 89796
            },
            {
                id: 1350,
                name: 'Kristofer Bennick',
                country: {
                    name: 'Tunisia',
                    code: 'tn'
                },
                company: 'Logan, Ronald J Esq',
                date: '2016-02-13',
                status: 'negotiation',
                verified: true,
                activity: 5,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 54429
            },
            {
                id: 1351,
                name: 'Weldon Acuff',
                country: {
                    name: 'Estonia',
                    code: 'ee'
                },
                company: 'Advantage Martgage Company',
                date: '2019-10-22',
                status: 'qualified',
                verified: true,
                activity: 38,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 16134
            },
            {
                id: 1352,
                name: 'Shalon Shadrick',
                country: {
                    name: 'Iceland',
                    code: 'is'
                },
                company: 'Germer And Gertz Llp',
                date: '2015-01-03',
                status: 'negotiation',
                verified: true,
                activity: 66,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 9173
            },
            {
                id: 1353,
                name: 'Denise Patak',
                country: {
                    name: 'Uruguay',
                    code: 'uy'
                },
                company: 'Spence Law Offices',
                date: '2016-11-03',
                status: 'qualified',
                verified: true,
                activity: 77,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 42857
            },
            {
                id: 1354,
                name: 'Louvenia Beech',
                country: {
                    name: 'Ecuador',
                    code: 'ec'
                },
                company: 'John Ortiz Nts Therapy Center',
                date: '2016-04-11',
                status: 'renewal',
                verified: true,
                activity: 62,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 54300
            },
            {
                id: 1355,
                name: 'Audry Yaw',
                country: {
                    name: 'Portugal',
                    code: 'pt'
                },
                company: 'Mike Uchrin Htg \u0026 Air Cond Inc',
                date: '2017-11-22',
                status: 'unqualified',
                verified: true,
                activity: 12,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 94652
            },
            {
                id: 1356,
                name: 'Kristel Ehmann',
                country: {
                    name: 'Israel',
                    code: 'il'
                },
                company: 'Mccoy, Joy Reynolds Esq',
                date: '2016-06-23',
                status: 'new',
                verified: true,
                activity: 67,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 88295
            },
            {
                id: 1357,
                name: 'Vincenza Zepp',
                country: {
                    name: 'Pakistan',
                    code: 'pk'
                },
                company: 'Kbor 1600 Am',
                date: '2016-01-04',
                status: 'qualified',
                verified: true,
                activity: 25,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 92710
            },
            {
                id: 1358,
                name: 'Elouise Gwalthney',
                country: {
                    name: 'Netherlands',
                    code: 'nl'
                },
                company: 'Quality Inn Northwest',
                date: '2016-04-05',
                status: 'negotiation',
                verified: true,
                activity: 14,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 25145
            },
            {
                id: 1359,
                name: 'Venita Maillard',
                country: {
                    name: 'Poland',
                    code: 'pl'
                },
                company: 'Wallace Church Assoc Inc',
                date: '2016-03-23',
                status: 'negotiation',
                verified: true,
                activity: 69,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 61630
            },
            {
                id: 1360,
                name: 'Kasandra Semidey',
                country: {
                    name: 'Indonesia',
                    code: 'id'
                },
                company: 'Can Tron',
                date: '2015-09-03',
                status: 'new',
                verified: true,
                activity: 25,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 66134
            },
            {
                id: 1361,
                name: 'Xochitl Discipio',
                country: {
                    name: 'Slovakia',
                    code: 'sk'
                },
                company: 'Ravaal Enterprises Inc',
                date: '2016-11-14',
                status: 'qualified',
                verified: true,
                activity: 47,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 14822
            },
            {
                id: 1362,
                name: 'Maile Linahan',
                country: {
                    name: 'Nigeria',
                    code: 'ng'
                },
                company: 'Thompson Steel Company Inc',
                date: '2016-07-24',
                status: 'new',
                verified: true,
                activity: 0,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 17759
            },
            {
                id: 1363,
                name: 'Krissy Rauser',
                country: {
                    name: 'Thailand',
                    code: 'th'
                },
                company: 'Anderson, Mark A Esq',
                date: '2020-03-06',
                status: 'renewal',
                verified: true,
                activity: 33,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 14922
            },
            {
                id: 1364,
                name: 'Pete Dubaldi',
                country: {
                    name: 'Bolivia',
                    code: 'bo'
                },
                company: 'Womack \u0026 Galich',
                date: '2015-11-22',
                status: 'unqualified',
                verified: true,
                activity: 31,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 96575
            },
            {
                id: 1365,
                name: 'Linn Paa',
                country: {
                    name: 'Bolivia',
                    code: 'bo'
                },
                company: 'Valerie \u0026 Company',
                date: '2015-08-12',
                status: 'unqualified',
                verified: true,
                activity: 26,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 5847
            },
            {
                id: 1366,
                name: 'Paris Wide',
                country: {
                    name: 'Uruguay',
                    code: 'uy'
                },
                company: 'Gehring Pumps Inc',
                date: '2018-10-21',
                status: 'negotiation',
                verified: true,
                activity: 90,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 22929
            },
            {
                id: 1367,
                name: 'Wynell Dorshorst',
                country: {
                    name: 'Romania',
                    code: 'ro'
                },
                company: 'Haehnel, Craig W Esq',
                date: '2018-05-10',
                status: 'new',
                verified: true,
                activity: 60,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 31837
            },
            {
                id: 1368,
                name: 'Quentin Birkner',
                country: {
                    name: 'Senegal',
                    code: 'sn'
                },
                company: 'Spoor Behrins Campbell \u0026 Young',
                date: '2019-02-03',
                status: 'unqualified',
                verified: true,
                activity: 68,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 27095
            },
            {
                id: 1369,
                name: 'Regenia Kannady',
                country: {
                    name: 'Portugal',
                    code: 'pt'
                },
                company: 'Ken Jeter Store Equipment Inc',
                date: '2018-07-13',
                status: 'new',
                verified: true,
                activity: 74,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 43696
            },
            {
                id: 1370,
                name: 'Sheron Louissant',
                country: {
                    name: 'France',
                    code: 'fr'
                },
                company: 'Potter, Brenda J Cpa',
                date: '2017-01-04',
                status: 'qualified',
                verified: true,
                activity: 86,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 79897
            },
            {
                id: 1371,
                name: 'Izetta Funnell',
                country: {
                    name: 'Hong Kong',
                    code: 'hk'
                },
                company: 'Baird Kurtz \u0026 Dobson',
                date: '2019-11-05',
                status: 'new',
                verified: true,
                activity: 67,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 27264
            },
            {
                id: 1372,
                name: 'Rodolfo Butzen',
                country: {
                    name: 'Taiwan',
                    code: 'tw'
                },
                company: 'Minor, Cynthia A Esq',
                date: '2020-09-25',
                status: 'negotiation',
                verified: true,
                activity: 17,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 16490
            },
            {
                id: 1373,
                name: 'Zona Colla',
                country: {
                    name: 'Switzerland',
                    code: 'ch'
                },
                company: 'Solove, Robert A Esq',
                date: '2020-10-08',
                status: 'negotiation',
                verified: true,
                activity: 64,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 21990
            },
            {
                id: 1374,
                name: 'Serina Zagen',
                country: {
                    name: 'Paraguay',
                    code: 'py'
                },
                company: 'Mark Ii Imports Inc',
                date: '2018-07-14',
                status: 'negotiation',
                verified: true,
                activity: 46,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 11918
            },
            {
                id: 1375,
                name: 'Paz Sahagun',
                country: {
                    name: 'Colombia',
                    code: 'co'
                },
                company: 'White Sign Div Ctrl Equip Co',
                date: '2018-03-23',
                status: 'negotiation',
                verified: true,
                activity: 49,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 13268
            },
            {
                id: 1376,
                name: 'Markus Lukasik',
                country: {
                    name: 'Burkina Faso',
                    code: 'bf'
                },
                company: 'M \u0026 M Store Fixtures Co Inc',
                date: '2018-03-21',
                status: 'negotiation',
                verified: true,
                activity: 23,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 15941
            },
            {
                id: 1377,
                name: 'Jaclyn Bachman',
                country: {
                    name: 'Slovakia',
                    code: 'sk'
                },
                company: 'Judah Caster \u0026 Wheel Co',
                date: '2020-10-20',
                status: 'new',
                verified: true,
                activity: 10,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 53132
            },
            {
                id: 1378,
                name: 'Cyril Daufeldt',
                country: {
                    name: 'India',
                    code: 'in'
                },
                company: 'Galaxy International Inc',
                date: '2019-02-11',
                status: 'qualified',
                verified: true,
                activity: 79,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 47531
            },
            {
                id: 1379,
                name: 'Gayla Schnitzler',
                country: {
                    name: 'Brazil',
                    code: 'br'
                },
                company: 'Sigma Corp Of America',
                date: '2017-09-15',
                status: 'new',
                verified: true,
                activity: 14,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 88950
            },
            {
                id: 1380,
                name: 'Erick Nievas',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'Soward, Anne Esq',
                date: '2018-10-07',
                status: 'negotiation',
                verified: false,
                activity: 28,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 88497
            },
            {
                id: 1381,
                name: 'Jennie Drymon',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'Osborne, Michelle M Esq',
                date: '2016-09-14',
                status: 'negotiation',
                verified: true,
                activity: 80,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 60634
            },
            {
                id: 1382,
                name: 'Mitsue Scipione',
                country: {
                    name: 'Ecuador',
                    code: 'ec'
                },
                company: 'Students In Free Entrprs Natl',
                date: '2019-07-28',
                status: 'qualified',
                verified: true,
                activity: 24,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 21164
            },
            {
                id: 1383,
                name: 'Ciara Ventura',
                country: {
                    name: 'Sweden',
                    code: 'se'
                },
                company: 'Johnson, Robert M Esq',
                date: '2018-04-02',
                status: 'renewal',
                verified: false,
                activity: 24,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 83645
            },
            {
                id: 1384,
                name: 'Galen Cantres',
                country: {
                    name: 'Saudi Arabia',
                    code: 'sa'
                },
                company: 'Del Charro Apartments',
                date: '2020-02-16',
                status: 'unqualified',
                verified: true,
                activity: 61,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 32433
            },
            {
                id: 1385,
                name: 'Truman Feichtner',
                country: {
                    name: 'Iceland',
                    code: 'is'
                },
                company: 'Legal Search Inc',
                date: '2019-10-16',
                status: 'renewal',
                verified: true,
                activity: 98,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 96983
            },
            {
                id: 1386,
                name: 'Gail Kitty',
                country: {
                    name: 'Pakistan',
                    code: 'pk'
                },
                company: 'Service Supply Co Inc',
                date: '2020-01-15',
                status: 'negotiation',
                verified: true,
                activity: 67,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 72211
            },
            {
                id: 1387,
                name: 'Dalene Schoeneck',
                country: {
                    name: 'Latvia',
                    code: 'lv'
                },
                company: 'Sameshima, Douglas J Esq',
                date: '2019-11-27',
                status: 'negotiation',
                verified: true,
                activity: 85,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 40262
            },
            {
                id: 1388,
                name: 'Gertude Witten',
                country: {
                    name: 'Morocco',
                    code: 'ma'
                },
                company: 'Thompson, John Randolph Jr',
                date: '2017-08-13',
                status: 'negotiation',
                verified: true,
                activity: 40,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 91139
            },
            {
                id: 1389,
                name: 'Lizbeth Kohl',
                country: {
                    name: 'Serbia',
                    code: 'rs'
                },
                company: 'E T Balancing Co Inc',
                date: '2019-04-20',
                status: 'qualified',
                verified: true,
                activity: 57,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 79659
            },
            {
                id: 1390,
                name: 'Glenn Berray',
                country: {
                    name: 'Poland',
                    code: 'pl'
                },
                company: 'Griswold, John E Esq',
                date: '2017-08-13',
                status: 'negotiation',
                verified: true,
                activity: 68,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 93576
            },
            {
                id: 1391,
                name: 'Lashandra Klang',
                country: {
                    name: 'Bulgaria',
                    code: 'bg'
                },
                company: 'Acqua Group',
                date: '2016-06-08',
                status: 'negotiation',
                verified: true,
                activity: 32,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 93576
            },
            {
                id: 1392,
                name: 'Lenna Newville',
                country: {
                    name: 'Venezuela',
                    code: 've'
                },
                company: 'Brooks, Morris J Jr',
                date: '2020-09-12',
                status: 'qualified',
                verified: true,
                activity: 82,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 93576
            },
            {
                id: 1393,
                name: 'Laurel Pagliuca',
                country: {
                    name: 'Russia',
                    code: 'ru'
                },
                company: 'Printing Images Corp',
                date: '2017-05-26',
                status: 'unqualified',
                verified: true,
                activity: 21,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 2009
            },
            {
                id: 1394,
                name: 'Mireya Frerking',
                country: {
                    name: 'Belarus',
                    code: 'by'
                },
                company: 'Roberts Supply Co Inc',
                date: '2017-04-21',
                status: 'renewal',
                verified: true,
                activity: 54,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 35341
            },
            {
                id: 1395,
                name: 'Annelle Tagala',
                country: {
                    name: 'Colombia',
                    code: 'co'
                },
                company: 'Vico Products Mfg Co',
                date: '2017-10-02',
                status: 'negotiation',
                verified: true,
                activity: 53,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 13077
            },
            {
                id: 1396,
                name: 'Dean Ketelsen',
                country: {
                    name: 'Ivory Coast',
                    code: 'ci'
                },
                company: 'J M Custom Design Millwork',
                date: '2019-07-25',
                status: 'negotiation',
                verified: true,
                activity: 98,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 83423
            },
            {
                id: 1397,
                name: 'Levi Munis',
                country: {
                    name: 'Pakistan',
                    code: 'pk'
                },
                company: 'Farrell \u0026 Johnson Office Equip',
                date: '2017-06-24',
                status: 'negotiation',
                verified: true,
                activity: 39,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 14350
            },
            {
                id: 1398,
                name: 'Sylvie Ryser',
                country: {
                    name: 'India',
                    code: 'in'
                },
                company: 'Millers Market \u0026 Deli',
                date: '2016-02-23',
                status: 'unqualified',
                verified: true,
                activity: 89,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 98864
            },
            {
                id: 1399,
                name: 'Sharee Maile',
                country: {
                    name: 'Ireland',
                    code: 'ie'
                },
                company: 'Holiday Inn Naperville',
                date: '2020-07-17',
                status: 'renewal',
                verified: true,
                activity: 0,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 29326
            },
            {
                id: 1400,
                name: 'Cordelia Storment',
                country: {
                    name: 'Guatemala',
                    code: 'gt'
                },
                company: 'Burrows, Jon H Esq',
                date: '2020-02-17',
                status: 'negotiation',
                verified: true,
                activity: 45,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 81198
            },
            {
                id: 1401,
                name: 'Mollie Mcdoniel',
                country: {
                    name: 'Vietnam',
                    code: 'vn'
                },
                company: 'Dock Seal Specialty',
                date: '2017-08-13',
                status: 'unqualified',
                verified: true,
                activity: 59,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 82391
            },
            {
                id: 1402,
                name: 'Brett Mccullan',
                country: {
                    name: 'Senegal',
                    code: 'sn'
                },
                company: 'Five Star Limousines Of Tx Inc',
                date: '2015-05-21',
                status: 'qualified',
                verified: true,
                activity: 9,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 48071
            },
            {
                id: 1403,
                name: 'Teddy Pedrozo',
                country: {
                    name: 'Burkina Faso',
                    code: 'bf'
                },
                company: 'Barkan, Neal J Esq',
                date: '2019-02-19',
                status: 'negotiation',
                verified: true,
                activity: 38,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 14593
            },
            {
                id: 1404,
                name: 'Tasia Andreason',
                country: {
                    name: 'Venezuela',
                    code: 've'
                },
                company: 'Campbell, Robert A',
                date: '2016-03-06',
                status: 'renewal',
                verified: true,
                activity: 25,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 8750
            },
            {
                id: 1405,
                name: 'Hubert Walthall',
                country: {
                    name: 'Mexico',
                    code: 'mx'
                },
                company: 'Dee, Deanna',
                date: '2020-12-19',
                status: 'renewal',
                verified: true,
                activity: 32,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 39655
            },
            {
                id: 1406,
                name: 'Arthur Farrow',
                country: {
                    name: 'Brazil',
                    code: 'br'
                },
                company: 'Young, Timothy L Esq',
                date: '2019-02-05',
                status: 'negotiation',
                verified: true,
                activity: 55,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 71713
            },
            {
                id: 1407,
                name: 'Vilma Berlanga',
                country: {
                    name: 'Tunisia',
                    code: 'tn'
                },
                company: 'Wells, D Fred Esq',
                date: '2016-02-09',
                status: 'unqualified',
                verified: false,
                activity: 26,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 81056
            },
            {
                id: 1408,
                name: 'Billye Miro',
                country: {
                    name: 'Hungary',
                    code: 'hu'
                },
                company: 'Gray, Francine H Esq',
                date: '2015-09-05',
                status: 'new',
                verified: true,
                activity: 70,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 34220
            },
            {
                id: 1409,
                name: 'Glenna Slayton',
                country: {
                    name: 'Iceland',
                    code: 'is'
                },
                company: 'Toledo Iv Care',
                date: '2016-03-10',
                status: 'unqualified',
                verified: true,
                activity: 86,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 21459
            },
            {
                id: 1410,
                name: 'Mitzie Hudnall',
                country: {
                    name: 'Iceland',
                    code: 'is'
                },
                company: 'Cangro Transmission Co',
                date: '2020-05-04',
                status: 'new',
                verified: true,
                activity: 19,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 51281
            },
            {
                id: 1411,
                name: 'Bernardine Rodefer',
                country: {
                    name: 'Switzerland',
                    code: 'ch'
                },
                company: 'Sat Poly Inc',
                date: '2020-10-19',
                status: 'negotiation',
                verified: true,
                activity: 69,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 53841
            },
            {
                id: 1412,
                name: 'Staci Schmaltz',
                country: {
                    name: 'Iceland',
                    code: 'is'
                },
                company: 'Midwest Contracting \u0026 Mfg Inc',
                date: '2018-03-14',
                status: 'unqualified',
                verified: true,
                activity: 81,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 34878
            },
            {
                id: 1413,
                name: 'Nichelle Meteer',
                country: {
                    name: 'Denmark',
                    code: 'dk'
                },
                company: 'Print Doctor',
                date: '2016-09-23',
                status: 'renewal',
                verified: true,
                activity: 39,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 85399
            },
            {
                id: 1414,
                name: 'Janine Rhoden',
                country: {
                    name: 'Nigeria',
                    code: 'ng'
                },
                company: 'Nordic Group Inc',
                date: '2018-08-13',
                status: 'qualified',
                verified: true,
                activity: 95,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 29237
            },
            {
                id: 1415,
                name: 'Ettie Hoopengardner',
                country: {
                    name: 'Switzerland',
                    code: 'ch'
                },
                company: 'Jackson Millwork Co',
                date: '2017-07-24',
                status: 'renewal',
                verified: false,
                activity: 23,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 12179
            },
            {
                id: 1416,
                name: 'Eden Jayson',
                country: {
                    name: 'Sweden',
                    code: 'se'
                },
                company: 'Harris Corporation',
                date: '2018-03-15',
                status: 'renewal',
                verified: true,
                activity: 9,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 27840
            },
            {
                id: 1417,
                name: 'Lynelle Auber',
                country: {
                    name: 'Netherlands',
                    code: 'nl'
                },
                company: 'United Cerebral Palsy Of Ne Pa',
                date: '2020-12-11',
                status: 'negotiation',
                verified: true,
                activity: 0,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 51958
            },
            {
                id: 1418,
                name: 'Merissa Tomblin',
                country: {
                    name: 'Jamaica',
                    code: 'jm'
                },
                company: 'One Day Surgery Center Inc',
                date: '2018-03-05',
                status: 'new',
                verified: true,
                activity: 50,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 33138
            },
            {
                id: 1419,
                name: 'Golda Kaniecki',
                country: {
                    name: 'Burkina Faso',
                    code: 'bf'
                },
                company: 'Calaveras Prospect',
                date: '2019-04-17',
                status: 'negotiation',
                verified: true,
                activity: 91,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 82539
            },
            {
                id: 1420,
                name: 'Catarina Gleich',
                country: {
                    name: 'Malaysia',
                    code: 'my'
                },
                company: 'Terk, Robert E Esq',
                date: '2017-01-26',
                status: 'unqualified',
                verified: true,
                activity: 12,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 5619
            },
            {
                id: 1421,
                name: 'Virgie Kiel',
                country: {
                    name: 'Latvia',
                    code: 'lv'
                },
                company: 'Cullen, Terrence P Esq',
                date: '2016-06-28',
                status: 'renewal',
                verified: true,
                activity: 89,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 44763
            },
            {
                id: 1422,
                name: 'Jolene Ostolaza',
                country: {
                    name: 'Puerto Rico',
                    code: 'pr'
                },
                company: 'Central Die Casting Mfg Co Inc',
                date: '2016-08-08',
                status: 'negotiation',
                verified: true,
                activity: 85,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 97208
            },
            {
                id: 1423,
                name: 'Keneth Borgman',
                country: {
                    name: 'Qatar',
                    code: 'qa'
                },
                company: 'Centerline Engineering',
                date: '2019-02-04',
                status: 'unqualified',
                verified: true,
                activity: 41,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 93316
            },
            {
                id: 1424,
                name: 'Rikki Nayar',
                country: {
                    name: 'Norway',
                    code: 'no'
                },
                company: 'Targan \u0026 Kievit Pa',
                date: '2017-03-06',
                status: 'negotiation',
                verified: true,
                activity: 47,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 23786
            },
            {
                id: 1425,
                name: 'Elke Sengbusch',
                country: {
                    name: 'Canada',
                    code: 'ca'
                },
                company: 'Riley Riper Hollin \u0026 Colagreco',
                date: '2019-05-28',
                status: 'renewal',
                verified: true,
                activity: 76,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 98367
            },
            {
                id: 1426,
                name: 'Hoa Sarao',
                country: {
                    name: 'Sweden',
                    code: 'se'
                },
                company: 'Kaplan, Joel S Esq',
                date: '2020-08-13',
                status: 'negotiation',
                verified: true,
                activity: 0,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 68683
            },
            {
                id: 1427,
                name: 'Trinidad Mcrae',
                country: {
                    name: 'Burkina Faso',
                    code: 'bf'
                },
                company: 'Water Office',
                date: '2020-12-26',
                status: 'renewal',
                verified: true,
                activity: 76,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 85602
            },
            {
                id: 1428,
                name: 'Mari Lueckenbach',
                country: {
                    name: 'Cuba',
                    code: 'cu'
                },
                company: 'Westbrooks, Nelson E Jr',
                date: '2017-10-27',
                status: 'new',
                verified: true,
                activity: 34,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 14402
            },
            {
                id: 1429,
                name: 'Selma Husser',
                country: {
                    name: 'Morocco',
                    code: 'ma'
                },
                company: 'Armon Communications',
                date: '2018-02-16',
                status: 'negotiation',
                verified: true,
                activity: 84,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 81608
            },
            {
                id: 1430,
                name: 'Antione Onofrio',
                country: {
                    name: 'Taiwan',
                    code: 'tw'
                },
                company: 'Jacobs \u0026 Gerber Inc',
                date: '2017-11-07',
                status: 'negotiation',
                verified: true,
                activity: 37,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 15573
            },
            {
                id: 1431,
                name: 'Luisa Jurney',
                country: {
                    name: 'Canada',
                    code: 'ca'
                },
                company: 'Forest Fire Laboratory',
                date: '2018-06-12',
                status: 'unqualified',
                verified: true,
                activity: 96,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 50121
            },
            {
                id: 1432,
                name: 'Clorinda Heimann',
                country: {
                    name: 'Israel',
                    code: 'il'
                },
                company: 'Haughey, Charles Jr',
                date: '2016-11-03',
                status: 'negotiation',
                verified: true,
                activity: 63,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 93911
            },
            {
                id: 1433,
                name: 'Dick Wenzinger',
                country: {
                    name: 'Mexico',
                    code: 'mx'
                },
                company: 'Wheaton Plastic Products',
                date: '2017-04-05',
                status: 'negotiation',
                verified: true,
                activity: 92,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 66383
            },
            {
                id: 1434,
                name: 'Ahmed Angalich',
                country: {
                    name: 'Australia',
                    code: 'au'
                },
                company: 'Reese Plastics',
                date: '2018-11-20',
                status: 'unqualified',
                verified: true,
                activity: 83,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 89183
            },
            {
                id: 1435,
                name: 'Iluminada Ohms',
                country: {
                    name: 'Croatia',
                    code: 'hr'
                },
                company: 'Nazette Marner Good Wendt',
                date: '2015-08-18',
                status: 'negotiation',
                verified: true,
                activity: 66,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 9752
            },
            {
                id: 1436,
                name: 'Joanna Leinenbach',
                country: {
                    name: 'Thailand',
                    code: 'th'
                },
                company: 'Levinson Axelrod Wheaton',
                date: '2016-02-11',
                status: 'negotiation',
                verified: true,
                activity: 64,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 2623
            },
            {
                id: 1437,
                name: 'Caprice Suell',
                country: {
                    name: 'Algeria',
                    code: 'dz'
                },
                company: 'Egnor, W Dan Esq',
                date: '2018-07-09',
                status: 'unqualified',
                verified: true,
                activity: 99,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 87620
            },
            {
                id: 1438,
                name: 'Stephane Myricks',
                country: {
                    name: 'Honduras',
                    code: 'hn'
                },
                company: 'Portland Central Thriftlodge',
                date: '2018-05-28',
                status: 'renewal',
                verified: true,
                activity: 51,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 14625
            },
            {
                id: 1439,
                name: 'Quentin Swayze',
                country: {
                    name: 'Tunisia',
                    code: 'tn'
                },
                company: 'Ulbrich Trucking',
                date: '2019-02-11',
                status: 'negotiation',
                verified: true,
                activity: 37,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 39339
            },
            {
                id: 1440,
                name: 'Annmarie Castros',
                country: {
                    name: 'Jamaica',
                    code: 'jm'
                },
                company: 'Tipiak Inc',
                date: '2015-08-24',
                status: 'qualified',
                verified: true,
                activity: 46,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 77704
            },
            {
                id: 1441,
                name: 'Shonda Greenbush',
                country: {
                    name: 'Costa Rica',
                    code: 'cr'
                },
                company: 'Saint George Well Drilling',
                date: '2018-06-01',
                status: 'negotiation',
                verified: true,
                activity: 16,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 75326
            },
            {
                id: 1442,
                name: 'Cecil Lapage',
                country: {
                    name: 'Malaysia',
                    code: 'my'
                },
                company: 'Hawkes, Douglas D',
                date: '2018-11-09',
                status: 'qualified',
                verified: true,
                activity: 43,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 71364
            },
            {
                id: 1443,
                name: 'Jeanice Claucherty',
                country: {
                    name: 'Lithuania',
                    code: 'lt'
                },
                company: 'Accurel Systems Intrntl Corp',
                date: '2016-06-02',
                status: 'qualified',
                verified: true,
                activity: 48,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 73360
            },
            {
                id: 1444,
                name: 'Josphine Villanueva',
                country: {
                    name: 'Japan',
                    code: 'jp'
                },
                company: 'Santa Cruz Community Internet',
                date: '2019-11-08',
                status: 'unqualified',
                verified: true,
                activity: 39,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 59442
            },
            {
                id: 1445,
                name: 'Daniel Perruzza',
                country: {
                    name: 'Malaysia',
                    code: 'my'
                },
                company: 'Gersh \u0026 Danielson',
                date: '2017-09-24',
                status: 'renewal',
                verified: true,
                activity: 86,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 84338
            },
            {
                id: 1446,
                name: 'Cassi Wildfong',
                country: {
                    name: 'Tunisia',
                    code: 'tn'
                },
                company: 'Cobb, James O Esq',
                date: '2015-09-08',
                status: 'qualified',
                verified: true,
                activity: 85,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 72545
            },
            {
                id: 1447,
                name: 'Britt Galam',
                country: {
                    name: 'Poland',
                    code: 'pl'
                },
                company: 'Wheatley Trucking Company',
                date: '2020-10-26',
                status: 'new',
                verified: true,
                activity: 69,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 53307
            },
            {
                id: 1448,
                name: 'Adell Lipkin',
                country: {
                    name: 'Saudi Arabia',
                    code: 'sa'
                },
                company: 'Systems Graph Inc Ab Dick Dlr',
                date: '2017-05-09',
                status: 'unqualified',
                verified: true,
                activity: 92,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 12178
            },
            {
                id: 1449,
                name: 'Jacqueline Rowling',
                country: {
                    name: 'Qatar',
                    code: 'qa'
                },
                company: 'John Hancock Mutl Life Ins Co',
                date: '2019-06-28',
                status: 'negotiation',
                verified: true,
                activity: 79,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 35576
            },
            {
                id: 1450,
                name: 'Lonny Weglarz',
                country: {
                    name: 'Chile',
                    code: 'cl'
                },
                company: 'History Division Of State',
                date: '2016-08-12',
                status: 'new',
                verified: true,
                activity: 49,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 20507
            },
            {
                id: 1451,
                name: 'Lonna Diestel',
                country: {
                    name: 'Philippines',
                    code: 'ph'
                },
                company: 'Dimmock, Thomas J Esq',
                date: '2017-02-10',
                status: 'negotiation',
                verified: true,
                activity: 9,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 56415
            },
            {
                id: 1452,
                name: 'Cristal Samara',
                country: {
                    name: 'Australia',
                    code: 'au'
                },
                company: 'Intermed Inc',
                date: '2016-08-17',
                status: 'qualified',
                verified: true,
                activity: 99,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 33427
            },
            {
                id: 1453,
                name: 'Kenneth Grenet',
                country: {
                    name: 'Croatia',
                    code: 'hr'
                },
                company: 'Bank Of New York',
                date: '2020-07-24',
                status: 'negotiation',
                verified: true,
                activity: 78,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 44004
            },
            {
                id: 1454,
                name: 'Elli Mclaird',
                country: {
                    name: 'Switzerland',
                    code: 'ch'
                },
                company: 'Sportmaster Intrnatl',
                date: '2017-06-10',
                status: 'qualified',
                verified: true,
                activity: 61,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 37227
            },
            {
                id: 1455,
                name: 'Alline Jeanty',
                country: {
                    name: 'Denmark',
                    code: 'dk'
                },
                company: 'W W John Holden Inc',
                date: '2015-12-08',
                status: 'renewal',
                verified: true,
                activity: 74,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 44560
            },
            {
                id: 1456,
                name: 'Sharika Eanes',
                country: {
                    name: 'Chile',
                    code: 'cl'
                },
                company: 'Maccani \u0026 Delp',
                date: '2018-08-16',
                status: 'qualified',
                verified: true,
                activity: 14,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 50922
            },
            {
                id: 1457,
                name: 'Nu Mcnease',
                country: {
                    name: 'Pakistan',
                    code: 'pk'
                },
                company: 'Amazonia Film Project',
                date: '2018-07-03',
                status: 'negotiation',
                verified: true,
                activity: 47,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 61262
            },
            {
                id: 1458,
                name: 'Daniela Comnick',
                country: {
                    name: 'Tunisia',
                    code: 'tn'
                },
                company: 'Water \u0026 Sewer Department',
                date: '2017-07-07',
                status: 'negotiation',
                verified: true,
                activity: 31,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 13459
            },
            {
                id: 1459,
                name: 'Cecilia Colaizzo',
                country: {
                    name: 'Costa Rica',
                    code: 'cr'
                },
                company: 'Switchcraft Inc',
                date: '2019-06-08',
                status: 'negotiation',
                verified: true,
                activity: 21,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 52299
            },
            {
                id: 1460,
                name: 'Leslie Threets',
                country: {
                    name: 'Sweden',
                    code: 'se'
                },
                company: 'C W D C Metal Fabricators',
                date: '2016-11-26',
                status: 'unqualified',
                verified: true,
                activity: 50,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 61040
            },
            {
                id: 1461,
                name: 'Nan Koppinger',
                country: {
                    name: 'Norway',
                    code: 'no'
                },
                company: 'Shimotani, Grace T',
                date: '2020-11-15',
                status: 'negotiation',
                verified: true,
                activity: 94,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 91297
            },
            {
                id: 1462,
                name: 'Izetta Dewar',
                country: {
                    name: 'Cuba',
                    code: 'cu'
                },
                company: 'Lisatoni, Jean Esq',
                date: '2019-11-22',
                status: 'renewal',
                verified: true,
                activity: 41,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 39947
            },
            {
                id: 1463,
                name: 'Tegan Arceo',
                country: {
                    name: 'Iceland',
                    code: 'is'
                },
                company: 'Ceramic Tile Sales Inc',
                date: '2016-08-07',
                status: 'new',
                verified: true,
                activity: 79,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 78224
            },
            {
                id: 1464,
                name: 'Ruthann Keener',
                country: {
                    name: 'Morocco',
                    code: 'ma'
                },
                company: 'Maiden Craft Inc',
                date: '2019-04-25',
                status: 'negotiation',
                verified: true,
                activity: 43,
                representative: {
                    name: 'Elwin Sharvill',
                    image: 'elwinsharvill.png'
                },
                balance: 22727
            },
            {
                id: 1465,
                name: 'Joni Breland',
                country: {
                    name: 'Uruguay',
                    code: 'uy'
                },
                company: 'Carriage House Cllsn Rpr Inc',
                date: '2018-07-20',
                status: 'new',
                verified: true,
                activity: 18,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 70650
            },
            {
                id: 1466,
                name: 'Vi Rentfro',
                country: {
                    name: 'Malaysia',
                    code: 'my'
                },
                company: 'Video Workshop',
                date: '2018-10-01',
                status: 'negotiation',
                verified: true,
                activity: 99,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 45956
            },
            {
                id: 1467,
                name: 'Colette Kardas',
                country: {
                    name: 'Honduras',
                    code: 'hn'
                },
                company: 'Fresno Tile Center Inc',
                date: '2017-08-22',
                status: 'new',
                verified: true,
                activity: 14,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 72627
            },
            {
                id: 1468,
                name: 'Malcolm Tromblay',
                country: {
                    name: 'Uruguay',
                    code: 'uy'
                },
                company: 'Versatile Sash \u0026 Woodwork',
                date: '2019-11-25',
                status: 'renewal',
                verified: true,
                activity: 23,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 80176
            },
            {
                id: 1469,
                name: 'Ryan Harnos',
                country: {
                    name: 'Paraguay',
                    code: 'py'
                },
                company: 'Warner Electric Brk \u0026 Cltch Co',
                date: '2019-02-12',
                status: 'qualified',
                verified: true,
                activity: 71,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 97227
            },
            {
                id: 1470,
                name: 'Jess Chaffins',
                country: {
                    name: 'Belarus',
                    code: 'by'
                },
                company: 'New York Public Library',
                date: '2017-02-12',
                status: 'qualified',
                verified: true,
                activity: 91,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 63121
            },
            {
                id: 1471,
                name: 'Sharen Bourbon',
                country: {
                    name: 'Saudi Arabia',
                    code: 'sa'
                },
                company: 'Mccaleb, John A Esq',
                date: '2017-06-13',
                status: 'renewal',
                verified: true,
                activity: 35,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 44726
            },
            {
                id: 1472,
                name: 'Nickolas Juvera',
                country: {
                    name: 'Finland',
                    code: 'fi'
                },
                company: 'United Oil Co Inc',
                date: '2019-01-06',
                status: 'negotiation',
                verified: true,
                activity: 14,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 70748
            },
            {
                id: 1473,
                name: 'Gary Nunlee',
                country: {
                    name: 'Turkey',
                    code: 'tr'
                },
                company: 'Irving Foot Center',
                date: '2015-07-22',
                status: 'renewal',
                verified: true,
                activity: 72,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 71061
            },
            {
                id: 1474,
                name: 'Diane Devreese',
                country: {
                    name: 'Bolivia',
                    code: 'bo'
                },
                company: 'Acme Supply Co',
                date: '2018-05-13',
                status: 'renewal',
                verified: true,
                activity: 78,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 7486
            },
            {
                id: 1475,
                name: 'Roslyn Chavous',
                country: {
                    name: 'Israel',
                    code: 'il'
                },
                company: 'Mcrae, James L',
                date: '2018-03-20',
                status: 'negotiation',
                verified: true,
                activity: 45,
                representative: {
                    name: 'Bernardo Dominic',
                    image: 'bernardodominic.png'
                },
                balance: 58495
            },
            {
                id: 1476,
                name: 'Glory Schieler',
                country: {
                    name: 'Italy',
                    code: 'it'
                },
                company: 'Mcgraths Seafood',
                date: '2017-05-13',
                status: 'negotiation',
                verified: true,
                activity: 34,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 96252
            },
            {
                id: 1477,
                name: 'Rasheeda Sayaphon',
                country: {
                    name: 'Latvia',
                    code: 'lv'
                },
                company: 'Kummerer, J Michael Esq',
                date: '2017-02-21',
                status: 'negotiation',
                verified: true,
                activity: 12,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 71454
            },
            {
                id: 1478,
                name: 'Alpha Palaia',
                country: {
                    name: 'Costa Rica',
                    code: 'cr'
                },
                company: 'Stoffer, James M Jr',
                date: '2017-07-21',
                status: 'renewal',
                verified: true,
                activity: 4,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 81894
            },
            {
                id: 1479,
                name: 'Refugia Jacobos',
                country: {
                    name: 'China',
                    code: 'cn'
                },
                company: 'North Central Fl Sfty Cncl',
                date: '2020-11-25',
                status: 'negotiation',
                verified: true,
                activity: 18,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 31601
            },
            {
                id: 1480,
                name: 'Shawnda Yori',
                country: {
                    name: 'Luxembourg',
                    code: 'lu'
                },
                company: 'Fiorucci Foods Usa Inc',
                date: '2018-05-09',
                status: 'unqualified',
                verified: true,
                activity: 11,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 12090
            },
            {
                id: 1481,
                name: 'Mona Delasancha',
                country: {
                    name: 'Hong Kong',
                    code: 'hk'
                },
                company: 'Sign All',
                date: '2017-10-06',
                status: 'renewal',
                verified: true,
                activity: 61,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 24073
            },
            {
                id: 1482,
                name: 'Gilma Liukko',
                country: {
                    name: 'Morocco',
                    code: 'ma'
                },
                company: 'Sammys Steak Den',
                date: '2018-10-06',
                status: 'unqualified',
                verified: true,
                activity: 34,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 35129
            },
            {
                id: 1483,
                name: 'Janey Gabisi',
                country: {
                    name: 'Israel',
                    code: 'il'
                },
                company: 'Dobscha, Stephen F Esq',
                date: '2019-05-22',
                status: 'unqualified',
                verified: true,
                activity: 38,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 25518
            },
            {
                id: 1484,
                name: 'Lili Paskin',
                country: {
                    name: 'Costa Rica',
                    code: 'cr'
                },
                company: 'Morgan Custom Homes',
                date: '2018-06-11',
                status: 'unqualified',
                verified: true,
                activity: 69,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 7300
            },
            {
                id: 1485,
                name: 'Loren Asar',
                country: {
                    name: 'Italy',
                    code: 'it'
                },
                company: 'Olsen Payne \u0026 Company',
                date: '2017-12-11',
                status: 'unqualified',
                verified: true,
                activity: 16,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 82949
            },
            {
                id: 1486,
                name: 'Dorothy Chesterfield',
                country: {
                    name: 'Spain',
                    code: 'es'
                },
                company: 'Cowan \u0026 Kelly',
                date: '2015-08-11',
                status: 'renewal',
                verified: true,
                activity: 31,
                representative: {
                    name: 'Anna Fali',
                    image: 'annafali.png'
                },
                balance: 25044
            },
            {
                id: 1487,
                name: 'Gail Similton',
                country: {
                    name: 'Malaysia',
                    code: 'my'
                },
                company: 'Johnson, Wes Esq',
                date: '2016-08-10',
                status: 'qualified',
                verified: true,
                activity: 63,
                representative: {
                    name: 'Xuxue Feng',
                    image: 'xuxuefeng.png'
                },
                balance: 97553
            },
            {
                id: 1488,
                name: 'Catalina Tillotson',
                country: {
                    name: 'Pakistan',
                    code: 'pk'
                },
                company: 'Icn Pharmaceuticals Inc',
                date: '2018-08-04',
                status: 'negotiation',
                verified: true,
                activity: 13,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 38294
            },
            {
                id: 1489,
                name: 'Lawrence Lorens',
                country: {
                    name: 'Egypt',
                    code: 'eg'
                },
                company: 'New England Sec Equip Co Inc',
                date: '2020-04-15',
                status: 'negotiation',
                verified: true,
                activity: 82,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 56617
            },
            {
                id: 1490,
                name: 'Carlee Boulter',
                country: {
                    name: 'Vietnam',
                    code: 'vn'
                },
                company: 'Tippett, Troy M Ii',
                date: '2016-09-22',
                status: 'renewal',
                verified: true,
                activity: 71,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 76817
            },
            {
                id: 1491,
                name: 'Thaddeus Ankeny',
                country: {
                    name: 'Qatar',
                    code: 'qa'
                },
                company: 'Atc Contracting',
                date: '2015-03-08',
                status: 'unqualified',
                verified: true,
                activity: 78,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 80787
            },
            {
                id: 1492,
                name: 'Jovita Oles',
                country: {
                    name: 'Sweden',
                    code: 'se'
                },
                company: 'Pagano, Philip G Esq',
                date: '2019-07-18',
                status: 'negotiation',
                verified: true,
                activity: 42,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 4158
            },
            {
                id: 1493,
                name: 'Alesia Hixenbaugh',
                country: {
                    name: 'Thailand',
                    code: 'th'
                },
                company: 'Kwikprint',
                date: '2017-07-24',
                status: 'negotiation',
                verified: false,
                activity: 23,
                representative: {
                    name: 'Ivan Magalhaes',
                    image: 'ivanmagalhaes.png'
                },
                balance: 66993
            },
            {
                id: 1494,
                name: 'Lai Harabedian',
                country: {
                    name: 'Serbia',
                    code: 'rs'
                },
                company: 'Buergi \u0026 Madden Scale',
                date: '2018-11-11',
                status: 'new',
                verified: true,
                activity: 28,
                representative: {
                    name: 'Asiya Javayant',
                    image: 'asiyajavayant.png'
                },
                balance: 53330
            },
            {
                id: 1495,
                name: 'Brittni Gillaspie',
                country: {
                    name: 'Senegal',
                    code: 'sn'
                },
                company: 'Inner Label',
                date: '2019-11-23',
                status: 'renewal',
                verified: true,
                activity: 14,
                representative: {
                    name: 'Ioni Bowcher',
                    image: 'ionibowcher.png'
                },
                balance: 72342
            },
            {
                id: 1496,
                name: 'Raylene Kampa',
                country: {
                    name: 'Belgium',
                    code: 'be'
                },
                company: 'Hermar Inc',
                date: '2020-04-22',
                status: 'unqualified',
                verified: true,
                activity: 65,
                representative: {
                    name: 'Stephen Shaw',
                    image: 'stephenshaw.png'
                },
                balance: 53660
            },
            {
                id: 1497,
                name: 'Flo Bookamer',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'Simonton Howe \u0026 Schneider Pc',
                date: '2020-08-10',
                status: 'unqualified',
                verified: true,
                activity: 30,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 44528
            },
            {
                id: 1498,
                name: 'Jani Biddy',
                country: {
                    name: 'Switzerland',
                    code: 'ch'
                },
                company: 'Warehouse Office \u0026 Paper Prod',
                date: '2019-11-07',
                status: 'negotiation',
                verified: false,
                activity: 20,
                representative: {
                    name: 'Onyama Limba',
                    image: 'onyamalimba.png'
                },
                balance: 69613
            },
            {
                id: 1499,
                name: 'Chauncey Motley',
                country: {
                    name: 'Argentina',
                    code: 'ar'
                },
                company: 'Affiliated With Travelodge',
                date: '2019-04-23',
                status: 'renewal',
                verified: true,
                activity: 42,
                representative: {
                    name: 'Amy Elsner',
                    image: 'amyelsner.png'
                },
                balance: 88090
            }
        ];
    }

    constructor(private http: HttpClient) {}

    getCustomersMini() {
        return Promise.resolve(this.getData().slice(0, 5));
    }

    getCustomersSmall() {
        return Promise.resolve(this.getData().slice(0, 10));
    }

    getCustomersMedium() {
        return Promise.resolve(this.getData().slice(0, 50));
    }

    getCustomersLarge() {
        return Promise.resolve(this.getData().slice(0, 200));
    }

    getCustomersXLarge() {
        return Promise.resolve(this.getData());
    }

    getCustomers(params?: any) {
        return this.http.get<any>('https://www.primefaces.org/data/customers', { params: params }).toPromise();
    }
}


================================================================================
File: product.service.ts
Relative Path: src/app/pages/service/product.service.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/app/pages/service/product.service.ts
Extension: .ts
Lines: 1323
================================================================================

import { HttpClient } from '@angular/common/http';
import { Injectable } from '@angular/core';

interface InventoryStatus {
    label: string;
    value: string;
}

export interface Product {
    id?: string;
    code?: string;
    name?: string;
    description?: string;
    price?: number;
    quantity?: number;
    inventoryStatus?: string;
    category?: string;
    image?: string;
    rating?: number;
}

@Injectable()
export class ProductService {
    getProductsData() {
        return [
            {
                id: '1000',
                code: 'f230fh0g3',
                name: 'Bamboo Watch',
                description: 'Product Description',
                image: 'bamboo-watch.jpg',
                price: 65,
                category: 'Accessories',
                quantity: 24,
                inventoryStatus: 'INSTOCK',
                rating: 5
            },
            {
                id: '1001',
                code: 'nvklal433',
                name: 'Black Watch',
                description: 'Product Description',
                image: 'black-watch.jpg',
                price: 72,
                category: 'Accessories',
                quantity: 61,
                inventoryStatus: 'INSTOCK',
                rating: 4
            },
            {
                id: '1002',
                code: 'zz21cz3c1',
                name: 'Blue Band',
                description: 'Product Description',
                image: 'blue-band.jpg',
                price: 79,
                category: 'Fitness',
                quantity: 2,
                inventoryStatus: 'LOWSTOCK',
                rating: 3
            },
            {
                id: '1003',
                code: '244wgerg2',
                name: 'Blue T-Shirt',
                description: 'Product Description',
                image: 'blue-t-shirt.jpg',
                price: 29,
                category: 'Clothing',
                quantity: 25,
                inventoryStatus: 'INSTOCK',
                rating: 5
            },
            {
                id: '1004',
                code: 'h456wer53',
                name: 'Bracelet',
                description: 'Product Description',
                image: 'bracelet.jpg',
                price: 15,
                category: 'Accessories',
                quantity: 73,
                inventoryStatus: 'INSTOCK',
                rating: 4
            },
            {
                id: '1005',
                code: 'av2231fwg',
                name: 'Brown Purse',
                description: 'Product Description',
                image: 'brown-purse.jpg',
                price: 120,
                category: 'Accessories',
                quantity: 0,
                inventoryStatus: 'OUTOFSTOCK',
                rating: 4
            },
            {
                id: '1006',
                code: 'bib36pfvm',
                name: 'Chakra Bracelet',
                description: 'Product Description',
                image: 'chakra-bracelet.jpg',
                price: 32,
                category: 'Accessories',
                quantity: 5,
                inventoryStatus: 'LOWSTOCK',
                rating: 3
            },
            {
                id: '1007',
                code: 'mbvjkgip5',
                name: 'Galaxy Earrings',
                description: 'Product Description',
                image: 'galaxy-earrings.jpg',
                price: 34,
                category: 'Accessories',
                quantity: 23,
                inventoryStatus: 'INSTOCK',
                rating: 5
            },
            {
                id: '1008',
                code: 'vbb124btr',
                name: 'Game Controller',
                description: 'Product Description',
                image: 'game-controller.jpg',
                price: 99,
                category: 'Electronics',
                quantity: 2,
                inventoryStatus: 'LOWSTOCK',
                rating: 4
            },
            {
                id: '1009',
                code: 'cm230f032',
                name: 'Gaming Set',
                description: 'Product Description',
                image: 'gaming-set.jpg',
                price: 299,
                category: 'Electronics',
                quantity: 63,
                inventoryStatus: 'INSTOCK',
                rating: 3
            },
            {
                id: '1010',
                code: 'plb34234v',
                name: 'Gold Phone Case',
                description: 'Product Description',
                image: 'gold-phone-case.jpg',
                price: 24,
                category: 'Accessories',
                quantity: 0,
                inventoryStatus: 'OUTOFSTOCK',
                rating: 4
            },
            {
                id: '1011',
                code: '4920nnc2d',
                name: 'Green Earbuds',
                description: 'Product Description',
                image: 'green-earbuds.jpg',
                price: 89,
                category: 'Electronics',
                quantity: 23,
                inventoryStatus: 'INSTOCK',
                rating: 4
            },
            {
                id: '1012',
                code: '250vm23cc',
                name: 'Green T-Shirt',
                description: 'Product Description',
                image: 'green-t-shirt.jpg',
                price: 49,
                category: 'Clothing',
                quantity: 74,
                inventoryStatus: 'INSTOCK',
                rating: 5
            },
            {
                id: '1013',
                code: 'fldsmn31b',
                name: 'Grey T-Shirt',
                description: 'Product Description',
                image: 'grey-t-shirt.jpg',
                price: 48,
                category: 'Clothing',
                quantity: 0,
                inventoryStatus: 'OUTOFSTOCK',
                rating: 3
            },
            {
                id: '1014',
                code: 'waas1x2as',
                name: 'Headphones',
                description: 'Product Description',
                image: 'headphones.jpg',
                price: 175,
                category: 'Electronics',
                quantity: 8,
                inventoryStatus: 'LOWSTOCK',
                rating: 5
            },
            {
                id: '1015',
                code: 'vb34btbg5',
                name: 'Light Green T-Shirt',
                description: 'Product Description',
                image: 'light-green-t-shirt.jpg',
                price: 49,
                category: 'Clothing',
                quantity: 34,
                inventoryStatus: 'INSTOCK',
                rating: 4
            },
            {
                id: '1016',
                code: 'k8l6j58jl',
                name: 'Lime Band',
                description: 'Product Description',
                image: 'lime-band.jpg',
                price: 79,
                category: 'Fitness',
                quantity: 12,
                inventoryStatus: 'INSTOCK',
                rating: 3
            },
            {
                id: '1017',
                code: 'v435nn85n',
                name: 'Mini Speakers',
                description: 'Product Description',
                image: 'mini-speakers.jpg',
                price: 85,
                category: 'Clothing',
                quantity: 42,
                inventoryStatus: 'INSTOCK',
                rating: 4
            },
            {
                id: '1018',
                code: '09zx9c0zc',
                name: 'Painted Phone Case',
                description: 'Product Description',
                image: 'painted-phone-case.jpg',
                price: 56,
                category: 'Accessories',
                quantity: 41,
                inventoryStatus: 'INSTOCK',
                rating: 5
            },
            {
                id: '1019',
                code: 'mnb5mb2m5',
                name: 'Pink Band',
                description: 'Product Description',
                image: 'pink-band.jpg',
                price: 79,
                category: 'Fitness',
                quantity: 63,
                inventoryStatus: 'INSTOCK',
                rating: 4
            },
            {
                id: '1020',
                code: 'r23fwf2w3',
                name: 'Pink Purse',
                description: 'Product Description',
                image: 'pink-purse.jpg',
                price: 110,
                category: 'Accessories',
                quantity: 0,
                inventoryStatus: 'OUTOFSTOCK',
                rating: 4
            },
            {
                id: '1021',
                code: 'pxpzczo23',
                name: 'Purple Band',
                description: 'Product Description',
                image: 'purple-band.jpg',
                price: 79,
                category: 'Fitness',
                quantity: 6,
                inventoryStatus: 'LOWSTOCK',
                rating: 3
            },
            {
                id: '1022',
                code: '2c42cb5cb',
                name: 'Purple Gemstone Necklace',
                description: 'Product Description',
                image: 'purple-gemstone-necklace.jpg',
                price: 45,
                category: 'Accessories',
                quantity: 62,
                inventoryStatus: 'INSTOCK',
                rating: 4
            },
            {
                id: '1023',
                code: '5k43kkk23',
                name: 'Purple T-Shirt',
                description: 'Product Description',
                image: 'purple-t-shirt.jpg',
                price: 49,
                category: 'Clothing',
                quantity: 2,
                inventoryStatus: 'LOWSTOCK',
                rating: 5
            },
            {
                id: '1024',
                code: 'lm2tny2k4',
                name: 'Shoes',
                description: 'Product Description',
                image: 'shoes.jpg',
                price: 64,
                category: 'Clothing',
                quantity: 0,
                inventoryStatus: 'INSTOCK',
                rating: 4
            },
            {
                id: '1025',
                code: 'nbm5mv45n',
                name: 'Sneakers',
                description: 'Product Description',
                image: 'sneakers.jpg',
                price: 78,
                category: 'Clothing',
                quantity: 52,
                inventoryStatus: 'INSTOCK',
                rating: 4
            },
            {
                id: '1026',
                code: 'zx23zc42c',
                name: 'Teal T-Shirt',
                description: 'Product Description',
                image: 'teal-t-shirt.jpg',
                price: 49,
                category: 'Clothing',
                quantity: 3,
                inventoryStatus: 'LOWSTOCK',
                rating: 3
            },
            {
                id: '1027',
                code: 'acvx872gc',
                name: 'Yellow Earbuds',
                description: 'Product Description',
                image: 'yellow-earbuds.jpg',
                price: 89,
                category: 'Electronics',
                quantity: 35,
                inventoryStatus: 'INSTOCK',
                rating: 3
            },
            {
                id: '1028',
                code: 'tx125ck42',
                name: 'Yoga Mat',
                description: 'Product Description',
                image: 'yoga-mat.jpg',
                price: 20,
                category: 'Fitness',
                quantity: 15,
                inventoryStatus: 'INSTOCK',
                rating: 5
            },
            {
                id: '1029',
                code: 'gwuby345v',
                name: 'Yoga Set',
                description: 'Product Description',
                image: 'yoga-set.jpg',
                price: 20,
                category: 'Fitness',
                quantity: 25,
                inventoryStatus: 'INSTOCK',
                rating: 8
            }
        ];
    }

    getProductsWithOrdersData() {
        return [
            {
                id: '1000',
                code: 'f230fh0g3',
                name: 'Bamboo Watch',
                description: 'Product Description',
                image: 'bamboo-watch.jpg',
                price: 65,
                category: 'Accessories',
                quantity: 24,
                inventoryStatus: 'INSTOCK',
                rating: 5,
                orders: [
                    {
                        id: '1000-0',
                        productCode: 'f230fh0g3',
                        date: '2020-09-13',
                        amount: 65,
                        quantity: 1,
                        customer: 'David James',
                        status: 'PENDING'
                    },
                    {
                        id: '1000-1',
                        productCode: 'f230fh0g3',
                        date: '2020-05-14',
                        amount: 130,
                        quantity: 2,
                        customer: 'Leon Rodrigues',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1000-2',
                        productCode: 'f230fh0g3',
                        date: '2019-01-04',
                        amount: 65,
                        quantity: 1,
                        customer: 'Juan Alejandro',
                        status: 'RETURNED'
                    },
                    {
                        id: '1000-3',
                        productCode: 'f230fh0g3',
                        date: '2020-09-13',
                        amount: 195,
                        quantity: 3,
                        customer: 'Claire Morrow',
                        status: 'CANCELLED'
                    }
                ]
            },
            {
                id: '1001',
                code: 'nvklal433',
                name: 'Black Watch',
                description: 'Product Description',
                image: 'black-watch.jpg',
                price: 72,
                category: 'Accessories',
                quantity: 61,
                inventoryStatus: 'INSTOCK',
                rating: 4,
                orders: [
                    {
                        id: '1001-0',
                        productCode: 'nvklal433',
                        date: '2020-05-14',
                        amount: 72,
                        quantity: 1,
                        customer: 'Maisha Jefferson',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1001-1',
                        productCode: 'nvklal433',
                        date: '2020-02-28',
                        amount: 144,
                        quantity: 2,
                        customer: 'Octavia Murillo',
                        status: 'PENDING'
                    }
                ]
            },
            {
                id: '1002',
                code: 'zz21cz3c1',
                name: 'Blue Band',
                description: 'Product Description',
                image: 'blue-band.jpg',
                price: 79,
                category: 'Fitness',
                quantity: 2,
                inventoryStatus: 'LOWSTOCK',
                rating: 3,
                orders: [
                    {
                        id: '1002-0',
                        productCode: 'zz21cz3c1',
                        date: '2020-07-05',
                        amount: 79,
                        quantity: 1,
                        customer: 'Stacey Leja',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1002-1',
                        productCode: 'zz21cz3c1',
                        date: '2020-02-06',
                        amount: 79,
                        quantity: 1,
                        customer: 'Ashley Wickens',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1003',
                code: '244wgerg2',
                name: 'Blue T-Shirt',
                description: 'Product Description',
                image: 'blue-t-shirt.jpg',
                price: 29,
                category: 'Clothing',
                quantity: 25,
                inventoryStatus: 'INSTOCK',
                rating: 5,
                orders: []
            },
            {
                id: '1004',
                code: 'h456wer53',
                name: 'Bracelet',
                description: 'Product Description',
                image: 'bracelet.jpg',
                price: 15,
                category: 'Accessories',
                quantity: 73,
                inventoryStatus: 'INSTOCK',
                rating: 4,
                orders: [
                    {
                        id: '1004-0',
                        productCode: 'h456wer53',
                        date: '2020-09-05',
                        amount: 60,
                        quantity: 4,
                        customer: 'Mayumi Misaki',
                        status: 'PENDING'
                    },
                    {
                        id: '1004-1',
                        productCode: 'h456wer53',
                        date: '2019-04-16',
                        amount: 2,
                        quantity: 30,
                        customer: 'Francesco Salvatore',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1005',
                code: 'av2231fwg',
                name: 'Brown Purse',
                description: 'Product Description',
                image: 'brown-purse.jpg',
                price: 120,
                category: 'Accessories',
                quantity: 0,
                inventoryStatus: 'OUTOFSTOCK',
                rating: 4,
                orders: [
                    {
                        id: '1005-0',
                        productCode: 'av2231fwg',
                        date: '2020-01-25',
                        amount: 120,
                        quantity: 1,
                        customer: 'Isabel Sinclair',
                        status: 'RETURNED'
                    },
                    {
                        id: '1005-1',
                        productCode: 'av2231fwg',
                        date: '2019-03-12',
                        amount: 240,
                        quantity: 2,
                        customer: 'Lionel Clifford',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1005-2',
                        productCode: 'av2231fwg',
                        date: '2019-05-05',
                        amount: 120,
                        quantity: 1,
                        customer: 'Cody Chavez',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1006',
                code: 'bib36pfvm',
                name: 'Chakra Bracelet',
                description: 'Product Description',
                image: 'chakra-bracelet.jpg',
                price: 32,
                category: 'Accessories',
                quantity: 5,
                inventoryStatus: 'LOWSTOCK',
                rating: 3,
                orders: [
                    {
                        id: '1006-0',
                        productCode: 'bib36pfvm',
                        date: '2020-02-24',
                        amount: 32,
                        quantity: 1,
                        customer: 'Arvin Darci',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1006-1',
                        productCode: 'bib36pfvm',
                        date: '2020-01-14',
                        amount: 64,
                        quantity: 2,
                        customer: 'Izzy Jones',
                        status: 'PENDING'
                    }
                ]
            },
            {
                id: '1007',
                code: 'mbvjkgip5',
                name: 'Galaxy Earrings',
                description: 'Product Description',
                image: 'galaxy-earrings.jpg',
                price: 34,
                category: 'Accessories',
                quantity: 23,
                inventoryStatus: 'INSTOCK',
                rating: 5,
                orders: [
                    {
                        id: '1007-0',
                        productCode: 'mbvjkgip5',
                        date: '2020-06-19',
                        amount: 34,
                        quantity: 1,
                        customer: 'Jennifer Smith',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1008',
                code: 'vbb124btr',
                name: 'Game Controller',
                description: 'Product Description',
                image: 'game-controller.jpg',
                price: 99,
                category: 'Electronics',
                quantity: 2,
                inventoryStatus: 'LOWSTOCK',
                rating: 4,
                orders: [
                    {
                        id: '1008-0',
                        productCode: 'vbb124btr',
                        date: '2020-01-05',
                        amount: 99,
                        quantity: 1,
                        customer: 'Jeanfrancois David',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1008-1',
                        productCode: 'vbb124btr',
                        date: '2020-01-19',
                        amount: 198,
                        quantity: 2,
                        customer: 'Ivar Greenwood',
                        status: 'RETURNED'
                    }
                ]
            },
            {
                id: '1009',
                code: 'cm230f032',
                name: 'Gaming Set',
                description: 'Product Description',
                image: 'gaming-set.jpg',
                price: 299,
                category: 'Electronics',
                quantity: 63,
                inventoryStatus: 'INSTOCK',
                rating: 3,
                orders: [
                    {
                        id: '1009-0',
                        productCode: 'cm230f032',
                        date: '2020-06-24',
                        amount: 299,
                        quantity: 1,
                        customer: 'Kadeem Mujtaba',
                        status: 'PENDING'
                    },
                    {
                        id: '1009-1',
                        productCode: 'cm230f032',
                        date: '2020-05-11',
                        amount: 299,
                        quantity: 1,
                        customer: 'Ashley Wickens',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1009-2',
                        productCode: 'cm230f032',
                        date: '2019-02-07',
                        amount: 299,
                        quantity: 1,
                        customer: 'Julie Johnson',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1009-3',
                        productCode: 'cm230f032',
                        date: '2020-04-26',
                        amount: 299,
                        quantity: 1,
                        customer: 'Tony Costa',
                        status: 'CANCELLED'
                    }
                ]
            },
            {
                id: '1010',
                code: 'plb34234v',
                name: 'Gold Phone Case',
                description: 'Product Description',
                image: 'gold-phone-case.jpg',
                price: 24,
                category: 'Accessories',
                quantity: 0,
                inventoryStatus: 'OUTOFSTOCK',
                rating: 4,
                orders: [
                    {
                        id: '1010-0',
                        productCode: 'plb34234v',
                        date: '2020-02-04',
                        amount: 24,
                        quantity: 1,
                        customer: 'James Butt',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1010-1',
                        productCode: 'plb34234v',
                        date: '2020-05-05',
                        amount: 48,
                        quantity: 2,
                        customer: 'Josephine Darakjy',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1011',
                code: '4920nnc2d',
                name: 'Green Earbuds',
                description: 'Product Description',
                image: 'green-earbuds.jpg',
                price: 89,
                category: 'Electronics',
                quantity: 23,
                inventoryStatus: 'INSTOCK',
                rating: 4,
                orders: [
                    {
                        id: '1011-0',
                        productCode: '4920nnc2d',
                        date: '2020-06-01',
                        amount: 89,
                        quantity: 1,
                        customer: 'Art Venere',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1012',
                code: '250vm23cc',
                name: 'Green T-Shirt',
                description: 'Product Description',
                image: 'green-t-shirt.jpg',
                price: 49,
                category: 'Clothing',
                quantity: 74,
                inventoryStatus: 'INSTOCK',
                rating: 5,
                orders: [
                    {
                        id: '1012-0',
                        productCode: '250vm23cc',
                        date: '2020-02-05',
                        amount: 49,
                        quantity: 1,
                        customer: 'Lenna Paprocki',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1012-1',
                        productCode: '250vm23cc',
                        date: '2020-02-15',
                        amount: 49,
                        quantity: 1,
                        customer: 'Donette Foller',
                        status: 'PENDING'
                    }
                ]
            },
            {
                id: '1013',
                code: 'fldsmn31b',
                name: 'Grey T-Shirt',
                description: 'Product Description',
                image: 'grey-t-shirt.jpg',
                price: 48,
                category: 'Clothing',
                quantity: 0,
                inventoryStatus: 'OUTOFSTOCK',
                rating: 3,
                orders: [
                    {
                        id: '1013-0',
                        productCode: 'fldsmn31b',
                        date: '2020-04-01',
                        amount: 48,
                        quantity: 1,
                        customer: 'Simona Morasca',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1014',
                code: 'waas1x2as',
                name: 'Headphones',
                description: 'Product Description',
                image: 'headphones.jpg',
                price: 175,
                category: 'Electronics',
                quantity: 8,
                inventoryStatus: 'LOWSTOCK',
                rating: 5,
                orders: [
                    {
                        id: '1014-0',
                        productCode: 'waas1x2as',
                        date: '2020-05-15',
                        amount: 175,
                        quantity: 1,
                        customer: 'Lenna Paprocki',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1014-1',
                        productCode: 'waas1x2as',
                        date: '2020-01-02',
                        amount: 175,
                        quantity: 1,
                        customer: 'Donette Foller',
                        status: 'CANCELLED'
                    }
                ]
            },
            {
                id: '1015',
                code: 'vb34btbg5',
                name: 'Light Green T-Shirt',
                description: 'Product Description',
                image: 'light-green-t-shirt.jpg',
                price: 49,
                category: 'Clothing',
                quantity: 34,
                inventoryStatus: 'INSTOCK',
                rating: 4,
                orders: [
                    {
                        id: '1015-0',
                        productCode: 'vb34btbg5',
                        date: '2020-07-02',
                        amount: 98,
                        quantity: 2,
                        customer: 'Mitsue Tollner',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1016',
                code: 'k8l6j58jl',
                name: 'Lime Band',
                description: 'Product Description',
                image: 'lime-band.jpg',
                price: 79,
                category: 'Fitness',
                quantity: 12,
                inventoryStatus: 'INSTOCK',
                rating: 3,
                orders: []
            },
            {
                id: '1017',
                code: 'v435nn85n',
                name: 'Mini Speakers',
                description: 'Product Description',
                image: 'mini-speakers.jpg',
                price: 85,
                category: 'Clothing',
                quantity: 42,
                inventoryStatus: 'INSTOCK',
                rating: 4,
                orders: [
                    {
                        id: '1017-0',
                        productCode: 'v435nn85n',
                        date: '2020-07-12',
                        amount: 85,
                        quantity: 1,
                        customer: 'Minna Amigon',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1018',
                code: '09zx9c0zc',
                name: 'Painted Phone Case',
                description: 'Product Description',
                image: 'painted-phone-case.jpg',
                price: 56,
                category: 'Accessories',
                quantity: 41,
                inventoryStatus: 'INSTOCK',
                rating: 5,
                orders: [
                    {
                        id: '1018-0',
                        productCode: '09zx9c0zc',
                        date: '2020-07-01',
                        amount: 56,
                        quantity: 1,
                        customer: 'Abel Maclead',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1018-1',
                        productCode: '09zx9c0zc',
                        date: '2020-05-02',
                        amount: 56,
                        quantity: 1,
                        customer: 'Minna Amigon',
                        status: 'RETURNED'
                    }
                ]
            },
            {
                id: '1019',
                code: 'mnb5mb2m5',
                name: 'Pink Band',
                description: 'Product Description',
                image: 'pink-band.jpg',
                price: 79,
                category: 'Fitness',
                quantity: 63,
                inventoryStatus: 'INSTOCK',
                rating: 4,
                orders: []
            },
            {
                id: '1020',
                code: 'r23fwf2w3',
                name: 'Pink Purse',
                description: 'Product Description',
                image: 'pink-purse.jpg',
                price: 110,
                category: 'Accessories',
                quantity: 0,
                inventoryStatus: 'OUTOFSTOCK',
                rating: 4,
                orders: [
                    {
                        id: '1020-0',
                        productCode: 'r23fwf2w3',
                        date: '2020-05-29',
                        amount: 110,
                        quantity: 1,
                        customer: 'Kiley Caldarera',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1020-1',
                        productCode: 'r23fwf2w3',
                        date: '2020-02-11',
                        amount: 220,
                        quantity: 2,
                        customer: 'Graciela Ruta',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1021',
                code: 'pxpzczo23',
                name: 'Purple Band',
                description: 'Product Description',
                image: 'purple-band.jpg',
                price: 79,
                category: 'Fitness',
                quantity: 6,
                inventoryStatus: 'LOWSTOCK',
                rating: 3,
                orders: [
                    {
                        id: '1021-0',
                        productCode: 'pxpzczo23',
                        date: '2020-02-02',
                        amount: 79,
                        quantity: 1,
                        customer: 'Cammy Albares',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1022',
                code: '2c42cb5cb',
                name: 'Purple Gemstone Necklace',
                description: 'Product Description',
                image: 'purple-gemstone-necklace.jpg',
                price: 45,
                category: 'Accessories',
                quantity: 62,
                inventoryStatus: 'INSTOCK',
                rating: 4,
                orders: [
                    {
                        id: '1022-0',
                        productCode: '2c42cb5cb',
                        date: '2020-06-29',
                        amount: 45,
                        quantity: 1,
                        customer: 'Mattie Poquette',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1022-1',
                        productCode: '2c42cb5cb',
                        date: '2020-02-11',
                        amount: 135,
                        quantity: 3,
                        customer: 'Meaghan Garufi',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1023',
                code: '5k43kkk23',
                name: 'Purple T-Shirt',
                description: 'Product Description',
                image: 'purple-t-shirt.jpg',
                price: 49,
                category: 'Clothing',
                quantity: 2,
                inventoryStatus: 'LOWSTOCK',
                rating: 5,
                orders: [
                    {
                        id: '1023-0',
                        productCode: '5k43kkk23',
                        date: '2020-04-15',
                        amount: 49,
                        quantity: 1,
                        customer: 'Gladys Rim',
                        status: 'RETURNED'
                    }
                ]
            },
            {
                id: '1024',
                code: 'lm2tny2k4',
                name: 'Shoes',
                description: 'Product Description',
                image: 'shoes.jpg',
                price: 64,
                category: 'Clothing',
                quantity: 0,
                inventoryStatus: 'INSTOCK',
                rating: 4,
                orders: []
            },
            {
                id: '1025',
                code: 'nbm5mv45n',
                name: 'Sneakers',
                description: 'Product Description',
                image: 'sneakers.jpg',
                price: 78,
                category: 'Clothing',
                quantity: 52,
                inventoryStatus: 'INSTOCK',
                rating: 4,
                orders: [
                    {
                        id: '1025-0',
                        productCode: 'nbm5mv45n',
                        date: '2020-02-19',
                        amount: 78,
                        quantity: 1,
                        customer: 'Yuki Whobrey',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1025-1',
                        productCode: 'nbm5mv45n',
                        date: '2020-05-21',
                        amount: 78,
                        quantity: 1,
                        customer: 'Fletcher Flosi',
                        status: 'PENDING'
                    }
                ]
            },
            {
                id: '1026',
                code: 'zx23zc42c',
                name: 'Teal T-Shirt',
                description: 'Product Description',
                image: 'teal-t-shirt.jpg',
                price: 49,
                category: 'Clothing',
                quantity: 3,
                inventoryStatus: 'LOWSTOCK',
                rating: 3,
                orders: [
                    {
                        id: '1026-0',
                        productCode: 'zx23zc42c',
                        date: '2020-04-24',
                        amount: 98,
                        quantity: 2,
                        customer: 'Bette Nicka',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1027',
                code: 'acvx872gc',
                name: 'Yellow Earbuds',
                description: 'Product Description',
                image: 'yellow-earbuds.jpg',
                price: 89,
                category: 'Electronics',
                quantity: 35,
                inventoryStatus: 'INSTOCK',
                rating: 3,
                orders: [
                    {
                        id: '1027-0',
                        productCode: 'acvx872gc',
                        date: '2020-01-29',
                        amount: 89,
                        quantity: 1,
                        customer: 'Veronika Inouye',
                        status: 'DELIVERED'
                    },
                    {
                        id: '1027-1',
                        productCode: 'acvx872gc',
                        date: '2020-06-11',
                        amount: 89,
                        quantity: 1,
                        customer: 'Willard Kolmetz',
                        status: 'DELIVERED'
                    }
                ]
            },
            {
                id: '1028',
                code: 'tx125ck42',
                name: 'Yoga Mat',
                description: 'Product Description',
                image: 'yoga-mat.jpg',
                price: 20,
                category: 'Fitness',
                quantity: 15,
                inventoryStatus: 'INSTOCK',
                rating: 5,
                orders: []
            },
            {
                id: '1029',
                code: 'gwuby345v',
                name: 'Yoga Set',
                description: 'Product Description',
                image: 'yoga-set.jpg',
                price: 20,
                category: 'Fitness',
                quantity: 25,
                inventoryStatus: 'INSTOCK',
                rating: 8,
                orders: [
                    {
                        id: '1029-0',
                        productCode: 'gwuby345v',
                        date: '2020-02-14',
                        amount: 4,
                        quantity: 80,
                        customer: 'Maryann Royster',
                        status: 'DELIVERED'
                    }
                ]
            }
        ];
    }

    status: string[] = ['OUTOFSTOCK', 'INSTOCK', 'LOWSTOCK'];

    productNames: string[] = [
        'Bamboo Watch',
        'Black Watch',
        'Blue Band',
        'Blue T-Shirt',
        'Bracelet',
        'Brown Purse',
        'Chakra Bracelet',
        'Galaxy Earrings',
        'Game Controller',
        'Gaming Set',
        'Gold Phone Case',
        'Green Earbuds',
        'Green T-Shirt',
        'Grey T-Shirt',
        'Headphones',
        'Light Green T-Shirt',
        'Lime Band',
        'Mini Speakers',
        'Painted Phone Case',
        'Pink Band',
        'Pink Purse',
        'Purple Band',
        'Purple Gemstone Necklace',
        'Purple T-Shirt',
        'Shoes',
        'Sneakers',
        'Teal T-Shirt',
        'Yellow Earbuds',
        'Yoga Mat',
        'Yoga Set'
    ];

    constructor(private http: HttpClient) {}

    getProductsMini() {
        return Promise.resolve(this.getProductsData().slice(0, 5));
    }

    getProductsSmall() {
        return Promise.resolve(this.getProductsData().slice(0, 10));
    }

    getProducts() {
        return Promise.resolve(this.getProductsData());
    }

    getProductsWithOrdersSmall() {
        return Promise.resolve(this.getProductsWithOrdersData().slice(0, 10));
    }

    generatePrduct(): Product {
        const product: Product = {
            id: this.generateId(),
            name: this.generateName(),
            description: 'Product Description',
            price: this.generatePrice(),
            quantity: this.generateQuantity(),
            category: 'Product Category',
            inventoryStatus: this.generateStatus(),
            rating: this.generateRating()
        };

        product.image = product.name?.toLocaleLowerCase().split(/[ ,]+/).join('-') + '.jpg';
        return product;
    }

    generateId() {
        let text = '';
        let possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

        for (var i = 0; i < 5; i++) {
            text += possible.charAt(Math.floor(Math.random() * possible.length));
        }

        return text;
    }

    generateName() {
        return this.productNames[Math.floor(Math.random() * Math.floor(30))];
    }

    generatePrice() {
        return Math.floor(Math.random() * Math.floor(299) + 1);
    }

    generateQuantity() {
        return Math.floor(Math.random() * Math.floor(75) + 1);
    }

    generateStatus() {
        return this.status[Math.floor(Math.random() * Math.floor(3))];
    }

    generateRating() {
        return Math.floor(Math.random() * Math.floor(5) + 1);
    }
}


================================================================================
File: environment.ts
Relative Path: src/environments/environment.ts
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/environments/environment.ts
Extension: .ts
Lines: 6
================================================================================

export const environment = {
  production: false,
  USE_MOCK: true,        // 👉 bật mock khi chưa có backend
  apiUrl: ''             // khi có API: ví dụ '/api'
};


================================================================================
File: tailwind.css
Relative Path: src/assets/tailwind.css
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/tailwind.css
Extension: .css
Lines: 11
================================================================================

@import 'tailwindcss';
@import 'tailwindcss-primeui';
@custom-variant dark (&:where(.app-dark, .app-dark *));

@theme {
    --breakpoint-sm: 576px;
    --breakpoint-md: 768px;
    --breakpoint-lg: 992px;
    --breakpoint-xl: 1200px;
    --breakpoint-2xl: 1920px;
}

================================================================================
File: styles.scss
Relative Path: src/assets/styles.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/styles.scss
Extension: .scss
Lines: 15
================================================================================

/* You can add global styles to this file, and also import other style files */
@use './tailwind.css';
@use './layout/layout.scss';
@use 'primeicons/primeicons.css';
@use './demo/demo.scss';

/* Global font settings */
html, body, app-root {
  font-family: Helvetica, 'Roboto', Tahoma, 'Segoe UI', Arial, sans-serif !important;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

@import "prismjs/themes/prism.css";

================================================================================
File: demo.scss
Relative Path: src/assets/demo/demo.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/demo/demo.scss
Extension: .scss
Lines: 3
================================================================================

@use './code.scss';
@use './flags/flags';


================================================================================
File: code.scss
Relative Path: src/assets/demo/code.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/demo/code.scss
Extension: .scss
Lines: 18
================================================================================

pre.app-code {
    background-color: var(--code-background);
    margin: 0 0 1rem 0;
    padding: 0;
    border-radius: var(--content-border-radius);
    overflow: auto;

    code {
        color: var(--code-color);
        padding: 1rem;
        margin: 0;
        line-height: 1.5;
        display: block;
        font-weight: semibold;
        font-family: monaco, Consolas, monospace;
    }
}


================================================================================
File: flags.scss
Relative Path: src/assets/demo/flags/flags.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/demo/flags/flags.scss
Extension: .scss
Lines: 2
================================================================================

span.flag{width:44px;height:30px;display:inline-block;}img.flag{width:30px}.flag{background:url(./flags_responsive.png) no-repeat;background-size:100%;vertical-align: middle;}.flag-ad{background-position:0 .413223%}.flag-ae{background-position:0 .826446%}.flag-af{background-position:0 1.239669%}.flag-ag{background-position:0 1.652893%}.flag-ai{background-position:0 2.066116%}.flag-al{background-position:0 2.479339%}.flag-am{background-position:0 2.892562%}.flag-an{background-position:0 3.305785%}.flag-ao{background-position:0 3.719008%}.flag-aq{background-position:0 4.132231%}.flag-ar{background-position:0 4.545455%}.flag-as{background-position:0 4.958678%}.flag-at{background-position:0 5.371901%}.flag-au{background-position:0 5.785124%}.flag-aw{background-position:0 6.198347%}.flag-az{background-position:0 6.61157%}.flag-ba{background-position:0 7.024793%}.flag-bb{background-position:0 7.438017%}.flag-bd{background-position:0 7.85124%}.flag-be{background-position:0 8.264463%}.flag-bf{background-position:0 8.677686%}.flag-bg{background-position:0 9.090909%}.flag-bh{background-position:0 9.504132%}.flag-bi{background-position:0 9.917355%}.flag-bj{background-position:0 10.330579%}.flag-bm{background-position:0 10.743802%}.flag-bn{background-position:0 11.157025%}.flag-bo{background-position:0 11.570248%}.flag-br{background-position:0 11.983471%}.flag-bs{background-position:0 12.396694%}.flag-bt{background-position:0 12.809917%}.flag-bv{background-position:0 13.22314%}.flag-bw{background-position:0 13.636364%}.flag-by{background-position:0 14.049587%}.flag-bz{background-position:0 14.46281%}.flag-ca{background-position:0 14.876033%}.flag-cc{background-position:0 15.289256%}.flag-cd{background-position:0 15.702479%}.flag-cf{background-position:0 16.115702%}.flag-cg{background-position:0 16.528926%}.flag-ch{background-position:0 16.942149%}.flag-ci{background-position:0 17.355372%}.flag-ck{background-position:0 17.768595%}.flag-cl{background-position:0 18.181818%}.flag-cm{background-position:0 18.595041%}.flag-cn{background-position:0 19.008264%}.flag-co{background-position:0 19.421488%}.flag-cr{background-position:0 19.834711%}.flag-cu{background-position:0 20.247934%}.flag-cv{background-position:0 20.661157%}.flag-cx{background-position:0 21.07438%}.flag-cy{background-position:0 21.487603%}.flag-cz{background-position:0 21.900826%}.flag-de{background-position:0 22.31405%}.flag-dj{background-position:0 22.727273%}.flag-dk{background-position:0 23.140496%}.flag-dm{background-position:0 23.553719%}.flag-do{background-position:0 23.966942%}.flag-dz{background-position:0 24.380165%}.flag-ec{background-position:0 24.793388%}.flag-ee{background-position:0 25.206612%}.flag-eg{background-position:0 25.619835%}.flag-eh{background-position:0 26.033058%}.flag-er{background-position:0 26.446281%}.flag-es{background-position:0 26.859504%}.flag-et{background-position:0 27.272727%}.flag-fi{background-position:0 27.68595%}.flag-fj{background-position:0 28.099174%}.flag-fk{background-position:0 28.512397%}.flag-fm{background-position:0 28.92562%}.flag-fo{background-position:0 29.338843%}.flag-fr{background-position:0 29.752066%}.flag-ga{background-position:0 30.165289%}.flag-gd{background-position:0 30.578512%}.flag-ge{background-position:0 30.991736%}.flag-gf{background-position:0 31.404959%}.flag-gh{background-position:0 31.818182%}.flag-gi{background-position:0 32.231405%}.flag-gl{background-position:0 32.644628%}.flag-gm{background-position:0 33.057851%}.flag-gn{background-position:0 33.471074%}.flag-gp{background-position:0 33.884298%}.flag-gq{background-position:0 34.297521%}.flag-gr{background-position:0 34.710744%}.flag-gs{background-position:0 35.123967%}.flag-gt{background-position:0 35.53719%}.flag-gu{background-position:0 35.950413%}.flag-gw{background-position:0 36.363636%}.flag-gy{background-position:0 36.77686%}.flag-hk{background-position:0 37.190083%}.flag-hm{background-position:0 37.603306%}.flag-hn{background-position:0 38.016529%}.flag-hr{background-position:0 38.429752%}.flag-ht{background-position:0 38.842975%}.flag-hu{background-position:0 39.256198%}.flag-id{background-position:0 39.669421%}.flag-ie{background-position:0 40.082645%}.flag-il{background-position:0 40.495868%}.flag-in{background-position:0 40.909091%}.flag-io{background-position:0 41.322314%}.flag-iq{background-position:0 41.735537%}.flag-ir{background-position:0 42.14876%}.flag-is{background-position:0 42.561983%}.flag-it{background-position:0 42.975207%}.flag-jm{background-position:0 43.38843%}.flag-jo{background-position:0 43.801653%}.flag-jp{background-position:0 44.214876%}.flag-ke{background-position:0 44.628099%}.flag-kg{background-position:0 45.041322%}.flag-kh{background-position:0 45.454545%}.flag-ki{background-position:0 45.867769%}.flag-km{background-position:0 46.280992%}.flag-kn{background-position:0 46.694215%}.flag-kp{background-position:0 47.107438%}.flag-kr{background-position:0 47.520661%}.flag-kw{background-position:0 47.933884%}.flag-ky{background-position:0 48.347107%}.flag-kz{background-position:0 48.760331%}.flag-la{background-position:0 49.173554%}.flag-lb{background-position:0 49.586777%}.flag-lc{background-position:0 50%}.flag-li{background-position:0 50.413223%}.flag-lk{background-position:0 50.826446%}.flag-lr{background-position:0 51.239669%}.flag-ls{background-position:0 51.652893%}.flag-lt{background-position:0 52.066116%}.flag-lu{background-position:0 52.479339%}.flag-lv{background-position:0 52.892562%}.flag-ly{background-position:0 53.305785%}.flag-ma{background-position:0 53.719008%}.flag-mc{background-position:0 54.132231%}.flag-md{background-position:0 54.545455%}.flag-me{background-position:0 54.958678%}.flag-mg{background-position:0 55.371901%}.flag-mh{background-position:0 55.785124%}.flag-mk{background-position:0 56.198347%}.flag-ml{background-position:0 56.61157%}.flag-mm{background-position:0 57.024793%}.flag-mn{background-position:0 57.438017%}.flag-mo{background-position:0 57.85124%}.flag-mp{background-position:0 58.264463%}.flag-mq{background-position:0 58.677686%}.flag-mr{background-position:0 59.090909%}.flag-ms{background-position:0 59.504132%}.flag-mt{background-position:0 59.917355%}.flag-mu{background-position:0 60.330579%}.flag-mv{background-position:0 60.743802%}.flag-mw{background-position:0 61.157025%}.flag-mx{background-position:0 61.570248%}.flag-my{background-position:0 61.983471%}.flag-mz{background-position:0 62.396694%}.flag-na{background-position:0 62.809917%}.flag-nc{background-position:0 63.22314%}.flag-ne{background-position:0 63.636364%}.flag-nf{background-position:0 64.049587%}.flag-ng{background-position:0 64.46281%}.flag-ni{background-position:0 64.876033%}.flag-nl{background-position:0 65.289256%}.flag-no{background-position:0 65.702479%}.flag-np{background-position:0 66.115702%}.flag-nr{background-position:0 66.528926%}.flag-nu{background-position:0 66.942149%}.flag-nz{background-position:0 67.355372%}.flag-om{background-position:0 67.768595%}.flag-pa{background-position:0 68.181818%}.flag-pe{background-position:0 68.595041%}.flag-pf{background-position:0 69.008264%}.flag-pg{background-position:0 69.421488%}.flag-ph{background-position:0 69.834711%}.flag-pk{background-position:0 70.247934%}.flag-pl{background-position:0 70.661157%}.flag-pm{background-position:0 71.07438%}.flag-pn{background-position:0 71.487603%}.flag-pr{background-position:0 71.900826%}.flag-pt{background-position:0 72.31405%}.flag-pw{background-position:0 72.727273%}.flag-py{background-position:0 73.140496%}.flag-qa{background-position:0 73.553719%}.flag-re{background-position:0 73.966942%}.flag-ro{background-position:0 74.380165%}.flag-rs{background-position:0 74.793388%}.flag-ru{background-position:0 75.206612%}.flag-rw{background-position:0 75.619835%}.flag-sa{background-position:0 76.033058%}.flag-sb{background-position:0 76.446281%}.flag-sc{background-position:0 76.859504%}.flag-sd{background-position:0 77.272727%}.flag-se{background-position:0 77.68595%}.flag-sg{background-position:0 78.099174%}.flag-sh{background-position:0 78.512397%}.flag-si{background-position:0 78.92562%}.flag-sj{background-position:0 79.338843%}.flag-sk{background-position:0 79.752066%}.flag-sl{background-position:0 80.165289%}.flag-sm{background-position:0 80.578512%}.flag-sn{background-position:0 80.991736%}.flag-so{background-position:0 81.404959%}.flag-sr{background-position:0 81.818182%}.flag-ss{background-position:0 82.231405%}.flag-st{background-position:0 82.644628%}.flag-sv{background-position:0 83.057851%}.flag-sy{background-position:0 83.471074%}.flag-sz{background-position:0 83.884298%}.flag-tc{background-position:0 84.297521%}.flag-td{background-position:0 84.710744%}.flag-tf{background-position:0 85.123967%}.flag-tg{background-position:0 85.53719%}.flag-th{background-position:0 85.950413%}.flag-tj{background-position:0 86.363636%}.flag-tk{background-position:0 86.77686%}.flag-tl{background-position:0 87.190083%}.flag-tm{background-position:0 87.603306%}.flag-tn{background-position:0 88.016529%}.flag-to{background-position:0 88.429752%}.flag-tp{background-position:0 88.842975%}.flag-tr{background-position:0 89.256198%}.flag-tt{background-position:0 89.669421%}.flag-tv{background-position:0 90.082645%}.flag-tw{background-position:0 90.495868%}.flag-ty{background-position:0 90.909091%}.flag-tz{background-position:0 91.322314%}.flag-ua{background-position:0 91.735537%}.flag-ug{background-position:0 92.14876%}.flag-gb,.flag-uk{background-position:0 92.561983%}.flag-um{background-position:0 92.975207%}.flag-us{background-position:0 93.38843%}.flag-uy{background-position:0 93.801653%}.flag-uz{background-position:0 94.214876%}.flag-va{background-position:0 94.628099%}.flag-vc{background-position:0 95.041322%}.flag-ve{background-position:0 95.454545%}.flag-vg{background-position:0 95.867769%}.flag-vi{background-position:0 96.280992%}.flag-vn{background-position:0 96.694215%}.flag-vu{background-position:0 97.107438%}.flag-wf{background-position:0 97.520661%}.flag-ws{background-position:0 97.933884%}.flag-ye{background-position:0 98.347107%}.flag-za{background-position:0 98.760331%}.flag-zm{background-position:0 99.173554%}.flag-zr{background-position:0 99.586777%}.flag-zw{background-position:0 100%}


================================================================================
File: _typography.scss
Relative Path: src/assets/layout/_typography.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/_typography.scss
Extension: .scss
Lines: 69
================================================================================

h1,
h2,
h3,
h4,
h5,
h6 {
    margin: 1.5rem 0 1rem 0;
    font-family: inherit;
    font-weight: 700;
    line-height: 1.5;
    color: var(--text-color);

    &:first-child {
        margin-top: 0;
    }
}

h1 {
    font-size: 2.5rem;
}

h2 {
    font-size: 2rem;
}

h3 {
    font-size: 1.75rem;
}

h4 {
    font-size: 1.5rem;
}

h5 {
    font-size: 1.25rem;
}

h6 {
    font-size: 1rem;
}

mark {
    background: #fff8e1;
    padding: 0.25rem 0.4rem;
    border-radius: var(--content-border-radius);
    font-family: monospace;
}

blockquote {
    margin: 1rem 0;
    padding: 0 2rem;
    border-left: 4px solid #90a4ae;
}

hr {
    border-top: solid var(--surface-border);
    border-width: 1px 0 0 0;
    margin: 1rem 0;
}

p {
    margin: 0 0 1rem 0;
    line-height: 1.5;

    &:last-child {
        margin-bottom: 0;
    }
}


================================================================================
File: _preloading.scss
Relative Path: src/assets/layout/_preloading.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/_preloading.scss
Extension: .scss
Lines: 48
================================================================================

.preloader {
    position: fixed;
    z-index: 999999;
    background: #edf1f5;
    width: 100%;
    height: 100%;
}
.preloader-content {
    border: 0 solid transparent;
    border-radius: 50%;
    width: 150px;
    height: 150px;
    position: absolute;
    top: calc(50vh - 75px);
    left: calc(50vw - 75px);
}

.preloader-content:before, .preloader-content:after{
    content: '';
    border: 1em solid var(--primary-color);
    border-radius: 50%;
    width: inherit;
    height: inherit;
    position: absolute;
    top: 0;
    left: 0;
    animation: loader 2s linear infinite;
    opacity: 0;
}

.preloader-content:before{
    animation-delay: 0.5s;
}

@keyframes loader{
    0%{
        transform: scale(0);
        opacity: 0;
    }
    50%{
        opacity: 1;
    }
    100%{
        transform: scale(1);
        opacity: 0;
    }
}


================================================================================
File: _utils.scss
Relative Path: src/assets/layout/_utils.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/_utils.scss
Extension: .scss
Lines: 26
================================================================================

/* Utils */
.clearfix:after {
    content: ' ';
    display: block;
    clear: both;
}

.card {
    background: var(--surface-card);
    padding: 2rem;
    margin-bottom: 2rem;
    border-radius: var(--content-border-radius);

    &:last-child {
        margin-bottom: 0;
    }
}

.p-toast {
    &.p-toast-top-right,
    &.p-toast-top-left,
    &.p-toast-top-center {
        top: 100px;
    }
}


================================================================================
File: _responsive.scss
Relative Path: src/assets/layout/_responsive.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/_responsive.scss
Extension: .scss
Lines: 112
================================================================================

@media screen and (min-width: 1960px) {
    .layout-main,
    .landing-wrapper {
        width: 1504px;
        margin-left: auto !important;
        margin-right: auto !important;
    }
}

@media (min-width: 992px) {
    .layout-wrapper {
        &.layout-overlay {
            .layout-main-container {
                margin-left: 0;
                padding-left: 2rem;
            }

            .layout-sidebar {
                transform: translateX(-100%);
                left: 0;
                top: 0;
                height: 100vh;
                border-top-left-radius: 0;
                border-bottom-left-radius: 0;
                border-right: 1px solid var(--surface-border);
                transition:
                    transform 0.4s cubic-bezier(0.05, 0.74, 0.2, 0.99),
                    left 0.4s cubic-bezier(0.05, 0.74, 0.2, 0.99);
                box-shadow:
                    0px 3px 5px rgba(0, 0, 0, 0.02),
                    0px 0px 2px rgba(0, 0, 0, 0.05),
                    0px 1px 4px rgba(0, 0, 0, 0.08);
            }

            &.layout-overlay-active {
                .layout-sidebar {
                    transform: translateX(0);
                }
            }
        }

        &.layout-static {
            .layout-main-container {
                margin-left: 22rem;
            }

            &.layout-static-inactive {
                .layout-sidebar {
                    transform: translateX(-100%);
                    left: 0;
                }

                .layout-main-container {
                    margin-left: 0;
                    padding-left: 2rem;
                }
            }
        }

        .layout-mask {
            display: none;
        }
    }
}

@media (max-width: 991px) {
    .blocked-scroll {
        overflow: hidden;
    }

    .layout-wrapper {
        .layout-main-container {
            margin-left: 0;
            padding-left: 2rem;
        }

        .layout-sidebar {
            transform: translateX(-100%);
            left: 0;
            top: 0;
            height: 100vh;
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            transition:
                transform 0.4s cubic-bezier(0.05, 0.74, 0.2, 0.99),
                left 0.4s cubic-bezier(0.05, 0.74, 0.2, 0.99);
        }

        .layout-mask {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 998;
            width: 100%;
            height: 100%;
            background-color: var(--maskbg);
        }

        &.layout-mobile-active {
            .layout-sidebar {
                transform: translateX(0);
            }

            .layout-mask {
                display: block;
            }
        }
    }
}



================================================================================
File: _main.scss
Relative Path: src/assets/layout/_main.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/_main.scss
Extension: .scss
Lines: 17
================================================================================

.layout-main-container {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    justify-content: space-between;
    padding: 6rem 2rem 0 2rem;
    transition: margin-left var(--layout-section-transition-duration);
}

.layout-main {
    flex: 1 1 auto;
    padding-bottom: 2rem;
}

img {
    max-width: none !important;
}

================================================================================
File: layout.scss
Relative Path: src/assets/layout/layout.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/layout.scss
Extension: .scss
Lines: 14
================================================================================

@use './variables/_common';
@use './variables/_light';
@use './variables/_dark';
@use './_mixins';
@use './_preloading';
@use './_core';
@use './_main';
@use './_topbar';
@use './_menu';
@use './_footer';
@use './_responsive';
@use './_utils';
@use './_typography';


================================================================================
File: _menu.scss
Relative Path: src/assets/layout/_menu.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/_menu.scss
Extension: .scss
Lines: 164
================================================================================

@use 'mixins' as *;

.layout-sidebar {
    position: fixed;
    width: 20rem;
    height: calc(100vh - 8rem);
    z-index: 999;
    overflow-y: auto;
    user-select: none;
    top: 6rem;
    left: 2rem;
    transition:
        transform var(--layout-section-transition-duration),
        left var(--layout-section-transition-duration);
    background-color: var(--surface-overlay);
    border-radius: var(--content-border-radius);
    padding: 0.5rem 1.5rem;
}

.layout-menu {
    margin: 0;
    padding: 0;
    list-style-type: none;

    .layout-root-menuitem {
        > .layout-menuitem-root-text {
            font-size: 0.857rem;
            text-transform: uppercase;
            font-weight: 700;
            color: var(--text-color);
            margin: 0.75rem 0;
        }

        > a {
            display: none;
        }
    }

    a {
        user-select: none;

        &.active-menuitem {
            > .layout-submenu-toggler {
                transform: rotate(-180deg);
            }
        }
    }

    li.active-menuitem {
        > a {
            .layout-submenu-toggler {
                transform: rotate(-180deg);
            }
        }
    }

    ul {
        margin: 0;
        padding: 0;
        list-style-type: none;

        a {
            display: flex;
            align-items: center;
            position: relative;
            outline: 0 none;
            color: var(--text-color);
            cursor: pointer;
            padding: 0.75rem 1rem;
            border-radius: var(--content-border-radius);
            transition:
                background-color var(--element-transition-duration),
                box-shadow var(--element-transition-duration),
                transform 0.2s ease-out; // Hiệu ứng chuyển động mượt mà

            .layout-menuitem-icon {
                margin-right: 0.5rem;
            }

            .layout-submenu-toggler {
                font-size: 75%;
                margin-left: auto;
                transition: transform var(--element-transition-duration);
            }

            &.active-route {
                font-weight: 700;
                color: var(--primary-color);
            }

            &:hover {
                background-color: var(--surface-hover);
                transform: translateY(-2px); // Di chuyển button lên trên 2px
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); // Tạo bóng đổ để có cảm giác 3D
                color: var(--primary-color); // Làm nổi bật màu chữ
            }

            &:focus {
                @include focused-inset();
            }
        }

        ul {
            overflow: hidden;
            border-radius: var(--content-border-radius);

            li {
                a {
                    margin-left: 1rem;
                }

                li {
                    a {
                        margin-left: 2rem;
                    }

                    li {
                        a {
                            margin-left: 2.5rem;
                        }

                        li {
                            a {
                                margin-left: 3rem;
                            }

                            li {
                                a {
                                    margin-left: 3.5rem;
                                }

                                li {
                                    a {
                                        margin-left: 4rem;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

.layout-submenu-enter-from,
.layout-submenu-leave-to {
    max-height: 0;
}

.layout-submenu-enter-to,
.layout-submenu-leave-from {
    max-height: 1000px;
}

.layout-submenu-leave-active {
    overflow: hidden;
    transition: max-height 0.45s cubic-bezier(0, 1, 0, 1);
}

.layout-submenu-enter-active {
    overflow: hidden;
    transition: max-height 1s ease-in-out;
}

================================================================================
File: _core.scss
Relative Path: src/assets/layout/_core.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/_core.scss
Extension: .scss
Lines: 25
================================================================================

html {
    height: 100%;
    font-size: 14px;
}

body {
    font-family: 'Lato', sans-serif;
    color: var(--text-color);
    background-color: var(--surface-ground);
    margin: 0;
    padding: 0;
    min-height: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.2;
}

a {
    text-decoration: none;
}

.layout-wrapper {
    min-height: 100vh;
}


================================================================================
File: _mixins.scss
Relative Path: src/assets/layout/_mixins.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/_mixins.scss
Extension: .scss
Lines: 16
================================================================================

@mixin focused() {
    outline-width: var(--focus-ring-width);
    outline-style: var(--focus-ring-style);
    outline-color: var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
    box-shadow: var(--focus-ring-shadow);
    transition:
        box-shadow var(--transition-duration),
        outline-color var(--transition-duration);
}

@mixin focused-inset() {
    outline-offset: -1px;
    box-shadow: inset var(--focus-ring-shadow);
}


================================================================================
File: _footer.scss
Relative Path: src/assets/layout/_footer.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/_footer.scss
Extension: .scss
Lines: 9
================================================================================

.layout-footer {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem 0 1rem 0;
    gap: 0.5rem;
    border-top: 1px solid var(--surface-border);
}


================================================================================
File: _topbar.scss
Relative Path: src/assets/layout/_topbar.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/_topbar.scss
Extension: .scss
Lines: 161
================================================================================

@use 'mixins' as *;

.layout-topbar {
    position: fixed;
    height: 4rem;
    z-index: 997;
    left: 0;
    top: 0;
    width: 100%;
    padding: 0 2rem;
    background-color: var(--topbar-background-color);
    transition: left var(--layout-section-transition-duration);
    display: flex;
    align-items: center;

    .layout-topbar-logo-container {
        width: 20rem;
        display: flex;
        align-items: center;
    }

    .layout-topbar-logo {
        display: inline-flex;
        align-items: center;
        font-size: 1.5rem;
        border-radius: var(--content-border-radius);
        color: var(--text-color);
        font-weight: 500;
        gap: 0.5rem;

        svg {
            width: 3rem;
        }

        &:focus-visible {
            @include focused();
        }
    }

    .layout-topbar-action {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        color: var(--text-color-secondary);
        border-radius: 50%;
        width: 2.5rem;
        height: 2.5rem;
        color: var(--text-color);
        transition: background-color var(--element-transition-duration);
        cursor: pointer;

        &:hover {
            background-color: var(--surface-hover);
        }

        &:focus-visible {
            @include focused();
        }

        i {
            font-size: 1.25rem;
        }

        span {
            font-size: 1rem;
            display: none;
        }

        &.layout-topbar-action-highlight {
            background-color: var(--primary-color);
            color: var(--primary-contrast-color);
        }
    }

    .layout-menu-button {
        margin-right: 0.5rem;
    }

    .layout-topbar-menu-button {
        display: none;
    }

    .layout-topbar-actions {
        margin-left: auto;
        display: flex;
        gap: 1rem;
    }

    .layout-topbar-menu-content {
        display: flex;
        gap: 1rem;
    }

    .layout-config-menu {
        display: flex;
        gap: 1rem;
    }
}

@media (max-width: 991px) {
    .layout-topbar {
        padding: 0 2rem;

        .layout-topbar-logo-container {
            width: auto;
        }

        .layout-menu-button {
            margin-left: 0;
            margin-right: 0.5rem;
        }

        .layout-topbar-menu-button {
            display: inline-flex;
        }

        .layout-topbar-menu {
            position: absolute;
            background-color: var(--surface-overlay);
            transform-origin: top;
            box-shadow:
                0px 3px 5px rgba(0, 0, 0, 0.02),
                0px 0px 2px rgba(0, 0, 0, 0.05),
                0px 1px 4px rgba(0, 0, 0, 0.08);
            border-radius: var(--content-border-radius);
            padding: 1rem;
            right: 2rem;
            top: 4rem;
            min-width: 15rem;
            border: 1px solid var(--surface-border);

            .layout-topbar-menu-content {
                gap: 0.5rem;
            }

            .layout-topbar-action {
                display: flex;
                width: 100%;
                height: auto;
                justify-content: flex-start;
                border-radius: var(--content-border-radius);
                padding: 0.5rem 1rem;

                i {
                    font-size: 1rem;
                    margin-right: 0.5rem;
                }

                span {
                    font-weight: medium;
                    display: block;
                }
            }
        }

        .layout-topbar-menu-content {
            flex-direction: column;
        }
    }
}


================================================================================
File: _light.scss
Relative Path: src/assets/layout/variables/_light.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/variables/_light.scss
Extension: .scss
Lines: 7
================================================================================

:root {
    --surface-ground: var(--p-surface-100);
    --code-background: var(--p-surface-900);
    --code-color: var(--p-surface-200);
    --topbar-background-color: #ffffff; /* Màu trắng cho Light Mode */
}


================================================================================
File: _common.scss
Relative Path: src/assets/layout/variables/_common.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/variables/_common.scss
Extension: .scss
Lines: 21
================================================================================

:root {
    --primary-color: var(--p-primary-color);
    --primary-contrast-color: var(--p-primary-contrast-color);
    --text-color: var(--p-text-color);
    --text-color-secondary: var(--p-text-muted-color);
    --surface-border: var(--p-content-border-color);
    --surface-card: var(--p-content-background);
    --surface-hover: var(--p-content-hover-background);
    --surface-overlay: var(--p-overlay-popover-background);
    --transition-duration: var(--p-transition-duration);
    --maskbg: var(--p-mask-background);
    --content-border-radius: var(--p-content-border-radius);
    --layout-section-transition-duration: 0.2s;
    --element-transition-duration: var(--p-transition-duration);
    --focus-ring-width: var(--p-focus-ring-width);
    --focus-ring-style: var(--p-focus-ring-style);
    --focus-ring-color: var(--p-focus-ring-color);
    --focus-ring-offset: var(--p-focus-ring-offset);
    --focus-ring-shadow: var(--p-focus-ring-shadow);
}


================================================================================
File: _dark.scss
Relative Path: src/assets/layout/variables/_dark.scss
Full Path: /Users/quanghuy/Documents/GITHUB/KHCNDMST/sakai-ng-master/src/assets/layout/variables/_dark.scss
Extension: .scss
Lines: 7
================================================================================

:root[class*='app-dark'] {
    --surface-ground: var(--p-surface-950);
    --code-background: var(--p-surface-800);
    --code-color: var(--p-surface-100);
    --topbar-background-color: #dcdcdc; /* Màu xám đậm cho Dark Mode */
}
